<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>RFSCMSAPIDocumentation: server_status.php Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">RFSCMSAPIDocumentation
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('server__status_8php.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">server_status.php</div>  </div>
</div><!--header-->
<div class="contents">
<a href="server__status_8php.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php
<a name="l00002"></a>00002 <span class="comment">/* vim: set expandtab sw=4 ts=4 sts=4: */</span><span class="comment"></span>
<a name="l00003"></a>00003 <span class="comment">/**</span>
<a name="l00004"></a>00004 <span class="comment"> * displays status variables with descriptions and some hints an optmizing</span>
<a name="l00005"></a>00005 <span class="comment"> *  + reset status variables</span>
<a name="l00006"></a>00006 <span class="comment"> *</span>
<a name="l00007"></a>00007 <span class="comment"> * @package PhpMyAdmin</span>
<a name="l00008"></a>00008 <span class="comment"> */</span>
<a name="l00009"></a>00009 <span class="comment"></span>
<a name="l00010"></a>00010 <span class="comment">/**</span>
<a name="l00011"></a>00011 <span class="comment"> * no need for variables importing</span>
<a name="l00012"></a>00012 <span class="comment"> * @ignore</span>
<a name="l00013"></a>00013 <span class="comment"> */</span>
<a name="l00014"></a>00014 <span class="keywordflow">if</span> (! defined(<span class="stringliteral">&#39;PMA_NO_VARIABLES_IMPORT&#39;</span>)) {
<a name="l00015"></a>00015     define(<span class="stringliteral">&#39;PMA_NO_VARIABLES_IMPORT&#39;</span>, <span class="keyword">true</span>);
<a name="l00016"></a>00016 }
<a name="l00017"></a>00017 
<a name="l00018"></a><a class="code" href="server__status_8php.html#a0822d575accb97c95db8638e4b07f0a0">00018</a> <span class="keywordflow">if</span> (isset(<a class="code" href="libraries_2common_8inc_8php.html#a1697cbb709132a827a24cf16714b73ab" title="avoid problems in phpmyadmin.css.php in some cases  string $js_frame">$_REQUEST</a>[<span class="stringliteral">&#39;ajax_request&#39;</span>]) &amp;&amp; <a class="code" href="libraries_2common_8inc_8php.html#a1697cbb709132a827a24cf16714b73ab" title="avoid problems in phpmyadmin.css.php in some cases  string $js_frame">$_REQUEST</a>[<span class="stringliteral">&#39;ajax_request&#39;</span>] == <span class="keyword">true</span>) {
<a name="l00019"></a>00019     <a class="code" href="config_2config_8php.html#aad108a6abffdea835bc6cc2f3244751e">$GLOBALS</a>[<span class="stringliteral">&#39;is_header_sent&#39;</span>] = <span class="keyword">true</span>;
<a name="l00020"></a>00020 }
<a name="l00021"></a>00021 
<a name="l00022"></a>00022 require_once <span class="stringliteral">&#39;./libraries/common.inc.php&#39;</span>;
<a name="l00023"></a>00023 <span class="comment"></span>
<a name="l00024"></a>00024 <span class="comment">/**</span>
<a name="l00025"></a>00025 <span class="comment"> * Ajax request</span>
<a name="l00026"></a>00026 <span class="comment"> */</span>
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 <span class="keywordflow">if</span> (isset(<a class="code" href="libraries_2common_8inc_8php.html#a1697cbb709132a827a24cf16714b73ab" title="avoid problems in phpmyadmin.css.php in some cases  string $js_frame">$_REQUEST</a>[<span class="stringliteral">&#39;ajax_request&#39;</span>]) &amp;&amp; <a class="code" href="libraries_2common_8inc_8php.html#a1697cbb709132a827a24cf16714b73ab" title="avoid problems in phpmyadmin.css.php in some cases  string $js_frame">$_REQUEST</a>[<span class="stringliteral">&#39;ajax_request&#39;</span>] == <span class="keyword">true</span>) {
<a name="l00029"></a>00029     <span class="comment">// Send with correct charset</span>
<a name="l00030"></a>00030     header(<span class="stringliteral">&#39;Content-Type: text/html; charset=UTF-8&#39;</span>);
<a name="l00031"></a>00031 
<a name="l00032"></a>00032     <span class="comment">// real-time charting data</span>
<a name="l00033"></a>00033     <span class="keywordflow">if</span> (isset(<a class="code" href="libraries_2common_8inc_8php.html#a1697cbb709132a827a24cf16714b73ab" title="avoid problems in phpmyadmin.css.php in some cases  string $js_frame">$_REQUEST</a>[<span class="stringliteral">&#39;chart_data&#39;</span>])) {
<a name="l00034"></a>00034         <span class="keywordflow">switch</span>(<a class="code" href="libraries_2common_8inc_8php.html#a1697cbb709132a827a24cf16714b73ab" title="avoid problems in phpmyadmin.css.php in some cases  string $js_frame">$_REQUEST</a>[<span class="stringliteral">&#39;type&#39;</span>]) {
<a name="l00035"></a>00035         <span class="comment">// Process and Connections realtime chart</span>
<a name="l00036"></a>00036         <span class="keywordflow">case</span> <span class="stringliteral">&#39;proc&#39;</span>:
<a name="l00037"></a>00037             <a class="code" href="sp_8php.html#a26c2f6c0ee7cb69a545305a8949c045c">$c</a> = <a class="code" href="database__interface_8lib_8php.html#a761f919096699667412d2ffd391eaa5b" title="returns all rows in the resultset in one array">PMA_DBI_fetch_result</a>(<span class="stringliteral">&quot;SHOW GLOBAL STATUS WHERE Variable_name = &#39;Connections&#39;&quot;</span>, 0, 1);
<a name="l00038"></a>00038             <a class="code" href="link__out_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a> = <a class="code" href="database__interface_8lib_8php.html#ab439cded0e18a60e731e76aa4567c089" title="runs a query">PMA_DBI_query</a>(<span class="stringliteral">&#39;SHOW PROCESSLIST&#39;</span>);
<a name="l00039"></a>00039             $num_procs = <a class="code" href="drizzle_8dbi_8lib_8php.html#ad3805f1da9fe87cc10e96acf0710d803" title="returns the number of rows returned by last query">PMA_DBI_num_rows</a>(<a class="code" href="link__out_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a>);
<a name="l00040"></a>00040 
<a name="l00041"></a>00041             $ret = array(
<a name="l00042"></a>00042                 <span class="charliteral">&#39;x&#39;</span>      =&gt; microtime(<span class="keyword">true</span>) * 1000,
<a name="l00043"></a>00043                 <span class="stringliteral">&#39;y_proc&#39;</span> =&gt; $num_procs,
<a name="l00044"></a>00044                 <span class="stringliteral">&#39;y_conn&#39;</span> =&gt; <a class="code" href="sp_8php.html#a26c2f6c0ee7cb69a545305a8949c045c">$c</a>[<span class="stringliteral">&#39;Connections&#39;</span>]
<a name="l00045"></a>00045             );
<a name="l00046"></a>00046 
<a name="l00047"></a>00047             <a class="code" href="footer_8inc_8php.html#a74ed6a30cde2182cef18dc4d7d998773" title="for PMA_setHistory()">exit</a>(json_encode($ret));
<a name="l00048"></a>00048 
<a name="l00049"></a>00049         <span class="comment">// Query realtime chart</span>
<a name="l00050"></a>00050         <span class="keywordflow">case</span> <span class="stringliteral">&#39;queries&#39;</span>:
<a name="l00051"></a>00051             <span class="keywordflow">if</span> (PMA_DRIZZLE) {
<a name="l00052"></a>00052                 <a class="code" href="ldi_8php.html#a778a0e0eff4555e51ea81fd9d2851e84">$sql</a> = <span class="stringliteral">&quot;SELECT concat(&#39;Com_&#39;, variable_name), variable_value</span>
<a name="l00053"></a>00053 <span class="stringliteral">                    FROM data_dictionary.GLOBAL_STATEMENTS</span>
<a name="l00054"></a>00054 <span class="stringliteral">                    WHERE variable_value &gt; 0</span>
<a name="l00055"></a>00055 <span class="stringliteral">                      UNION</span>
<a name="l00056"></a>00056 <span class="stringliteral">                    SELECT variable_name, variable_value</span>
<a name="l00057"></a>00057 <span class="stringliteral">                    FROM data_dictionary.GLOBAL_STATUS</span>
<a name="l00058"></a>00058 <span class="stringliteral">                    WHERE variable_name = &#39;Questions&#39;&quot;</span>;
<a name="l00059"></a>00059                 $queries = <a class="code" href="database__interface_8lib_8php.html#a761f919096699667412d2ffd391eaa5b" title="returns all rows in the resultset in one array">PMA_DBI_fetch_result</a>(<a class="code" href="ldi_8php.html#a778a0e0eff4555e51ea81fd9d2851e84">$sql</a>, 0, 1);
<a name="l00060"></a>00060             } <span class="keywordflow">else</span> {
<a name="l00061"></a>00061                 $queries = <a class="code" href="database__interface_8lib_8php.html#a761f919096699667412d2ffd391eaa5b" title="returns all rows in the resultset in one array">PMA_DBI_fetch_result</a>(
<a name="l00062"></a>00062                     <span class="stringliteral">&quot;SHOW GLOBAL STATUS</span>
<a name="l00063"></a>00063 <span class="stringliteral">                    WHERE (Variable_name LIKE &#39;Com_%&#39; OR Variable_name = &#39;Questions&#39;)</span>
<a name="l00064"></a>00064 <span class="stringliteral">                        AND Value &gt; 0&quot;</span>, 0, 1
<a name="l00065"></a>00065                 );
<a name="l00066"></a>00066             }
<a name="l00067"></a>00067             <a class="code" href="server__status_8php.html#a83b5a15a5ad32060bb1abe5966b579a8" title="cleanup of some deprecated values">cleanDeprecated</a>($queries);
<a name="l00068"></a>00068             <span class="comment">// admin commands are not queries</span>
<a name="l00069"></a>00069             unset($queries[<span class="stringliteral">&#39;Com_admin_commands&#39;</span>]);
<a name="l00070"></a>00070             $questions = $queries[<span class="stringliteral">&#39;Questions&#39;</span>];
<a name="l00071"></a>00071             unset($queries[<span class="stringliteral">&#39;Questions&#39;</span>]);
<a name="l00072"></a>00072 
<a name="l00073"></a>00073             <span class="comment">//$sum=array_sum($queries);</span>
<a name="l00074"></a>00074             $ret = array(
<a name="l00075"></a>00075                 <span class="charliteral">&#39;x&#39;</span>         =&gt; microtime(<span class="keyword">true</span>) * 1000,
<a name="l00076"></a>00076                 <span class="charliteral">&#39;y&#39;</span>         =&gt; $questions,
<a name="l00077"></a>00077                 <span class="stringliteral">&#39;pointInfo&#39;</span> =&gt; $queries
<a name="l00078"></a>00078             );
<a name="l00079"></a>00079 
<a name="l00080"></a>00080             <a class="code" href="footer_8inc_8php.html#a74ed6a30cde2182cef18dc4d7d998773" title="for PMA_setHistory()">exit</a>(json_encode($ret));
<a name="l00081"></a>00081 
<a name="l00082"></a>00082         <span class="comment">// Traffic realtime chart</span>
<a name="l00083"></a>00083         <span class="keywordflow">case</span> <span class="stringliteral">&#39;traffic&#39;</span>:
<a name="l00084"></a>00084             $traffic = <a class="code" href="database__interface_8lib_8php.html#a761f919096699667412d2ffd391eaa5b" title="returns all rows in the resultset in one array">PMA_DBI_fetch_result</a>(
<a name="l00085"></a>00085                 <span class="stringliteral">&quot;SHOW GLOBAL STATUS</span>
<a name="l00086"></a>00086 <span class="stringliteral">                WHERE Variable_name = &#39;Bytes_received&#39;</span>
<a name="l00087"></a>00087 <span class="stringliteral">                    OR Variable_name = &#39;Bytes_sent&#39;&quot;</span>, 0, 1
<a name="l00088"></a>00088             );
<a name="l00089"></a>00089 
<a name="l00090"></a>00090             $ret = array(
<a name="l00091"></a>00091                 <span class="charliteral">&#39;x&#39;</span>          =&gt; microtime(<span class="keyword">true</span>) * 1000,
<a name="l00092"></a>00092                 <span class="stringliteral">&#39;y_sent&#39;</span>     =&gt; $traffic[<span class="stringliteral">&#39;Bytes_sent&#39;</span>],
<a name="l00093"></a>00093                 <span class="stringliteral">&#39;y_received&#39;</span> =&gt; $traffic[<span class="stringliteral">&#39;Bytes_received&#39;</span>]
<a name="l00094"></a>00094             );
<a name="l00095"></a>00095 
<a name="l00096"></a>00096             <a class="code" href="footer_8inc_8php.html#a74ed6a30cde2182cef18dc4d7d998773" title="for PMA_setHistory()">exit</a>(json_encode($ret));
<a name="l00097"></a>00097 
<a name="l00098"></a>00098         <span class="comment">// Data for the monitor</span>
<a name="l00099"></a>00099         <span class="keywordflow">case</span> <span class="stringliteral">&#39;chartgrid&#39;</span>:
<a name="l00100"></a>00100             $ret = json_decode(<a class="code" href="libraries_2common_8inc_8php.html#a1697cbb709132a827a24cf16714b73ab" title="avoid problems in phpmyadmin.css.php in some cases  string $js_frame">$_REQUEST</a>[<span class="stringliteral">&#39;requiredData&#39;</span>], <span class="keyword">true</span>);
<a name="l00101"></a>00101             $statusVars = array();
<a name="l00102"></a>00102             <a class="code" href="server__variables_8php.html#a81459a3bbc0baf141da8ec2c0564794d">$serverVars</a> = array();
<a name="l00103"></a>00103             $sysinfo = $cpuload = $memory = 0;
<a name="l00104"></a>00104             $pName = <span class="stringliteral">&#39;&#39;</span>;
<a name="l00105"></a>00105 
<a name="l00106"></a>00106             <span class="comment">/* Accumulate all required variables and data */</span>
<a name="l00107"></a>00107             <span class="comment">// For each chart</span>
<a name="l00108"></a>00108             <span class="keywordflow">foreach</span> ($ret as $chart_id =&gt; $chartNodes) {
<a name="l00109"></a>00109                 <span class="comment">// For each data series</span>
<a name="l00110"></a>00110                 <span class="keywordflow">foreach</span> ($chartNodes as $node_id =&gt; $nodeDataPoints) {
<a name="l00111"></a>00111                     <span class="comment">// For each data point in the series (usually just 1)</span>
<a name="l00112"></a>00112                     <span class="keywordflow">foreach</span> ($nodeDataPoints as $point_id =&gt; $dataPoint) {
<a name="l00113"></a>00113                         $pName = $dataPoint[<span class="stringliteral">&#39;name&#39;</span>];
<a name="l00114"></a>00114 
<a name="l00115"></a>00115                         <span class="keywordflow">switch</span> ($dataPoint[<span class="stringliteral">&#39;type&#39;</span>]) {
<a name="l00116"></a>00116                         <span class="comment">/* We only collect the status and server variables here to</span>
<a name="l00117"></a>00117 <span class="comment">                         * read them all in one query, and only afterwards assign them.</span>
<a name="l00118"></a>00118 <span class="comment">                         * Also do some white list filtering on the names</span>
<a name="l00119"></a>00119 <span class="comment">                        */</span>
<a name="l00120"></a>00120                         <span class="keywordflow">case</span> <span class="stringliteral">&#39;servervar&#39;</span>:
<a name="l00121"></a>00121                             <span class="keywordflow">if</span> (!preg_match(<span class="stringliteral">&#39;/[^a-zA-Z_]+/&#39;</span>, $pName)) {
<a name="l00122"></a>00122                                 <a class="code" href="server__variables_8php.html#a81459a3bbc0baf141da8ec2c0564794d">$serverVars</a>[] = $pName;
<a name="l00123"></a>00123                             }
<a name="l00124"></a>00124                             <span class="keywordflow">break</span>;
<a name="l00125"></a>00125 
<a name="l00126"></a>00126                         <span class="keywordflow">case</span> <span class="stringliteral">&#39;statusvar&#39;</span>:
<a name="l00127"></a>00127                             <span class="keywordflow">if</span> (!preg_match(<span class="stringliteral">&#39;/[^a-zA-Z_]+/&#39;</span>, $pName)) {
<a name="l00128"></a>00128                                 $statusVars[] = $pName;
<a name="l00129"></a>00129                             }
<a name="l00130"></a>00130                             <span class="keywordflow">break</span>;
<a name="l00131"></a>00131 
<a name="l00132"></a>00132                         <span class="keywordflow">case</span> <span class="stringliteral">&#39;proc&#39;</span>:
<a name="l00133"></a>00133                             <a class="code" href="link__out_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a> = <a class="code" href="database__interface_8lib_8php.html#ab439cded0e18a60e731e76aa4567c089" title="runs a query">PMA_DBI_query</a>(<span class="stringliteral">&#39;SHOW PROCESSLIST&#39;</span>);
<a name="l00134"></a>00134                             $ret[$chart_id][$node_id][$point_id][<span class="stringliteral">&#39;value&#39;</span>] = <a class="code" href="drizzle_8dbi_8lib_8php.html#ad3805f1da9fe87cc10e96acf0710d803" title="returns the number of rows returned by last query">PMA_DBI_num_rows</a>(<a class="code" href="link__out_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a>);
<a name="l00135"></a>00135                             <span class="keywordflow">break</span>;
<a name="l00136"></a>00136 
<a name="l00137"></a>00137                         <span class="keywordflow">case</span> <span class="stringliteral">&#39;cpu&#39;</span>:
<a name="l00138"></a>00138                             <span class="keywordflow">if</span> (!$sysinfo) {
<a name="l00139"></a>00139                                 include_once <span class="stringliteral">&#39;libraries/sysinfo.lib.php&#39;</span>;
<a name="l00140"></a>00140                                 $sysinfo = <a class="code" href="sysinfo_8lib_8php.html#a6f6ab81f674f236dd52ef66ef822b9c4">getSysInfo</a>();
<a name="l00141"></a>00141                             }
<a name="l00142"></a>00142                             <span class="keywordflow">if</span> (!$cpuload) {
<a name="l00143"></a>00143                                 $cpuload = $sysinfo-&gt;loadavg();
<a name="l00144"></a>00144                             }
<a name="l00145"></a>00145 
<a name="l00146"></a>00146                             <span class="keywordflow">if</span> (PHP_OS == <span class="stringliteral">&#39;Linux&#39;</span>) {
<a name="l00147"></a>00147                                 $ret[$chart_id][$node_id][$point_id][<span class="stringliteral">&#39;idle&#39;</span>] = $cpuload[<span class="stringliteral">&#39;idle&#39;</span>];
<a name="l00148"></a>00148                                 $ret[$chart_id][$node_id][$point_id][<span class="stringliteral">&#39;busy&#39;</span>] = $cpuload[<span class="stringliteral">&#39;busy&#39;</span>];
<a name="l00149"></a>00149                             } <span class="keywordflow">else</span>
<a name="l00150"></a>00150                                 $ret[$chart_id][$node_id][$point_id][<span class="stringliteral">&#39;value&#39;</span>] = $cpuload[<span class="stringliteral">&#39;loadavg&#39;</span>];
<a name="l00151"></a>00151 
<a name="l00152"></a>00152                             <span class="keywordflow">break</span>;
<a name="l00153"></a>00153 
<a name="l00154"></a>00154                         <span class="keywordflow">case</span> <span class="stringliteral">&#39;memory&#39;</span>:
<a name="l00155"></a>00155                             <span class="keywordflow">if</span> (!$sysinfo) {
<a name="l00156"></a>00156                                 include_once <span class="stringliteral">&#39;libraries/sysinfo.lib.php&#39;</span>;
<a name="l00157"></a>00157                                 $sysinfo = <a class="code" href="sysinfo_8lib_8php.html#a6f6ab81f674f236dd52ef66ef822b9c4">getSysInfo</a>();
<a name="l00158"></a>00158                             }
<a name="l00159"></a>00159                             <span class="keywordflow">if</span> (!$memory) {
<a name="l00160"></a>00160                                 $memory  = $sysinfo-&gt;memory();
<a name="l00161"></a>00161                             }
<a name="l00162"></a>00162 
<a name="l00163"></a>00163                             $ret[$chart_id][$node_id][$point_id][<span class="stringliteral">&#39;value&#39;</span>] = $memory[$pName];
<a name="l00164"></a>00164                             <span class="keywordflow">break</span>;
<a name="l00165"></a>00165                         } <span class="comment">/* switch */</span>
<a name="l00166"></a>00166                     } <span class="comment">/* foreach */</span>
<a name="l00167"></a>00167                 } <span class="comment">/* foreach */</span>
<a name="l00168"></a>00168             } <span class="comment">/* foreach */</span>
<a name="l00169"></a>00169 
<a name="l00170"></a>00170             <span class="comment">// Retrieve all required status variables</span>
<a name="l00171"></a>00171             <span class="keywordflow">if</span> (count($statusVars)) {
<a name="l00172"></a>00172                 $statusVarValues = <a class="code" href="database__interface_8lib_8php.html#a761f919096699667412d2ffd391eaa5b" title="returns all rows in the resultset in one array">PMA_DBI_fetch_result</a>(
<a name="l00173"></a>00173                     <span class="stringliteral">&quot;SHOW GLOBAL STATUS</span>
<a name="l00174"></a>00174 <span class="stringliteral">                    WHERE Variable_name=&#39;&quot;</span> . implode(<span class="stringliteral">&quot;&#39; OR Variable_name=&#39;&quot;</span>, $statusVars) . <span class="stringliteral">&quot;&#39;&quot;</span>, 0, 1
<a name="l00175"></a>00175                 );
<a name="l00176"></a>00176             } <span class="keywordflow">else</span> {
<a name="l00177"></a>00177                 $statusVarValues = array();
<a name="l00178"></a>00178             }
<a name="l00179"></a>00179 
<a name="l00180"></a>00180             <span class="comment">// Retrieve all required server variables</span>
<a name="l00181"></a>00181             <span class="keywordflow">if</span> (count(<a class="code" href="server__variables_8php.html#a81459a3bbc0baf141da8ec2c0564794d">$serverVars</a>)) {
<a name="l00182"></a>00182                 $serverVarValues = <a class="code" href="database__interface_8lib_8php.html#a761f919096699667412d2ffd391eaa5b" title="returns all rows in the resultset in one array">PMA_DBI_fetch_result</a>(
<a name="l00183"></a>00183                     <span class="stringliteral">&quot;SHOW GLOBAL VARIABLES</span>
<a name="l00184"></a>00184 <span class="stringliteral">                    WHERE Variable_name=&#39;&quot;</span> . implode(<span class="stringliteral">&quot;&#39; OR Variable_name=&#39;&quot;</span>, <a class="code" href="server__variables_8php.html#a81459a3bbc0baf141da8ec2c0564794d">$serverVars</a>) . <span class="stringliteral">&quot;&#39;&quot;</span>, 0, 1
<a name="l00185"></a>00185                 );
<a name="l00186"></a>00186             } <span class="keywordflow">else</span> {
<a name="l00187"></a>00187                 $serverVarValues = array();
<a name="l00188"></a>00188             }
<a name="l00189"></a>00189 
<a name="l00190"></a>00190             <span class="comment">// ...and now assign them</span>
<a name="l00191"></a>00191             <span class="keywordflow">foreach</span> ($ret as $chart_id =&gt; $chartNodes) {
<a name="l00192"></a>00192                 <span class="keywordflow">foreach</span> ($chartNodes as $node_id =&gt; $nodeDataPoints) {
<a name="l00193"></a>00193                     <span class="keywordflow">foreach</span> ($nodeDataPoints as $point_id =&gt; $dataPoint) {
<a name="l00194"></a>00194                         <span class="keywordflow">switch</span>($dataPoint[<span class="stringliteral">&#39;type&#39;</span>]) {
<a name="l00195"></a>00195                         <span class="keywordflow">case</span> <span class="stringliteral">&#39;statusvar&#39;</span>:
<a name="l00196"></a>00196                             $ret[$chart_id][$node_id][$point_id][<span class="stringliteral">&#39;value&#39;</span>] = $statusVarValues[$dataPoint[<span class="stringliteral">&#39;name&#39;</span>]];
<a name="l00197"></a>00197                             <span class="keywordflow">break</span>;
<a name="l00198"></a>00198                         <span class="keywordflow">case</span> <span class="stringliteral">&#39;servervar&#39;</span>:
<a name="l00199"></a>00199                             $ret[$chart_id][$node_id][$point_id][<span class="stringliteral">&#39;value&#39;</span>] = $serverVarValues[$dataPoint[<span class="stringliteral">&#39;name&#39;</span>]];
<a name="l00200"></a>00200                             <span class="keywordflow">break</span>;
<a name="l00201"></a>00201                         }
<a name="l00202"></a>00202                     }
<a name="l00203"></a>00203                 }
<a name="l00204"></a>00204             }
<a name="l00205"></a>00205 
<a name="l00206"></a>00206             $ret[<span class="charliteral">&#39;x&#39;</span>] = microtime(<span class="keyword">true</span>) * 1000;
<a name="l00207"></a>00207 
<a name="l00208"></a>00208             <a class="code" href="footer_8inc_8php.html#a74ed6a30cde2182cef18dc4d7d998773" title="for PMA_setHistory()">exit</a>(json_encode($ret));
<a name="l00209"></a>00209         }
<a name="l00210"></a>00210     }
<a name="l00211"></a>00211 
<a name="l00212"></a>00212     <span class="keywordflow">if</span> (isset(<a class="code" href="libraries_2common_8inc_8php.html#a1697cbb709132a827a24cf16714b73ab" title="avoid problems in phpmyadmin.css.php in some cases  string $js_frame">$_REQUEST</a>[<span class="stringliteral">&#39;log_data&#39;</span>])) {
<a name="l00213"></a>00213         <span class="keywordflow">if</span> (PMA_MYSQL_INT_VERSION &lt; 50106) {
<a name="l00214"></a>00214             <span class="comment">/* FIXME: why this? */</span>
<a name="l00215"></a>00215             <a class="code" href="footer_8inc_8php.html#a74ed6a30cde2182cef18dc4d7d998773" title="for PMA_setHistory()">exit</a>(<span class="stringliteral">&#39;&quot;&quot;&#39;</span>);
<a name="l00216"></a>00216         }
<a name="l00217"></a>00217 
<a name="l00218"></a>00218         $start = intval(<a class="code" href="libraries_2common_8inc_8php.html#a1697cbb709132a827a24cf16714b73ab" title="avoid problems in phpmyadmin.css.php in some cases  string $js_frame">$_REQUEST</a>[<span class="stringliteral">&#39;time_start&#39;</span>]);
<a name="l00219"></a>00219         $end = intval(<a class="code" href="libraries_2common_8inc_8php.html#a1697cbb709132a827a24cf16714b73ab" title="avoid problems in phpmyadmin.css.php in some cases  string $js_frame">$_REQUEST</a>[<span class="stringliteral">&#39;time_end&#39;</span>]);
<a name="l00220"></a>00220 
<a name="l00221"></a>00221         <span class="keywordflow">if</span> (<a class="code" href="libraries_2common_8inc_8php.html#a1697cbb709132a827a24cf16714b73ab" title="avoid problems in phpmyadmin.css.php in some cases  string $js_frame">$_REQUEST</a>[<span class="stringliteral">&#39;type&#39;</span>] == <span class="stringliteral">&#39;slow&#39;</span>) {
<a name="l00222"></a>00222             <a class="code" href="search_8php.html#abb0f8f809252372e25f48d52b63ef29d">$q</a> = <span class="stringliteral">&#39;SELECT start_time, user_host, Sec_to_Time(Sum(Time_to_Sec(query_time))) as query_time, Sec_to_Time(Sum(Time_to_Sec(lock_time))) as lock_time, &#39;</span>.
<a name="l00223"></a>00223                  <span class="stringliteral">&#39;SUM(rows_sent) AS rows_sent, SUM(rows_examined) AS rows_examined, db, sql_text, COUNT(sql_text) AS \&#39;#\&#39; &#39;</span>.
<a name="l00224"></a>00224                  <span class="stringliteral">&#39;FROM `mysql`.`slow_log` WHERE start_time &gt; FROM_UNIXTIME(&#39;</span> . $start . <span class="stringliteral">&#39;) &#39;</span>.
<a name="l00225"></a>00225                  <span class="stringliteral">&#39;AND start_time &lt; FROM_UNIXTIME(&#39;</span> . $end . <span class="stringliteral">&#39;) GROUP BY sql_text&#39;</span>;
<a name="l00226"></a>00226 
<a name="l00227"></a>00227             <a class="code" href="link__out_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a> = <a class="code" href="database__interface_8lib_8php.html#af4f8622d2f5df7858e4e6ca425ac0274" title="runs a query and returns the result">PMA_DBI_try_query</a>(<a class="code" href="search_8php.html#abb0f8f809252372e25f48d52b63ef29d">$q</a>);
<a name="l00228"></a>00228 
<a name="l00229"></a>00229             $return = array(<span class="stringliteral">&#39;rows&#39;</span> =&gt; array(), <span class="stringliteral">&#39;sum&#39;</span> =&gt; array());
<a name="l00230"></a>00230             <a class="code" href="sp_8php.html#a9a4a6fba2208984cabb3afacadf33919">$type</a> = <span class="stringliteral">&#39;&#39;</span>;
<a name="l00231"></a>00231 
<a name="l00232"></a>00232             <span class="keywordflow">while</span> (<a class="code" href="db__qbe_8php.html#aa1d731aa570613e5bcff831bb10e9b87">$row</a> = <a class="code" href="drizzle_8dbi_8lib_8php.html#ab13d236340b5e44aa9ebfe3a22a62f37" title="returns array of rows with associative keys from $result">PMA_DBI_fetch_assoc</a>(<a class="code" href="link__out_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a>)) {
<a name="l00233"></a>00233                 <a class="code" href="sp_8php.html#a9a4a6fba2208984cabb3afacadf33919">$type</a> = strtolower(substr(<a class="code" href="db__qbe_8php.html#aa1d731aa570613e5bcff831bb10e9b87">$row</a>[<span class="stringliteral">&#39;sql_text&#39;</span>], 0, strpos(<a class="code" href="db__qbe_8php.html#aa1d731aa570613e5bcff831bb10e9b87">$row</a>[<span class="stringliteral">&#39;sql_text&#39;</span>], <span class="charliteral">&#39; &#39;</span>)));
<a name="l00234"></a>00234 
<a name="l00235"></a>00235                 <span class="keywordflow">switch</span>(<a class="code" href="sp_8php.html#a9a4a6fba2208984cabb3afacadf33919">$type</a>) {
<a name="l00236"></a>00236                 <span class="keywordflow">case</span> <span class="stringliteral">&#39;insert&#39;</span>:
<a name="l00237"></a>00237                 <span class="keywordflow">case</span> <span class="stringliteral">&#39;update&#39;</span>:
<a name="l00238"></a>00238                     <span class="comment">// Cut off big inserts and updates, but append byte count therefor</span>
<a name="l00239"></a>00239                     <span class="keywordflow">if</span> (strlen(<a class="code" href="db__qbe_8php.html#aa1d731aa570613e5bcff831bb10e9b87">$row</a>[<span class="stringliteral">&#39;sql_text&#39;</span>]) &gt; 220) {
<a name="l00240"></a>00240                         <a class="code" href="db__qbe_8php.html#aa1d731aa570613e5bcff831bb10e9b87">$row</a>[<span class="stringliteral">&#39;sql_text&#39;</span>] = substr(<a class="code" href="db__qbe_8php.html#aa1d731aa570613e5bcff831bb10e9b87">$row</a>[<span class="stringliteral">&#39;sql_text&#39;</span>], 0, 200)
<a name="l00241"></a>00241                             . <span class="stringliteral">&#39;... [&#39;</span>
<a name="l00242"></a>00242                             .  implode(<span class="charliteral">&#39; &#39;</span>, <a class="code" href="common_8lib_8php.html#a90de48fb0bb54fca6db6a407aa2ab8cf" title="Formats $value to byte view.">PMA_formatByteDown</a>(strlen(<a class="code" href="db__qbe_8php.html#aa1d731aa570613e5bcff831bb10e9b87">$row</a>[<span class="stringliteral">&#39;sql_text&#39;</span>]), 2, 2))
<a name="l00243"></a>00243                             . <span class="charliteral">&#39;]&#39;</span>;
<a name="l00244"></a>00244                     }
<a name="l00245"></a>00245                     <span class="keywordflow">break</span>;
<a name="l00246"></a>00246                 <span class="keywordflow">default</span>:
<a name="l00247"></a>00247                     <span class="keywordflow">break</span>;
<a name="l00248"></a>00248                 }
<a name="l00249"></a>00249 
<a name="l00250"></a>00250                 <span class="keywordflow">if</span> (!isset($return[<span class="stringliteral">&#39;sum&#39;</span>][<a class="code" href="sp_8php.html#a9a4a6fba2208984cabb3afacadf33919">$type</a>])) {
<a name="l00251"></a>00251                     $return[<span class="stringliteral">&#39;sum&#39;</span>][<a class="code" href="sp_8php.html#a9a4a6fba2208984cabb3afacadf33919">$type</a>] = 0;
<a name="l00252"></a>00252                 }
<a name="l00253"></a>00253                 $return[<span class="stringliteral">&#39;sum&#39;</span>][<a class="code" href="sp_8php.html#a9a4a6fba2208984cabb3afacadf33919">$type</a>] += <a class="code" href="db__qbe_8php.html#aa1d731aa570613e5bcff831bb10e9b87">$row</a>[<span class="charliteral">&#39;#&#39;</span>];
<a name="l00254"></a>00254                 $return[<span class="stringliteral">&#39;rows&#39;</span>][] = <a class="code" href="db__qbe_8php.html#aa1d731aa570613e5bcff831bb10e9b87">$row</a>;
<a name="l00255"></a>00255             }
<a name="l00256"></a>00256 
<a name="l00257"></a>00257             $return[<span class="stringliteral">&#39;sum&#39;</span>][<span class="stringliteral">&#39;TOTAL&#39;</span>] = array_sum($return[<span class="stringliteral">&#39;sum&#39;</span>]);
<a name="l00258"></a>00258             $return[<span class="stringliteral">&#39;numRows&#39;</span>] = count($return[<span class="stringliteral">&#39;rows&#39;</span>]);
<a name="l00259"></a>00259 
<a name="l00260"></a>00260             <a class="code" href="drizzle_8dbi_8lib_8php.html#a69ffa6649f3460798f5d0db03f1e2a5a" title="Frees memory associated with the result.">PMA_DBI_free_result</a>(<a class="code" href="link__out_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a>);
<a name="l00261"></a>00261 
<a name="l00262"></a>00262             <a class="code" href="footer_8inc_8php.html#a74ed6a30cde2182cef18dc4d7d998773" title="for PMA_setHistory()">exit</a>(json_encode($return));
<a name="l00263"></a>00263         }
<a name="l00264"></a>00264 
<a name="l00265"></a>00265         <span class="keywordflow">if</span> (<a class="code" href="libraries_2common_8inc_8php.html#a1697cbb709132a827a24cf16714b73ab" title="avoid problems in phpmyadmin.css.php in some cases  string $js_frame">$_REQUEST</a>[<span class="stringliteral">&#39;type&#39;</span>] == <span class="stringliteral">&#39;general&#39;</span>) {
<a name="l00266"></a>00266             $limitTypes = (isset(<a class="code" href="libraries_2common_8inc_8php.html#a1697cbb709132a827a24cf16714b73ab" title="avoid problems in phpmyadmin.css.php in some cases  string $js_frame">$_REQUEST</a>[<span class="stringliteral">&#39;limitTypes&#39;</span>]) &amp;&amp; <a class="code" href="libraries_2common_8inc_8php.html#a1697cbb709132a827a24cf16714b73ab" title="avoid problems in phpmyadmin.css.php in some cases  string $js_frame">$_REQUEST</a>[<span class="stringliteral">&#39;limitTypes&#39;</span>])
<a name="l00267"></a>00267                             ? <span class="stringliteral">&#39;AND argument REGEXP \&#39;^(INSERT|SELECT|UPDATE|DELETE)\&#39; &#39;</span> : <span class="stringliteral">&#39;&#39;</span>;
<a name="l00268"></a>00268 
<a name="l00269"></a>00269             <a class="code" href="search_8php.html#abb0f8f809252372e25f48d52b63ef29d">$q</a> = <span class="stringliteral">&#39;SELECT TIME(event_time) as event_time, user_host, thread_id, server_id, argument, count(argument) as \&#39;#\&#39; &#39;</span>.
<a name="l00270"></a>00270                  <span class="stringliteral">&#39;FROM `mysql`.`general_log` WHERE command_type=\&#39;Query\&#39; &#39;</span>.
<a name="l00271"></a>00271                  <span class="stringliteral">&#39;AND event_time &gt; FROM_UNIXTIME(&#39;</span> . $start . <span class="stringliteral">&#39;) AND event_time &lt; FROM_UNIXTIME(&#39;</span> . $end . <span class="stringliteral">&#39;) &#39;</span>.
<a name="l00272"></a>00272                  $limitTypes . <span class="stringliteral">&#39;GROUP by argument&#39;</span>; <span class="comment">// HAVING count &gt; 1&#39;;</span>
<a name="l00273"></a>00273 
<a name="l00274"></a>00274             <a class="code" href="link__out_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a> = <a class="code" href="database__interface_8lib_8php.html#af4f8622d2f5df7858e4e6ca425ac0274" title="runs a query and returns the result">PMA_DBI_try_query</a>(<a class="code" href="search_8php.html#abb0f8f809252372e25f48d52b63ef29d">$q</a>);
<a name="l00275"></a>00275 
<a name="l00276"></a>00276             $return = array(<span class="stringliteral">&#39;rows&#39;</span> =&gt; array(), <span class="stringliteral">&#39;sum&#39;</span> =&gt; array());
<a name="l00277"></a>00277             <a class="code" href="sp_8php.html#a9a4a6fba2208984cabb3afacadf33919">$type</a> = <span class="stringliteral">&#39;&#39;</span>;
<a name="l00278"></a>00278             $insertTables = array();
<a name="l00279"></a>00279             $insertTablesFirst = -1;
<a name="l00280"></a>00280             <a class="code" href="config_8sample_8inc_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a> = 0;
<a name="l00281"></a>00281             $removeVars = isset(<a class="code" href="libraries_2common_8inc_8php.html#a1697cbb709132a827a24cf16714b73ab" title="avoid problems in phpmyadmin.css.php in some cases  string $js_frame">$_REQUEST</a>[<span class="stringliteral">&#39;removeVariables&#39;</span>]) &amp;&amp; <a class="code" href="libraries_2common_8inc_8php.html#a1697cbb709132a827a24cf16714b73ab" title="avoid problems in phpmyadmin.css.php in some cases  string $js_frame">$_REQUEST</a>[<span class="stringliteral">&#39;removeVariables&#39;</span>];
<a name="l00282"></a>00282 
<a name="l00283"></a>00283             <span class="keywordflow">while</span> (<a class="code" href="db__qbe_8php.html#aa1d731aa570613e5bcff831bb10e9b87">$row</a> = <a class="code" href="drizzle_8dbi_8lib_8php.html#ab13d236340b5e44aa9ebfe3a22a62f37" title="returns array of rows with associative keys from $result">PMA_DBI_fetch_assoc</a>(<a class="code" href="link__out_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a>)) {
<a name="l00284"></a>00284                 preg_match(<span class="stringliteral">&#39;/^(\w+)\s/&#39;</span>, <a class="code" href="db__qbe_8php.html#aa1d731aa570613e5bcff831bb10e9b87">$row</a>[<span class="stringliteral">&#39;argument&#39;</span>], $match);
<a name="l00285"></a>00285                 <a class="code" href="sp_8php.html#a9a4a6fba2208984cabb3afacadf33919">$type</a> = strtolower($match[1]);
<a name="l00286"></a>00286 
<a name="l00287"></a>00287                 <span class="keywordflow">if</span> (!isset($return[<span class="stringliteral">&#39;sum&#39;</span>][<a class="code" href="sp_8php.html#a9a4a6fba2208984cabb3afacadf33919">$type</a>])) {
<a name="l00288"></a>00288                     $return[<span class="stringliteral">&#39;sum&#39;</span>][<a class="code" href="sp_8php.html#a9a4a6fba2208984cabb3afacadf33919">$type</a>] = 0;
<a name="l00289"></a>00289                 }
<a name="l00290"></a>00290                 $return[<span class="stringliteral">&#39;sum&#39;</span>][<a class="code" href="sp_8php.html#a9a4a6fba2208984cabb3afacadf33919">$type</a>] += <a class="code" href="db__qbe_8php.html#aa1d731aa570613e5bcff831bb10e9b87">$row</a>[<span class="charliteral">&#39;#&#39;</span>];
<a name="l00291"></a>00291 
<a name="l00292"></a>00292                 <span class="keywordflow">switch</span>($type) {
<a name="l00293"></a>00293                 <span class="keywordflow">case</span> <span class="stringliteral">&#39;insert&#39;</span>:
<a name="l00294"></a>00294                     <span class="comment">// Group inserts if selected</span>
<a name="l00295"></a>00295                     <span class="keywordflow">if</span> ($removeVars &amp;&amp; preg_match(<span class="stringliteral">&#39;/^INSERT INTO (`|\&#39;|&quot;|)([^\s\\1]+)\\1/i&#39;</span>, <a class="code" href="db__qbe_8php.html#aa1d731aa570613e5bcff831bb10e9b87">$row</a>[<span class="stringliteral">&#39;argument&#39;</span>], $matches)) {
<a name="l00296"></a>00296                         $insertTables[$matches[2]]++;
<a name="l00297"></a>00297                         <span class="keywordflow">if</span> ($insertTables[$matches[2]] &gt; 1) {
<a name="l00298"></a>00298                             $return[<span class="stringliteral">&#39;rows&#39;</span>][$insertTablesFirst][<span class="charliteral">&#39;#&#39;</span>] = $insertTables[$matches[2]];
<a name="l00299"></a>00299 
<a name="l00300"></a>00300                             <span class="comment">// Add a ... to the end of this query to indicate that there&#39;s been other queries</span>
<a name="l00301"></a>00301                             <span class="keywordflow">if</span> ($return[<span class="stringliteral">&#39;rows&#39;</span>][$insertTablesFirst][<span class="stringliteral">&#39;argument&#39;</span>][strlen($return[<span class="stringliteral">&#39;rows&#39;</span>][$insertTablesFirst][<span class="stringliteral">&#39;argument&#39;</span>])-1] != <span class="charliteral">&#39;.&#39;</span>) {
<a name="l00302"></a>00302                                 $return[<span class="stringliteral">&#39;rows&#39;</span>][$insertTablesFirst][<span class="stringliteral">&#39;argument&#39;</span>] .= <span class="stringliteral">&#39;&lt;br/&gt;...&#39;</span>;
<a name="l00303"></a>00303                             }
<a name="l00304"></a>00304 
<a name="l00305"></a>00305                             <span class="comment">// Group this value, thus do not add to the result list</span>
<a name="l00306"></a>00306                             <span class="keywordflow">continue</span> 2;
<a name="l00307"></a>00307                         } <span class="keywordflow">else</span> {
<a name="l00308"></a>00308                             $insertTablesFirst = <a class="code" href="config_8sample_8inc_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a>;
<a name="l00309"></a>00309                             $insertTables[$matches[2]] += <a class="code" href="db__qbe_8php.html#aa1d731aa570613e5bcff831bb10e9b87">$row</a>[<span class="charliteral">&#39;#&#39;</span>] - 1;
<a name="l00310"></a>00310                         }
<a name="l00311"></a>00311                     }
<a name="l00312"></a>00312                     <span class="comment">// No break here</span>
<a name="l00313"></a>00313 
<a name="l00314"></a>00314                 <span class="keywordflow">case</span> <span class="stringliteral">&#39;update&#39;</span>:
<a name="l00315"></a>00315                     <span class="comment">// Cut off big inserts and updates, but append byte count therefor</span>
<a name="l00316"></a>00316                     <span class="keywordflow">if</span> (strlen(<a class="code" href="db__qbe_8php.html#aa1d731aa570613e5bcff831bb10e9b87">$row</a>[<span class="stringliteral">&#39;argument&#39;</span>]) &gt; 220) {
<a name="l00317"></a>00317                         <a class="code" href="db__qbe_8php.html#aa1d731aa570613e5bcff831bb10e9b87">$row</a>[<span class="stringliteral">&#39;argument&#39;</span>] = substr(<a class="code" href="db__qbe_8php.html#aa1d731aa570613e5bcff831bb10e9b87">$row</a>[<span class="stringliteral">&#39;argument&#39;</span>], 0, 200)
<a name="l00318"></a>00318                             . <span class="stringliteral">&#39;... [&#39;</span>
<a name="l00319"></a>00319                             .  implode(<span class="charliteral">&#39; &#39;</span>, <a class="code" href="common_8lib_8php.html#a90de48fb0bb54fca6db6a407aa2ab8cf" title="Formats $value to byte view.">PMA_formatByteDown</a>(strlen(<a class="code" href="db__qbe_8php.html#aa1d731aa570613e5bcff831bb10e9b87">$row</a>[<span class="stringliteral">&#39;argument&#39;</span>])), 2, 2)
<a name="l00320"></a>00320                             . <span class="charliteral">&#39;]&#39;</span>;
<a name="l00321"></a>00321                     }
<a name="l00322"></a>00322                     <span class="keywordflow">break</span>;
<a name="l00323"></a>00323 
<a name="l00324"></a>00324                 <span class="keywordflow">default</span>:
<a name="l00325"></a>00325                     <span class="keywordflow">break</span>;
<a name="l00326"></a>00326                 }
<a name="l00327"></a>00327 
<a name="l00328"></a>00328                 $return[<span class="stringliteral">&#39;rows&#39;</span>][] = <a class="code" href="db__qbe_8php.html#aa1d731aa570613e5bcff831bb10e9b87">$row</a>;
<a name="l00329"></a>00329                 <a class="code" href="config_8sample_8inc_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a>++;
<a name="l00330"></a>00330             }
<a name="l00331"></a>00331 
<a name="l00332"></a>00332             $return[<span class="stringliteral">&#39;sum&#39;</span>][<span class="stringliteral">&#39;TOTAL&#39;</span>] = array_sum($return[<span class="stringliteral">&#39;sum&#39;</span>]);
<a name="l00333"></a>00333             $return[<span class="stringliteral">&#39;numRows&#39;</span>] = count($return[<span class="stringliteral">&#39;rows&#39;</span>]);
<a name="l00334"></a>00334 
<a name="l00335"></a>00335             <a class="code" href="drizzle_8dbi_8lib_8php.html#a69ffa6649f3460798f5d0db03f1e2a5a" title="Frees memory associated with the result.">PMA_DBI_free_result</a>(<a class="code" href="link__out_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a>);
<a name="l00336"></a>00336 
<a name="l00337"></a>00337             <a class="code" href="footer_8inc_8php.html#a74ed6a30cde2182cef18dc4d7d998773" title="for PMA_setHistory()">exit</a>(json_encode($return));
<a name="l00338"></a>00338         }
<a name="l00339"></a>00339     }
<a name="l00340"></a>00340 
<a name="l00341"></a>00341     <span class="keywordflow">if</span> (isset(<a class="code" href="libraries_2common_8inc_8php.html#a1697cbb709132a827a24cf16714b73ab" title="avoid problems in phpmyadmin.css.php in some cases  string $js_frame">$_REQUEST</a>[<span class="stringliteral">&#39;logging_vars&#39;</span>])) {
<a name="l00342"></a>00342         <span class="keywordflow">if</span> (isset(<a class="code" href="libraries_2common_8inc_8php.html#a1697cbb709132a827a24cf16714b73ab" title="avoid problems in phpmyadmin.css.php in some cases  string $js_frame">$_REQUEST</a>[<span class="stringliteral">&#39;varName&#39;</span>]) &amp;&amp; isset(<a class="code" href="libraries_2common_8inc_8php.html#a1697cbb709132a827a24cf16714b73ab" title="avoid problems in phpmyadmin.css.php in some cases  string $js_frame">$_REQUEST</a>[<span class="stringliteral">&#39;varValue&#39;</span>])) {
<a name="l00343"></a>00343             $value = PMA_sqlAddslashes(<a class="code" href="libraries_2common_8inc_8php.html#a1697cbb709132a827a24cf16714b73ab" title="avoid problems in phpmyadmin.css.php in some cases  string $js_frame">$_REQUEST</a>[<span class="stringliteral">&#39;varValue&#39;</span>]);
<a name="l00344"></a>00344             <span class="keywordflow">if</span> (!is_numeric($value)) {
<a name="l00345"></a>00345                 $value=<span class="stringliteral">&quot;&#39;&quot;</span> . $value . <span class="stringliteral">&quot;&#39;&quot;</span>;
<a name="l00346"></a>00346             }
<a name="l00347"></a>00347 
<a name="l00348"></a>00348             <span class="keywordflow">if</span> (! preg_match(<span class="stringliteral">&quot;/[^a-zA-Z0-9_]+/&quot;</span>, <a class="code" href="libraries_2common_8inc_8php.html#a1697cbb709132a827a24cf16714b73ab" title="avoid problems in phpmyadmin.css.php in some cases  string $js_frame">$_REQUEST</a>[<span class="stringliteral">&#39;varName&#39;</span>])) {
<a name="l00349"></a>00349                 <a class="code" href="database__interface_8lib_8php.html#ab439cded0e18a60e731e76aa4567c089" title="runs a query">PMA_DBI_query</a>(<span class="stringliteral">&#39;SET GLOBAL &#39;</span> . <a class="code" href="libraries_2common_8inc_8php.html#a1697cbb709132a827a24cf16714b73ab" title="avoid problems in phpmyadmin.css.php in some cases  string $js_frame">$_REQUEST</a>[<span class="stringliteral">&#39;varName&#39;</span>] . <span class="stringliteral">&#39; = &#39;</span> . $value);
<a name="l00350"></a>00350             }
<a name="l00351"></a>00351 
<a name="l00352"></a>00352         }
<a name="l00353"></a>00353 
<a name="l00354"></a>00354         $loggingVars = <a class="code" href="database__interface_8lib_8php.html#a761f919096699667412d2ffd391eaa5b" title="returns all rows in the resultset in one array">PMA_DBI_fetch_result</a>(<span class="stringliteral">&#39;SHOW GLOBAL VARIABLES WHERE Variable_name IN (&quot;general_log&quot;,&quot;slow_query_log&quot;,&quot;long_query_time&quot;,&quot;log_output&quot;)&#39;</span>, 0, 1);
<a name="l00355"></a>00355         <a class="code" href="footer_8inc_8php.html#a74ed6a30cde2182cef18dc4d7d998773" title="for PMA_setHistory()">exit</a>(json_encode($loggingVars));
<a name="l00356"></a>00356     }
<a name="l00357"></a>00357 
<a name="l00358"></a>00358     <span class="keywordflow">if</span> (isset(<a class="code" href="libraries_2common_8inc_8php.html#a1697cbb709132a827a24cf16714b73ab" title="avoid problems in phpmyadmin.css.php in some cases  string $js_frame">$_REQUEST</a>[<span class="stringliteral">&#39;query_analyzer&#39;</span>])) {
<a name="l00359"></a>00359         $return = array();
<a name="l00360"></a>00360 
<a name="l00361"></a>00361         <span class="keywordflow">if</span> (strlen(<a class="code" href="libraries_2common_8inc_8php.html#a1697cbb709132a827a24cf16714b73ab" title="avoid problems in phpmyadmin.css.php in some cases  string $js_frame">$_REQUEST</a>[<span class="stringliteral">&#39;database&#39;</span>])) {
<a name="l00362"></a>00362             <a class="code" href="drizzle_8dbi_8lib_8php.html#ad7887c8952b000aa32b359f160cac73a" title="selects given database">PMA_DBI_select_db</a>(<a class="code" href="libraries_2common_8inc_8php.html#a1697cbb709132a827a24cf16714b73ab" title="avoid problems in phpmyadmin.css.php in some cases  string $js_frame">$_REQUEST</a>[<span class="stringliteral">&#39;database&#39;</span>]);
<a name="l00363"></a>00363         }
<a name="l00364"></a>00364 
<a name="l00365"></a>00365         <span class="keywordflow">if</span> ($profiling = <a class="code" href="common_8lib_8php.html#a435d3361c16efc65577a9e9c1e3cdc6d" title="Verifies if current MySQL server supports profiling.">PMA_profilingSupported</a>()) {
<a name="l00366"></a>00366             <a class="code" href="database__interface_8lib_8php.html#ab439cded0e18a60e731e76aa4567c089" title="runs a query">PMA_DBI_query</a>(<span class="stringliteral">&#39;SET PROFILING=1;&#39;</span>);
<a name="l00367"></a>00367         }
<a name="l00368"></a>00368 
<a name="l00369"></a>00369         <span class="comment">// Do not cache query</span>
<a name="l00370"></a>00370         $query = preg_replace(<span class="stringliteral">&#39;/^(\s*SELECT)/i&#39;</span>, <span class="stringliteral">&#39;\\1 SQL_NO_CACHE&#39;</span>, <a class="code" href="libraries_2common_8inc_8php.html#a1697cbb709132a827a24cf16714b73ab" title="avoid problems in phpmyadmin.css.php in some cases  string $js_frame">$_REQUEST</a>[<span class="stringliteral">&#39;query&#39;</span>]);
<a name="l00371"></a>00371 
<a name="l00372"></a>00372         <a class="code" href="link__out_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a> = <a class="code" href="database__interface_8lib_8php.html#af4f8622d2f5df7858e4e6ca425ac0274" title="runs a query and returns the result">PMA_DBI_try_query</a>($query);
<a name="l00373"></a>00373         $return[<span class="stringliteral">&#39;affectedRows&#39;</span>] = <a class="code" href="config_2config_8php.html#aad108a6abffdea835bc6cc2f3244751e">$GLOBALS</a>[<span class="stringliteral">&#39;cached_affected_rows&#39;</span>];
<a name="l00374"></a>00374 
<a name="l00375"></a>00375         <a class="code" href="link__out_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a> = <a class="code" href="database__interface_8lib_8php.html#af4f8622d2f5df7858e4e6ca425ac0274" title="runs a query and returns the result">PMA_DBI_try_query</a>(<span class="stringliteral">&#39;EXPLAIN &#39;</span> . $query);
<a name="l00376"></a>00376         <span class="keywordflow">while</span> (<a class="code" href="db__qbe_8php.html#aa1d731aa570613e5bcff831bb10e9b87">$row</a> = <a class="code" href="drizzle_8dbi_8lib_8php.html#ab13d236340b5e44aa9ebfe3a22a62f37" title="returns array of rows with associative keys from $result">PMA_DBI_fetch_assoc</a>(<a class="code" href="link__out_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a>)) {
<a name="l00377"></a>00377             $return[<span class="stringliteral">&#39;explain&#39;</span>][] = <a class="code" href="db__qbe_8php.html#aa1d731aa570613e5bcff831bb10e9b87">$row</a>;
<a name="l00378"></a>00378         }
<a name="l00379"></a>00379 
<a name="l00380"></a>00380         <span class="comment">// In case an error happened</span>
<a name="l00381"></a>00381         $return[<span class="stringliteral">&#39;error&#39;</span>] = <a class="code" href="drizzle_8dbi_8lib_8php.html#a704868d694079bc38c1947d370b8bf79" title="returns last error message or false if no errors occured">PMA_DBI_getError</a>();
<a name="l00382"></a>00382 
<a name="l00383"></a>00383         <a class="code" href="drizzle_8dbi_8lib_8php.html#a69ffa6649f3460798f5d0db03f1e2a5a" title="Frees memory associated with the result.">PMA_DBI_free_result</a>(<a class="code" href="link__out_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a>);
<a name="l00384"></a>00384 
<a name="l00385"></a>00385         <span class="keywordflow">if</span> ($profiling) {
<a name="l00386"></a>00386             $return[<span class="stringliteral">&#39;profiling&#39;</span>] = array();
<a name="l00387"></a>00387             <a class="code" href="link__out_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a> = <a class="code" href="database__interface_8lib_8php.html#af4f8622d2f5df7858e4e6ca425ac0274" title="runs a query and returns the result">PMA_DBI_try_query</a>(<span class="stringliteral">&#39;SELECT seq,state,duration FROM INFORMATION_SCHEMA.PROFILING WHERE QUERY_ID=1 ORDER BY seq&#39;</span>);
<a name="l00388"></a>00388             <span class="keywordflow">while</span> (<a class="code" href="db__qbe_8php.html#aa1d731aa570613e5bcff831bb10e9b87">$row</a> = <a class="code" href="drizzle_8dbi_8lib_8php.html#ab13d236340b5e44aa9ebfe3a22a62f37" title="returns array of rows with associative keys from $result">PMA_DBI_fetch_assoc</a>(<a class="code" href="link__out_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a>)) {
<a name="l00389"></a>00389                 $return[<span class="stringliteral">&#39;profiling&#39;</span>][]= <a class="code" href="db__qbe_8php.html#aa1d731aa570613e5bcff831bb10e9b87">$row</a>;
<a name="l00390"></a>00390             }
<a name="l00391"></a>00391             <a class="code" href="drizzle_8dbi_8lib_8php.html#a69ffa6649f3460798f5d0db03f1e2a5a" title="Frees memory associated with the result.">PMA_DBI_free_result</a>(<a class="code" href="link__out_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a>);
<a name="l00392"></a>00392         }
<a name="l00393"></a>00393 
<a name="l00394"></a>00394         <a class="code" href="footer_8inc_8php.html#a74ed6a30cde2182cef18dc4d7d998773" title="for PMA_setHistory()">exit</a>(json_encode($return));
<a name="l00395"></a>00395     }
<a name="l00396"></a>00396 
<a name="l00397"></a>00397     <span class="keywordflow">if</span> (isset(<a class="code" href="libraries_2common_8inc_8php.html#a1697cbb709132a827a24cf16714b73ab" title="avoid problems in phpmyadmin.css.php in some cases  string $js_frame">$_REQUEST</a>[<span class="stringliteral">&#39;advisor&#39;</span>])) {
<a name="l00398"></a>00398         include <span class="stringliteral">&#39;libraries/Advisor.class.php&#39;</span>;
<a name="l00399"></a>00399         $advisor = <span class="keyword">new</span> <a class="code" href="classAdvisor.html">Advisor</a>();
<a name="l00400"></a>00400         <a class="code" href="footer_8inc_8php.html#a74ed6a30cde2182cef18dc4d7d998773" title="for PMA_setHistory()">exit</a>(json_encode($advisor-&gt;run()));
<a name="l00401"></a>00401     }
<a name="l00402"></a>00402 }
<a name="l00403"></a>00403 
<a name="l00404"></a>00404 <span class="comment"></span>
<a name="l00405"></a>00405 <span class="comment">/**</span>
<a name="l00406"></a>00406 <span class="comment"> * Replication library</span>
<a name="l00407"></a>00407 <span class="comment"> */</span>
<a name="l00408"></a>00408 <span class="keywordflow">if</span> (PMA_DRIZZLE) {
<a name="l00409"></a>00409     $server_master_status = <span class="keyword">false</span>;
<a name="l00410"></a>00410     $server_slave_status = <span class="keyword">false</span>;
<a name="l00411"></a>00411 } <span class="keywordflow">else</span> {
<a name="l00412"></a>00412     include_once <span class="stringliteral">&#39;./libraries/replication.inc.php&#39;</span>;
<a name="l00413"></a>00413     include_once <span class="stringliteral">&#39;./libraries/replication_gui.lib.php&#39;</span>;
<a name="l00414"></a>00414 }
<a name="l00415"></a>00415 <span class="comment"></span>
<a name="l00416"></a>00416 <span class="comment">/**</span>
<a name="l00417"></a>00417 <span class="comment"> * JS Includes</span>
<a name="l00418"></a>00418 <span class="comment"> */</span>
<a name="l00419"></a>00419 
<a name="l00420"></a>00420 <a class="code" href="config_2config_8php.html#aad108a6abffdea835bc6cc2f3244751e">$GLOBALS</a>[<span class="stringliteral">&#39;js_include&#39;</span>][] = <span class="stringliteral">&#39;server_status.js&#39;</span>;
<a name="l00421"></a><a class="code" href="server__status_8php.html#a9b835efbb97695b4ed9faf19a55b1080">00421</a> <a class="code" href="config_2config_8php.html#aad108a6abffdea835bc6cc2f3244751e">$GLOBALS</a>[<span class="stringliteral">&#39;js_include&#39;</span>][] = <span class="stringliteral">&#39;jquery/jquery-ui-1.8.16.custom.js&#39;</span>;
<a name="l00422"></a>00422 <a class="code" href="config_2config_8php.html#aad108a6abffdea835bc6cc2f3244751e">$GLOBALS</a>[<span class="stringliteral">&#39;js_include&#39;</span>][] = <span class="stringliteral">&#39;jquery/jquery.tablesorter.js&#39;</span>;
<a name="l00423"></a>00423 <a class="code" href="config_2config_8php.html#aad108a6abffdea835bc6cc2f3244751e">$GLOBALS</a>[<span class="stringliteral">&#39;js_include&#39;</span>][] = <span class="stringliteral">&#39;jquery/jquery.cookie.js&#39;</span>; <span class="comment">// For tab persistence</span>
<a name="l00424"></a>00424 <span class="comment">// Charting</span>
<a name="l00425"></a>00425 <a class="code" href="config_2config_8php.html#aad108a6abffdea835bc6cc2f3244751e">$GLOBALS</a>[<span class="stringliteral">&#39;js_include&#39;</span>][] = <span class="stringliteral">&#39;highcharts/highcharts.js&#39;</span>;
<a name="l00426"></a>00426 <span class="comment">/* Files required for chart exporting */</span>
<a name="l00427"></a>00427 <a class="code" href="config_2config_8php.html#aad108a6abffdea835bc6cc2f3244751e">$GLOBALS</a>[<span class="stringliteral">&#39;js_include&#39;</span>][] = <span class="stringliteral">&#39;highcharts/exporting.js&#39;</span>;
<a name="l00428"></a>00428 <span class="comment">/* &lt; IE 9 doesn&#39;t support canvas natively */</span>
<a name="l00429"></a>00429 <span class="keywordflow">if</span> (PMA_USR_BROWSER_AGENT == <span class="stringliteral">&#39;IE&#39;</span> &amp;&amp; PMA_USR_BROWSER_VER &lt; 9) {
<a name="l00430"></a>00430     <a class="code" href="config_2config_8php.html#aad108a6abffdea835bc6cc2f3244751e">$GLOBALS</a>[<span class="stringliteral">&#39;js_include&#39;</span>][] = <span class="stringliteral">&#39;canvg/flashcanvas.js&#39;</span>;
<a name="l00431"></a>00431 }
<a name="l00432"></a>00432 <a class="code" href="config_2config_8php.html#aad108a6abffdea835bc6cc2f3244751e">$GLOBALS</a>[<span class="stringliteral">&#39;js_include&#39;</span>][] = <span class="stringliteral">&#39;canvg/canvg.js&#39;</span>;
<a name="l00433"></a>00433 <span class="comment">// for profiling chart</span>
<a name="l00434"></a>00434 <a class="code" href="config_2config_8php.html#aad108a6abffdea835bc6cc2f3244751e">$GLOBALS</a>[<span class="stringliteral">&#39;js_include&#39;</span>][] = <span class="stringliteral">&#39;jqplot/jquery.jqplot.js&#39;</span>;
<a name="l00435"></a>00435 <a class="code" href="config_2config_8php.html#aad108a6abffdea835bc6cc2f3244751e">$GLOBALS</a>[<span class="stringliteral">&#39;js_include&#39;</span>][] = <span class="stringliteral">&#39;jqplot/plugins/jqplot.pieRenderer.js&#39;</span>;
<a name="l00436"></a>00436 <span class="comment"></span>
<a name="l00437"></a>00437 <span class="comment">/**</span>
<a name="l00438"></a>00438 <span class="comment"> * flush status variables if requested</span>
<a name="l00439"></a>00439 <span class="comment"> */</span>
<a name="l00440"></a>00440 <span class="keywordflow">if</span> (isset(<a class="code" href="libraries_2common_8inc_8php.html#a1697cbb709132a827a24cf16714b73ab" title="avoid problems in phpmyadmin.css.php in some cases  string $js_frame">$_REQUEST</a>[<span class="stringliteral">&#39;flush&#39;</span>])) {
<a name="l00441"></a>00441     $_flush_commands = array(
<a name="l00442"></a>00442         <span class="stringliteral">&#39;STATUS&#39;</span>,
<a name="l00443"></a>00443         <span class="stringliteral">&#39;TABLES&#39;</span>,
<a name="l00444"></a>00444         <span class="stringliteral">&#39;QUERY CACHE&#39;</span>,
<a name="l00445"></a>00445     );
<a name="l00446"></a>00446 
<a name="l00447"></a>00447     <span class="keywordflow">if</span> (in_array(<a class="code" href="libraries_2common_8inc_8php.html#a1697cbb709132a827a24cf16714b73ab" title="avoid problems in phpmyadmin.css.php in some cases  string $js_frame">$_REQUEST</a>[<span class="stringliteral">&#39;flush&#39;</span>], $_flush_commands)) {
<a name="l00448"></a>00448         <a class="code" href="database__interface_8lib_8php.html#ab439cded0e18a60e731e76aa4567c089" title="runs a query">PMA_DBI_query</a>(<span class="stringliteral">&#39;FLUSH &#39;</span> . <a class="code" href="libraries_2common_8inc_8php.html#a1697cbb709132a827a24cf16714b73ab" title="avoid problems in phpmyadmin.css.php in some cases  string $js_frame">$_REQUEST</a>[<span class="stringliteral">&#39;flush&#39;</span>] . <span class="charliteral">&#39;;&#39;</span>);
<a name="l00449"></a>00449     }
<a name="l00450"></a>00450     unset($_flush_commands);
<a name="l00451"></a>00451 }
<a name="l00452"></a>00452 <span class="comment"></span>
<a name="l00453"></a>00453 <span class="comment">/**</span>
<a name="l00454"></a>00454 <span class="comment"> * Kills a selected process</span>
<a name="l00455"></a>00455 <span class="comment"> */</span>
<a name="l00456"></a>00456 <span class="keywordflow">if</span> (!empty(<a class="code" href="libraries_2common_8inc_8php.html#a1697cbb709132a827a24cf16714b73ab" title="avoid problems in phpmyadmin.css.php in some cases  string $js_frame">$_REQUEST</a>[<span class="stringliteral">&#39;kill&#39;</span>])) {
<a name="l00457"></a>00457     <span class="keywordflow">if</span> (<a class="code" href="database__interface_8lib_8php.html#af4f8622d2f5df7858e4e6ca425ac0274" title="runs a query and returns the result">PMA_DBI_try_query</a>(<span class="stringliteral">&#39;KILL &#39;</span> . <a class="code" href="libraries_2common_8inc_8php.html#a1697cbb709132a827a24cf16714b73ab" title="avoid problems in phpmyadmin.css.php in some cases  string $js_frame">$_REQUEST</a>[<span class="stringliteral">&#39;kill&#39;</span>] . <span class="charliteral">&#39;;&#39;</span>)) {
<a name="l00458"></a>00458         <a class="code" href="forums_8php.html#abf17cb2dba2ed17cb28aa5f37deb5293">$message</a> = <a class="code" href="classPMA__Message.html#a18c1022045762ab6747a98cb4464819e" title="get PMA_Message of type success">PMA_Message::success</a>(__(<span class="stringliteral">&#39;Thread %s was successfully killed.&#39;</span>));
<a name="l00459"></a>00459     } <span class="keywordflow">else</span> {
<a name="l00460"></a>00460         <a class="code" href="forums_8php.html#abf17cb2dba2ed17cb28aa5f37deb5293">$message</a> = <a class="code" href="classPMA__Message.html#ac1eedc27bd176676149c300379b98661" title="get PMA_Message of type error">PMA_Message::error</a>(__(<span class="stringliteral">&#39;phpMyAdmin was unable to kill thread %s. It probably has already been closed.&#39;</span>));
<a name="l00461"></a>00461     }
<a name="l00462"></a>00462     <a class="code" href="forums_8php.html#abf17cb2dba2ed17cb28aa5f37deb5293">$message</a>-&gt;addParam(<a class="code" href="libraries_2common_8inc_8php.html#a1697cbb709132a827a24cf16714b73ab" title="avoid problems in phpmyadmin.css.php in some cases  string $js_frame">$_REQUEST</a>[<span class="stringliteral">&#39;kill&#39;</span>]);
<a name="l00463"></a>00463     <span class="comment">//$message-&gt;display();</span>
<a name="l00464"></a>00464 }
<a name="l00465"></a>00465 
<a name="l00466"></a>00466 
<a name="l00467"></a>00467 <span class="comment"></span>
<a name="l00468"></a>00468 <span class="comment">/**</span>
<a name="l00469"></a>00469 <span class="comment"> * get status from server</span>
<a name="l00470"></a>00470 <span class="comment"> */</span>
<a name="l00471"></a><a class="code" href="server__status_8php.html#ae46650638d6130e555f8469eb632aadc">00471</a> <a class="code" href="server__status_8php.html#ae46650638d6130e555f8469eb632aadc" title="flush status variables if requested">$server_status</a> = <a class="code" href="database__interface_8lib_8php.html#a761f919096699667412d2ffd391eaa5b" title="returns all rows in the resultset in one array">PMA_DBI_fetch_result</a>(<span class="stringliteral">&#39;SHOW GLOBAL STATUS&#39;</span>, 0, 1);
<a name="l00472"></a>00472 <span class="keywordflow">if</span> (PMA_DRIZZLE) {
<a name="l00473"></a>00473     <span class="comment">// Drizzle doesn&#39;t put query statistics into variables, add it</span>
<a name="l00474"></a>00474     <a class="code" href="ldi_8php.html#a778a0e0eff4555e51ea81fd9d2851e84">$sql</a> = <span class="stringliteral">&quot;SELECT concat(&#39;Com_&#39;, variable_name), variable_value</span>
<a name="l00475"></a>00475 <span class="stringliteral">        FROM data_dictionary.GLOBAL_STATEMENTS&quot;</span>;
<a name="l00476"></a>00476     $statements = <a class="code" href="database__interface_8lib_8php.html#a761f919096699667412d2ffd391eaa5b" title="returns all rows in the resultset in one array">PMA_DBI_fetch_result</a>(<a class="code" href="ldi_8php.html#a778a0e0eff4555e51ea81fd9d2851e84">$sql</a>, 0, 1);
<a name="l00477"></a>00477     <a class="code" href="server__status_8php.html#ae46650638d6130e555f8469eb632aadc" title="flush status variables if requested">$server_status</a> = array_merge(<a class="code" href="server__status_8php.html#ae46650638d6130e555f8469eb632aadc" title="flush status variables if requested">$server_status</a>, $statements);
<a name="l00478"></a>00478 }
<a name="l00479"></a>00479 <span class="comment"></span>
<a name="l00480"></a>00480 <span class="comment">/**</span>
<a name="l00481"></a>00481 <span class="comment"> * for some calculations we require also some server settings</span>
<a name="l00482"></a>00482 <span class="comment"> */</span>
<a name="l00483"></a><a class="code" href="server__status_8php.html#a3efae2cf7f40445ed78a08cfc3b428b6">00483</a> <a class="code" href="server__status_8php.html#a3efae2cf7f40445ed78a08cfc3b428b6" title="for some calculations we require also some server settings">$server_variables</a> = <a class="code" href="database__interface_8lib_8php.html#a761f919096699667412d2ffd391eaa5b" title="returns all rows in the resultset in one array">PMA_DBI_fetch_result</a>(<span class="stringliteral">&#39;SHOW GLOBAL VARIABLES&#39;</span>, 0, 1);
<a name="l00484"></a>00484 <span class="comment"></span>
<a name="l00485"></a>00485 <span class="comment">/**</span>
<a name="l00486"></a>00486 <span class="comment"> * cleanup of some deprecated values</span>
<a name="l00487"></a>00487 <span class="comment"> */</span>
<a name="l00488"></a>00488 <a class="code" href="server__status_8php.html#a83b5a15a5ad32060bb1abe5966b579a8" title="cleanup of some deprecated values">cleanDeprecated</a>(<a class="code" href="server__status_8php.html#ae46650638d6130e555f8469eb632aadc" title="flush status variables if requested">$server_status</a>);
<a name="l00489"></a>00489 <span class="comment"></span>
<a name="l00490"></a>00490 <span class="comment">/**</span>
<a name="l00491"></a>00491 <span class="comment"> * calculate some values</span>
<a name="l00492"></a>00492 <span class="comment"> */</span>
<a name="l00493"></a>00493 <span class="comment">// Key_buffer_fraction</span>
<a name="l00494"></a>00494 <span class="keywordflow">if</span> (isset(<a class="code" href="server__status_8php.html#ae46650638d6130e555f8469eb632aadc" title="flush status variables if requested">$server_status</a>[<span class="stringliteral">&#39;Key_blocks_unused&#39;</span>])
<a name="l00495"></a>00495     &amp;&amp; isset(<a class="code" href="server__status_8php.html#a3efae2cf7f40445ed78a08cfc3b428b6" title="for some calculations we require also some server settings">$server_variables</a>[<span class="stringliteral">&#39;key_cache_block_size&#39;</span>])
<a name="l00496"></a>00496     &amp;&amp; isset(<a class="code" href="server__status_8php.html#a3efae2cf7f40445ed78a08cfc3b428b6" title="for some calculations we require also some server settings">$server_variables</a>[<span class="stringliteral">&#39;key_buffer_size&#39;</span>])
<a name="l00497"></a>00497 ) {
<a name="l00498"></a>00498     <a class="code" href="server__status_8php.html#ae46650638d6130e555f8469eb632aadc" title="flush status variables if requested">$server_status</a>[<span class="stringliteral">&#39;Key_buffer_fraction_%&#39;</span>]
<a name="l00499"></a>00499         = 100
<a name="l00500"></a>00500         - <a class="code" href="server__status_8php.html#ae46650638d6130e555f8469eb632aadc" title="flush status variables if requested">$server_status</a>[<span class="stringliteral">&#39;Key_blocks_unused&#39;</span>]
<a name="l00501"></a>00501         * <a class="code" href="server__status_8php.html#a3efae2cf7f40445ed78a08cfc3b428b6" title="for some calculations we require also some server settings">$server_variables</a>[<span class="stringliteral">&#39;key_cache_block_size&#39;</span>]
<a name="l00502"></a>00502         / <a class="code" href="server__status_8php.html#a3efae2cf7f40445ed78a08cfc3b428b6" title="for some calculations we require also some server settings">$server_variables</a>[<span class="stringliteral">&#39;key_buffer_size&#39;</span>]
<a name="l00503"></a>00503         * 100;
<a name="l00504"></a>00504 } <a class="code" href="import_8php.html#a7cbb4f0532e284397800df76c439983e">elseif</a> (isset(<a class="code" href="server__status_8php.html#ae46650638d6130e555f8469eb632aadc" title="flush status variables if requested">$server_status</a>[<span class="stringliteral">&#39;Key_blocks_used&#39;</span>])
<a name="l00505"></a>00505         &amp;&amp; isset(<a class="code" href="server__status_8php.html#a3efae2cf7f40445ed78a08cfc3b428b6" title="for some calculations we require also some server settings">$server_variables</a>[<span class="stringliteral">&#39;key_buffer_size&#39;</span>])) {
<a name="l00506"></a>00506     <a class="code" href="server__status_8php.html#ae46650638d6130e555f8469eb632aadc" title="flush status variables if requested">$server_status</a>[<span class="stringliteral">&#39;Key_buffer_fraction_%&#39;</span>]
<a name="l00507"></a>00507         = <a class="code" href="server__status_8php.html#ae46650638d6130e555f8469eb632aadc" title="flush status variables if requested">$server_status</a>[<span class="stringliteral">&#39;Key_blocks_used&#39;</span>]
<a name="l00508"></a>00508         * 1024
<a name="l00509"></a>00509         / <a class="code" href="server__status_8php.html#a3efae2cf7f40445ed78a08cfc3b428b6" title="for some calculations we require also some server settings">$server_variables</a>[<span class="stringliteral">&#39;key_buffer_size&#39;</span>];
<a name="l00510"></a>00510 }
<a name="l00511"></a>00511 
<a name="l00512"></a>00512 <span class="comment">// Ratio for key read/write</span>
<a name="l00513"></a>00513 <span class="keywordflow">if</span> (isset(<a class="code" href="server__status_8php.html#ae46650638d6130e555f8469eb632aadc" title="flush status variables if requested">$server_status</a>[<span class="stringliteral">&#39;Key_writes&#39;</span>])
<a name="l00514"></a>00514     &amp;&amp; isset(<a class="code" href="server__status_8php.html#ae46650638d6130e555f8469eb632aadc" title="flush status variables if requested">$server_status</a>[<span class="stringliteral">&#39;Key_write_requests&#39;</span>])
<a name="l00515"></a>00515     &amp;&amp; <a class="code" href="server__status_8php.html#ae46650638d6130e555f8469eb632aadc" title="flush status variables if requested">$server_status</a>[<span class="stringliteral">&#39;Key_write_requests&#39;</span>] &gt; 0
<a name="l00516"></a>00516 ) {
<a name="l00517"></a>00517     <a class="code" href="server__status_8php.html#ae46650638d6130e555f8469eb632aadc" title="flush status variables if requested">$server_status</a>[<span class="stringliteral">&#39;Key_write_ratio_%&#39;</span>] = 100 * <a class="code" href="server__status_8php.html#ae46650638d6130e555f8469eb632aadc" title="flush status variables if requested">$server_status</a>[<span class="stringliteral">&#39;Key_writes&#39;</span>] / <a class="code" href="server__status_8php.html#ae46650638d6130e555f8469eb632aadc" title="flush status variables if requested">$server_status</a>[<span class="stringliteral">&#39;Key_write_requests&#39;</span>];
<a name="l00518"></a>00518 }
<a name="l00519"></a>00519 
<a name="l00520"></a>00520 <span class="keywordflow">if</span> (isset(<a class="code" href="server__status_8php.html#ae46650638d6130e555f8469eb632aadc" title="flush status variables if requested">$server_status</a>[<span class="stringliteral">&#39;Key_reads&#39;</span>])
<a name="l00521"></a>00521     &amp;&amp; isset(<a class="code" href="server__status_8php.html#ae46650638d6130e555f8469eb632aadc" title="flush status variables if requested">$server_status</a>[<span class="stringliteral">&#39;Key_read_requests&#39;</span>])
<a name="l00522"></a>00522     &amp;&amp; <a class="code" href="server__status_8php.html#ae46650638d6130e555f8469eb632aadc" title="flush status variables if requested">$server_status</a>[<span class="stringliteral">&#39;Key_read_requests&#39;</span>] &gt; 0
<a name="l00523"></a>00523 ) {
<a name="l00524"></a>00524     <a class="code" href="server__status_8php.html#ae46650638d6130e555f8469eb632aadc" title="flush status variables if requested">$server_status</a>[<span class="stringliteral">&#39;Key_read_ratio_%&#39;</span>] = 100 * <a class="code" href="server__status_8php.html#ae46650638d6130e555f8469eb632aadc" title="flush status variables if requested">$server_status</a>[<span class="stringliteral">&#39;Key_reads&#39;</span>] / <a class="code" href="server__status_8php.html#ae46650638d6130e555f8469eb632aadc" title="flush status variables if requested">$server_status</a>[<span class="stringliteral">&#39;Key_read_requests&#39;</span>];
<a name="l00525"></a>00525 }
<a name="l00526"></a>00526 
<a name="l00527"></a>00527 <span class="comment">// Threads_cache_hitrate</span>
<a name="l00528"></a>00528 <span class="keywordflow">if</span> (isset(<a class="code" href="server__status_8php.html#ae46650638d6130e555f8469eb632aadc" title="flush status variables if requested">$server_status</a>[<span class="stringliteral">&#39;Threads_created&#39;</span>])
<a name="l00529"></a>00529     &amp;&amp; isset(<a class="code" href="server__status_8php.html#ae46650638d6130e555f8469eb632aadc" title="flush status variables if requested">$server_status</a>[<span class="stringliteral">&#39;Connections&#39;</span>])
<a name="l00530"></a>00530     &amp;&amp; <a class="code" href="server__status_8php.html#ae46650638d6130e555f8469eb632aadc" title="flush status variables if requested">$server_status</a>[<span class="stringliteral">&#39;Connections&#39;</span>] &gt; 0
<a name="l00531"></a>00531 ) {
<a name="l00532"></a>00532 
<a name="l00533"></a>00533     <a class="code" href="server__status_8php.html#ae46650638d6130e555f8469eb632aadc" title="flush status variables if requested">$server_status</a>[<span class="stringliteral">&#39;Threads_cache_hitrate_%&#39;</span>]
<a name="l00534"></a>00534         = 100 - <a class="code" href="server__status_8php.html#ae46650638d6130e555f8469eb632aadc" title="flush status variables if requested">$server_status</a>[<span class="stringliteral">&#39;Threads_created&#39;</span>] / <a class="code" href="server__status_8php.html#ae46650638d6130e555f8469eb632aadc" title="flush status variables if requested">$server_status</a>[<span class="stringliteral">&#39;Connections&#39;</span>] * 100;
<a name="l00535"></a>00535 }
<a name="l00536"></a>00536 <span class="comment"></span>
<a name="l00537"></a>00537 <span class="comment">/**</span>
<a name="l00538"></a>00538 <span class="comment"> * split variables in sections</span>
<a name="l00539"></a>00539 <span class="comment"> */</span>
<a name="l00540"></a><a class="code" href="server__status_8php.html#a4d1aedc7711e0f006fd6eef99195f0a1">00540</a> <a class="code" href="server__status_8php.html#a4d1aedc7711e0f006fd6eef99195f0a1" title="calculate some values">$allocations</a> = array(
<a name="l00541"></a>00541     <span class="comment">// variable name =&gt; section</span>
<a name="l00542"></a>00542     <span class="comment">// variable names match when they begin with the given string</span>
<a name="l00543"></a>00543 
<a name="l00544"></a>00544     <span class="stringliteral">&#39;Com_&#39;</span>              =&gt; <span class="stringliteral">&#39;com&#39;</span>,
<a name="l00545"></a>00545     <span class="stringliteral">&#39;Innodb_&#39;</span>           =&gt; <span class="stringliteral">&#39;innodb&#39;</span>,
<a name="l00546"></a>00546     <span class="stringliteral">&#39;Ndb_&#39;</span>              =&gt; <span class="stringliteral">&#39;ndb&#39;</span>,
<a name="l00547"></a>00547     <span class="stringliteral">&#39;Handler_&#39;</span>          =&gt; <span class="stringliteral">&#39;handler&#39;</span>,
<a name="l00548"></a>00548     <span class="stringliteral">&#39;Qcache_&#39;</span>           =&gt; <span class="stringliteral">&#39;qcache&#39;</span>,
<a name="l00549"></a>00549     <span class="stringliteral">&#39;Threads_&#39;</span>          =&gt; <span class="stringliteral">&#39;threads&#39;</span>,
<a name="l00550"></a>00550     <span class="stringliteral">&#39;Slow_launch_threads&#39;</span> =&gt; <span class="stringliteral">&#39;threads&#39;</span>,
<a name="l00551"></a>00551 
<a name="l00552"></a>00552     <span class="stringliteral">&#39;Binlog_cache_&#39;</span>     =&gt; <span class="stringliteral">&#39;binlog_cache&#39;</span>,
<a name="l00553"></a>00553     <span class="stringliteral">&#39;Created_tmp_&#39;</span>      =&gt; <span class="stringliteral">&#39;created_tmp&#39;</span>,
<a name="l00554"></a>00554     <span class="stringliteral">&#39;Key_&#39;</span>              =&gt; <span class="stringliteral">&#39;key&#39;</span>,
<a name="l00555"></a>00555 
<a name="l00556"></a>00556     <span class="stringliteral">&#39;Delayed_&#39;</span>          =&gt; <span class="stringliteral">&#39;delayed&#39;</span>,
<a name="l00557"></a>00557     <span class="stringliteral">&#39;Not_flushed_delayed_rows&#39;</span> =&gt; <span class="stringliteral">&#39;delayed&#39;</span>,
<a name="l00558"></a>00558 
<a name="l00559"></a>00559     <span class="stringliteral">&#39;Flush_commands&#39;</span>    =&gt; <span class="stringliteral">&#39;query&#39;</span>,
<a name="l00560"></a>00560     <span class="stringliteral">&#39;Last_query_cost&#39;</span>   =&gt; <span class="stringliteral">&#39;query&#39;</span>,
<a name="l00561"></a>00561     <span class="stringliteral">&#39;Slow_queries&#39;</span>      =&gt; <span class="stringliteral">&#39;query&#39;</span>,
<a name="l00562"></a>00562     <span class="stringliteral">&#39;Queries&#39;</span>           =&gt; <span class="stringliteral">&#39;query&#39;</span>,
<a name="l00563"></a>00563     <span class="stringliteral">&#39;Prepared_stmt_count&#39;</span> =&gt; <span class="stringliteral">&#39;query&#39;</span>,
<a name="l00564"></a>00564 
<a name="l00565"></a>00565     <span class="stringliteral">&#39;Select_&#39;</span>           =&gt; <span class="stringliteral">&#39;select&#39;</span>,
<a name="l00566"></a>00566     <span class="stringliteral">&#39;Sort_&#39;</span>             =&gt; <span class="stringliteral">&#39;sort&#39;</span>,
<a name="l00567"></a>00567 
<a name="l00568"></a>00568     <span class="stringliteral">&#39;Open_tables&#39;</span>       =&gt; <span class="stringliteral">&#39;table&#39;</span>,
<a name="l00569"></a>00569     <span class="stringliteral">&#39;Opened_tables&#39;</span>     =&gt; <span class="stringliteral">&#39;table&#39;</span>,
<a name="l00570"></a>00570     <span class="stringliteral">&#39;Open_table_definitions&#39;</span> =&gt; <span class="stringliteral">&#39;table&#39;</span>,
<a name="l00571"></a>00571     <span class="stringliteral">&#39;Opened_table_definitions&#39;</span> =&gt; <span class="stringliteral">&#39;table&#39;</span>,
<a name="l00572"></a>00572     <span class="stringliteral">&#39;Table_locks_&#39;</span>      =&gt; <span class="stringliteral">&#39;table&#39;</span>,
<a name="l00573"></a>00573 
<a name="l00574"></a>00574     <span class="stringliteral">&#39;Rpl_status&#39;</span>        =&gt; <span class="stringliteral">&#39;repl&#39;</span>,
<a name="l00575"></a>00575     <span class="stringliteral">&#39;Slave_&#39;</span>            =&gt; <span class="stringliteral">&#39;repl&#39;</span>,
<a name="l00576"></a>00576 
<a name="l00577"></a>00577     <span class="stringliteral">&#39;Tc_&#39;</span>               =&gt; <span class="stringliteral">&#39;tc&#39;</span>,
<a name="l00578"></a>00578 
<a name="l00579"></a>00579     <span class="stringliteral">&#39;Ssl_&#39;</span>              =&gt; <span class="stringliteral">&#39;ssl&#39;</span>,
<a name="l00580"></a>00580 
<a name="l00581"></a>00581     <span class="stringliteral">&#39;Open_files&#39;</span>        =&gt; <span class="stringliteral">&#39;files&#39;</span>,
<a name="l00582"></a>00582     <span class="stringliteral">&#39;Open_streams&#39;</span>      =&gt; <span class="stringliteral">&#39;files&#39;</span>,
<a name="l00583"></a>00583     <span class="stringliteral">&#39;Opened_files&#39;</span>      =&gt; <span class="stringliteral">&#39;files&#39;</span>,
<a name="l00584"></a>00584 );
<a name="l00585"></a>00585 
<a name="l00586"></a><a class="code" href="server__status_8php.html#acfc569a8bcd830e9d7a2847e652019d1">00586</a> <a class="code" href="server__status_8php.html#acfc569a8bcd830e9d7a2847e652019d1">$sections</a> = array(
<a name="l00587"></a>00587     <span class="comment">// section =&gt; section name (description)</span>
<a name="l00588"></a>00588     <span class="stringliteral">&#39;com&#39;</span>           =&gt; <span class="stringliteral">&#39;Com&#39;</span>,
<a name="l00589"></a>00589     <span class="stringliteral">&#39;query&#39;</span>         =&gt; __(<span class="stringliteral">&#39;SQL query&#39;</span>),
<a name="l00590"></a>00590     <span class="stringliteral">&#39;innodb&#39;</span>        =&gt; <span class="stringliteral">&#39;InnoDB&#39;</span>,
<a name="l00591"></a>00591     <span class="stringliteral">&#39;ndb&#39;</span>           =&gt; <span class="stringliteral">&#39;NDB&#39;</span>,
<a name="l00592"></a>00592     <span class="stringliteral">&#39;handler&#39;</span>       =&gt; __(<span class="stringliteral">&#39;Handler&#39;</span>),
<a name="l00593"></a>00593     <span class="stringliteral">&#39;qcache&#39;</span>        =&gt; __(<span class="stringliteral">&#39;Query cache&#39;</span>),
<a name="l00594"></a>00594     <span class="stringliteral">&#39;threads&#39;</span>       =&gt; __(<span class="stringliteral">&#39;Threads&#39;</span>),
<a name="l00595"></a>00595     <span class="stringliteral">&#39;binlog_cache&#39;</span>  =&gt; __(<span class="stringliteral">&#39;Binary log&#39;</span>),
<a name="l00596"></a>00596     <span class="stringliteral">&#39;created_tmp&#39;</span>   =&gt; __(<span class="stringliteral">&#39;Temporary data&#39;</span>),
<a name="l00597"></a>00597     <span class="stringliteral">&#39;delayed&#39;</span>       =&gt; __(<span class="stringliteral">&#39;Delayed inserts&#39;</span>),
<a name="l00598"></a>00598     <span class="stringliteral">&#39;key&#39;</span>           =&gt; __(<span class="stringliteral">&#39;Key cache&#39;</span>),
<a name="l00599"></a>00599     <span class="stringliteral">&#39;select&#39;</span>        =&gt; __(<span class="stringliteral">&#39;Joins&#39;</span>),
<a name="l00600"></a>00600     <span class="stringliteral">&#39;repl&#39;</span>          =&gt; __(<span class="stringliteral">&#39;Replication&#39;</span>),
<a name="l00601"></a>00601     <span class="stringliteral">&#39;sort&#39;</span>          =&gt; __(<span class="stringliteral">&#39;Sorting&#39;</span>),
<a name="l00602"></a>00602     <span class="stringliteral">&#39;table&#39;</span>         =&gt; __(<span class="stringliteral">&#39;Tables&#39;</span>),
<a name="l00603"></a>00603     <span class="stringliteral">&#39;tc&#39;</span>            =&gt; __(<span class="stringliteral">&#39;Transaction coordinator&#39;</span>),
<a name="l00604"></a>00604     <span class="stringliteral">&#39;files&#39;</span>         =&gt; __(<span class="stringliteral">&#39;Files&#39;</span>),
<a name="l00605"></a>00605     <span class="stringliteral">&#39;ssl&#39;</span>           =&gt; <span class="stringliteral">&#39;SSL&#39;</span>,
<a name="l00606"></a>00606     <span class="stringliteral">&#39;other&#39;</span>         =&gt; __(<span class="stringliteral">&#39;Other&#39;</span>)
<a name="l00607"></a>00607 );
<a name="l00608"></a>00608 <span class="comment"></span>
<a name="l00609"></a>00609 <span class="comment">/**</span>
<a name="l00610"></a>00610 <span class="comment"> * define some needfull links/commands</span>
<a name="l00611"></a>00611 <span class="comment"> */</span>
<a name="l00612"></a>00612 <span class="comment">// variable or section name =&gt; (name =&gt; url)</span>
<a name="l00613"></a><a class="code" href="server__status_8php.html#a4ca8be3ff3cf95aa3af546449c1f1bec">00613</a> <a class="code" href="server__status_8php.html#a4ca8be3ff3cf95aa3af546449c1f1bec" title="define some needfull links/commands">$links</a> = array();
<a name="l00614"></a>00614 
<a name="l00615"></a>00615 <a class="code" href="server__status_8php.html#a4ca8be3ff3cf95aa3af546449c1f1bec" title="define some needfull links/commands">$links</a>[<span class="stringliteral">&#39;table&#39;</span>][__(<span class="stringliteral">&#39;Flush (close) all tables&#39;</span>)]
<a name="l00616"></a><a class="code" href="server__status_8php.html#a99322ec53a67361f5054cc6bd517429f">00616</a>     = <a class="code" href="libraries_2common_8inc_8php.html#ad1902cf35d5833813480ed05793a096b" title="PATH_INFO could be compromised if set, so remove it from PHP_SELF and provide a clean PHP_SELF here...">$PMA_PHP_SELF</a> . <span class="stringliteral">&#39;?flush=TABLES&amp;amp;&#39;</span> . <a class="code" href="url__generating_8lib_8php.html#ad5c0cfef7cb600a158a1ef5fa321a094" title="Generates text with URL parameters.">PMA_generate_common_url</a>();
<a name="l00617"></a>00617 <a class="code" href="server__status_8php.html#a4ca8be3ff3cf95aa3af546449c1f1bec" title="define some needfull links/commands">$links</a>[<span class="stringliteral">&#39;table&#39;</span>][__(<span class="stringliteral">&#39;Show open tables&#39;</span>)]
<a name="l00618"></a><a class="code" href="server__status_8php.html#a22d1cc4cb5558c8d1a02e547dcd2e186">00618</a>     = <span class="stringliteral">&#39;sql.php?sql_query=&#39;</span> . urlencode(<span class="stringliteral">&#39;SHOW OPEN TABLES&#39;</span>) .
<a name="l00619"></a>00619         <span class="stringliteral">&#39;&amp;amp;goto=server_status.php&amp;amp;&#39;</span> . <a class="code" href="url__generating_8lib_8php.html#ad5c0cfef7cb600a158a1ef5fa321a094" title="Generates text with URL parameters.">PMA_generate_common_url</a>();
<a name="l00620"></a>00620 
<a name="l00621"></a>00621 <span class="keywordflow">if</span> ($server_master_status) {
<a name="l00622"></a>00622     <a class="code" href="server__status_8php.html#a4ca8be3ff3cf95aa3af546449c1f1bec" title="define some needfull links/commands">$links</a>[<span class="stringliteral">&#39;repl&#39;</span>][__(<span class="stringliteral">&#39;Show slave hosts&#39;</span>)]
<a name="l00623"></a>00623         = <span class="stringliteral">&#39;sql.php?sql_query=&#39;</span> . urlencode(<span class="stringliteral">&#39;SHOW SLAVE HOSTS&#39;</span>) .
<a name="l00624"></a>00624             <span class="stringliteral">&#39;&amp;amp;goto=server_status.php&amp;amp;&#39;</span> . <a class="code" href="url__generating_8lib_8php.html#ad5c0cfef7cb600a158a1ef5fa321a094" title="Generates text with URL parameters.">PMA_generate_common_url</a>();
<a name="l00625"></a>00625     <a class="code" href="server__status_8php.html#a4ca8be3ff3cf95aa3af546449c1f1bec" title="define some needfull links/commands">$links</a>[<span class="stringliteral">&#39;repl&#39;</span>][__(<span class="stringliteral">&#39;Show master status&#39;</span>)] = <span class="stringliteral">&#39;#replication_master&#39;</span>;
<a name="l00626"></a>00626 }
<a name="l00627"></a>00627 <span class="keywordflow">if</span> ($server_slave_status) {
<a name="l00628"></a>00628     <a class="code" href="server__status_8php.html#a4ca8be3ff3cf95aa3af546449c1f1bec" title="define some needfull links/commands">$links</a>[<span class="stringliteral">&#39;repl&#39;</span>][__(<span class="stringliteral">&#39;Show slave status&#39;</span>)] = <span class="stringliteral">&#39;#replication_slave&#39;</span>;
<a name="l00629"></a>00629 }
<a name="l00630"></a>00630 
<a name="l00631"></a><a class="code" href="server__status_8php.html#a898fc9222b76c0304b999bab06d519b6">00631</a> <a class="code" href="server__status_8php.html#a4ca8be3ff3cf95aa3af546449c1f1bec" title="define some needfull links/commands">$links</a>[<span class="stringliteral">&#39;repl&#39;</span>][<span class="stringliteral">&#39;doc&#39;</span>] = <span class="stringliteral">&#39;replication&#39;</span>;
<a name="l00632"></a>00632 
<a name="l00633"></a>00633 <a class="code" href="server__status_8php.html#a4ca8be3ff3cf95aa3af546449c1f1bec" title="define some needfull links/commands">$links</a>[<span class="stringliteral">&#39;qcache&#39;</span>][__(<span class="stringliteral">&#39;Flush query cache&#39;</span>)]
<a name="l00634"></a><a class="code" href="server__status_8php.html#a413d31b9e761a77fa39bf4ea85405eab">00634</a>     = <a class="code" href="libraries_2common_8inc_8php.html#ad1902cf35d5833813480ed05793a096b" title="PATH_INFO could be compromised if set, so remove it from PHP_SELF and provide a clean PHP_SELF here...">$PMA_PHP_SELF</a> . <span class="stringliteral">&#39;?flush=&#39;</span> . urlencode(<span class="stringliteral">&#39;QUERY CACHE&#39;</span>) . <span class="stringliteral">&#39;&amp;amp;&#39;</span> .
<a name="l00635"></a>00635         <a class="code" href="url__generating_8lib_8php.html#ad5c0cfef7cb600a158a1ef5fa321a094" title="Generates text with URL parameters.">PMA_generate_common_url</a>();
<a name="l00636"></a><a class="code" href="server__status_8php.html#aa1654d9b76b47b9361d8f745d1b399f1">00636</a> <a class="code" href="server__status_8php.html#a4ca8be3ff3cf95aa3af546449c1f1bec" title="define some needfull links/commands">$links</a>[<span class="stringliteral">&#39;qcache&#39;</span>][<span class="stringliteral">&#39;doc&#39;</span>] = <span class="stringliteral">&#39;query_cache&#39;</span>;
<a name="l00637"></a>00637 
<a name="l00638"></a>00638 <span class="comment">//$links[&#39;threads&#39;][__(&#39;Show processes&#39;)]</span>
<a name="l00639"></a>00639 <span class="comment">//    = &#39;server_processlist.php?&#39; . PMA_generate_common_url();</span>
<a name="l00640"></a><a class="code" href="server__status_8php.html#af73985d5218b3f637fce3eb459df5d26">00640</a> <a class="code" href="server__status_8php.html#a4ca8be3ff3cf95aa3af546449c1f1bec" title="define some needfull links/commands">$links</a>[<span class="stringliteral">&#39;threads&#39;</span>][<span class="stringliteral">&#39;doc&#39;</span>] = <span class="stringliteral">&#39;mysql_threads&#39;</span>;
<a name="l00641"></a>00641 
<a name="l00642"></a><a class="code" href="server__status_8php.html#ad5793a9b7d8f089c8ab44e7560fec0d4">00642</a> <a class="code" href="server__status_8php.html#a4ca8be3ff3cf95aa3af546449c1f1bec" title="define some needfull links/commands">$links</a>[<span class="stringliteral">&#39;key&#39;</span>][<span class="stringliteral">&#39;doc&#39;</span>] = <span class="stringliteral">&#39;myisam_key_cache&#39;</span>;
<a name="l00643"></a>00643 
<a name="l00644"></a><a class="code" href="server__status_8php.html#a094b0ec00d2693645b3200bc5dd8b7ad">00644</a> <a class="code" href="server__status_8php.html#a4ca8be3ff3cf95aa3af546449c1f1bec" title="define some needfull links/commands">$links</a>[<span class="stringliteral">&#39;binlog_cache&#39;</span>][<span class="stringliteral">&#39;doc&#39;</span>] = <span class="stringliteral">&#39;binary_log&#39;</span>;
<a name="l00645"></a>00645 
<a name="l00646"></a><a class="code" href="server__status_8php.html#aeaac5d056fdcee976d5791674e4241cc">00646</a> <a class="code" href="server__status_8php.html#a4ca8be3ff3cf95aa3af546449c1f1bec" title="define some needfull links/commands">$links</a>[<span class="stringliteral">&#39;Slow_queries&#39;</span>][<span class="stringliteral">&#39;doc&#39;</span>] = <span class="stringliteral">&#39;slow_query_log&#39;</span>;
<a name="l00647"></a>00647 
<a name="l00648"></a>00648 <a class="code" href="server__status_8php.html#a4ca8be3ff3cf95aa3af546449c1f1bec" title="define some needfull links/commands">$links</a>[<span class="stringliteral">&#39;innodb&#39;</span>][__(<span class="stringliteral">&#39;Variables&#39;</span>)]
<a name="l00649"></a><a class="code" href="server__status_8php.html#a8260dee14e38141e59b1f46d396fee9f">00649</a>     = <span class="stringliteral">&#39;server_engines.php?engine=InnoDB&amp;amp;&#39;</span> . <a class="code" href="url__generating_8lib_8php.html#ad5c0cfef7cb600a158a1ef5fa321a094" title="Generates text with URL parameters.">PMA_generate_common_url</a>();
<a name="l00650"></a>00650 <a class="code" href="server__status_8php.html#a4ca8be3ff3cf95aa3af546449c1f1bec" title="define some needfull links/commands">$links</a>[<span class="stringliteral">&#39;innodb&#39;</span>][__(<span class="stringliteral">&#39;InnoDB Status&#39;</span>)]
<a name="l00651"></a><a class="code" href="server__status_8php.html#a9d18098cd4ddddd95bfebcb53309c2c6">00651</a>     = <span class="stringliteral">&#39;server_engines.php?engine=InnoDB&amp;amp;page=Status&amp;amp;&#39;</span> .
<a name="l00652"></a>00652         <a class="code" href="url__generating_8lib_8php.html#ad5c0cfef7cb600a158a1ef5fa321a094" title="Generates text with URL parameters.">PMA_generate_common_url</a>();
<a name="l00653"></a><a class="code" href="server__status_8php.html#addf1e15afb7fc0e9d380fab387c818ee">00653</a> <a class="code" href="server__status_8php.html#a4ca8be3ff3cf95aa3af546449c1f1bec" title="define some needfull links/commands">$links</a>[<span class="stringliteral">&#39;innodb&#39;</span>][<span class="stringliteral">&#39;doc&#39;</span>] = <span class="stringliteral">&#39;innodb&#39;</span>;
<a name="l00654"></a>00654 
<a name="l00655"></a>00655 
<a name="l00656"></a>00656 <span class="comment">// Variable to contain all com_ variables (query statistics)</span>
<a name="l00657"></a><a class="code" href="server__status_8php.html#ad883405f4899fc4e91c5f43d70963285">00657</a> <a class="code" href="server__status_8php.html#ad883405f4899fc4e91c5f43d70963285">$used_queries</a> = array();
<a name="l00658"></a>00658 
<a name="l00659"></a>00659 <span class="comment">// Variable to map variable names to their respective section name</span>
<a name="l00660"></a>00660 <span class="comment">// (used for js category filtering)</span>
<a name="l00661"></a><a class="code" href="server__status_8php.html#a12f5f9f3c55f9deebc15074b7e60693a">00661</a> <a class="code" href="server__status_8php.html#a12f5f9f3c55f9deebc15074b7e60693a">$allocationMap</a> = array();
<a name="l00662"></a>00662 
<a name="l00663"></a>00663 <span class="comment">// Variable to mark used sections</span>
<a name="l00664"></a><a class="code" href="server__status_8php.html#a6d9cc86fb3b610fb7dd4ad41abaacbb6">00664</a> <a class="code" href="server__status_8php.html#a6d9cc86fb3b610fb7dd4ad41abaacbb6">$categoryUsed</a> = array();
<a name="l00665"></a>00665 
<a name="l00666"></a>00666 <span class="comment">// sort vars into arrays</span>
<a name="l00667"></a>00667 <span class="keywordflow">foreach</span> (<a class="code" href="server__status_8php.html#ae46650638d6130e555f8469eb632aadc" title="flush status variables if requested">$server_status</a> as <a class="code" href="wab_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a> =&gt; $value) {
<a name="l00668"></a>00668     $section_found = <span class="keyword">false</span>;
<a name="l00669"></a>00669     <span class="keywordflow">foreach</span> (<a class="code" href="server__status_8php.html#a4d1aedc7711e0f006fd6eef99195f0a1" title="calculate some values">$allocations</a> as $filter =&gt; $section) {
<a name="l00670"></a>00670         <span class="keywordflow">if</span> (strpos(<a class="code" href="wab_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a>, $filter) !== <span class="keyword">false</span>) {
<a name="l00671"></a>00671             <a class="code" href="server__status_8php.html#a12f5f9f3c55f9deebc15074b7e60693a">$allocationMap</a>[<a class="code" href="wab_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a>] = $section;
<a name="l00672"></a>00672             <a class="code" href="server__status_8php.html#a6d9cc86fb3b610fb7dd4ad41abaacbb6">$categoryUsed</a>[$section] = <span class="keyword">true</span>;
<a name="l00673"></a>00673             $section_found = <span class="keyword">true</span>;
<a name="l00674"></a>00674             <span class="keywordflow">if</span> ($section == <span class="stringliteral">&#39;com&#39;</span> &amp;&amp; $value &gt; 0) {
<a name="l00675"></a>00675                 <a class="code" href="server__status_8php.html#ad883405f4899fc4e91c5f43d70963285">$used_queries</a>[<a class="code" href="wab_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a>] = $value;
<a name="l00676"></a>00676             }
<a name="l00677"></a>00677             <span class="keywordflow">break</span>; <span class="comment">// Only exits inner loop</span>
<a name="l00678"></a>00678         }
<a name="l00679"></a>00679     }
<a name="l00680"></a>00680     <span class="keywordflow">if</span> (!$section_found) {
<a name="l00681"></a>00681         <a class="code" href="server__status_8php.html#a12f5f9f3c55f9deebc15074b7e60693a">$allocationMap</a>[<a class="code" href="wab_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a>] = <span class="stringliteral">&#39;other&#39;</span>;
<a name="l00682"></a>00682         <a class="code" href="server__status_8php.html#a6d9cc86fb3b610fb7dd4ad41abaacbb6">$categoryUsed</a>[<span class="stringliteral">&#39;other&#39;</span>] = <span class="keyword">true</span>;
<a name="l00683"></a>00683     }
<a name="l00684"></a>00684 }
<a name="l00685"></a>00685 
<a name="l00686"></a>00686 <span class="keywordflow">if</span> (PMA_DRIZZLE) {
<a name="l00687"></a>00687     <a class="code" href="server__status_8php.html#ad883405f4899fc4e91c5f43d70963285">$used_queries</a> = <a class="code" href="database__interface_8lib_8php.html#a761f919096699667412d2ffd391eaa5b" title="returns all rows in the resultset in one array">PMA_DBI_fetch_result</a>(
<a name="l00688"></a>00688         <span class="stringliteral">&#39;SELECT * FROM data_dictionary.global_statements&#39;</span>,
<a name="l00689"></a>00689         0,
<a name="l00690"></a>00690         1
<a name="l00691"></a>00691     );
<a name="l00692"></a>00692     unset(<a class="code" href="server__status_8php.html#ad883405f4899fc4e91c5f43d70963285">$used_queries</a>[<span class="stringliteral">&#39;admin_commands&#39;</span>]);
<a name="l00693"></a>00693 } <span class="keywordflow">else</span> {
<a name="l00694"></a>00694     <span class="comment">// admin commands are not queries (e.g. they include COM_PING,</span>
<a name="l00695"></a>00695     <span class="comment">// which is excluded from $server_status[&#39;Questions&#39;])</span>
<a name="l00696"></a>00696     unset(<a class="code" href="server__status_8php.html#ad883405f4899fc4e91c5f43d70963285">$used_queries</a>[<span class="stringliteral">&#39;Com_admin_commands&#39;</span>]);
<a name="l00697"></a>00697 }
<a name="l00698"></a>00698 
<a name="l00699"></a>00699 <span class="comment">/* Ajax request refresh */</span>
<a name="l00700"></a>00700 <span class="keywordflow">if</span> (isset(<a class="code" href="libraries_2common_8inc_8php.html#a1697cbb709132a827a24cf16714b73ab" title="avoid problems in phpmyadmin.css.php in some cases  string $js_frame">$_REQUEST</a>[<span class="stringliteral">&#39;show&#39;</span>]) &amp;&amp; isset(<a class="code" href="libraries_2common_8inc_8php.html#a1697cbb709132a827a24cf16714b73ab" title="avoid problems in phpmyadmin.css.php in some cases  string $js_frame">$_REQUEST</a>[<span class="stringliteral">&#39;ajax_request&#39;</span>])) {
<a name="l00701"></a>00701     <span class="keywordflow">switch</span>(<a class="code" href="libraries_2common_8inc_8php.html#a1697cbb709132a827a24cf16714b73ab" title="avoid problems in phpmyadmin.css.php in some cases  string $js_frame">$_REQUEST</a>[<span class="stringliteral">&#39;show&#39;</span>]) {
<a name="l00702"></a>00702     <span class="keywordflow">case</span> <span class="stringliteral">&#39;query_statistics&#39;</span>:
<a name="l00703"></a>00703         <a class="code" href="server__status_8php.html#a5a528c5a548663f7b55c3b481c794a02">printQueryStatistics</a>();
<a name="l00704"></a>00704         <a class="code" href="footer_8inc_8php.html#a74ed6a30cde2182cef18dc4d7d998773" title="for PMA_setHistory()">exit</a>();
<a name="l00705"></a>00705     <span class="keywordflow">case</span> <span class="stringliteral">&#39;server_traffic&#39;</span>:
<a name="l00706"></a>00706         <a class="code" href="server__status_8php.html#abfe999235a56a874471934cd49e1598d">printServerTraffic</a>();
<a name="l00707"></a>00707         <a class="code" href="footer_8inc_8php.html#a74ed6a30cde2182cef18dc4d7d998773" title="for PMA_setHistory()">exit</a>();
<a name="l00708"></a>00708     <span class="keywordflow">case</span> <span class="stringliteral">&#39;variables_table&#39;</span>:
<a name="l00709"></a>00709         <span class="comment">// Prints the variables table</span>
<a name="l00710"></a>00710         <a class="code" href="server__status_8php.html#af7c520088b239c155d14d04d4490d83e">printVariablesTable</a>();
<a name="l00711"></a>00711         <a class="code" href="footer_8inc_8php.html#a74ed6a30cde2182cef18dc4d7d998773" title="for PMA_setHistory()">exit</a>();
<a name="l00712"></a>00712 
<a name="l00713"></a>00713     <span class="keywordflow">default</span>:
<a name="l00714"></a>00714         <span class="keywordflow">break</span>;
<a name="l00715"></a>00715     }
<a name="l00716"></a>00716 }
<a name="l00717"></a>00717 
<a name="l00718"></a>00718 $server_db_isLocal = strtolower(<a class="code" href="config_8sample_8inc_8php.html#a5ac38f46d4564a4e13a55c9143828d61">$cfg</a>[<span class="stringliteral">&#39;Server&#39;</span>][<span class="stringliteral">&#39;host&#39;</span>]) == <span class="stringliteral">&#39;localhost&#39;</span>
<a name="l00719"></a>00719                               || <a class="code" href="config_8sample_8inc_8php.html#a5ac38f46d4564a4e13a55c9143828d61">$cfg</a>[<span class="stringliteral">&#39;Server&#39;</span>][<span class="stringliteral">&#39;host&#39;</span>] == <span class="stringliteral">&#39;127.0.0.1&#39;</span>
<a name="l00720"></a>00720                               || <a class="code" href="config_8sample_8inc_8php.html#a5ac38f46d4564a4e13a55c9143828d61">$cfg</a>[<span class="stringliteral">&#39;Server&#39;</span>][<span class="stringliteral">&#39;host&#39;</span>] == <span class="stringliteral">&#39;::1&#39;</span>;
<a name="l00721"></a>00721 
<a name="l00722"></a>00722 <a class="code" href="core_8lib_8php.html#aa955beb8be3e7145b6d097ad7b3800fe" title="Adds JS code snippet for variable assignment to be displayed by header.inc.php.">PMA_AddJSVar</a>(
<a name="l00723"></a>00723     <span class="stringliteral">&#39;pma_token&#39;</span>,
<a name="l00724"></a>00724     <a class="code" href="wab_8php.html#a7e78406241b519489b23a8c902b4a8de">$_SESSION</a>[<span class="stringliteral">&#39; PMA_token &#39;</span>]
<a name="l00725"></a>00725 );
<a name="l00726"></a>00726 <a class="code" href="core_8lib_8php.html#aa955beb8be3e7145b6d097ad7b3800fe" title="Adds JS code snippet for variable assignment to be displayed by header.inc.php.">PMA_AddJSVar</a>(
<a name="l00727"></a>00727     <span class="stringliteral">&#39;url_query&#39;</span>,
<a name="l00728"></a>00728     str_replace(<span class="stringliteral">&#39;&amp;amp;&#39;</span>, <span class="charliteral">&#39;&amp;&#39;</span>, <a class="code" href="url__generating_8lib_8php.html#ad5c0cfef7cb600a158a1ef5fa321a094" title="Generates text with URL parameters.">PMA_generate_common_url</a>(<a class="code" href="schema__export_8php.html#a907d78797a1b764e913b0c565a5097b0" title="get all the export options and verify call and include the appropriate Schema Class depending on $exp...">$db</a>))
<a name="l00729"></a>00729 );
<a name="l00730"></a>00730 <a class="code" href="core_8lib_8php.html#aa955beb8be3e7145b6d097ad7b3800fe" title="Adds JS code snippet for variable assignment to be displayed by header.inc.php.">PMA_AddJSVar</a>(
<a name="l00731"></a>00731     <span class="stringliteral">&#39;server_time_diff&#39;</span>,
<a name="l00732"></a>00732     <span class="stringliteral">&#39;new Date().getTime() - &#39;</span> . (microtime(<span class="keyword">true</span>) * 1000),
<a name="l00733"></a>00733     <span class="keyword">false</span>
<a name="l00734"></a>00734 );
<a name="l00735"></a>00735 <a class="code" href="core_8lib_8php.html#aa955beb8be3e7145b6d097ad7b3800fe" title="Adds JS code snippet for variable assignment to be displayed by header.inc.php.">PMA_AddJSVar</a>(
<a name="l00736"></a>00736     <span class="stringliteral">&#39;server_os&#39;</span>,
<a name="l00737"></a>00737     PHP_OS
<a name="l00738"></a>00738 );
<a name="l00739"></a>00739 <a class="code" href="core_8lib_8php.html#aa955beb8be3e7145b6d097ad7b3800fe" title="Adds JS code snippet for variable assignment to be displayed by header.inc.php.">PMA_AddJSVar</a>(
<a name="l00740"></a>00740     <span class="stringliteral">&#39;is_superuser&#39;</span>,
<a name="l00741"></a>00741     <a class="code" href="database__interface_8lib_8php.html#a8625f640d7f62aa247791803ac9ab54b" title="returns true (int &gt; 0) if current user is superuser otherwise 0">PMA_isSuperuser</a>()
<a name="l00742"></a>00742 );
<a name="l00743"></a>00743 <a class="code" href="core_8lib_8php.html#aa955beb8be3e7145b6d097ad7b3800fe" title="Adds JS code snippet for variable assignment to be displayed by header.inc.php.">PMA_AddJSVar</a>(
<a name="l00744"></a>00744     <span class="stringliteral">&#39;server_db_isLocal&#39;</span>,
<a name="l00745"></a>00745     $server_db_isLocal
<a name="l00746"></a>00746 );
<a name="l00747"></a>00747 <a class="code" href="core_8lib_8php.html#aa955beb8be3e7145b6d097ad7b3800fe" title="Adds JS code snippet for variable assignment to be displayed by header.inc.php.">PMA_AddJSVar</a>(
<a name="l00748"></a>00748     <span class="stringliteral">&#39;profiling_docu&#39;</span>,
<a name="l00749"></a>00749     <a class="code" href="common_8lib_8php.html#a5b2c38942cb8fe55e02ba17d0bef9f15" title="Displays a link to the official MySQL documentation.">PMA_showMySQLDocu</a>(<span class="stringliteral">&#39;general-thread-states&#39;</span>, <span class="stringliteral">&#39;general-thread-states&#39;</span>)
<a name="l00750"></a>00750 );
<a name="l00751"></a>00751 <a class="code" href="core_8lib_8php.html#aa955beb8be3e7145b6d097ad7b3800fe" title="Adds JS code snippet for variable assignment to be displayed by header.inc.php.">PMA_AddJSVar</a>(
<a name="l00752"></a>00752     <span class="stringliteral">&#39;explain_docu&#39;</span>,
<a name="l00753"></a>00753     <a class="code" href="common_8lib_8php.html#a5b2c38942cb8fe55e02ba17d0bef9f15" title="Displays a link to the official MySQL documentation.">PMA_showMySQLDocu</a>(<span class="stringliteral">&#39;explain-output&#39;</span>, <span class="stringliteral">&#39;explain-output&#39;</span>)
<a name="l00754"></a>00754 );
<a name="l00755"></a>00755 <span class="comment"></span>
<a name="l00756"></a>00756 <span class="comment">/**</span>
<a name="l00757"></a>00757 <span class="comment"> * start output</span>
<a name="l00758"></a>00758 <span class="comment"> */</span>
<a name="l00759"></a>00759 <span class="comment"></span>
<a name="l00760"></a>00760 <span class="comment"> /**</span>
<a name="l00761"></a>00761 <span class="comment"> * Does the common work</span>
<a name="l00762"></a>00762 <span class="comment"> */</span>
<a name="l00763"></a>00763 require <span class="stringliteral">&#39;./libraries/server_common.inc.php&#39;</span>;
<a name="l00764"></a>00764 
<a name="l00765"></a>00765 
<a name="l00766"></a>00766 <span class="comment"></span>
<a name="l00767"></a>00767 <span class="comment">/**</span>
<a name="l00768"></a>00768 <span class="comment"> * Displays the links</span>
<a name="l00769"></a>00769 <span class="comment"> */</span>
<a name="l00770"></a>00770 require <span class="stringliteral">&#39;./libraries/server_links.inc.php&#39;</span>;
<a name="l00771"></a>00771 
<a name="l00772"></a>00772 ?&gt;
<a name="l00773"></a>00773 &lt;div <span class="keywordtype">id</span>=<span class="stringliteral">&quot;serverstatus&quot;</span>&gt;
<a name="l00774"></a>00774     &lt;h2&gt;&lt;?php<span class="comment"></span>
<a name="l00775"></a>00775 <span class="comment">/**</span>
<a name="l00776"></a>00776 <span class="comment"> * Displays the sub-page heading</span>
<a name="l00777"></a>00777 <span class="comment"> */</span>
<a name="l00778"></a><a class="code" href="server__status_8php.html#a4d22f288882fcb3cffc40a2dbf98f60e">00778</a> <span class="keywordflow">if</span> (<a class="code" href="config_2config_8php.html#aad108a6abffdea835bc6cc2f3244751e">$GLOBALS</a>[<span class="stringliteral">&#39;cfg&#39;</span>][<span class="stringliteral">&#39;MainPageIconic&#39;</span>]) {
<a name="l00779"></a>00779     echo <a class="code" href="common_8lib_8php.html#a54fdec9763bf305a5082d23a5d7d5957" title="Returns an HTML IMG tag for a particular image from a theme, which may be an actual file or an icon f...">PMA_getImage</a>(<span class="stringliteral">&#39;s_status.png&#39;</span>);
<a name="l00780"></a>00780 }
<a name="l00781"></a>00781 
<a name="l00782"></a>00782 echo __(<span class="stringliteral">&#39;Runtime Information&#39;</span>);
<a name="l00783"></a>00783 
<a name="l00784"></a>00784 ?&gt;&lt;/h2&gt;
<a name="l00785"></a>00785     &lt;div <span class="keywordtype">id</span>=<span class="stringliteral">&quot;serverStatusTabs&quot;</span>&gt;
<a name="l00786"></a>00786         &lt;ul&gt;
<a name="l00787"></a>00787             &lt;li&gt;&lt;<a class="code" href="original_2css_2theme__right_8css_8php.html#a85f522b5d557b63fe501c729a79560df">a</a> href=<span class="stringliteral">&quot;#statustabs_traffic&quot;</span>&gt;&lt;?php echo __(<span class="stringliteral">&#39;Server&#39;</span>); ?&gt;&lt;/<a class="code" href="original_2css_2theme__right_8css_8php.html#a85f522b5d557b63fe501c729a79560df">a</a>&gt;&lt;/li&gt;
<a name="l00788"></a>00788             &lt;li&gt;&lt;<a class="code" href="original_2css_2theme__right_8css_8php.html#a85f522b5d557b63fe501c729a79560df">a</a> href=<span class="stringliteral">&quot;#statustabs_queries&quot;</span>&gt;&lt;?php echo __(<span class="stringliteral">&#39;Query statistics&#39;</span>); ?&gt;&lt;/<a class="code" href="original_2css_2theme__right_8css_8php.html#a85f522b5d557b63fe501c729a79560df">a</a>&gt;&lt;/li&gt;
<a name="l00789"></a>00789             &lt;li&gt;&lt;<a class="code" href="original_2css_2theme__right_8css_8php.html#a85f522b5d557b63fe501c729a79560df">a</a> href=<span class="stringliteral">&quot;#statustabs_allvars&quot;</span>&gt;&lt;?php echo __(<span class="stringliteral">&#39;All status variables&#39;</span>); ?&gt;&lt;/<a class="code" href="original_2css_2theme__right_8css_8php.html#a85f522b5d557b63fe501c729a79560df">a</a>&gt;&lt;/li&gt;
<a name="l00790"></a>00790             &lt;li <span class="keyword">class</span>=<span class="stringliteral">&quot;jsfeature&quot;</span>&gt;&lt;<a class="code" href="original_2css_2theme__right_8css_8php.html#a85f522b5d557b63fe501c729a79560df">a</a> href=<span class="stringliteral">&quot;#statustabs_charting&quot;</span>&gt;&lt;?php echo __(<span class="stringliteral">&#39;Monitor&#39;</span>); ?&gt;&lt;/<a class="code" href="original_2css_2theme__right_8css_8php.html#a85f522b5d557b63fe501c729a79560df">a</a>&gt;&lt;/li&gt;
<a name="l00791"></a>00791             &lt;li <span class="keyword">class</span>=<span class="stringliteral">&quot;jsfeature&quot;</span>&gt;&lt;<a class="code" href="original_2css_2theme__right_8css_8php.html#a85f522b5d557b63fe501c729a79560df">a</a> href=<span class="stringliteral">&quot;#statustabs_advisor&quot;</span>&gt;&lt;?php echo __(<span class="stringliteral">&#39;Advisor&#39;</span>); ?&gt;&lt;/<a class="code" href="original_2css_2theme__right_8css_8php.html#a85f522b5d557b63fe501c729a79560df">a</a>&gt;&lt;/li&gt;
<a name="l00792"></a>00792         &lt;/ul&gt;
<a name="l00793"></a>00793 
<a name="l00794"></a>00794         &lt;div <span class="keywordtype">id</span>=<span class="stringliteral">&quot;statustabs_traffic&quot;</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;clearfloat&quot;</span>&gt;
<a name="l00795"></a>00795             &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;buttonlinks jsfeature&quot;</span>&gt;
<a name="l00796"></a>00796                 &lt;<a class="code" href="original_2css_2theme__right_8css_8php.html#a85f522b5d557b63fe501c729a79560df">a</a> <span class="keyword">class</span>=<span class="stringliteral">&quot;tabRefresh&quot;</span> href=<span class="stringliteral">&quot;&lt;?php echo $PMA_PHP_SELF . &#39;?show=server_traffic&amp;amp;&#39; . PMA_generate_common_url(); ?&gt;&quot;</span> &gt;
<a name="l00797"></a>00797                     &lt;img src=<span class="stringliteral">&quot;&lt;?php echo $GLOBALS[&#39;pmaThemeImage&#39;];?&gt;ajax_clock_small.gif&quot;</span> alt=<span class="stringliteral">&quot;ajax clock&quot;</span> style=<span class="stringliteral">&quot;display: none;&quot;</span> /&gt;
<a name="l00798"></a>00798                     &lt;?php echo __(<span class="stringliteral">&#39;Refresh&#39;</span>); ?&gt;
<a name="l00799"></a>00799                 &lt;/<a class="code" href="original_2css_2theme__right_8css_8php.html#a85f522b5d557b63fe501c729a79560df">a</a>&gt;
<a name="l00800"></a>00800                 &lt;span <span class="keyword">class</span>=<span class="stringliteral">&quot;refreshList&quot;</span> style=<span class="stringliteral">&quot;display:none;&quot;</span>&gt;
<a name="l00801"></a>00801                     &lt;label <span class="keywordflow">for</span>=<span class="stringliteral">&quot;id_trafficChartRefresh&quot;</span>&gt;&lt;?php echo __(<span class="stringliteral">&#39;Refresh rate: &#39;</span>); ?&gt;&lt;/label&gt;
<a name="l00802"></a>00802                     &lt;?php <a class="code" href="server__status_8php.html#a7e69f133303e6a45a0edffd671ff004e">refreshList</a>(<span class="stringliteral">&#39;trafficChartRefresh&#39;</span>); ?&gt;
<a name="l00803"></a>00803                 &lt;/span&gt;
<a name="l00804"></a>00804 
<a name="l00805"></a>00805                 &lt;<a class="code" href="original_2css_2theme__right_8css_8php.html#a85f522b5d557b63fe501c729a79560df">a</a> <span class="keyword">class</span>=<span class="stringliteral">&quot;tabChart livetrafficLink&quot;</span> href=<span class="stringliteral">&quot;#&quot;</span>&gt;
<a name="l00806"></a>00806                     &lt;?php echo __(<span class="stringliteral">&#39;Live traffic chart&#39;</span>); ?&gt;
<a name="l00807"></a>00807                 &lt;/a&gt;
<a name="l00808"></a>00808                 &lt;a <span class="keyword">class</span>=<span class="stringliteral">&quot;tabChart liveconnectionsLink&quot;</span> href=<span class="stringliteral">&quot;#&quot;</span>&gt;
<a name="l00809"></a>00809                     &lt;?php echo __(<span class="stringliteral">&#39;Live conn./process chart&#39;</span>); ?&gt;
<a name="l00810"></a>00810                 &lt;/a&gt;
<a name="l00811"></a>00811             &lt;/div&gt;
<a name="l00812"></a>00812             &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;tabInnerContent&quot;</span>&gt;
<a name="l00813"></a>00813                 &lt;?php <a class="code" href="server__status_8php.html#abfe999235a56a874471934cd49e1598d">printServerTraffic</a>(); ?&gt;
<a name="l00814"></a>00814             &lt;/div&gt;
<a name="l00815"></a>00815         &lt;/div&gt;
<a name="l00816"></a>00816         &lt;div <span class="keywordtype">id</span>=<span class="stringliteral">&quot;statustabs_queries&quot;</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;clearfloat&quot;</span>&gt;
<a name="l00817"></a>00817             &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;buttonlinks jsfeature&quot;</span>&gt;
<a name="l00818"></a>00818                 &lt;a <span class="keyword">class</span>=<span class="stringliteral">&quot;tabRefresh&quot;</span>  href=<span class="stringliteral">&quot;&lt;?php echo $PMA_PHP_SELF . &#39;?show=query_statistics&amp;amp;&#39; . PMA_generate_common_url(); ?&gt;&quot;</span> &gt;
<a name="l00819"></a>00819                     &lt;img src=<span class="stringliteral">&quot;&lt;?php echo $GLOBALS[&#39;pmaThemeImage&#39;];?&gt;ajax_clock_small.gif&quot;</span> alt=<span class="stringliteral">&quot;ajax clock&quot;</span> style=<span class="stringliteral">&quot;display: none;&quot;</span> /&gt;
<a name="l00820"></a>00820                     &lt;?php echo __(<span class="stringliteral">&#39;Refresh&#39;</span>); ?&gt;
<a name="l00821"></a>00821                 &lt;/a&gt;
<a name="l00822"></a>00822                 &lt;span <span class="keyword">class</span>=<span class="stringliteral">&quot;refreshList&quot;</span> style=<span class="stringliteral">&quot;display:none;&quot;</span>&gt;
<a name="l00823"></a>00823                     &lt;label <span class="keywordflow">for</span>=<span class="stringliteral">&quot;id_queryChartRefresh&quot;</span>&gt;&lt;?php echo __(<span class="stringliteral">&#39;Refresh rate: &#39;</span>); ?&gt;&lt;/label&gt;
<a name="l00824"></a>00824                        &lt;?php <a class="code" href="server__status_8php.html#a7e69f133303e6a45a0edffd671ff004e">refreshList</a>(<span class="stringliteral">&#39;queryChartRefresh&#39;</span>); ?&gt;
<a name="l00825"></a>00825                 &lt;/span&gt;
<a name="l00826"></a>00826                 &lt;a <span class="keyword">class</span>=<span class="stringliteral">&quot;tabChart livequeriesLink&quot;</span> href=<span class="stringliteral">&quot;#&quot;</span>&gt;
<a name="l00827"></a>00827                     &lt;?php echo __(<span class="stringliteral">&#39;Live query chart&#39;</span>); ?&gt;
<a name="l00828"></a>00828                 &lt;/a&gt;
<a name="l00829"></a>00829             &lt;/div&gt;
<a name="l00830"></a>00830             &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;tabInnerContent&quot;</span>&gt;
<a name="l00831"></a>00831                 &lt;?php <a class="code" href="server__status_8php.html#a5a528c5a548663f7b55c3b481c794a02">printQueryStatistics</a>(); ?&gt;
<a name="l00832"></a>00832             &lt;/div&gt;
<a name="l00833"></a>00833         &lt;/div&gt;
<a name="l00834"></a>00834         &lt;div <span class="keywordtype">id</span>=<span class="stringliteral">&quot;statustabs_allvars&quot;</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;clearfloat&quot;</span>&gt;
<a name="l00835"></a>00835             &lt;fieldset <span class="keywordtype">id</span>=<span class="stringliteral">&quot;tableFilter&quot;</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;jsfeature&quot;</span>&gt;
<a name="l00836"></a>00836                 &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;buttonlinks&quot;</span>&gt;
<a name="l00837"></a>00837                     &lt;a <span class="keyword">class</span>=<span class="stringliteral">&quot;tabRefresh&quot;</span> href=<span class="stringliteral">&quot;&lt;?php echo $PMA_PHP_SELF . &#39;?show=variables_table&amp;amp;&#39; . PMA_generate_common_url(); ?&gt;&quot;</span> &gt;
<a name="l00838"></a>00838                         &lt;img src=<span class="stringliteral">&quot;&lt;?php echo $GLOBALS[&#39;pmaThemeImage&#39;];?&gt;ajax_clock_small.gif&quot;</span> alt=<span class="stringliteral">&quot;ajax clock&quot;</span> style=<span class="stringliteral">&quot;display: none;&quot;</span> /&gt;
<a name="l00839"></a>00839                         &lt;?php echo __(<span class="stringliteral">&#39;Refresh&#39;</span>); ?&gt;
<a name="l00840"></a>00840                     &lt;/a&gt;
<a name="l00841"></a>00841                 &lt;/div&gt;
<a name="l00842"></a>00842                 &lt;legend&gt;&lt;?php echo __(<span class="stringliteral">&#39;Filters&#39;</span>); ?&gt;&lt;/legend&gt;
<a name="l00843"></a>00843                 &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;formelement&quot;</span>&gt;
<a name="l00844"></a>00844                     &lt;label <span class="keywordflow">for</span>=<span class="stringliteral">&quot;filterText&quot;</span>&gt;&lt;?php echo __(<span class="stringliteral">&#39;Containing the word:&#39;</span>); ?&gt;&lt;/label&gt;
<a name="l00845"></a>00845                     &lt;input name=<span class="stringliteral">&quot;filterText&quot;</span> <a class="code" href="original_2css_2theme__right_8css_8php.html#ae1d92a0cf6d4204d310bc3b8ef7ec56a">type</a>=<span class="stringliteral">&quot;text&quot;</span> <span class="keywordtype">id</span>=<span class="stringliteral">&quot;filterText&quot;</span> style=<span class="stringliteral">&quot;vertical-align: baseline;&quot;</span> /&gt;
<a name="l00846"></a>00846                 &lt;/div&gt;
<a name="l00847"></a>00847                 &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;formelement&quot;</span>&gt;
<a name="l00848"></a>00848                     &lt;input <a class="code" href="original_2css_2theme__right_8css_8php.html#ae1d92a0cf6d4204d310bc3b8ef7ec56a">type</a>=<span class="stringliteral">&quot;checkbox&quot;</span> name=<span class="stringliteral">&quot;filterAlert&quot;</span> <span class="keywordtype">id</span>=<span class="stringliteral">&quot;filterAlert&quot;</span> /&gt;
<a name="l00849"></a>00849                     &lt;label <span class="keywordflow">for</span>=<span class="stringliteral">&quot;filterAlert&quot;</span>&gt;&lt;?php echo __(<span class="stringliteral">&#39;Show only alert values&#39;</span>); ?&gt;&lt;/label&gt;
<a name="l00850"></a>00850                 &lt;/div&gt;
<a name="l00851"></a>00851                 &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;formelement&quot;</span>&gt;
<a name="l00852"></a>00852                     &lt;select <span class="keywordtype">id</span>=<span class="stringliteral">&quot;filterCategory&quot;</span> name=<span class="stringliteral">&quot;filterCategory&quot;</span>&gt;
<a name="l00853"></a>00853                         &lt;option value=<span class="stringliteral">&#39;&#39;</span>&gt;&lt;?php echo __(<span class="stringliteral">&#39;Filter by category...&#39;</span>); ?&gt;&lt;/option&gt;
<a name="l00854"></a>00854                 &lt;?php
<a name="l00855"></a><a class="code" href="server__status_8php.html#a888792f5395df2663353077728d2d832">00855</a>                         <span class="keywordflow">foreach</span> (<a class="code" href="server__status_8php.html#acfc569a8bcd830e9d7a2847e652019d1">$sections</a> as $section_id =&gt; $section_name) {
<a name="l00856"></a>00856                             <span class="keywordflow">if</span> (isset(<a class="code" href="server__status_8php.html#a6d9cc86fb3b610fb7dd4ad41abaacbb6">$categoryUsed</a>[$section_id])) {
<a name="l00857"></a>00857                 ?&gt;
<a name="l00858"></a>00858                                 &lt;option value=<span class="stringliteral">&#39;&lt;?php echo $section_id; ?&gt;&#39;</span>&gt;&lt;?php echo $section_name; ?&gt;&lt;/option&gt;
<a name="l00859"></a>00859                 &lt;?php
<a name="l00860"></a>00860                             }
<a name="l00861"></a>00861                         }
<a name="l00862"></a>00862                 ?&gt;
<a name="l00863"></a>00863                     &lt;/select&gt;
<a name="l00864"></a>00864                 &lt;/div&gt;
<a name="l00865"></a>00865                 &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;formelement&quot;</span>&gt;
<a name="l00866"></a>00866                     &lt;input type=<span class="stringliteral">&quot;checkbox&quot;</span> name=<span class="stringliteral">&quot;dontFormat&quot;</span> <span class="keywordtype">id</span>=<span class="stringliteral">&quot;dontFormat&quot;</span> /&gt;
<a name="l00867"></a>00867                     &lt;label <span class="keywordflow">for</span>=<span class="stringliteral">&quot;dontFormat&quot;</span>&gt;&lt;?php echo __(<span class="stringliteral">&#39;Show unformatted values&#39;</span>); ?&gt;&lt;/label&gt;
<a name="l00868"></a>00868                 &lt;/div&gt;
<a name="l00869"></a>00869             &lt;/fieldset&gt;
<a name="l00870"></a>00870             &lt;div <span class="keywordtype">id</span>=<span class="stringliteral">&quot;linkSuggestions&quot;</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;defaultLinks&quot;</span> style=<span class="stringliteral">&quot;display:none&quot;</span>&gt;
<a name="l00871"></a>00871                 &lt;p <span class="keyword">class</span>=<span class="stringliteral">&quot;notice&quot;</span>&gt;&lt;?php echo __(<span class="stringliteral">&#39;Related links:&#39;</span>); ?&gt;
<a name="l00872"></a>00872                 &lt;?php
<a name="l00873"></a>00873                 <span class="keywordflow">foreach</span> (<a class="code" href="server__status_8php.html#a4ca8be3ff3cf95aa3af546449c1f1bec" title="define some needfull links/commands">$links</a> as $section_name =&gt; $section_links) {
<a name="l00874"></a>00874                     echo <span class="stringliteral">&#39;&lt;span class=&quot;status_&#39;</span> . $section_name . <span class="stringliteral">&#39;&quot;&gt; &#39;</span>;
<a name="l00875"></a>00875                     <a class="code" href="config_8sample_8inc_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a>=0;
<a name="l00876"></a>00876                     <span class="keywordflow">foreach</span> ($section_links as $link_name =&gt; $link_url) {
<a name="l00877"></a>00877                         <span class="keywordflow">if</span> (<a class="code" href="config_8sample_8inc_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a> &gt; 0) {
<a name="l00878"></a>00878                             echo <span class="stringliteral">&#39;, &#39;</span>;
<a name="l00879"></a>00879                         }
<a name="l00880"></a>00880                         <span class="keywordflow">if</span> (<span class="stringliteral">&#39;doc&#39;</span> == $link_name) {
<a name="l00881"></a>00881                             echo <a class="code" href="common_8lib_8php.html#a5b2c38942cb8fe55e02ba17d0bef9f15" title="Displays a link to the official MySQL documentation.">PMA_showMySQLDocu</a>($link_url, $link_url);
<a name="l00882"></a>00882                         } <span class="keywordflow">else</span> {
<a name="l00883"></a>00883                             echo <span class="stringliteral">&#39;&lt;a href=&quot;&#39;</span> . $link_url . <span class="stringliteral">&#39;&quot;&gt;&#39;</span> . $link_name . <span class="stringliteral">&#39;&lt;/a&gt;&#39;</span>;
<a name="l00884"></a>00884                         }
<a name="l00885"></a>00885                         <a class="code" href="config_8sample_8inc_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a>++;
<a name="l00886"></a>00886                     }
<a name="l00887"></a>00887                     echo <span class="stringliteral">&#39;&lt;/span&gt;&#39;</span>;
<a name="l00888"></a>00888                 }
<a name="l00889"></a>00889                 unset($link_url, $link_name, <a class="code" href="config_8sample_8inc_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a>);
<a name="l00890"></a>00890                 ?&gt;
<a name="l00891"></a>00891                 &lt;/p&gt;
<a name="l00892"></a>00892             &lt;/div&gt;
<a name="l00893"></a>00893             &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;tabInnerContent&quot;</span>&gt;
<a name="l00894"></a>00894                 &lt;?php <a class="code" href="server__status_8php.html#af7c520088b239c155d14d04d4490d83e">printVariablesTable</a>(); ?&gt;
<a name="l00895"></a>00895             &lt;/div&gt;
<a name="l00896"></a>00896         &lt;/div&gt;
<a name="l00897"></a>00897 
<a name="l00898"></a>00898         &lt;div <span class="keywordtype">id</span>=<span class="stringliteral">&quot;statustabs_charting&quot;</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;jsfeature&quot;</span>&gt;
<a name="l00899"></a>00899             &lt;?php <a class="code" href="server__status_8php.html#ad11dde67e2c4bb10ec198e26e7f3287f">printMonitor</a>(); ?&gt;
<a name="l00900"></a>00900         &lt;/div&gt;
<a name="l00901"></a>00901 
<a name="l00902"></a>00902         &lt;div <span class="keywordtype">id</span>=<span class="stringliteral">&quot;statustabs_advisor&quot;</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;jsfeature&quot;</span>&gt;
<a name="l00903"></a>00903             &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;tabLinks&quot;</span>&gt;
<a name="l00904"></a>00904                 &lt;?php echo <a class="code" href="common_8lib_8php.html#a54fdec9763bf305a5082d23a5d7d5957" title="Returns an HTML IMG tag for a particular image from a theme, which may be an actual file or an icon f...">PMA_getImage</a>(<span class="stringliteral">&#39;play.png&#39;</span>); ?&gt; &lt;a href=<span class="stringliteral">&quot;#startAnalyzer&quot;</span>&gt;&lt;?php echo __(<span class="stringliteral">&#39;Run analyzer&#39;</span>); ?&gt;&lt;/a&gt;
<a name="l00905"></a>00905                 &lt;?php echo <a class="code" href="common_8lib_8php.html#a54fdec9763bf305a5082d23a5d7d5957" title="Returns an HTML IMG tag for a particular image from a theme, which may be an actual file or an icon f...">PMA_getImage</a>(<span class="stringliteral">&#39;b_help.png&#39;</span>); ?&gt; &lt;a href=<span class="stringliteral">&quot;#openAdvisorInstructions&quot;</span>&gt;&lt;?php echo __(<span class="stringliteral">&#39;Instructions&#39;</span>); ?&gt;&lt;/a&gt;
<a name="l00906"></a>00906             &lt;/div&gt;
<a name="l00907"></a>00907             &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;tabInnerContent clearfloat&quot;</span>&gt;
<a name="l00908"></a>00908             &lt;/div&gt;
<a name="l00909"></a>00909             &lt;div <span class="keywordtype">id</span>=<span class="stringliteral">&quot;advisorInstructionsDialog&quot;</span> style=<span class="stringliteral">&quot;display:none;&quot;</span>&gt;
<a name="l00910"></a>00910             &lt;?php
<a name="l00911"></a>00911             echo <span class="stringliteral">&#39;&lt;p&gt;&#39;</span>;
<a name="l00912"></a>00912             echo __(<span class="stringliteral">&#39;The Advisor system can provide recommendations on server variables by analyzing the server status variables.&#39;</span>);
<a name="l00913"></a>00913             echo <span class="stringliteral">&#39;&lt;/p&gt; &lt;p&gt;&#39;</span>;
<a name="l00914"></a>00914             echo __(<span class="stringliteral">&#39;Do note however that this system provides recommendations based on simple calculations and by rule of thumb which may not necessarily apply to your system.&#39;</span>);
<a name="l00915"></a>00915             echo <span class="stringliteral">&#39;&lt;/p&gt; &lt;p&gt;&#39;</span>;
<a name="l00916"></a>00916             echo __(<span class="stringliteral">&#39;Prior to changing any of the configuration, be sure to know what you are changing (by reading the documentation) and how to undo the change. Wrong tuning can have a very negative effect on performance.&#39;</span>);
<a name="l00917"></a>00917             echo <span class="stringliteral">&#39;&lt;/p&gt; &lt;p&gt;&#39;</span>;
<a name="l00918"></a>00918             echo __(<span class="stringliteral">&#39;The best way to tune your system would be to change only one setting at a time, observe or benchmark your database, and undo the change if there was no clearly measurable improvement.&#39;</span>);
<a name="l00919"></a>00919             echo <span class="stringliteral">&#39;&lt;/p&gt;&#39;</span>;
<a name="l00920"></a>00920             ?&gt;
<a name="l00921"></a>00921             &lt;/div&gt;
<a name="l00922"></a>00922         &lt;/div&gt;
<a name="l00923"></a>00923     &lt;/div&gt;
<a name="l00924"></a>00924 &lt;/div&gt;
<a name="l00925"></a>00925 
<a name="l00926"></a>00926 &lt;?php
<a name="l00927"></a>00927 
<a name="l00928"></a><a class="code" href="server__status_8php.html#a5a528c5a548663f7b55c3b481c794a02">00928</a> <span class="keyword">function</span> <a class="code" href="server__status_8php.html#a5a528c5a548663f7b55c3b481c794a02">printQueryStatistics</a>()
<a name="l00929"></a>00929 {
<a name="l00930"></a>00930     global <a class="code" href="server__status_8php.html#ae46650638d6130e555f8469eb632aadc" title="flush status variables if requested">$server_status</a>, <a class="code" href="server__status_8php.html#ad883405f4899fc4e91c5f43d70963285">$used_queries</a>, <a class="code" href="db__export_8php.html#a9f97d7db14905bd6ce32b003b416769c">$url_query</a>, <a class="code" href="libraries_2common_8inc_8php.html#ad1902cf35d5833813480ed05793a096b" title="PATH_INFO could be compromised if set, so remove it from PHP_SELF and provide a clean PHP_SELF here...">$PMA_PHP_SELF</a>;
<a name="l00931"></a>00931 
<a name="l00932"></a>00932     $hour_factor   = 3600 / $server_status[<span class="stringliteral">&#39;Uptime&#39;</span>];
<a name="l00933"></a>00933 
<a name="l00934"></a>00934     $total_queries = array_sum($used_queries);
<a name="l00935"></a>00935 
<a name="l00936"></a>00936     ?&gt;
<a name="l00937"></a>00937     &lt;h3 <span class="keywordtype">id</span>=<span class="stringliteral">&quot;serverstatusqueries&quot;</span>&gt;
<a name="l00938"></a>00938         &lt;?php
<a name="l00939"></a>00939         <span class="comment">/* l10n: Questions is the name of a MySQL Status variable */</span>
<a name="l00940"></a>00940         echo sprintf(__(<span class="stringliteral">&#39;Questions since startup: %s&#39;</span>), <a class="code" href="common_8lib_8php.html#abeaeabaf95ad63e5163642ff03ec6879" title="Formats $value to the given length and appends SI prefixes with a $length of 0 no truncation occurs...">PMA_formatNumber</a>($total_queries, 0)) . <span class="charliteral">&#39; &#39;</span>;
<a name="l00941"></a>00941         echo <a class="code" href="common_8lib_8php.html#a5b2c38942cb8fe55e02ba17d0bef9f15" title="Displays a link to the official MySQL documentation.">PMA_showMySQLDocu</a>(<span class="stringliteral">&#39;server-status-variables&#39;</span>, <span class="stringliteral">&#39;server-status-variables&#39;</span>, <span class="keyword">false</span>, <span class="stringliteral">&#39;statvar_Questions&#39;</span>);
<a name="l00942"></a>00942         ?&gt;
<a name="l00943"></a>00943         &lt;br /&gt;
<a name="l00944"></a>00944         &lt;span&gt;
<a name="l00945"></a>00945         &lt;?php
<a name="l00946"></a>00946         echo <span class="stringliteral">&#39;&amp;oslash; &#39;</span> . __(<span class="stringliteral">&#39;per hour&#39;</span>) . <span class="stringliteral">&#39;: &#39;</span>;
<a name="l00947"></a>00947         echo <a class="code" href="common_8lib_8php.html#abeaeabaf95ad63e5163642ff03ec6879" title="Formats $value to the given length and appends SI prefixes with a $length of 0 no truncation occurs...">PMA_formatNumber</a>($total_queries * $hour_factor, 0);
<a name="l00948"></a>00948         echo <span class="stringliteral">&#39;&lt;br /&gt;&#39;</span>;
<a name="l00949"></a>00949 
<a name="l00950"></a>00950         echo <span class="stringliteral">&#39;&amp;oslash; &#39;</span> . __(<span class="stringliteral">&#39;per minute&#39;</span>) . <span class="stringliteral">&#39;: &#39;</span>;
<a name="l00951"></a>00951         echo <a class="code" href="common_8lib_8php.html#abeaeabaf95ad63e5163642ff03ec6879" title="Formats $value to the given length and appends SI prefixes with a $length of 0 no truncation occurs...">PMA_formatNumber</a>($total_queries * 60 / $server_status[<span class="stringliteral">&#39;Uptime&#39;</span>], 0);
<a name="l00952"></a>00952         echo <span class="stringliteral">&#39;&lt;br /&gt;&#39;</span>;
<a name="l00953"></a>00953 
<a name="l00954"></a>00954         <span class="keywordflow">if</span> ($total_queries / $server_status[<span class="stringliteral">&#39;Uptime&#39;</span>] &gt;= 1) {
<a name="l00955"></a>00955             echo <span class="stringliteral">&#39;&amp;oslash; &#39;</span> . __(<span class="stringliteral">&#39;per second&#39;</span>) . <span class="stringliteral">&#39;: &#39;</span>;
<a name="l00956"></a>00956             echo <a class="code" href="common_8lib_8php.html#abeaeabaf95ad63e5163642ff03ec6879" title="Formats $value to the given length and appends SI prefixes with a $length of 0 no truncation occurs...">PMA_formatNumber</a>($total_queries / $server_status[<span class="stringliteral">&#39;Uptime&#39;</span>], 0);
<a name="l00957"></a>00957         }
<a name="l00958"></a>00958         ?&gt;
<a name="l00959"></a>00959         &lt;/span&gt;
<a name="l00960"></a>00960     &lt;/h3&gt;
<a name="l00961"></a>00961     &lt;?php
<a name="l00962"></a>00962 
<a name="l00963"></a>00963     <span class="comment">// reverse sort by value to show most used statements first</span>
<a name="l00964"></a>00964     arsort($used_queries);
<a name="l00965"></a>00965 
<a name="l00966"></a>00966     <a class="code" href="db__qbe_8php.html#aa97fee01a612c36c64d62b32a99d5b5d">$odd_row</a>        = <span class="keyword">true</span>;
<a name="l00967"></a>00967     $count_displayed_rows = 0;
<a name="l00968"></a>00968     $perc_factor    = 100 / $total_queries; <span class="comment">//(- $server_status[&#39;Connections&#39;]);</span>
<a name="l00969"></a>00969 
<a name="l00970"></a>00970     ?&gt;
<a name="l00971"></a>00971 
<a name="l00972"></a>00972         &lt;table <span class="keywordtype">id</span>=<span class="stringliteral">&quot;serverstatusqueriesdetails&quot;</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;data sortable noclick&quot;</span>&gt;
<a name="l00973"></a>00973         &lt;col <span class="keyword">class</span>=<span class="stringliteral">&quot;namecol&quot;</span> /&gt;
<a name="l00974"></a>00974         &lt;col <span class="keyword">class</span>=<span class="stringliteral">&quot;valuecol&quot;</span> span=<span class="stringliteral">&quot;3&quot;</span> /&gt;
<a name="l00975"></a>00975         &lt;thead&gt;
<a name="l00976"></a>00976             &lt;tr&gt;&lt;th&gt;&lt;?php echo __(<span class="stringliteral">&#39;Statements&#39;</span>); ?&gt;&lt;/th&gt;
<a name="l00977"></a>00977                 &lt;th&gt;&lt;?php
<a name="l00978"></a>00978                     <span class="comment">/* l10n: # = Amount of queries */</span>
<a name="l00979"></a>00979                     echo __(<span class="charliteral">&#39;#&#39;</span>);
<a name="l00980"></a>00980                     ?&gt;
<a name="l00981"></a>00981                 &lt;/th&gt;
<a name="l00982"></a>00982                 &lt;th&gt;&amp;oslash; &lt;?php echo __(<span class="stringliteral">&#39;per hour&#39;</span>); ?&gt;&lt;/th&gt;
<a name="l00983"></a>00983                 &lt;th&gt;%&lt;/th&gt;
<a name="l00984"></a>00984             &lt;/tr&gt;
<a name="l00985"></a>00985         &lt;/thead&gt;
<a name="l00986"></a>00986         &lt;tbody&gt;
<a name="l00987"></a>00987 
<a name="l00988"></a>00988     &lt;?php
<a name="l00989"></a>00989     $chart_json = array();
<a name="l00990"></a>00990     $query_sum = array_sum($used_queries);
<a name="l00991"></a>00991     $other_sum = 0;
<a name="l00992"></a>00992     <span class="keywordflow">foreach</span> ($used_queries as <a class="code" href="wab_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a> =&gt; $value) {
<a name="l00993"></a>00993         <a class="code" href="db__qbe_8php.html#aa97fee01a612c36c64d62b32a99d5b5d">$odd_row</a> = !<a class="code" href="db__qbe_8php.html#aa97fee01a612c36c64d62b32a99d5b5d">$odd_row</a>;
<a name="l00994"></a>00994 
<a name="l00995"></a>00995         <span class="comment">// For the percentage column, use Questions - Connections, because</span>
<a name="l00996"></a>00996         <span class="comment">// the number of connections is not an item of the Query types</span>
<a name="l00997"></a>00997         <span class="comment">// but is included in Questions. Then the total of the percentages is 100.</span>
<a name="l00998"></a>00998         <a class="code" href="wab_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a> = str_replace(array(<span class="stringliteral">&#39;Com_&#39;</span>, <span class="charliteral">&#39;_&#39;</span>), array(<span class="stringliteral">&#39;&#39;</span>, <span class="charliteral">&#39; &#39;</span>), <a class="code" href="wab_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a>);
<a name="l00999"></a>00999 
<a name="l01000"></a>01000         <span class="comment">// Group together values that make out less than 2% into &quot;Other&quot;, but only if we have more than 6 fractions already</span>
<a name="l01001"></a>01001         <span class="keywordflow">if</span> ($value &lt; $query_sum * 0.02 &amp;&amp; count($chart_json)&gt;6) {
<a name="l01002"></a>01002             $other_sum += $value;
<a name="l01003"></a>01003         } <span class="keywordflow">else</span> {
<a name="l01004"></a>01004             $chart_json[<a class="code" href="wab_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a>] = $value;
<a name="l01005"></a>01005         }
<a name="l01006"></a>01006     ?&gt;
<a name="l01007"></a>01007             &lt;tr <span class="keyword">class</span>=<span class="stringliteral">&quot;&lt;?php echo $odd_row ? &#39;odd&#39; : &#39;even&#39;; ?&gt;&quot;</span>&gt;
<a name="l01008"></a>01008                 &lt;th <span class="keyword">class</span>=<span class="stringliteral">&quot;name&quot;</span>&gt;&lt;?php echo htmlspecialchars(<a class="code" href="wab_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a>); ?&gt;&lt;/th&gt;
<a name="l01009"></a>01009                 &lt;<a class="code" href="original_2css_2theme__right_8css_8php.html#a2cb7bbff99e906a4fef499891dc9e6f5">td</a> <span class="keyword">class</span>=<span class="stringliteral">&quot;value&quot;</span>&gt;&lt;?php echo htmlspecialchars(<a class="code" href="common_8lib_8php.html#abeaeabaf95ad63e5163642ff03ec6879" title="Formats $value to the given length and appends SI prefixes with a $length of 0 no truncation occurs...">PMA_formatNumber</a>($value, 5, 0, <span class="keyword">true</span>)); ?&gt;&lt;/td&gt;
<a name="l01010"></a>01010                 &lt;td <span class="keyword">class</span>=<span class="stringliteral">&quot;value&quot;</span>&gt;&lt;?php echo
<a name="l01011"></a>01011                     htmlspecialchars(<a class="code" href="common_8lib_8php.html#abeaeabaf95ad63e5163642ff03ec6879" title="Formats $value to the given length and appends SI prefixes with a $length of 0 no truncation occurs...">PMA_formatNumber</a>($value * $hour_factor, 4, 1, <span class="keyword">true</span>)); ?&gt;&lt;/td&gt;
<a name="l01012"></a>01012                 &lt;td <span class="keyword">class</span>=<span class="stringliteral">&quot;value&quot;</span>&gt;&lt;?php echo
<a name="l01013"></a>01013                     htmlspecialchars(<a class="code" href="common_8lib_8php.html#abeaeabaf95ad63e5163642ff03ec6879" title="Formats $value to the given length and appends SI prefixes with a $length of 0 no truncation occurs...">PMA_formatNumber</a>($value * $perc_factor, 0, 2)); ?&gt;%&lt;/td&gt;
<a name="l01014"></a>01014             &lt;/tr&gt;
<a name="l01015"></a>01015     &lt;?php
<a name="l01016"></a>01016     }
<a name="l01017"></a>01017     ?&gt;
<a name="l01018"></a>01018         &lt;/tbody&gt;
<a name="l01019"></a>01019         &lt;/table&gt;
<a name="l01020"></a>01020 
<a name="l01021"></a>01021         &lt;div <span class="keywordtype">id</span>=<span class="stringliteral">&quot;serverstatusquerieschart&quot;</span>&gt;
<a name="l01022"></a>01022             &lt;span style=<span class="stringliteral">&quot;display:none;&quot;</span>&gt;
<a name="l01023"></a>01023         &lt;?php
<a name="l01024"></a>01024             <span class="keywordflow">if</span> ($other_sum &gt; 0) {
<a name="l01025"></a>01025                 $chart_json[__(<span class="stringliteral">&#39;Other&#39;</span>)] = $other_sum;
<a name="l01026"></a>01026             }
<a name="l01027"></a>01027 
<a name="l01028"></a>01028             echo json_encode($chart_json);
<a name="l01029"></a>01029         ?&gt;
<a name="l01030"></a>01030             &lt;/span&gt;
<a name="l01031"></a>01031         &lt;/div&gt;
<a name="l01032"></a>01032         &lt;?php
<a name="l01033"></a>01033 }
<a name="l01034"></a>01034 
<a name="l01035"></a><a class="code" href="server__status_8php.html#abfe999235a56a874471934cd49e1598d">01035</a> <span class="keyword">function</span> <a class="code" href="server__status_8php.html#abfe999235a56a874471934cd49e1598d">printServerTraffic</a>()
<a name="l01036"></a>01036 {
<a name="l01037"></a>01037     global <a class="code" href="server__status_8php.html#ae46650638d6130e555f8469eb632aadc" title="flush status variables if requested">$server_status</a>, <a class="code" href="libraries_2common_8inc_8php.html#ad1902cf35d5833813480ed05793a096b" title="PATH_INFO could be compromised if set, so remove it from PHP_SELF and provide a clean PHP_SELF here...">$PMA_PHP_SELF</a>;
<a name="l01038"></a>01038     global $server_master_status, $server_slave_status, <a class="code" href="replication_8inc_8php.html#a1030ecf30614db49cfaffabf77126fcf" title="replication types">$replication_types</a>;
<a name="l01039"></a>01039 
<a name="l01040"></a>01040     $hour_factor    = 3600 / $server_status[<span class="stringliteral">&#39;Uptime&#39;</span>];
<a name="l01041"></a>01041 <span class="comment"></span>
<a name="l01042"></a>01042 <span class="comment">    /**</span>
<a name="l01043"></a>01043 <span class="comment">     * starttime calculation</span>
<a name="l01044"></a>01044 <span class="comment">     */</span>
<a name="l01045"></a>01045     $start_time = <a class="code" href="database__interface_8lib_8php.html#a772f12a953dd2908745bb16a8fa7b63a" title="returns a single value from the given result or query, if the query or the result has more than one r...">PMA_DBI_fetch_value</a>(
<a name="l01046"></a>01046         <span class="stringliteral">&#39;SELECT UNIX_TIMESTAMP() - &#39;</span> . $server_status[<span class="stringliteral">&#39;Uptime&#39;</span>]
<a name="l01047"></a>01047     );
<a name="l01048"></a>01048 
<a name="l01049"></a>01049     ?&gt;
<a name="l01050"></a>01050     &lt;h3&gt;&lt;?php
<a name="l01051"></a>01051     echo sprintf(
<a name="l01052"></a>01052         __(<span class="stringliteral">&#39;Network traffic since startup: %s&#39;</span>),
<a name="l01053"></a>01053         implode(<span class="charliteral">&#39; &#39;</span>, <a class="code" href="common_8lib_8php.html#a90de48fb0bb54fca6db6a407aa2ab8cf" title="Formats $value to byte view.">PMA_formatByteDown</a>($server_status[<span class="stringliteral">&#39;Bytes_received&#39;</span>] + $server_status[<span class="stringliteral">&#39;Bytes_sent&#39;</span>], 3, 1))
<a name="l01054"></a>01054     );
<a name="l01055"></a>01055     ?&gt;
<a name="l01056"></a>01056     &lt;/h3&gt;
<a name="l01057"></a>01057 
<a name="l01058"></a>01058     &lt;p&gt;
<a name="l01059"></a>01059     &lt;?php
<a name="l01060"></a>01060     echo sprintf(
<a name="l01061"></a>01061         __(<span class="stringliteral">&#39;This MySQL server has been running for %1$s. It started up on %2$s.&#39;</span>),
<a name="l01062"></a>01062         <a class="code" href="common_8lib_8php.html#ae13cfb70127dd35e76ab23cfb3db1324" title="Returns a given timespan value in a readable format.">PMA_timespanFormat</a>($server_status[<span class="stringliteral">&#39;Uptime&#39;</span>]),
<a name="l01063"></a>01063         <a class="code" href="common_8lib_8php.html#a5fd5c1fc97dd60dd15cdd39a74655292" title="Writes localised date.">PMA_localisedDate</a>($start_time)
<a name="l01064"></a>01064     ) . <span class="stringliteral">&quot;\n&quot;</span>;
<a name="l01065"></a>01065     ?&gt;
<a name="l01066"></a>01066     &lt;/p&gt;
<a name="l01067"></a>01067 
<a name="l01068"></a>01068     &lt;?php
<a name="l01069"></a>01069     <span class="keywordflow">if</span> ($server_master_status || $server_slave_status) {
<a name="l01070"></a>01070         echo <span class="stringliteral">&#39;&lt;p class=&quot;notice&quot;&gt;&#39;</span>;
<a name="l01071"></a>01071         <span class="keywordflow">if</span> ($server_master_status &amp;&amp; $server_slave_status) {
<a name="l01072"></a>01072             echo __(<span class="stringliteral">&#39;This MySQL server works as &lt;b&gt;master&lt;/b&gt; and &lt;b&gt;slave&lt;/b&gt; in &lt;b&gt;replication&lt;/b&gt; process.&#39;</span>);
<a name="l01073"></a>01073         } <a class="code" href="import_8php.html#a7cbb4f0532e284397800df76c439983e">elseif</a> ($server_master_status) {
<a name="l01074"></a>01074             echo __(<span class="stringliteral">&#39;This MySQL server works as &lt;b&gt;master&lt;/b&gt; in &lt;b&gt;replication&lt;/b&gt; process.&#39;</span>);
<a name="l01075"></a>01075         } <a class="code" href="import_8php.html#a7cbb4f0532e284397800df76c439983e">elseif</a> ($server_slave_status) {
<a name="l01076"></a>01076             echo __(<span class="stringliteral">&#39;This MySQL server works as &lt;b&gt;slave&lt;/b&gt; in &lt;b&gt;replication&lt;/b&gt; process.&#39;</span>);
<a name="l01077"></a>01077         }
<a name="l01078"></a>01078         echo <span class="charliteral">&#39; &#39;</span>;
<a name="l01079"></a>01079         echo __(<span class="stringliteral">&#39;For further information about replication status on the server, please visit the &lt;a href=&quot;#replication&quot;&gt;replication section&lt;/a&gt;.&#39;</span>);
<a name="l01080"></a>01080         echo <span class="stringliteral">&#39;&lt;/p&gt;&#39;</span>;
<a name="l01081"></a>01081     }
<a name="l01082"></a>01082 
<a name="l01083"></a>01083     <span class="comment">/* if the server works as master or slave in replication process, display useful information */</span>
<a name="l01084"></a>01084     <span class="keywordflow">if</span> ($server_master_status || $server_slave_status) {
<a name="l01085"></a>01085     ?&gt;
<a name="l01086"></a>01086       &lt;hr <span class="keyword">class</span>=<span class="stringliteral">&quot;clearfloat&quot;</span> /&gt;
<a name="l01087"></a>01087 
<a name="l01088"></a>01088       &lt;h3&gt;&lt;a name=<span class="stringliteral">&quot;replication&quot;</span>&gt;&lt;/a&gt;&lt;?php echo __(<span class="stringliteral">&#39;Replication status&#39;</span>); ?&gt;&lt;/h3&gt;
<a name="l01089"></a>01089     &lt;?php
<a name="l01090"></a>01090 
<a name="l01091"></a>01091         <span class="keywordflow">foreach</span> ($replication_types as $type) {
<a name="l01092"></a>01092             <span class="keywordflow">if</span> (${<span class="stringliteral">&quot;server_{$type}_status&quot;</span>}) {
<a name="l01093"></a>01093                 <a class="code" href="replication__gui_8lib_8php.html#adb80f6e44c4eed5e1bf606f1c5ca1090" title="This function prints out table with replication status.">PMA_replication_print_status_table</a>($type);
<a name="l01094"></a>01094             }
<a name="l01095"></a>01095         }
<a name="l01096"></a>01096         unset(<a class="code" href="transformation__overview_8php.html#a92d70a97331cc6fc0a79d9da50895be8" title="Gets some core libraries and displays a top message if required.">$types</a>);
<a name="l01097"></a>01097     }
<a name="l01098"></a>01098     ?&gt;
<a name="l01099"></a>01099 
<a name="l01100"></a>01100     &lt;table <span class="keywordtype">id</span>=<span class="stringliteral">&quot;serverstatustraffic&quot;</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;data noclick&quot;</span>&gt;
<a name="l01101"></a>01101     &lt;thead&gt;
<a name="l01102"></a>01102     &lt;tr&gt;
<a name="l01103"></a>01103         &lt;th colspan=<span class="stringliteral">&quot;2&quot;</span>&gt;&lt;?php echo __(<span class="stringliteral">&#39;Traffic&#39;</span>) . <span class="stringliteral">&#39;&amp;nbsp;&#39;</span> . <a class="code" href="common_8lib_8php.html#a081817420a85500983dfb5e02110d9f9" title="returns HTML for a footnote marker and add the messsage to the footnotes">PMA_showHint</a>(__(<span class="stringliteral">&#39;On a busy server, the byte counters may overrun, so those statistics as reported by the MySQL server may be incorrect.&#39;</span>)); ?&gt;&lt;/th&gt;
<a name="l01104"></a>01104         &lt;th&gt;&amp;oslash; &lt;?php echo __(<span class="stringliteral">&#39;per hour&#39;</span>); ?&gt;&lt;/th&gt;
<a name="l01105"></a>01105     &lt;/tr&gt;
<a name="l01106"></a>01106     &lt;/thead&gt;
<a name="l01107"></a>01107     &lt;tbody&gt;
<a name="l01108"></a>01108     &lt;tr <span class="keyword">class</span>=<span class="stringliteral">&quot;odd&quot;</span>&gt;
<a name="l01109"></a>01109         &lt;th <span class="keyword">class</span>=<span class="stringliteral">&quot;name&quot;</span>&gt;&lt;?php echo __(<span class="stringliteral">&#39;Received&#39;</span>); ?&gt;&lt;/th&gt;
<a name="l01110"></a>01110         &lt;<a class="code" href="original_2css_2theme__right_8css_8php.html#a2cb7bbff99e906a4fef499891dc9e6f5">td</a> <span class="keyword">class</span>=<span class="stringliteral">&quot;value&quot;</span>&gt;&lt;?php echo
<a name="l01111"></a>01111             implode(<span class="charliteral">&#39; &#39;</span>,
<a name="l01112"></a>01112                 <a class="code" href="common_8lib_8php.html#a90de48fb0bb54fca6db6a407aa2ab8cf" title="Formats $value to byte view.">PMA_formatByteDown</a>($server_status[<span class="stringliteral">&#39;Bytes_received&#39;</span>], 3, 1)); ?&gt;&lt;/td&gt;
<a name="l01113"></a>01113         &lt;td <span class="keyword">class</span>=<span class="stringliteral">&quot;value&quot;</span>&gt;&lt;?php echo
<a name="l01114"></a>01114             implode(<span class="charliteral">&#39; &#39;</span>,
<a name="l01115"></a>01115                 <a class="code" href="common_8lib_8php.html#a90de48fb0bb54fca6db6a407aa2ab8cf" title="Formats $value to byte view.">PMA_formatByteDown</a>(
<a name="l01116"></a>01116                     $server_status[<span class="stringliteral">&#39;Bytes_received&#39;</span>] * $hour_factor, 3, 1)); ?&gt;&lt;/td&gt;
<a name="l01117"></a>01117     &lt;/tr&gt;
<a name="l01118"></a>01118     &lt;tr <span class="keyword">class</span>=<span class="stringliteral">&quot;even&quot;</span>&gt;
<a name="l01119"></a>01119         &lt;th <span class="keyword">class</span>=<span class="stringliteral">&quot;name&quot;</span>&gt;&lt;?php echo __(<span class="stringliteral">&#39;Sent&#39;</span>); ?&gt;&lt;/th&gt;
<a name="l01120"></a>01120         &lt;td <span class="keyword">class</span>=<span class="stringliteral">&quot;value&quot;</span>&gt;&lt;?php echo
<a name="l01121"></a>01121             implode(<span class="charliteral">&#39; &#39;</span>,
<a name="l01122"></a>01122                 <a class="code" href="common_8lib_8php.html#a90de48fb0bb54fca6db6a407aa2ab8cf" title="Formats $value to byte view.">PMA_formatByteDown</a>($server_status[<span class="stringliteral">&#39;Bytes_sent&#39;</span>], 3, 1)); ?&gt;&lt;/td&gt;
<a name="l01123"></a>01123         &lt;td <span class="keyword">class</span>=<span class="stringliteral">&quot;value&quot;</span>&gt;&lt;?php echo
<a name="l01124"></a>01124             implode(<span class="charliteral">&#39; &#39;</span>,
<a name="l01125"></a>01125                 <a class="code" href="common_8lib_8php.html#a90de48fb0bb54fca6db6a407aa2ab8cf" title="Formats $value to byte view.">PMA_formatByteDown</a>(
<a name="l01126"></a>01126                     $server_status[<span class="stringliteral">&#39;Bytes_sent&#39;</span>] * $hour_factor, 3, 1)); ?&gt;&lt;/td&gt;
<a name="l01127"></a>01127     &lt;/tr&gt;
<a name="l01128"></a>01128     &lt;tr <span class="keyword">class</span>=<span class="stringliteral">&quot;odd&quot;</span>&gt;
<a name="l01129"></a>01129         &lt;th <span class="keyword">class</span>=<span class="stringliteral">&quot;name&quot;</span>&gt;&lt;?php echo __(<span class="stringliteral">&#39;Total&#39;</span>); ?&gt;&lt;/th&gt;
<a name="l01130"></a>01130         &lt;td <span class="keyword">class</span>=<span class="stringliteral">&quot;value&quot;</span>&gt;&lt;?php echo
<a name="l01131"></a>01131             implode(<span class="charliteral">&#39; &#39;</span>,
<a name="l01132"></a>01132                 <a class="code" href="common_8lib_8php.html#a90de48fb0bb54fca6db6a407aa2ab8cf" title="Formats $value to byte view.">PMA_formatByteDown</a>(
<a name="l01133"></a>01133                     $server_status[<span class="stringliteral">&#39;Bytes_received&#39;</span>] + $server_status[<span class="stringliteral">&#39;Bytes_sent&#39;</span>], 3, 1)
<a name="l01134"></a>01134             ); ?&gt;&lt;/td&gt;
<a name="l01135"></a>01135         &lt;td <span class="keyword">class</span>=<span class="stringliteral">&quot;value&quot;</span>&gt;&lt;?php echo
<a name="l01136"></a>01136             implode(<span class="charliteral">&#39; &#39;</span>,
<a name="l01137"></a>01137                 <a class="code" href="common_8lib_8php.html#a90de48fb0bb54fca6db6a407aa2ab8cf" title="Formats $value to byte view.">PMA_formatByteDown</a>(
<a name="l01138"></a>01138                     ($server_status[<span class="stringliteral">&#39;Bytes_received&#39;</span>] + $server_status[<span class="stringliteral">&#39;Bytes_sent&#39;</span>])
<a name="l01139"></a>01139                     * $hour_factor, 3, 1)
<a name="l01140"></a>01140             ); ?&gt;&lt;/td&gt;
<a name="l01141"></a>01141     &lt;/tr&gt;
<a name="l01142"></a>01142     &lt;/tbody&gt;
<a name="l01143"></a>01143     &lt;/table&gt;
<a name="l01144"></a>01144 
<a name="l01145"></a>01145     &lt;table <span class="keywordtype">id</span>=<span class="stringliteral">&quot;serverstatusconnections&quot;</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;data noclick&quot;</span>&gt;
<a name="l01146"></a>01146     &lt;thead&gt;
<a name="l01147"></a>01147     &lt;tr&gt;
<a name="l01148"></a>01148         &lt;th colspan=<span class="stringliteral">&quot;2&quot;</span>&gt;&lt;?php echo __(<span class="stringliteral">&#39;Connections&#39;</span>); ?&gt;&lt;/th&gt;
<a name="l01149"></a>01149         &lt;th&gt;&amp;oslash; &lt;?php echo __(<span class="stringliteral">&#39;per hour&#39;</span>); ?&gt;&lt;/th&gt;
<a name="l01150"></a>01150         &lt;th&gt;%&lt;/th&gt;
<a name="l01151"></a>01151     &lt;/tr&gt;
<a name="l01152"></a>01152     &lt;/thead&gt;
<a name="l01153"></a>01153     &lt;tbody&gt;
<a name="l01154"></a>01154     &lt;tr <span class="keyword">class</span>=<span class="stringliteral">&quot;odd&quot;</span>&gt;
<a name="l01155"></a>01155         &lt;th <span class="keyword">class</span>=<span class="stringliteral">&quot;name&quot;</span>&gt;&lt;?php echo __(<span class="stringliteral">&#39;max. concurrent connections&#39;</span>); ?&gt;&lt;/th&gt;
<a name="l01156"></a>01156         &lt;td <span class="keyword">class</span>=<span class="stringliteral">&quot;value&quot;</span>&gt;&lt;?php echo
<a name="l01157"></a>01157             <a class="code" href="common_8lib_8php.html#abeaeabaf95ad63e5163642ff03ec6879" title="Formats $value to the given length and appends SI prefixes with a $length of 0 no truncation occurs...">PMA_formatNumber</a>($server_status[<span class="stringliteral">&#39;Max_used_connections&#39;</span>], 0); ?&gt;  &lt;/td&gt;
<a name="l01158"></a>01158         &lt;td <span class="keyword">class</span>=<span class="stringliteral">&quot;value&quot;</span>&gt;--- &lt;/td&gt;
<a name="l01159"></a>01159         &lt;td <span class="keyword">class</span>=<span class="stringliteral">&quot;value&quot;</span>&gt;--- &lt;/td&gt;
<a name="l01160"></a>01160     &lt;/tr&gt;
<a name="l01161"></a>01161     &lt;tr <span class="keyword">class</span>=<span class="stringliteral">&quot;even&quot;</span>&gt;
<a name="l01162"></a>01162         &lt;th <span class="keyword">class</span>=<span class="stringliteral">&quot;name&quot;</span>&gt;&lt;?php echo __(<span class="stringliteral">&#39;Failed attempts&#39;</span>); ?&gt;&lt;/th&gt;
<a name="l01163"></a>01163         &lt;td <span class="keyword">class</span>=<span class="stringliteral">&quot;value&quot;</span>&gt;&lt;?php echo
<a name="l01164"></a>01164             <a class="code" href="common_8lib_8php.html#abeaeabaf95ad63e5163642ff03ec6879" title="Formats $value to the given length and appends SI prefixes with a $length of 0 no truncation occurs...">PMA_formatNumber</a>($server_status[<span class="stringliteral">&#39;Aborted_connects&#39;</span>], 4, 1, <span class="keyword">true</span>); ?&gt;&lt;/td&gt;
<a name="l01165"></a>01165         &lt;td <span class="keyword">class</span>=<span class="stringliteral">&quot;value&quot;</span>&gt;&lt;?php echo
<a name="l01166"></a>01166             <a class="code" href="common_8lib_8php.html#abeaeabaf95ad63e5163642ff03ec6879" title="Formats $value to the given length and appends SI prefixes with a $length of 0 no truncation occurs...">PMA_formatNumber</a>($server_status[<span class="stringliteral">&#39;Aborted_connects&#39;</span>] * $hour_factor,
<a name="l01167"></a>01167                 4, 2, <span class="keyword">true</span>); ?&gt;&lt;/td&gt;
<a name="l01168"></a>01168         &lt;td <span class="keyword">class</span>=<span class="stringliteral">&quot;value&quot;</span>&gt;&lt;?php echo
<a name="l01169"></a>01169             $server_status[<span class="stringliteral">&#39;Connections&#39;</span>] &gt; 0
<a name="l01170"></a>01170           ? <a class="code" href="common_8lib_8php.html#abeaeabaf95ad63e5163642ff03ec6879" title="Formats $value to the given length and appends SI prefixes with a $length of 0 no truncation occurs...">PMA_formatNumber</a>(
<a name="l01171"></a>01171                 $server_status[<span class="stringliteral">&#39;Aborted_connects&#39;</span>] * 100 / $server_status[<span class="stringliteral">&#39;Connections&#39;</span>],
<a name="l01172"></a>01172                 0, 2, <span class="keyword">true</span>) . <span class="charliteral">&#39;%&#39;</span>
<a name="l01173"></a>01173           : <span class="stringliteral">&#39;--- &#39;</span>; ?&gt;&lt;/td&gt;
<a name="l01174"></a>01174     &lt;/tr&gt;
<a name="l01175"></a>01175     &lt;tr <span class="keyword">class</span>=<span class="stringliteral">&quot;odd&quot;</span>&gt;
<a name="l01176"></a>01176         &lt;th <span class="keyword">class</span>=<span class="stringliteral">&quot;name&quot;</span>&gt;&lt;?php echo __(<span class="stringliteral">&#39;Aborted&#39;</span>); ?&gt;&lt;/th&gt;
<a name="l01177"></a>01177         &lt;td <span class="keyword">class</span>=<span class="stringliteral">&quot;value&quot;</span>&gt;&lt;?php echo
<a name="l01178"></a>01178             <a class="code" href="common_8lib_8php.html#abeaeabaf95ad63e5163642ff03ec6879" title="Formats $value to the given length and appends SI prefixes with a $length of 0 no truncation occurs...">PMA_formatNumber</a>($server_status[<span class="stringliteral">&#39;Aborted_clients&#39;</span>], 4, 1, <span class="keyword">true</span>); ?&gt;&lt;/td&gt;
<a name="l01179"></a>01179         &lt;td <span class="keyword">class</span>=<span class="stringliteral">&quot;value&quot;</span>&gt;&lt;?php echo
<a name="l01180"></a>01180             <a class="code" href="common_8lib_8php.html#abeaeabaf95ad63e5163642ff03ec6879" title="Formats $value to the given length and appends SI prefixes with a $length of 0 no truncation occurs...">PMA_formatNumber</a>($server_status[<span class="stringliteral">&#39;Aborted_clients&#39;</span>] * $hour_factor,
<a name="l01181"></a>01181                 4, 2, <span class="keyword">true</span>); ?&gt;&lt;/td&gt;
<a name="l01182"></a>01182         &lt;td <span class="keyword">class</span>=<span class="stringliteral">&quot;value&quot;</span>&gt;&lt;?php echo
<a name="l01183"></a>01183             $server_status[<span class="stringliteral">&#39;Connections&#39;</span>] &gt; 0
<a name="l01184"></a>01184           ? <a class="code" href="common_8lib_8php.html#abeaeabaf95ad63e5163642ff03ec6879" title="Formats $value to the given length and appends SI prefixes with a $length of 0 no truncation occurs...">PMA_formatNumber</a>(
<a name="l01185"></a>01185                 $server_status[<span class="stringliteral">&#39;Aborted_clients&#39;</span>] * 100 / $server_status[<span class="stringliteral">&#39;Connections&#39;</span>],
<a name="l01186"></a>01186                 0, 2, <span class="keyword">true</span>) . <span class="charliteral">&#39;%&#39;</span>
<a name="l01187"></a>01187           : <span class="stringliteral">&#39;--- &#39;</span>; ?&gt;&lt;/td&gt;
<a name="l01188"></a>01188     &lt;/tr&gt;
<a name="l01189"></a>01189     &lt;tr <span class="keyword">class</span>=<span class="stringliteral">&quot;even&quot;</span>&gt;
<a name="l01190"></a>01190         &lt;th <span class="keyword">class</span>=<span class="stringliteral">&quot;name&quot;</span>&gt;&lt;?php echo __(<span class="stringliteral">&#39;Total&#39;</span>); ?&gt;&lt;/th&gt;
<a name="l01191"></a>01191         &lt;td <span class="keyword">class</span>=<span class="stringliteral">&quot;value&quot;</span>&gt;&lt;?php echo
<a name="l01192"></a>01192             <a class="code" href="common_8lib_8php.html#abeaeabaf95ad63e5163642ff03ec6879" title="Formats $value to the given length and appends SI prefixes with a $length of 0 no truncation occurs...">PMA_formatNumber</a>($server_status[<span class="stringliteral">&#39;Connections&#39;</span>], 4, 0); ?&gt;&lt;/td&gt;
<a name="l01193"></a>01193         &lt;td <span class="keyword">class</span>=<span class="stringliteral">&quot;value&quot;</span>&gt;&lt;?php echo
<a name="l01194"></a>01194             <a class="code" href="common_8lib_8php.html#abeaeabaf95ad63e5163642ff03ec6879" title="Formats $value to the given length and appends SI prefixes with a $length of 0 no truncation occurs...">PMA_formatNumber</a>($server_status[<span class="stringliteral">&#39;Connections&#39;</span>] * $hour_factor,
<a name="l01195"></a>01195                 4, 2); ?&gt;&lt;/td&gt;
<a name="l01196"></a>01196         &lt;td <span class="keyword">class</span>=<span class="stringliteral">&quot;value&quot;</span>&gt;&lt;?php echo
<a name="l01197"></a>01197             <a class="code" href="common_8lib_8php.html#abeaeabaf95ad63e5163642ff03ec6879" title="Formats $value to the given length and appends SI prefixes with a $length of 0 no truncation occurs...">PMA_formatNumber</a>(100, 0, 2); ?&gt;%&lt;/td&gt;
<a name="l01198"></a>01198     &lt;/tr&gt;
<a name="l01199"></a>01199     &lt;/tbody&gt;
<a name="l01200"></a>01200     &lt;/table&gt;
<a name="l01201"></a>01201     &lt;?php
<a name="l01202"></a>01202 
<a name="l01203"></a>01203     <a class="code" href="db__qbe_8php.html#a5bc4c60a2c2f6347a2f8c4e5847ebbfe">$url_params</a> = array();
<a name="l01204"></a>01204 
<a name="l01205"></a>01205     $show_full_sql = !empty(<a class="code" href="libraries_2common_8inc_8php.html#a1697cbb709132a827a24cf16714b73ab" title="avoid problems in phpmyadmin.css.php in some cases  string $js_frame">$_REQUEST</a>[<span class="stringliteral">&#39;full&#39;</span>]);
<a name="l01206"></a>01206     <span class="keywordflow">if</span> ($show_full_sql) {
<a name="l01207"></a>01207         $url_params[<span class="stringliteral">&#39;full&#39;</span>] = 1;
<a name="l01208"></a>01208         $full_text_link = <span class="stringliteral">&#39;server_status.php&#39;</span> . <a class="code" href="url__generating_8lib_8php.html#ad5c0cfef7cb600a158a1ef5fa321a094" title="Generates text with URL parameters.">PMA_generate_common_url</a>(array(), <span class="stringliteral">&#39;html&#39;</span>, <span class="charliteral">&#39;?&#39;</span>);
<a name="l01209"></a>01209     } <span class="keywordflow">else</span> {
<a name="l01210"></a>01210         $full_text_link = <span class="stringliteral">&#39;server_status.php&#39;</span> . <a class="code" href="url__generating_8lib_8php.html#ad5c0cfef7cb600a158a1ef5fa321a094" title="Generates text with URL parameters.">PMA_generate_common_url</a>(array(<span class="stringliteral">&#39;full&#39;</span> =&gt; 1));
<a name="l01211"></a>01211     }
<a name="l01212"></a>01212     <span class="keywordflow">if</span> (PMA_DRIZZLE) {
<a name="l01213"></a>01213         <a class="code" href="db__create_8php.html#a6ca9ccb878a51d945e0c234b5291329c" title="Builds and executes the db creation sql query.">$sql_query</a> = <span class="stringliteral">&quot;SELECT</span>
<a name="l01214"></a>01214 <span class="stringliteral">                p.id       AS Id,</span>
<a name="l01215"></a>01215 <span class="stringliteral">                p.username AS User,</span>
<a name="l01216"></a>01216 <span class="stringliteral">                p.host     AS Host,</span>
<a name="l01217"></a>01217 <span class="stringliteral">                p.db       AS db,</span>
<a name="l01218"></a>01218 <span class="stringliteral">                p.command  AS Command,</span>
<a name="l01219"></a>01219 <span class="stringliteral">                p.time     AS Time,</span>
<a name="l01220"></a>01220 <span class="stringliteral">                p.state    AS State,</span>
<a name="l01221"></a>01221 <span class="stringliteral">                &quot;</span> . ($show_full_sql ? <span class="stringliteral">&#39;s.query&#39;</span> : <span class="stringliteral">&#39;left(p.info, &#39;</span> . (int)<a class="code" href="config_2config_8php.html#aad108a6abffdea835bc6cc2f3244751e">$GLOBALS</a>[<span class="stringliteral">&#39;cfg&#39;</span>][<span class="stringliteral">&#39;MaxCharactersInDisplayedSQL&#39;</span>] . <span class="charliteral">&#39;)&#39;</span>) . <span class="stringliteral">&quot; AS Info</span>
<a name="l01222"></a>01222 <span class="stringliteral">            FROM data_dictionary.PROCESSLIST p</span>
<a name="l01223"></a>01223 <span class="stringliteral">                &quot;</span> . ($show_full_sql ? <span class="stringliteral">&#39;LEFT JOIN data_dictionary.SESSIONS s ON s.session_id = p.id&#39;</span> : <span class="stringliteral">&#39;&#39;</span>);
<a name="l01224"></a>01224     } <span class="keywordflow">else</span> {
<a name="l01225"></a>01225         <a class="code" href="db__create_8php.html#a6ca9ccb878a51d945e0c234b5291329c" title="Builds and executes the db creation sql query.">$sql_query</a> = $show_full_sql
<a name="l01226"></a>01226             ? <span class="stringliteral">&#39;SHOW FULL PROCESSLIST&#39;</span>
<a name="l01227"></a>01227             : <span class="stringliteral">&#39;SHOW PROCESSLIST&#39;</span>;
<a name="l01228"></a>01228     }
<a name="l01229"></a>01229     <a class="code" href="link__out_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a> = <a class="code" href="database__interface_8lib_8php.html#ab439cded0e18a60e731e76aa4567c089" title="runs a query">PMA_DBI_query</a>(<a class="code" href="db__create_8php.html#a6ca9ccb878a51d945e0c234b5291329c" title="Builds and executes the db creation sql query.">$sql_query</a>);
<a name="l01230"></a>01230 <span class="comment"></span>
<a name="l01231"></a>01231 <span class="comment">    /**</span>
<a name="l01232"></a>01232 <span class="comment">     * Displays the page</span>
<a name="l01233"></a>01233 <span class="comment">     */</span>
<a name="l01234"></a>01234     ?&gt;
<a name="l01235"></a>01235     &lt;table <span class="keywordtype">id</span>=<span class="stringliteral">&quot;tableprocesslist&quot;</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;data clearfloat noclick&quot;</span>&gt;
<a name="l01236"></a>01236     &lt;thead&gt;
<a name="l01237"></a>01237     &lt;tr&gt;
<a name="l01238"></a>01238         &lt;th&gt;&lt;?php echo __(<span class="stringliteral">&#39;Processes&#39;</span>); ?&gt;&lt;/th&gt;
<a name="l01239"></a>01239         &lt;th&gt;&lt;?php echo __(<span class="stringliteral">&#39;ID&#39;</span>); ?&gt;&lt;/th&gt;
<a name="l01240"></a>01240         &lt;th&gt;&lt;?php echo __(<span class="stringliteral">&#39;User&#39;</span>); ?&gt;&lt;/th&gt;
<a name="l01241"></a>01241         &lt;th&gt;&lt;?php echo __(<span class="stringliteral">&#39;Host&#39;</span>); ?&gt;&lt;/th&gt;
<a name="l01242"></a>01242         &lt;th&gt;&lt;?php echo __(<span class="stringliteral">&#39;Database&#39;</span>); ?&gt;&lt;/th&gt;
<a name="l01243"></a>01243         &lt;th&gt;&lt;?php echo __(<span class="stringliteral">&#39;Command&#39;</span>); ?&gt;&lt;/th&gt;
<a name="l01244"></a>01244         &lt;th&gt;&lt;?php echo __(<span class="stringliteral">&#39;Time&#39;</span>); ?&gt;&lt;/th&gt;
<a name="l01245"></a>01245         &lt;th&gt;&lt;?php echo __(<span class="stringliteral">&#39;Status&#39;</span>); ?&gt;&lt;/th&gt;
<a name="l01246"></a>01246         &lt;th&gt;&lt;?php
<a name="l01247"></a>01247             echo __(<span class="stringliteral">&#39;SQL query&#39;</span>);
<a name="l01248"></a>01248             <span class="keywordflow">if</span> (! PMA_DRIZZLE) {
<a name="l01249"></a>01249                 ?&gt;
<a name="l01250"></a>01250             &lt;a href=<span class="stringliteral">&quot;&lt;?php echo $full_text_link; ?&gt;&quot;</span>
<a name="l01251"></a>01251                 title=<span class="stringliteral">&quot;&lt;?php echo $show_full_sql ? __(&#39;Truncate Shown Queries&#39;) : __(&#39;Show Full Queries&#39;); ?&gt;&quot;</span>&gt;
<a name="l01252"></a>01252                 &lt;img src=<span class="stringliteral">&quot;&lt;?php echo $GLOBALS[&#39;pmaThemeImage&#39;] . &#39;s_&#39; . ($show_full_sql ? &#39;partial&#39; : &#39;full&#39;); ?&gt;text.png&quot;</span>
<a name="l01253"></a>01253                 alt=<span class="stringliteral">&quot;&lt;?php echo $show_full_sql ? __(&#39;Truncate Shown Queries&#39;) : __(&#39;Show Full Queries&#39;); ?&gt;&quot;</span> /&gt;
<a name="l01254"></a>01254             &lt;/a&gt;
<a name="l01255"></a>01255             &lt;?php } ?&gt;
<a name="l01256"></a>01256         &lt;/th&gt;
<a name="l01257"></a>01257     &lt;/tr&gt;
<a name="l01258"></a>01258     &lt;/thead&gt;
<a name="l01259"></a>01259     &lt;tbody&gt;
<a name="l01260"></a>01260     &lt;?php
<a name="l01261"></a>01261     <a class="code" href="db__qbe_8php.html#aa97fee01a612c36c64d62b32a99d5b5d">$odd_row</a> = <span class="keyword">true</span>;
<a name="l01262"></a>01262     <span class="keywordflow">while</span> ($process = <a class="code" href="drizzle_8dbi_8lib_8php.html#ab13d236340b5e44aa9ebfe3a22a62f37" title="returns array of rows with associative keys from $result">PMA_DBI_fetch_assoc</a>(<a class="code" href="link__out_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a>)) {
<a name="l01263"></a>01263         $url_params[<span class="stringliteral">&#39;kill&#39;</span>] = $process[<span class="stringliteral">&#39;Id&#39;</span>];
<a name="l01264"></a>01264         $kill_process = <span class="stringliteral">&#39;server_status.php&#39;</span> . <a class="code" href="url__generating_8lib_8php.html#ad5c0cfef7cb600a158a1ef5fa321a094" title="Generates text with URL parameters.">PMA_generate_common_url</a>($url_params);
<a name="l01265"></a>01265         ?&gt;
<a name="l01266"></a>01266     &lt;tr <span class="keyword">class</span>=<span class="stringliteral">&quot;&lt;?php echo $odd_row ? &#39;odd&#39; : &#39;even&#39;; ?&gt;&quot;</span>&gt;
<a name="l01267"></a>01267         &lt;td&gt;&lt;a href=<span class="stringliteral">&quot;&lt;?php echo $kill_process ; ?&gt;&quot;</span>&gt;&lt;?php echo __(<span class="stringliteral">&#39;Kill&#39;</span>); ?&gt;&lt;/a&gt;&lt;/td&gt;
<a name="l01268"></a>01268         &lt;td <span class="keyword">class</span>=<span class="stringliteral">&quot;value&quot;</span>&gt;&lt;?php echo $process[<span class="stringliteral">&#39;Id&#39;</span>]; ?&gt;&lt;/td&gt;
<a name="l01269"></a>01269         &lt;td&gt;&lt;?php echo $process[<span class="stringliteral">&#39;User&#39;</span>]; ?&gt;&lt;/td&gt;
<a name="l01270"></a>01270         &lt;td&gt;&lt;?php echo $process[<span class="stringliteral">&#39;Host&#39;</span>]; ?&gt;&lt;/td&gt;
<a name="l01271"></a>01271         &lt;td&gt;&lt;?php echo ((! isset($process[<span class="stringliteral">&#39;db&#39;</span>]) || ! strlen($process[<span class="stringliteral">&#39;db&#39;</span>])) ? <span class="stringliteral">&#39;&lt;i&gt;&#39;</span> . __(<span class="stringliteral">&#39;None&#39;</span>) . <span class="stringliteral">&#39;&lt;/i&gt;&#39;</span> : $process[<span class="stringliteral">&#39;db&#39;</span>]); ?&gt;&lt;/td&gt;
<a name="l01272"></a>01272         &lt;td&gt;&lt;?php echo $process[<span class="stringliteral">&#39;Command&#39;</span>]; ?&gt;&lt;/td&gt;
<a name="l01273"></a>01273         &lt;td <span class="keyword">class</span>=<span class="stringliteral">&quot;value&quot;</span>&gt;&lt;?php echo $process[<span class="stringliteral">&#39;Time&#39;</span>]; ?&gt;&lt;/td&gt;
<a name="l01274"></a>01274         &lt;td&gt;&lt;?php echo (empty($process[<span class="stringliteral">&#39;State&#39;</span>]) ? <span class="stringliteral">&#39;---&#39;</span> : $process[<span class="stringliteral">&#39;State&#39;</span>]); ?&gt;&lt;/td&gt;
<a name="l01275"></a>01275         &lt;td&gt;
<a name="l01276"></a>01276         &lt;?php
<a name="l01277"></a>01277         <span class="keywordflow">if</span> (empty($process[<span class="stringliteral">&#39;Info&#39;</span>])) {
<a name="l01278"></a>01278             echo <span class="stringliteral">&#39;---&#39;</span>;
<a name="l01279"></a>01279         } <span class="keywordflow">else</span> {
<a name="l01280"></a>01280             <span class="keywordflow">if</span> (!$show_full_sql &amp;&amp; strlen($process[<span class="stringliteral">&#39;Info&#39;</span>]) &gt; <a class="code" href="config_2config_8php.html#aad108a6abffdea835bc6cc2f3244751e">$GLOBALS</a>[<span class="stringliteral">&#39;cfg&#39;</span>][<span class="stringliteral">&#39;MaxCharactersInDisplayedSQL&#39;</span>]) {
<a name="l01281"></a>01281                 echo htmlspecialchars(substr($process[<span class="stringliteral">&#39;Info&#39;</span>], 0, <a class="code" href="config_2config_8php.html#aad108a6abffdea835bc6cc2f3244751e">$GLOBALS</a>[<span class="stringliteral">&#39;cfg&#39;</span>][<span class="stringliteral">&#39;MaxCharactersInDisplayedSQL&#39;</span>])) . <span class="stringliteral">&#39;[...]&#39;</span>;
<a name="l01282"></a>01282             } <span class="keywordflow">else</span> {
<a name="l01283"></a>01283                 echo PMA_SQP_formatHtml(PMA_SQP_parse($process[<span class="stringliteral">&#39;Info&#39;</span>]));
<a name="l01284"></a>01284             }
<a name="l01285"></a>01285         }
<a name="l01286"></a>01286         ?&gt;
<a name="l01287"></a>01287         &lt;/td&gt;
<a name="l01288"></a>01288     &lt;/tr&gt;
<a name="l01289"></a>01289         &lt;?php
<a name="l01290"></a>01290         $odd_row = ! <a class="code" href="db__qbe_8php.html#aa97fee01a612c36c64d62b32a99d5b5d">$odd_row</a>;
<a name="l01291"></a>01291     }
<a name="l01292"></a>01292     ?&gt;
<a name="l01293"></a>01293     &lt;/tbody&gt;
<a name="l01294"></a>01294     &lt;/table&gt;
<a name="l01295"></a>01295     &lt;?php
<a name="l01296"></a>01296 }
<a name="l01297"></a>01297 
<a name="l01298"></a><a class="code" href="server__status_8php.html#af7c520088b239c155d14d04d4490d83e">01298</a> <span class="keyword">function</span> <a class="code" href="server__status_8php.html#af7c520088b239c155d14d04d4490d83e">printVariablesTable</a>()
<a name="l01299"></a>01299 {
<a name="l01300"></a>01300     global <a class="code" href="server__status_8php.html#ae46650638d6130e555f8469eb632aadc" title="flush status variables if requested">$server_status</a>, <a class="code" href="server__status_8php.html#a3efae2cf7f40445ed78a08cfc3b428b6" title="for some calculations we require also some server settings">$server_variables</a>, <a class="code" href="server__status_8php.html#a12f5f9f3c55f9deebc15074b7e60693a">$allocationMap</a>, <a class="code" href="server__status_8php.html#a4ca8be3ff3cf95aa3af546449c1f1bec" title="define some needfull links/commands">$links</a>;<span class="comment"></span>
<a name="l01301"></a>01301 <span class="comment">    /**</span>
<a name="l01302"></a>01302 <span class="comment">     * Messages are built using the message name</span>
<a name="l01303"></a>01303 <span class="comment">     */</span>
<a name="l01304"></a>01304     $strShowStatus = array(
<a name="l01305"></a>01305         <span class="stringliteral">&#39;Aborted_clients&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of connections that were aborted because the client died without closing the connection properly.&#39;</span>),
<a name="l01306"></a>01306         <span class="stringliteral">&#39;Aborted_connects&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of failed attempts to connect to the MySQL server.&#39;</span>),
<a name="l01307"></a>01307         <span class="stringliteral">&#39;Binlog_cache_disk_use&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of transactions that used the temporary binary log cache but that exceeded the value of binlog_cache_size and used a temporary file to store statements from the transaction.&#39;</span>),
<a name="l01308"></a>01308         <span class="stringliteral">&#39;Binlog_cache_use&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of transactions that used the temporary binary log cache.&#39;</span>),
<a name="l01309"></a>01309         <span class="stringliteral">&#39;Connections&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of connection attempts (successful or not) to the MySQL server.&#39;</span>),
<a name="l01310"></a>01310         <span class="stringliteral">&#39;Created_tmp_disk_tables&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of temporary tables on disk created automatically by the server while executing statements. If Created_tmp_disk_tables is big, you may want to increase the tmp_table_size  value to cause temporary tables to be memory-based instead of disk-based.&#39;</span>),
<a name="l01311"></a>01311         <span class="stringliteral">&#39;Created_tmp_files&#39;</span> =&gt; __(<span class="stringliteral">&#39;How many temporary files mysqld has created.&#39;</span>),
<a name="l01312"></a>01312         <span class="stringliteral">&#39;Created_tmp_tables&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of in-memory temporary tables created automatically by the server while executing statements.&#39;</span>),
<a name="l01313"></a>01313         <span class="stringliteral">&#39;Delayed_errors&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of rows written with INSERT DELAYED for which some error occurred (probably duplicate key).&#39;</span>),
<a name="l01314"></a>01314         <span class="stringliteral">&#39;Delayed_insert_threads&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of INSERT DELAYED handler threads in use. Every different table on which one uses INSERT DELAYED gets its own thread.&#39;</span>),
<a name="l01315"></a>01315         <span class="stringliteral">&#39;Delayed_writes&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of INSERT DELAYED rows written.&#39;</span>),
<a name="l01316"></a>01316         <span class="stringliteral">&#39;Flush_commands&#39;</span>  =&gt; __(<span class="stringliteral">&#39;The number of executed FLUSH statements.&#39;</span>),
<a name="l01317"></a>01317         <span class="stringliteral">&#39;Handler_commit&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of internal COMMIT statements.&#39;</span>),
<a name="l01318"></a>01318         <span class="stringliteral">&#39;Handler_delete&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of times a row was deleted from a table.&#39;</span>),
<a name="l01319"></a>01319         <span class="stringliteral">&#39;Handler_discover&#39;</span> =&gt; __(<span class="stringliteral">&#39;The MySQL server can ask the NDB Cluster storage engine if it knows about a table with a given name. This is called discovery. Handler_discover indicates the number of time tables have been discovered.&#39;</span>),
<a name="l01320"></a>01320         <span class="stringliteral">&#39;Handler_read_first&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of times the first entry was read from an index. If this is high, it suggests that the server is doing a lot of full index scans; for example, SELECT col1 FROM foo, assuming that col1 is indexed.&#39;</span>),
<a name="l01321"></a>01321         <span class="stringliteral">&#39;Handler_read_key&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of requests to read a row based on a key. If this is high, it is a good indication that your queries and tables are properly indexed.&#39;</span>),
<a name="l01322"></a>01322         <span class="stringliteral">&#39;Handler_read_next&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of requests to read the next row in key order. This is incremented if you are querying an index column with a range constraint or if you are doing an index scan.&#39;</span>),
<a name="l01323"></a>01323         <span class="stringliteral">&#39;Handler_read_prev&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of requests to read the previous row in key order. This read method is mainly used to optimize ORDER BY ... DESC.&#39;</span>),
<a name="l01324"></a>01324         <span class="stringliteral">&#39;Handler_read_rnd&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of requests to read a row based on a fixed position. This is high if you are doing a lot of queries that require sorting of the result. You probably have a lot of queries that require MySQL to scan whole tables or you have joins that don\&#39;t use keys properly.&#39;</span>),
<a name="l01325"></a>01325         <span class="stringliteral">&#39;Handler_read_rnd_next&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of requests to read the next row in the data file. This is high if you are doing a lot of table scans. Generally this suggests that your tables are not properly indexed or that your queries are not written to take advantage of the indexes you have.&#39;</span>),
<a name="l01326"></a>01326         <span class="stringliteral">&#39;Handler_rollback&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of internal ROLLBACK statements.&#39;</span>),
<a name="l01327"></a>01327         <span class="stringliteral">&#39;Handler_update&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of requests to update a row in a table.&#39;</span>),
<a name="l01328"></a>01328         <span class="stringliteral">&#39;Handler_write&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of requests to insert a row in a table.&#39;</span>),
<a name="l01329"></a>01329         <span class="stringliteral">&#39;Innodb_buffer_pool_pages_data&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of pages containing data (dirty or clean).&#39;</span>),
<a name="l01330"></a>01330         <span class="stringliteral">&#39;Innodb_buffer_pool_pages_dirty&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of pages currently dirty.&#39;</span>),
<a name="l01331"></a>01331         <span class="stringliteral">&#39;Innodb_buffer_pool_pages_flushed&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of buffer pool pages that have been requested to be flushed.&#39;</span>),
<a name="l01332"></a>01332         <span class="stringliteral">&#39;Innodb_buffer_pool_pages_free&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of free pages.&#39;</span>),
<a name="l01333"></a>01333         <span class="stringliteral">&#39;Innodb_buffer_pool_pages_latched&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of latched pages in InnoDB buffer pool. These are pages currently being read or written or that can\&#39;t be flushed or removed for some other reason.&#39;</span>),
<a name="l01334"></a>01334         <span class="stringliteral">&#39;Innodb_buffer_pool_pages_misc&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of pages busy because they have been allocated for administrative overhead such as row locks or the adaptive hash index. This value can also be calculated as Innodb_buffer_pool_pages_total - Innodb_buffer_pool_pages_free - Innodb_buffer_pool_pages_data.&#39;</span>),
<a name="l01335"></a>01335         <span class="stringliteral">&#39;Innodb_buffer_pool_pages_total&#39;</span> =&gt; __(<span class="stringliteral">&#39;Total size of buffer pool, in pages.&#39;</span>),
<a name="l01336"></a>01336         <span class="stringliteral">&#39;Innodb_buffer_pool_read_ahead_rnd&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of &quot;random&quot; read-aheads InnoDB initiated. This happens when a query is to scan a large portion of a table but in random order.&#39;</span>),
<a name="l01337"></a>01337         <span class="stringliteral">&#39;Innodb_buffer_pool_read_ahead_seq&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of sequential read-aheads InnoDB initiated. This happens when InnoDB does a sequential full table scan.&#39;</span>),
<a name="l01338"></a>01338         <span class="stringliteral">&#39;Innodb_buffer_pool_read_requests&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of logical read requests InnoDB has done.&#39;</span>),
<a name="l01339"></a>01339         <span class="stringliteral">&#39;Innodb_buffer_pool_reads&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of logical reads that InnoDB could not satisfy from buffer pool and had to do a single-page read.&#39;</span>),
<a name="l01340"></a>01340         <span class="stringliteral">&#39;Innodb_buffer_pool_wait_free&#39;</span> =&gt; __(<span class="stringliteral">&#39;Normally, writes to the InnoDB buffer pool happen in the background. However, if it\&#39;s necessary to read or create a page and no clean pages are available, it\&#39;s necessary to wait for pages to be flushed first. This counter counts instances of these waits. If the buffer pool size was set properly, this value should be small.&#39;</span>),
<a name="l01341"></a>01341         <span class="stringliteral">&#39;Innodb_buffer_pool_write_requests&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number writes done to the InnoDB buffer pool.&#39;</span>),
<a name="l01342"></a>01342         <span class="stringliteral">&#39;Innodb_data_fsyncs&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of fsync() operations so far.&#39;</span>),
<a name="l01343"></a>01343         <span class="stringliteral">&#39;Innodb_data_pending_fsyncs&#39;</span> =&gt; __(<span class="stringliteral">&#39;The current number of pending fsync() operations.&#39;</span>),
<a name="l01344"></a>01344         <span class="stringliteral">&#39;Innodb_data_pending_reads&#39;</span> =&gt; __(<span class="stringliteral">&#39;The current number of pending reads.&#39;</span>),
<a name="l01345"></a>01345         <span class="stringliteral">&#39;Innodb_data_pending_writes&#39;</span> =&gt; __(<span class="stringliteral">&#39;The current number of pending writes.&#39;</span>),
<a name="l01346"></a>01346         <span class="stringliteral">&#39;Innodb_data_read&#39;</span> =&gt; __(<span class="stringliteral">&#39;The amount of data read so far, in bytes.&#39;</span>),
<a name="l01347"></a>01347         <span class="stringliteral">&#39;Innodb_data_reads&#39;</span> =&gt; __(<span class="stringliteral">&#39;The total number of data reads.&#39;</span>),
<a name="l01348"></a>01348         <span class="stringliteral">&#39;Innodb_data_writes&#39;</span> =&gt; __(<span class="stringliteral">&#39;The total number of data writes.&#39;</span>),
<a name="l01349"></a>01349         <span class="stringliteral">&#39;Innodb_data_written&#39;</span> =&gt; __(<span class="stringliteral">&#39;The amount of data written so far, in bytes.&#39;</span>),
<a name="l01350"></a>01350         <span class="stringliteral">&#39;Innodb_dblwr_pages_written&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of pages that have been written for doublewrite operations.&#39;</span>),
<a name="l01351"></a>01351         <span class="stringliteral">&#39;Innodb_dblwr_writes&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of doublewrite operations that have been performed.&#39;</span>),
<a name="l01352"></a>01352         <span class="stringliteral">&#39;Innodb_log_waits&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of waits we had because log buffer was too small and we had to wait for it to be flushed before continuing.&#39;</span>),
<a name="l01353"></a>01353         <span class="stringliteral">&#39;Innodb_log_write_requests&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of log write requests.&#39;</span>),
<a name="l01354"></a>01354         <span class="stringliteral">&#39;Innodb_log_writes&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of physical writes to the log file.&#39;</span>),
<a name="l01355"></a>01355         <span class="stringliteral">&#39;Innodb_os_log_fsyncs&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of fsync() writes done to the log file.&#39;</span>),
<a name="l01356"></a>01356         <span class="stringliteral">&#39;Innodb_os_log_pending_fsyncs&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of pending log file fsyncs.&#39;</span>),
<a name="l01357"></a>01357         <span class="stringliteral">&#39;Innodb_os_log_pending_writes&#39;</span> =&gt; __(<span class="stringliteral">&#39;Pending log file writes.&#39;</span>),
<a name="l01358"></a>01358         <span class="stringliteral">&#39;Innodb_os_log_written&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of bytes written to the log file.&#39;</span>),
<a name="l01359"></a>01359         <span class="stringliteral">&#39;Innodb_pages_created&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of pages created.&#39;</span>),
<a name="l01360"></a>01360         <span class="stringliteral">&#39;Innodb_page_size&#39;</span> =&gt; __(<span class="stringliteral">&#39;The compiled-in InnoDB page size (default 16KB). Many values are counted in pages; the page size allows them to be easily converted to bytes.&#39;</span>),
<a name="l01361"></a>01361         <span class="stringliteral">&#39;Innodb_pages_read&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of pages read.&#39;</span>),
<a name="l01362"></a>01362         <span class="stringliteral">&#39;Innodb_pages_written&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of pages written.&#39;</span>),
<a name="l01363"></a>01363         <span class="stringliteral">&#39;Innodb_row_lock_current_waits&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of row locks currently being waited for.&#39;</span>),
<a name="l01364"></a>01364         <span class="stringliteral">&#39;Innodb_row_lock_time_avg&#39;</span> =&gt; __(<span class="stringliteral">&#39;The average time to acquire a row lock, in milliseconds.&#39;</span>),
<a name="l01365"></a>01365         <span class="stringliteral">&#39;Innodb_row_lock_time&#39;</span> =&gt; __(<span class="stringliteral">&#39;The total time spent in acquiring row locks, in milliseconds.&#39;</span>),
<a name="l01366"></a>01366         <span class="stringliteral">&#39;Innodb_row_lock_time_max&#39;</span> =&gt; __(<span class="stringliteral">&#39;The maximum time to acquire a row lock, in milliseconds.&#39;</span>),
<a name="l01367"></a>01367         <span class="stringliteral">&#39;Innodb_row_lock_waits&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of times a row lock had to be waited for.&#39;</span>),
<a name="l01368"></a>01368         <span class="stringliteral">&#39;Innodb_rows_deleted&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of rows deleted from InnoDB tables.&#39;</span>),
<a name="l01369"></a>01369         <span class="stringliteral">&#39;Innodb_rows_inserted&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of rows inserted in InnoDB tables.&#39;</span>),
<a name="l01370"></a>01370         <span class="stringliteral">&#39;Innodb_rows_read&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of rows read from InnoDB tables.&#39;</span>),
<a name="l01371"></a>01371         <span class="stringliteral">&#39;Innodb_rows_updated&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of rows updated in InnoDB tables.&#39;</span>),
<a name="l01372"></a>01372         <span class="stringliteral">&#39;Key_blocks_not_flushed&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of key blocks in the key cache that have changed but haven\&#39;t yet been flushed to disk. It used to be known as Not_flushed_key_blocks.&#39;</span>),
<a name="l01373"></a>01373         <span class="stringliteral">&#39;Key_blocks_unused&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of unused blocks in the key cache. You can use this value to determine how much of the key cache is in use.&#39;</span>),
<a name="l01374"></a>01374         <span class="stringliteral">&#39;Key_blocks_used&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of used blocks in the key cache. This value is a high-water mark that indicates the maximum number of blocks that have ever been in use at one time.&#39;</span>),
<a name="l01375"></a>01375         <span class="stringliteral">&#39;Key_read_requests&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of requests to read a key block from the cache.&#39;</span>),
<a name="l01376"></a>01376         <span class="stringliteral">&#39;Key_reads&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of physical reads of a key block from disk. If Key_reads is big, then your key_buffer_size value is probably too small. The cache miss rate can be calculated as Key_reads/Key_read_requests.&#39;</span>),
<a name="l01377"></a>01377         <span class="stringliteral">&#39;Key_write_requests&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of requests to write a key block to the cache.&#39;</span>),
<a name="l01378"></a>01378         <span class="stringliteral">&#39;Key_writes&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of physical writes of a key block to disk.&#39;</span>),
<a name="l01379"></a>01379         <span class="stringliteral">&#39;Last_query_cost&#39;</span> =&gt; __(<span class="stringliteral">&#39;The total cost of the last compiled query as computed by the query optimizer. Useful for comparing the cost of different query plans for the same query. The default value of 0 means that no query has been compiled yet.&#39;</span>),
<a name="l01380"></a>01380         <span class="stringliteral">&#39;Max_used_connections&#39;</span> =&gt; __(<span class="stringliteral">&#39;The maximum number of connections that have been in use simultaneously since the server started.&#39;</span>),
<a name="l01381"></a>01381         <span class="stringliteral">&#39;Not_flushed_delayed_rows&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of rows waiting to be written in INSERT DELAYED queues.&#39;</span>),
<a name="l01382"></a>01382         <span class="stringliteral">&#39;Opened_tables&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of tables that have been opened. If opened tables is big, your table cache value is probably too small.&#39;</span>),
<a name="l01383"></a>01383         <span class="stringliteral">&#39;Open_files&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of files that are open.&#39;</span>),
<a name="l01384"></a>01384         <span class="stringliteral">&#39;Open_streams&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of streams that are open (used mainly for logging).&#39;</span>),
<a name="l01385"></a>01385         <span class="stringliteral">&#39;Open_tables&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of tables that are open.&#39;</span>),
<a name="l01386"></a>01386         <span class="stringliteral">&#39;Qcache_free_blocks&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of free memory blocks in query cache. High numbers can indicate fragmentation issues, which may be solved by issuing a FLUSH QUERY CACHE statement.&#39;</span>),
<a name="l01387"></a>01387         <span class="stringliteral">&#39;Qcache_free_memory&#39;</span> =&gt; __(<span class="stringliteral">&#39;The amount of free memory for query cache.&#39;</span>),
<a name="l01388"></a>01388         <span class="stringliteral">&#39;Qcache_hits&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of cache hits.&#39;</span>),
<a name="l01389"></a>01389         <span class="stringliteral">&#39;Qcache_inserts&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of queries added to the cache.&#39;</span>),
<a name="l01390"></a>01390         <span class="stringliteral">&#39;Qcache_lowmem_prunes&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of queries that have been removed from the cache to free up memory for caching new queries. This information can help you tune the query cache size. The query cache uses a least recently used (LRU) strategy to decide which queries to remove from the cache.&#39;</span>),
<a name="l01391"></a>01391         <span class="stringliteral">&#39;Qcache_not_cached&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of non-cached queries (not cachable, or not cached due to the query_cache_type setting).&#39;</span>),
<a name="l01392"></a>01392         <span class="stringliteral">&#39;Qcache_queries_in_cache&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of queries registered in the cache.&#39;</span>),
<a name="l01393"></a>01393         <span class="stringliteral">&#39;Qcache_total_blocks&#39;</span> =&gt; __(<span class="stringliteral">&#39;The total number of blocks in the query cache.&#39;</span>),
<a name="l01394"></a>01394         <span class="stringliteral">&#39;Rpl_status&#39;</span> =&gt; __(<span class="stringliteral">&#39;The status of failsafe replication (not yet implemented).&#39;</span>),
<a name="l01395"></a>01395         <span class="stringliteral">&#39;Select_full_join&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of joins that do not use indexes. If this value is not 0, you should carefully check the indexes of your tables.&#39;</span>),
<a name="l01396"></a>01396         <span class="stringliteral">&#39;Select_full_range_join&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of joins that used a range search on a reference table.&#39;</span>),
<a name="l01397"></a>01397         <span class="stringliteral">&#39;Select_range_check&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of joins without keys that check for key usage after each row. (If this is not 0, you should carefully check the indexes of your tables.)&#39;</span>),
<a name="l01398"></a>01398         <span class="stringliteral">&#39;Select_range&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of joins that used ranges on the first table. (It\&#39;s normally not critical even if this is big.)&#39;</span>),
<a name="l01399"></a>01399         <span class="stringliteral">&#39;Select_scan&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of joins that did a full scan of the first table.&#39;</span>),
<a name="l01400"></a>01400         <span class="stringliteral">&#39;Slave_open_temp_tables&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of temporary tables currently open by the slave SQL thread.&#39;</span>),
<a name="l01401"></a>01401         <span class="stringliteral">&#39;Slave_retried_transactions&#39;</span> =&gt; __(<span class="stringliteral">&#39;Total (since startup) number of times the replication slave SQL thread has retried transactions.&#39;</span>),
<a name="l01402"></a>01402         <span class="stringliteral">&#39;Slave_running&#39;</span> =&gt; __(<span class="stringliteral">&#39;This is ON if this server is a slave that is connected to a master.&#39;</span>),
<a name="l01403"></a>01403         <span class="stringliteral">&#39;Slow_launch_threads&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of threads that have taken more than slow_launch_time seconds to create.&#39;</span>),
<a name="l01404"></a>01404         <span class="stringliteral">&#39;Slow_queries&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of queries that have taken more than long_query_time seconds.&#39;</span>),
<a name="l01405"></a>01405         <span class="stringliteral">&#39;Sort_merge_passes&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of merge passes the sort algorithm has had to do. If this value is large, you should consider increasing the value of the sort_buffer_size system variable.&#39;</span>),
<a name="l01406"></a>01406         <span class="stringliteral">&#39;Sort_range&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of sorts that were done with ranges.&#39;</span>),
<a name="l01407"></a>01407         <span class="stringliteral">&#39;Sort_rows&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of sorted rows.&#39;</span>),
<a name="l01408"></a>01408         <span class="stringliteral">&#39;Sort_scan&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of sorts that were done by scanning the table.&#39;</span>),
<a name="l01409"></a>01409         <span class="stringliteral">&#39;Table_locks_immediate&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of times that a table lock was acquired immediately.&#39;</span>),
<a name="l01410"></a>01410         <span class="stringliteral">&#39;Table_locks_waited&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of times that a table lock could not be acquired immediately and a wait was needed. If this is high, and you have performance problems, you should first optimize your queries, and then either split your table or tables or use replication.&#39;</span>),
<a name="l01411"></a>01411         <span class="stringliteral">&#39;Threads_cached&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of threads in the thread cache. The cache hit rate can be calculated as Threads_created/Connections. If this value is red you should raise your thread_cache_size.&#39;</span>),
<a name="l01412"></a>01412         <span class="stringliteral">&#39;Threads_connected&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of currently open connections.&#39;</span>),
<a name="l01413"></a>01413         <span class="stringliteral">&#39;Threads_created&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of threads created to handle connections. If Threads_created is big, you may want to increase the thread_cache_size value. (Normally this doesn\&#39;t give a notable performance improvement if you have a good thread implementation.)&#39;</span>),
<a name="l01414"></a>01414         <span class="stringliteral">&#39;Threads_running&#39;</span> =&gt; __(<span class="stringliteral">&#39;The number of threads that are not sleeping.&#39;</span>)
<a name="l01415"></a>01415     );
<a name="l01416"></a>01416 <span class="comment"></span>
<a name="l01417"></a>01417 <span class="comment">    /**</span>
<a name="l01418"></a>01418 <span class="comment">     * define some alerts</span>
<a name="l01419"></a>01419 <span class="comment">     */</span>
<a name="l01420"></a>01420     <span class="comment">// name =&gt; max value before alert</span>
<a name="l01421"></a>01421     $alerts = array(
<a name="l01422"></a>01422         <span class="comment">// lower is better</span>
<a name="l01423"></a>01423         <span class="comment">// variable =&gt; max value</span>
<a name="l01424"></a>01424         <span class="stringliteral">&#39;Aborted_clients&#39;</span> =&gt; 0,
<a name="l01425"></a>01425         <span class="stringliteral">&#39;Aborted_connects&#39;</span> =&gt; 0,
<a name="l01426"></a>01426 
<a name="l01427"></a>01427         <span class="stringliteral">&#39;Binlog_cache_disk_use&#39;</span> =&gt; 0,
<a name="l01428"></a>01428 
<a name="l01429"></a>01429         <span class="stringliteral">&#39;Created_tmp_disk_tables&#39;</span> =&gt; 0,
<a name="l01430"></a>01430 
<a name="l01431"></a>01431         <span class="stringliteral">&#39;Handler_read_rnd&#39;</span> =&gt; 0,
<a name="l01432"></a>01432         <span class="stringliteral">&#39;Handler_read_rnd_next&#39;</span> =&gt; 0,
<a name="l01433"></a>01433 
<a name="l01434"></a>01434         <span class="stringliteral">&#39;Innodb_buffer_pool_pages_dirty&#39;</span> =&gt; 0,
<a name="l01435"></a>01435         <span class="stringliteral">&#39;Innodb_buffer_pool_reads&#39;</span> =&gt; 0,
<a name="l01436"></a>01436         <span class="stringliteral">&#39;Innodb_buffer_pool_wait_free&#39;</span> =&gt; 0,
<a name="l01437"></a>01437         <span class="stringliteral">&#39;Innodb_log_waits&#39;</span> =&gt; 0,
<a name="l01438"></a>01438         <span class="stringliteral">&#39;Innodb_row_lock_time_avg&#39;</span> =&gt; 10, <span class="comment">// ms</span>
<a name="l01439"></a>01439         <span class="stringliteral">&#39;Innodb_row_lock_time_max&#39;</span> =&gt; 50, <span class="comment">// ms</span>
<a name="l01440"></a>01440         <span class="stringliteral">&#39;Innodb_row_lock_waits&#39;</span> =&gt; 0,
<a name="l01441"></a>01441 
<a name="l01442"></a>01442         <span class="stringliteral">&#39;Slow_queries&#39;</span> =&gt; 0,
<a name="l01443"></a>01443         <span class="stringliteral">&#39;Delayed_errors&#39;</span> =&gt; 0,
<a name="l01444"></a>01444         <span class="stringliteral">&#39;Select_full_join&#39;</span> =&gt; 0,
<a name="l01445"></a>01445         <span class="stringliteral">&#39;Select_range_check&#39;</span> =&gt; 0,
<a name="l01446"></a>01446         <span class="stringliteral">&#39;Sort_merge_passes&#39;</span> =&gt; 0,
<a name="l01447"></a>01447         <span class="stringliteral">&#39;Opened_tables&#39;</span> =&gt; 0,
<a name="l01448"></a>01448         <span class="stringliteral">&#39;Table_locks_waited&#39;</span> =&gt; 0,
<a name="l01449"></a>01449         <span class="stringliteral">&#39;Qcache_lowmem_prunes&#39;</span> =&gt; 0,
<a name="l01450"></a>01450 
<a name="l01451"></a>01451         <span class="stringliteral">&#39;Qcache_free_blocks&#39;</span> =&gt; isset($server_status[<span class="stringliteral">&#39;Qcache_total_blocks&#39;</span>]) ? $server_status[<span class="stringliteral">&#39;Qcache_total_blocks&#39;</span>] / 5 : 0,
<a name="l01452"></a>01452         <span class="stringliteral">&#39;Slow_launch_threads&#39;</span> =&gt; 0,
<a name="l01453"></a>01453 
<a name="l01454"></a>01454         <span class="comment">// depends on Key_read_requests</span>
<a name="l01455"></a>01455         <span class="comment">// normaly lower then 1:0.01</span>
<a name="l01456"></a>01456         <span class="stringliteral">&#39;Key_reads&#39;</span> =&gt; isset($server_status[<span class="stringliteral">&#39;Key_read_requests&#39;</span>]) ? (0.01 * $server_status[<span class="stringliteral">&#39;Key_read_requests&#39;</span>]) : 0,
<a name="l01457"></a>01457         <span class="comment">// depends on Key_write_requests</span>
<a name="l01458"></a>01458         <span class="comment">// normaly nearly 1:1</span>
<a name="l01459"></a>01459         <span class="stringliteral">&#39;Key_writes&#39;</span> =&gt; isset($server_status[<span class="stringliteral">&#39;Key_write_requests&#39;</span>]) ? (0.9 * $server_status[<span class="stringliteral">&#39;Key_write_requests&#39;</span>]) : 0,
<a name="l01460"></a>01460 
<a name="l01461"></a>01461         <span class="stringliteral">&#39;Key_buffer_fraction&#39;</span> =&gt; 0.5,
<a name="l01462"></a>01462 
<a name="l01463"></a>01463         <span class="comment">// alert if more than 95% of thread cache is in use</span>
<a name="l01464"></a>01464         <span class="stringliteral">&#39;Threads_cached&#39;</span> =&gt; isset($server_variables[<span class="stringliteral">&#39;thread_cache_size&#39;</span>]) ? 0.95 * $server_variables[<span class="stringliteral">&#39;thread_cache_size&#39;</span>] : 0
<a name="l01465"></a>01465 
<a name="l01466"></a>01466         <span class="comment">// higher is better</span>
<a name="l01467"></a>01467         <span class="comment">// variable =&gt; min value</span>
<a name="l01468"></a>01468         <span class="comment">//&#39;Handler read key&#39; =&gt; &#39;&gt; &#39;,</span>
<a name="l01469"></a>01469     );
<a name="l01470"></a>01470 
<a name="l01471"></a>01471 ?&gt;
<a name="l01472"></a>01472 &lt;table <span class="keyword">class</span>=<span class="stringliteral">&quot;data sortable noclick&quot;</span> <span class="keywordtype">id</span>=<span class="stringliteral">&quot;serverstatusvariables&quot;</span>&gt;
<a name="l01473"></a>01473     &lt;col <span class="keyword">class</span>=<span class="stringliteral">&quot;namecol&quot;</span> /&gt;
<a name="l01474"></a>01474     &lt;col <span class="keyword">class</span>=<span class="stringliteral">&quot;valuecol&quot;</span> /&gt;
<a name="l01475"></a>01475     &lt;col <span class="keyword">class</span>=<span class="stringliteral">&quot;descrcol&quot;</span> /&gt;
<a name="l01476"></a>01476     &lt;thead&gt;
<a name="l01477"></a>01477         &lt;tr&gt;
<a name="l01478"></a>01478             &lt;th&gt;&lt;?php echo __(<span class="stringliteral">&#39;Variable&#39;</span>); ?&gt;&lt;/th&gt;
<a name="l01479"></a>01479             &lt;th&gt;&lt;?php echo __(<span class="stringliteral">&#39;Value&#39;</span>); ?&gt;&lt;/th&gt;
<a name="l01480"></a>01480             &lt;th&gt;&lt;?php echo __(<span class="stringliteral">&#39;Description&#39;</span>); ?&gt;&lt;/th&gt;
<a name="l01481"></a>01481         &lt;/tr&gt;
<a name="l01482"></a>01482     &lt;/thead&gt;
<a name="l01483"></a>01483     &lt;tbody&gt;
<a name="l01484"></a>01484     &lt;?php
<a name="l01485"></a>01485 
<a name="l01486"></a>01486     <a class="code" href="db__qbe_8php.html#aa97fee01a612c36c64d62b32a99d5b5d">$odd_row</a> = <span class="keyword">false</span>;
<a name="l01487"></a>01487     <span class="keywordflow">foreach</span> ($server_status as <a class="code" href="wab_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a> =&gt; $value) {
<a name="l01488"></a>01488             $odd_row = !<a class="code" href="db__qbe_8php.html#aa97fee01a612c36c64d62b32a99d5b5d">$odd_row</a>;
<a name="l01489"></a>01489 ?&gt;
<a name="l01490"></a>01490         &lt;tr <span class="keyword">class</span>=<span class="stringliteral">&quot;&lt;?php echo $odd_row ? &#39;odd&#39; : &#39;even&#39;; echo isset($allocationMap[$name])?&#39; s_&#39; . $allocationMap[$name]:&#39;&#39;; ?&gt;&quot;</span>&gt;
<a name="l01491"></a>01491             &lt;th <span class="keyword">class</span>=<span class="stringliteral">&quot;name&quot;</span>&gt;&lt;?php
<a name="l01492"></a>01492             echo htmlspecialchars(str_replace(<span class="charliteral">&#39;_&#39;</span>, <span class="charliteral">&#39; &#39;</span>, <a class="code" href="wab_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a>));
<a name="l01493"></a>01493             <span class="comment">/* Fields containing % are calculated, they can not be described in MySQL documentation */</span>
<a name="l01494"></a>01494             <span class="keywordflow">if</span> (strpos(<a class="code" href="wab_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a>, <span class="charliteral">&#39;%&#39;</span>) === FALSE) {
<a name="l01495"></a>01495                  echo <a class="code" href="common_8lib_8php.html#a5b2c38942cb8fe55e02ba17d0bef9f15" title="Displays a link to the official MySQL documentation.">PMA_showMySQLDocu</a>(<span class="stringliteral">&#39;server-status-variables&#39;</span>, <span class="stringliteral">&#39;server-status-variables&#39;</span>, <span class="keyword">false</span>, <span class="stringliteral">&#39;statvar_&#39;</span> . <a class="code" href="wab_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a>);
<a name="l01496"></a>01496             }
<a name="l01497"></a>01497             ?&gt;
<a name="l01498"></a>01498             &lt;/th&gt;
<a name="l01499"></a>01499             &lt;<a class="code" href="original_2css_2theme__right_8css_8php.html#a2cb7bbff99e906a4fef499891dc9e6f5">td</a> <span class="keyword">class</span>=<span class="stringliteral">&quot;value&quot;</span>&gt;&lt;span <span class="keyword">class</span>=<span class="stringliteral">&quot;formatted&quot;</span>&gt;&lt;?php
<a name="l01500"></a>01500             <span class="keywordflow">if</span> (isset($alerts[<a class="code" href="wab_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a>])) {
<a name="l01501"></a>01501                 <span class="keywordflow">if</span> ($value &gt; $alerts[$name]) {
<a name="l01502"></a>01502                     echo <span class="stringliteral">&#39;&lt;span class=&quot;attention&quot;&gt;&#39;</span>;
<a name="l01503"></a>01503                 } <span class="keywordflow">else</span> {
<a name="l01504"></a>01504                     echo <span class="stringliteral">&#39;&lt;span class=&quot;allfine&quot;&gt;&#39;</span>;
<a name="l01505"></a>01505                 }
<a name="l01506"></a>01506             }
<a name="l01507"></a>01507             <span class="keywordflow">if</span> (<span class="charliteral">&#39;%&#39;</span> === substr($name, -1, 1)) {
<a name="l01508"></a>01508                 echo htmlspecialchars(<a class="code" href="common_8lib_8php.html#abeaeabaf95ad63e5163642ff03ec6879" title="Formats $value to the given length and appends SI prefixes with a $length of 0 no truncation occurs...">PMA_formatNumber</a>($value, 0, 2)) . <span class="stringliteral">&#39; %&#39;</span>;
<a name="l01509"></a>01509             } <a class="code" href="import_8php.html#a7cbb4f0532e284397800df76c439983e">elseif</a> (strpos($name, <span class="stringliteral">&#39;Uptime&#39;</span>) !== <span class="keyword">false</span>) {
<a name="l01510"></a>01510                 echo htmlspecialchars(<a class="code" href="common_8lib_8php.html#ae13cfb70127dd35e76ab23cfb3db1324" title="Returns a given timespan value in a readable format.">PMA_timespanFormat</a>($value));
<a name="l01511"></a>01511             } <a class="code" href="import_8php.html#a7cbb4f0532e284397800df76c439983e">elseif</a> (is_numeric($value) &amp;&amp; $value == (<span class="keywordtype">int</span>) $value &amp;&amp; $value &gt; 1000) {
<a name="l01512"></a>01512                 echo htmlspecialchars(<a class="code" href="common_8lib_8php.html#abeaeabaf95ad63e5163642ff03ec6879" title="Formats $value to the given length and appends SI prefixes with a $length of 0 no truncation occurs...">PMA_formatNumber</a>($value, 3, 1));
<a name="l01513"></a>01513             } <a class="code" href="import_8php.html#a7cbb4f0532e284397800df76c439983e">elseif</a> (is_numeric($value) &amp;&amp; $value == (<span class="keywordtype">int</span>) $value) {
<a name="l01514"></a>01514                 echo htmlspecialchars(<a class="code" href="common_8lib_8php.html#abeaeabaf95ad63e5163642ff03ec6879" title="Formats $value to the given length and appends SI prefixes with a $length of 0 no truncation occurs...">PMA_formatNumber</a>($value, 3, 0));
<a name="l01515"></a>01515             } <a class="code" href="import_8php.html#a7cbb4f0532e284397800df76c439983e">elseif</a> (is_numeric($value)) {
<a name="l01516"></a>01516                 echo htmlspecialchars(<a class="code" href="common_8lib_8php.html#abeaeabaf95ad63e5163642ff03ec6879" title="Formats $value to the given length and appends SI prefixes with a $length of 0 no truncation occurs...">PMA_formatNumber</a>($value, 3, 1));
<a name="l01517"></a>01517             } <span class="keywordflow">else</span> {
<a name="l01518"></a>01518                 echo htmlspecialchars($value);
<a name="l01519"></a>01519             }
<a name="l01520"></a>01520             <span class="keywordflow">if</span> (isset($alerts[$name])) {
<a name="l01521"></a>01521                 echo <span class="stringliteral">&#39;&lt;/span&gt;&#39;</span>;
<a name="l01522"></a>01522             }
<a name="l01523"></a>01523             ?&gt;&lt;/span&gt;&lt;span style=<span class="stringliteral">&quot;display:none;&quot;</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;original&quot;</span>&gt;&lt;?php echo $value; ?&gt;&lt;/span&gt;
<a name="l01524"></a>01524             &lt;/td&gt;
<a name="l01525"></a>01525             &lt;td <span class="keyword">class</span>=<span class="stringliteral">&quot;descr&quot;</span>&gt;
<a name="l01526"></a>01526             &lt;?php
<a name="l01527"></a>01527             <span class="keywordflow">if</span> (isset($strShowStatus[$name ])) {
<a name="l01528"></a>01528                 echo $strShowStatus[<a class="code" href="wab_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a>];
<a name="l01529"></a>01529             }
<a name="l01530"></a>01530 
<a name="l01531"></a>01531             <span class="keywordflow">if</span> (isset($links[$name])) {
<a name="l01532"></a>01532                 <span class="keywordflow">foreach</span> ($links[$name] as $link_name =&gt; $link_url) {
<a name="l01533"></a>01533                     <span class="keywordflow">if</span> (<span class="stringliteral">&#39;doc&#39;</span> == $link_name) {
<a name="l01534"></a>01534                         echo <a class="code" href="common_8lib_8php.html#a5b2c38942cb8fe55e02ba17d0bef9f15" title="Displays a link to the official MySQL documentation.">PMA_showMySQLDocu</a>($link_url, $link_url);
<a name="l01535"></a>01535                     } <span class="keywordflow">else</span> {
<a name="l01536"></a>01536                         echo <span class="stringliteral">&#39; &lt;a href=&quot;&#39;</span> . $link_url . <span class="stringliteral">&#39;&quot;&gt;&#39;</span> . $link_name . <span class="stringliteral">&#39;&lt;/a&gt;&#39;</span> .
<a name="l01537"></a>01537                         <span class="stringliteral">&quot;\n&quot;</span>;
<a name="l01538"></a>01538                     }
<a name="l01539"></a>01539                 }
<a name="l01540"></a>01540                 unset($link_url, $link_name);
<a name="l01541"></a>01541             }
<a name="l01542"></a>01542             ?&gt;
<a name="l01543"></a>01543             &lt;/td&gt;
<a name="l01544"></a>01544         &lt;/tr&gt;
<a name="l01545"></a>01545     &lt;?php
<a name="l01546"></a>01546     }
<a name="l01547"></a>01547     ?&gt;
<a name="l01548"></a>01548     &lt;/tbody&gt;
<a name="l01549"></a>01549     &lt;/table&gt;
<a name="l01550"></a>01550     &lt;?php
<a name="l01551"></a>01551 }
<a name="l01552"></a>01552 
<a name="l01553"></a><a class="code" href="server__status_8php.html#ad11dde67e2c4bb10ec198e26e7f3287f">01553</a> <span class="keyword">function</span> <a class="code" href="server__status_8php.html#ad11dde67e2c4bb10ec198e26e7f3287f">printMonitor</a>()
<a name="l01554"></a>01554 {
<a name="l01555"></a>01555     global <a class="code" href="server__status_8php.html#ae46650638d6130e555f8469eb632aadc" title="flush status variables if requested">$server_status</a>, $server_db_isLocal;
<a name="l01556"></a>01556 ?&gt;
<a name="l01557"></a>01557     &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;tabLinks&quot;</span> style=<span class="stringliteral">&quot;display:none;&quot;</span>&gt;
<a name="l01558"></a>01558         &lt;a href=<span class="stringliteral">&quot;#pauseCharts&quot;</span>&gt;
<a name="l01559"></a>01559             &lt;?php echo <a class="code" href="common_8lib_8php.html#a54fdec9763bf305a5082d23a5d7d5957" title="Returns an HTML IMG tag for a particular image from a theme, which may be an actual file or an icon f...">PMA_getImage</a>(<span class="stringliteral">&#39;play.png&#39;</span>); ?&gt;
<a name="l01560"></a>01560             &lt;?php echo __(<span class="stringliteral">&#39;Start Monitor&#39;</span>); ?&gt;
<a name="l01561"></a>01561         &lt;/a&gt;
<a name="l01562"></a>01562         &lt;a href=<span class="stringliteral">&quot;#settingsPopup&quot;</span> rel=<span class="stringliteral">&quot;popupLink&quot;</span> style=<span class="stringliteral">&quot;display:none;&quot;</span>&gt;
<a name="l01563"></a>01563             &lt;?php echo <a class="code" href="common_8lib_8php.html#a54fdec9763bf305a5082d23a5d7d5957" title="Returns an HTML IMG tag for a particular image from a theme, which may be an actual file or an icon f...">PMA_getImage</a>(<span class="stringliteral">&#39;s_cog.png&#39;</span>); ?&gt;
<a name="l01564"></a>01564             &lt;?php echo __(<span class="stringliteral">&#39;Settings&#39;</span>); ?&gt;
<a name="l01565"></a>01565         &lt;/a&gt;
<a name="l01566"></a>01566         &lt;?php <span class="keywordflow">if</span> (!PMA_DRIZZLE) { ?&gt;
<a name="l01567"></a>01567         &lt;a href=<span class="stringliteral">&quot;#monitorInstructionsDialog&quot;</span>&gt;
<a name="l01568"></a>01568             &lt;?php echo <a class="code" href="common_8lib_8php.html#a54fdec9763bf305a5082d23a5d7d5957" title="Returns an HTML IMG tag for a particular image from a theme, which may be an actual file or an icon f...">PMA_getImage</a>(<span class="stringliteral">&#39;b_help.png&#39;</span>); ?&gt;
<a name="l01569"></a>01569             &lt;?php echo __(<span class="stringliteral">&#39;Instructions/Setup&#39;</span>); ?&gt;
<a name="l01570"></a>01570         &lt;/a&gt;
<a name="l01571"></a>01571         &lt;?php } ?&gt;
<a name="l01572"></a>01572         &lt;a href=<span class="stringliteral">&quot;#endChartEditMode&quot;</span> style=<span class="stringliteral">&quot;display:none;&quot;</span>&gt;
<a name="l01573"></a>01573             &lt;?php echo <a class="code" href="common_8lib_8php.html#a54fdec9763bf305a5082d23a5d7d5957" title="Returns an HTML IMG tag for a particular image from a theme, which may be an actual file or an icon f...">PMA_getImage</a>(<span class="stringliteral">&#39;s_okay.png&#39;</span>); ?&gt;
<a name="l01574"></a>01574             &lt;?php echo __(<span class="stringliteral">&#39;Done rearranging/editing charts&#39;</span>); ?&gt;
<a name="l01575"></a>01575         &lt;/a&gt;
<a name="l01576"></a>01576     &lt;/div&gt;
<a name="l01577"></a>01577 
<a name="l01578"></a>01578     &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;popupContent settingsPopup&quot;</span>&gt;
<a name="l01579"></a>01579         &lt;a href=<span class="stringliteral">&quot;#addNewChart&quot;</span>&gt;
<a name="l01580"></a>01580             &lt;?php echo <a class="code" href="common_8lib_8php.html#a54fdec9763bf305a5082d23a5d7d5957" title="Returns an HTML IMG tag for a particular image from a theme, which may be an actual file or an icon f...">PMA_getImage</a>(<span class="stringliteral">&#39;b_chart.png&#39;</span>); ?&gt;
<a name="l01581"></a>01581             &lt;?php echo __(<span class="stringliteral">&#39;Add chart&#39;</span>); ?&gt;
<a name="l01582"></a>01582         &lt;/a&gt;
<a name="l01583"></a>01583         &lt;a href=<span class="stringliteral">&quot;#rearrangeCharts&quot;</span>&gt;&lt;?php echo <a class="code" href="common_8lib_8php.html#a54fdec9763bf305a5082d23a5d7d5957" title="Returns an HTML IMG tag for a particular image from a theme, which may be an actual file or an icon f...">PMA_getImage</a>(<span class="stringliteral">&#39;b_tblops.png&#39;</span>); ?&gt;&lt;?php echo __(<span class="stringliteral">&#39;Rearrange/edit charts&#39;</span>); ?&gt;&lt;/a&gt;
<a name="l01584"></a>01584         &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;clearfloat paddingtop&quot;</span>&gt;&lt;/div&gt;
<a name="l01585"></a>01585         &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;floatleft&quot;</span>&gt;
<a name="l01586"></a>01586             &lt;?php
<a name="l01587"></a>01587             echo __(<span class="stringliteral">&#39;Refresh rate&#39;</span>) . <span class="stringliteral">&#39;&lt;br /&gt;&#39;</span>;
<a name="l01588"></a>01588             <a class="code" href="server__status_8php.html#a7e69f133303e6a45a0edffd671ff004e">refreshList</a>(<span class="stringliteral">&#39;gridChartRefresh&#39;</span>, 5, Array(2, 3, 4, 5, 10, 20, 40, 60, 120, 300, 600, 1200));
<a name="l01589"></a>01589         ?&gt;&lt;br /&gt;
<a name="l01590"></a>01590         &lt;/div&gt;
<a name="l01591"></a>01591         &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;floatleft&quot;</span>&gt;
<a name="l01592"></a>01592             &lt;?php echo __(<span class="stringliteral">&#39;Chart columns&#39;</span>); ?&gt; &lt;br /&gt;
<a name="l01593"></a>01593             &lt;select name=<span class="stringliteral">&quot;chartColumns&quot;</span>&gt;
<a name="l01594"></a>01594                 &lt;option&gt;1&lt;/option&gt;
<a name="l01595"></a>01595                 &lt;option&gt;2&lt;/option&gt;
<a name="l01596"></a>01596                 &lt;option&gt;3&lt;/option&gt;
<a name="l01597"></a>01597                 &lt;option&gt;4&lt;/option&gt;
<a name="l01598"></a>01598                 &lt;option&gt;5&lt;/option&gt;
<a name="l01599"></a>01599                 &lt;option&gt;6&lt;/option&gt;
<a name="l01600"></a>01600                 &lt;option&gt;7&lt;/option&gt;
<a name="l01601"></a>01601                 &lt;option&gt;8&lt;/option&gt;
<a name="l01602"></a>01602                 &lt;option&gt;9&lt;/option&gt;
<a name="l01603"></a>01603                 &lt;option&gt;10&lt;/option&gt;
<a name="l01604"></a>01604             &lt;/select&gt;
<a name="l01605"></a>01605         &lt;/div&gt;
<a name="l01606"></a>01606 
<a name="l01607"></a>01607         &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;clearfloat paddingtop&quot;</span>&gt;
<a name="l01608"></a>01608         &lt;b&gt;&lt;?php echo __(<span class="stringliteral">&#39;Chart arrangement&#39;</span>); ?&gt;&lt;/b&gt; &lt;?php echo <a class="code" href="common_8lib_8php.html#a081817420a85500983dfb5e02110d9f9" title="returns HTML for a footnote marker and add the messsage to the footnotes">PMA_showHint</a>(__(<span class="stringliteral">&#39;The arrangement of the charts is stored to the browsers local storage. You may want to export it if you have a complicated set up.&#39;</span>)); ?&gt;&lt;br/&gt;
<a name="l01609"></a>01609         &lt;a href=<span class="stringliteral">&quot;#importMonitorConfig&quot;</span>&gt;&lt;?php echo __(<span class="stringliteral">&#39;Import&#39;</span>); ?&gt;&lt;/a&gt;&amp;<a class="code" href="tbl__operations_8php.html#ae558f381db979a7271cd21967c941c4b">nbsp</a>;&amp;<a class="code" href="tbl__operations_8php.html#ae558f381db979a7271cd21967c941c4b">nbsp</a>;&lt;a href=<span class="stringliteral">&quot;#exportMonitorConfig&quot;</span>&gt;&lt;?php echo __(<span class="stringliteral">&#39;Export&#39;</span>); ?&gt;&lt;/a&gt;&amp;<a class="code" href="tbl__operations_8php.html#ae558f381db979a7271cd21967c941c4b">nbsp</a>;&amp;<a class="code" href="tbl__operations_8php.html#ae558f381db979a7271cd21967c941c4b">nbsp</a>;&lt;a href=<span class="stringliteral">&quot;#clearMonitorConfig&quot;</span>&gt;&lt;?php echo __(<span class="stringliteral">&#39;Reset to default&#39;</span>); ?&gt;&lt;/a&gt;
<a name="l01610"></a>01610         &lt;/div&gt;
<a name="l01611"></a>01611     &lt;/div&gt;
<a name="l01612"></a>01612 
<a name="l01613"></a>01613     &lt;div <span class="keywordtype">id</span>=<span class="stringliteral">&quot;monitorInstructionsDialog&quot;</span> title=<span class="stringliteral">&quot;&lt;?php echo __(&#39;Monitor Instructions&#39;); ?&gt;&quot;</span> style=<span class="stringliteral">&quot;display:none;&quot;</span>&gt;
<a name="l01614"></a>01614         &lt;?php echo __(<span class="stringliteral">&#39;The phpMyAdmin Monitor can assist you in optimizing the server configuration and track down time intensive queries. For the latter you will need to set log_output to \&#39;TABLE\&#39; and have either the slow_query_log or general_log enabled. Note however, that the general_log produces a lot of data and increases server load by up to 15%&#39;</span>); ?&gt;
<a name="l01615"></a>01615     &lt;?php <span class="keywordflow">if</span> (PMA_MYSQL_INT_VERSION &lt; 50106) { ?&gt;
<a name="l01616"></a>01616         &lt;p&gt;
<a name="l01617"></a>01617         &lt;?php echo <a class="code" href="common_8lib_8php.html#a54fdec9763bf305a5082d23a5d7d5957" title="Returns an HTML IMG tag for a particular image from a theme, which may be an actual file or an icon f...">PMA_getImage</a>(<span class="stringliteral">&#39;s_attention.png&#39;</span>); ?&gt;
<a name="l01618"></a>01618         &lt;?php
<a name="l01619"></a>01619             echo __(<span class="stringliteral">&#39;Unfortunately your Database server does not support logging to table, which is a requirement for analyzing the database logs with phpMyAdmin. Logging to table is supported by MySQL 5.1.6 and onwards. You may still use the server charting features however.&#39;</span>);
<a name="l01620"></a>01620         ?&gt;
<a name="l01621"></a>01621         &lt;/p&gt;
<a name="l01622"></a>01622     &lt;?php
<a name="l01623"></a>01623     } <span class="keywordflow">else</span> {
<a name="l01624"></a>01624     ?&gt;
<a name="l01625"></a>01625         &lt;p&gt;&lt;/p&gt;
<a name="l01626"></a>01626         &lt;img <span class="keyword">class</span>=<span class="stringliteral">&quot;ajaxIcon&quot;</span> src=<span class="stringliteral">&quot;&lt;?php echo $GLOBALS[&#39;pmaThemeImage&#39;]; ?&gt;ajax_clock_small.gif&quot;</span> alt=<span class="stringliteral">&quot;Loading&quot;</span> /&gt;
<a name="l01627"></a>01627         &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;ajaxContent&quot;</span>&gt;&lt;/div&gt;
<a name="l01628"></a>01628         &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;monitorUse&quot;</span> style=<span class="stringliteral">&quot;display:none;&quot;</span>&gt;
<a name="l01629"></a>01629             &lt;p&gt;&lt;/p&gt;
<a name="l01630"></a>01630             &lt;?php
<a name="l01631"></a>01631                 echo <span class="stringliteral">&#39;&lt;strong&gt;&#39;</span>;
<a name="l01632"></a>01632                 echo __(<span class="stringliteral">&#39;Using the monitor:&#39;</span>);
<a name="l01633"></a>01633                 echo <span class="stringliteral">&#39;&lt;/strong&gt;&lt;p&gt;&#39;</span>;
<a name="l01634"></a>01634                 echo __(<span class="stringliteral">&#39;Your browser will refresh all displayed charts in a regular interval. You may add charts and change the refresh rate under \&#39;Settings\&#39;, or remove any chart using the cog icon on each respective chart.&#39;</span>);
<a name="l01635"></a>01635                 echo <span class="stringliteral">&#39;&lt;/p&gt;&lt;p&gt;&#39;</span>;
<a name="l01636"></a>01636                 echo __(<span class="stringliteral">&#39;To display queries from the logs, select the relevant time span on any chart by holding down the left mouse button and panning over the chart. Once confirmed, this will load a table of grouped queries, there you may click on any occuring SELECT statements to further analyze them.&#39;</span>);
<a name="l01637"></a>01637                 echo <span class="stringliteral">&#39;&lt;/p&gt;&#39;</span>;
<a name="l01638"></a>01638             ?&gt;
<a name="l01639"></a>01639             &lt;p&gt;
<a name="l01640"></a>01640             &lt;?php echo <a class="code" href="common_8lib_8php.html#a54fdec9763bf305a5082d23a5d7d5957" title="Returns an HTML IMG tag for a particular image from a theme, which may be an actual file or an icon f...">PMA_getImage</a>(<span class="stringliteral">&#39;s_attention.png&#39;</span>); ?&gt;
<a name="l01641"></a>01641             &lt;?php
<a name="l01642"></a>01642                 echo <span class="stringliteral">&#39;&lt;strong&gt;&#39;</span>;
<a name="l01643"></a>01643                 echo __(<span class="stringliteral">&#39;Please note:&#39;</span>);
<a name="l01644"></a>01644                 echo <span class="stringliteral">&#39;&lt;/strong&gt;&lt;br /&gt;&#39;</span>;
<a name="l01645"></a>01645                 echo __(<span class="stringliteral">&#39;Enabling the general_log may increase the server load by 5-15%. Also be aware that generating statistics from the logs is a load intensive task, so it is advisable to select only a small time span and to disable the general_log and empty its table once monitoring is not required any more.&#39;</span>);
<a name="l01646"></a>01646             ?&gt;
<a name="l01647"></a>01647             &lt;/p&gt;
<a name="l01648"></a>01648         &lt;/div&gt;
<a name="l01649"></a>01649     &lt;?php } ?&gt;
<a name="l01650"></a>01650     &lt;/div&gt;
<a name="l01651"></a>01651 
<a name="l01652"></a>01652     &lt;div <span class="keywordtype">id</span>=<span class="stringliteral">&quot;addChartDialog&quot;</span> title=<span class="stringliteral">&quot;&lt;?php echo __(&#39;Add chart&#39;); ?&gt;&quot;</span> style=<span class="stringliteral">&quot;display:none;&quot;</span>&gt;
<a name="l01653"></a>01653         &lt;div <span class="keywordtype">id</span>=<span class="stringliteral">&quot;tabGridVariables&quot;</span>&gt;
<a name="l01654"></a>01654             &lt;p&gt;&lt;input type=<span class="stringliteral">&quot;text&quot;</span> name=<span class="stringliteral">&quot;chartTitle&quot;</span> value=<span class="stringliteral">&quot;&lt;?php echo __(&#39;Chart Title&#39;); ?&gt;&quot;</span> /&gt;&lt;/p&gt;
<a name="l01655"></a>01655 
<a name="l01656"></a>01656             &lt;input type=<span class="stringliteral">&quot;radio&quot;</span> name=<span class="stringliteral">&quot;chartType&quot;</span> value=<span class="stringliteral">&quot;preset&quot;</span> <span class="keywordtype">id</span>=<span class="stringliteral">&quot;chartPreset&quot;</span> /&gt;
<a name="l01657"></a>01657             &lt;label <span class="keywordflow">for</span>=<span class="stringliteral">&quot;chartPreset&quot;</span>&gt;&lt;?php echo __(<span class="stringliteral">&#39;Preset chart&#39;</span>); ?&gt;&lt;/label&gt;
<a name="l01658"></a>01658             &lt;select name=<span class="stringliteral">&quot;presetCharts&quot;</span>&gt;&lt;/select&gt;&lt;br/&gt;
<a name="l01659"></a>01659 
<a name="l01660"></a>01660             &lt;input type=<span class="stringliteral">&quot;radio&quot;</span> name=<span class="stringliteral">&quot;chartType&quot;</span> value=<span class="stringliteral">&quot;variable&quot;</span> <span class="keywordtype">id</span>=<span class="stringliteral">&quot;chartStatusVar&quot;</span> checked=<span class="stringliteral">&quot;checked&quot;</span> /&gt;
<a name="l01661"></a>01661             &lt;label <span class="keywordflow">for</span>=<span class="stringliteral">&quot;chartStatusVar&quot;</span>&gt;&lt;?php echo __(<span class="stringliteral">&#39;Status variable(s)&#39;</span>); ?&gt;&lt;/label&gt;&lt;br/&gt;
<a name="l01662"></a>01662             &lt;div <span class="keywordtype">id</span>=<span class="stringliteral">&quot;chartVariableSettings&quot;</span>&gt;
<a name="l01663"></a>01663                 &lt;label <span class="keywordflow">for</span>=<span class="stringliteral">&quot;chartSeries&quot;</span>&gt;&lt;?php echo __(<span class="stringliteral">&#39;Select series:&#39;</span>); ?&gt;&lt;/label&gt;&lt;br /&gt;
<a name="l01664"></a>01664                 &lt;select <span class="keywordtype">id</span>=<span class="stringliteral">&quot;chartSeries&quot;</span> name=<span class="stringliteral">&quot;varChartList&quot;</span> <a class="code" href="pmahomme_2css_2theme__right_8css_8php.html#ae20d3ca2acbfbfe24798ca800435f9f1">size</a>=<span class="stringliteral">&quot;1&quot;</span>&gt;
<a name="l01665"></a>01665                     &lt;option&gt;&lt;?php echo __(<span class="stringliteral">&#39;Commonly monitored&#39;</span>); ?&gt;&lt;/option&gt;
<a name="l01666"></a>01666                     &lt;option&gt;Processes&lt;/option&gt;
<a name="l01667"></a>01667                     &lt;option&gt;Questions&lt;/option&gt;
<a name="l01668"></a>01668                     &lt;option&gt;Connections&lt;/option&gt;
<a name="l01669"></a>01669                     &lt;option&gt;Bytes_sent&lt;/option&gt;
<a name="l01670"></a>01670                     &lt;option&gt;Bytes_received&lt;/option&gt;
<a name="l01671"></a>01671                     &lt;option&gt;Threads_connected&lt;/option&gt;
<a name="l01672"></a>01672                     &lt;option&gt;Created_tmp_disk_tables&lt;/option&gt;
<a name="l01673"></a>01673                     &lt;option&gt;Handler_read_first&lt;/option&gt;
<a name="l01674"></a>01674                     &lt;option&gt;Innodb_buffer_pool_wait_free&lt;/option&gt;
<a name="l01675"></a>01675                     &lt;option&gt;Key_reads&lt;/option&gt;
<a name="l01676"></a>01676                     &lt;option&gt;Open_tables&lt;/option&gt;
<a name="l01677"></a>01677                     &lt;option&gt;Select_full_join&lt;/option&gt;
<a name="l01678"></a>01678                     &lt;option&gt;Slow_queries&lt;/option&gt;
<a name="l01679"></a>01679                 &lt;/select&gt;&lt;br /&gt;
<a name="l01680"></a>01680                 &lt;label <span class="keywordflow">for</span>=<span class="stringliteral">&quot;variableInput&quot;</span>&gt;&lt;?php echo __(<span class="stringliteral">&#39;or type variable name:&#39;</span>); ?&gt; &lt;/label&gt;
<a name="l01681"></a>01681                 &lt;input type=<span class="stringliteral">&quot;text&quot;</span> name=<span class="stringliteral">&quot;variableInput&quot;</span> <span class="keywordtype">id</span>=<span class="stringliteral">&quot;variableInput&quot;</span> /&gt;
<a name="l01682"></a>01682                 &lt;p&gt;&lt;/p&gt;
<a name="l01683"></a>01683                 &lt;input type=<span class="stringliteral">&quot;checkbox&quot;</span> name=<span class="stringliteral">&quot;differentialValue&quot;</span> <span class="keywordtype">id</span>=<span class="stringliteral">&quot;differentialValue&quot;</span> value=<span class="stringliteral">&quot;differential&quot;</span> checked=<span class="stringliteral">&quot;checked&quot;</span> /&gt;
<a name="l01684"></a>01684                 &lt;label <span class="keywordflow">for</span>=<span class="stringliteral">&quot;differentialValue&quot;</span>&gt;&lt;?php echo __(<span class="stringliteral">&#39;Display as differential value&#39;</span>); ?&gt;&lt;/label&gt;&lt;br /&gt;
<a name="l01685"></a>01685                 &lt;input type=<span class="stringliteral">&quot;checkbox&quot;</span> <span class="keywordtype">id</span>=<span class="stringliteral">&quot;useDivisor&quot;</span> name=<span class="stringliteral">&quot;useDivisor&quot;</span> value=<span class="stringliteral">&quot;1&quot;</span> /&gt;
<a name="l01686"></a>01686                 &lt;label <span class="keywordflow">for</span>=<span class="stringliteral">&quot;useDivisor&quot;</span>&gt;&lt;?php echo __(<span class="stringliteral">&#39;Apply a divisor&#39;</span>); ?&gt;&lt;/label&gt;
<a name="l01687"></a>01687                 &lt;span <span class="keyword">class</span>=<span class="stringliteral">&quot;divisorInput&quot;</span> style=<span class="stringliteral">&quot;display:none;&quot;</span>&gt;
<a name="l01688"></a>01688                     &lt;input type=<span class="stringliteral">&quot;text&quot;</span> name=<span class="stringliteral">&quot;valueDivisor&quot;</span> <a class="code" href="pmahomme_2css_2theme__right_8css_8php.html#ae20d3ca2acbfbfe24798ca800435f9f1">size</a>=<span class="stringliteral">&quot;4&quot;</span> value=<span class="stringliteral">&quot;1&quot;</span> /&gt;
<a name="l01689"></a>01689                     (&lt;a href=<span class="stringliteral">&quot;#kibDivisor&quot;</span>&gt;&lt;?php echo __(<span class="stringliteral">&#39;KiB&#39;</span>); ?&gt;&lt;/a&gt;, &lt;a href=<span class="stringliteral">&quot;#mibDivisor&quot;</span>&gt;&lt;?php echo __(<span class="stringliteral">&#39;MiB&#39;</span>); ?&gt;&lt;/a&gt;)
<a name="l01690"></a>01690                 &lt;/span&gt;&lt;br /&gt;
<a name="l01691"></a>01691 
<a name="l01692"></a>01692                 &lt;input type=<span class="stringliteral">&quot;checkbox&quot;</span> <span class="keywordtype">id</span>=<span class="stringliteral">&quot;useUnit&quot;</span> name=<span class="stringliteral">&quot;useUnit&quot;</span> value=<span class="stringliteral">&quot;1&quot;</span> /&gt;
<a name="l01693"></a>01693                 &lt;label <span class="keywordflow">for</span>=<span class="stringliteral">&quot;useUnit&quot;</span>&gt;&lt;?php echo __(<span class="stringliteral">&#39;Append unit to data values&#39;</span>); ?&gt;&lt;/label&gt;
<a name="l01694"></a>01694 
<a name="l01695"></a>01695                 &lt;span <span class="keyword">class</span>=<span class="stringliteral">&quot;unitInput&quot;</span> style=<span class="stringliteral">&quot;display:none;&quot;</span>&gt;
<a name="l01696"></a>01696                     &lt;input type=<span class="stringliteral">&quot;text&quot;</span> name=<span class="stringliteral">&quot;valueUnit&quot;</span> <a class="code" href="pmahomme_2css_2theme__right_8css_8php.html#ae20d3ca2acbfbfe24798ca800435f9f1">size</a>=<span class="stringliteral">&quot;4&quot;</span> value=<span class="stringliteral">&quot;&quot;</span> /&gt;
<a name="l01697"></a>01697                 &lt;/span&gt;
<a name="l01698"></a>01698                 &lt;p&gt;
<a name="l01699"></a>01699                     &lt;a href=<span class="stringliteral">&quot;#submitAddSeries&quot;</span>&gt;&lt;b&gt;&lt;?php echo __(<span class="stringliteral">&#39;Add this series&#39;</span>); ?&gt;&lt;/b&gt;&lt;/a&gt;
<a name="l01700"></a>01700                     &lt;span <span class="keywordtype">id</span>=<span class="stringliteral">&quot;clearSeriesLink&quot;</span> style=<span class="stringliteral">&quot;display:none;&quot;</span>&gt;
<a name="l01701"></a>01701                        | &lt;a href=<span class="stringliteral">&quot;#submitClearSeries&quot;</span>&gt;&lt;?php echo __(<span class="stringliteral">&#39;Clear series&#39;</span>); ?&gt;&lt;/a&gt;
<a name="l01702"></a>01702                     &lt;/span&gt;
<a name="l01703"></a>01703                 &lt;/p&gt;
<a name="l01704"></a>01704                 &lt;?php echo __(<span class="stringliteral">&#39;Series in Chart:&#39;</span>); ?&gt;&lt;br/&gt;
<a name="l01705"></a>01705                 &lt;span <span class="keywordtype">id</span>=<span class="stringliteral">&quot;seriesPreview&quot;</span>&gt;
<a name="l01706"></a>01706                 &lt;i&gt;&lt;?php echo __(<span class="stringliteral">&#39;None&#39;</span>); ?&gt;&lt;/i&gt;
<a name="l01707"></a>01707                 &lt;/span&gt;
<a name="l01708"></a>01708             &lt;/div&gt;
<a name="l01709"></a>01709         &lt;/div&gt;
<a name="l01710"></a>01710     &lt;/div&gt;
<a name="l01711"></a>01711 
<a name="l01712"></a>01712     &lt;!-- For <span class="keyword">generic</span> use --&gt;
<a name="l01713"></a>01713     &lt;div <span class="keywordtype">id</span>=<span class="stringliteral">&quot;emptyDialog&quot;</span> title=<span class="stringliteral">&quot;Dialog&quot;</span> style=<span class="stringliteral">&quot;display:none;&quot;</span>&gt;
<a name="l01714"></a>01714     &lt;/div&gt;
<a name="l01715"></a>01715 
<a name="l01716"></a>01716     &lt;?php <span class="keywordflow">if</span> (!PMA_DRIZZLE) { ?&gt;
<a name="l01717"></a>01717     &lt;div <span class="keywordtype">id</span>=<span class="stringliteral">&quot;logAnalyseDialog&quot;</span> title=<span class="stringliteral">&quot;&lt;?php echo __(&#39;Log statistics&#39;); ?&gt;&quot;</span> style=<span class="stringliteral">&quot;display:none;&quot;</span>&gt;
<a name="l01718"></a>01718         &lt;p&gt; &lt;?php echo __(<span class="stringliteral">&#39;Selected time range:&#39;</span>); ?&gt;
<a name="l01719"></a>01719         &lt;input type=<span class="stringliteral">&quot;text&quot;</span> name=<span class="stringliteral">&quot;dateStart&quot;</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;datetimefield&quot;</span> value=<span class="stringliteral">&quot;&quot;</span> /&gt; -
<a name="l01720"></a>01720         &lt;input type=<span class="stringliteral">&quot;text&quot;</span> name=<span class="stringliteral">&quot;dateEnd&quot;</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;datetimefield&quot;</span> value=<span class="stringliteral">&quot;&quot;</span> /&gt;&lt;/p&gt;
<a name="l01721"></a>01721         &lt;input type=<span class="stringliteral">&quot;checkbox&quot;</span> <span class="keywordtype">id</span>=<span class="stringliteral">&quot;limitTypes&quot;</span> value=<span class="stringliteral">&quot;1&quot;</span> checked=<span class="stringliteral">&quot;checked&quot;</span> /&gt;
<a name="l01722"></a>01722         &lt;label <span class="keywordflow">for</span>=<span class="stringliteral">&quot;limitTypes&quot;</span>&gt;
<a name="l01723"></a>01723             &lt;?php echo __(<span class="stringliteral">&#39;Only retrieve SELECT,INSERT,UPDATE and DELETE Statements&#39;</span>); ?&gt;
<a name="l01724"></a>01724         &lt;/label&gt;
<a name="l01725"></a>01725         &lt;br/&gt;
<a name="l01726"></a>01726         &lt;input type=<span class="stringliteral">&quot;checkbox&quot;</span> <span class="keywordtype">id</span>=<span class="stringliteral">&quot;removeVariables&quot;</span> value=<span class="stringliteral">&quot;1&quot;</span> checked=<span class="stringliteral">&quot;checked&quot;</span> /&gt;
<a name="l01727"></a>01727         &lt;label <span class="keywordflow">for</span>=<span class="stringliteral">&quot;removeVariables&quot;</span>&gt;
<a name="l01728"></a>01728             &lt;?php echo __(<span class="stringliteral">&#39;Remove variable data in INSERT statements for better grouping&#39;</span>); ?&gt;
<a name="l01729"></a>01729         &lt;/label&gt;
<a name="l01730"></a>01730 
<a name="l01731"></a>01731         &lt;?php
<a name="l01732"></a>01732         echo <span class="stringliteral">&#39;&lt;p&gt;&#39;</span>;
<a name="l01733"></a>01733         echo __(<span class="stringliteral">&#39;Choose from which log you want the statistics to be generated from.&#39;</span>);
<a name="l01734"></a>01734         echo <span class="stringliteral">&#39;&lt;/p&gt;&lt;p&gt;&#39;</span>;
<a name="l01735"></a>01735         echo __(<span class="stringliteral">&#39;Results are grouped by query text.&#39;</span>);
<a name="l01736"></a>01736         echo <span class="stringliteral">&#39;&lt;/p&gt;&#39;</span>;
<a name="l01737"></a>01737         ?&gt;
<a name="l01738"></a>01738     &lt;/div&gt;
<a name="l01739"></a>01739 
<a name="l01740"></a>01740     &lt;div <span class="keywordtype">id</span>=<span class="stringliteral">&quot;queryAnalyzerDialog&quot;</span> title=<span class="stringliteral">&quot;&lt;?php echo __(&#39;Query analyzer&#39;); ?&gt;&quot;</span> style=<span class="stringliteral">&quot;display:none;&quot;</span>&gt;
<a name="l01741"></a>01741         &lt;textarea <span class="keywordtype">id</span>=<span class="stringliteral">&quot;sqlquery&quot;</span>&gt; &lt;/textarea&gt;
<a name="l01742"></a>01742         &lt;p&gt;&lt;/p&gt;
<a name="l01743"></a>01743         &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;placeHolder&quot;</span>&gt;&lt;/div&gt;
<a name="l01744"></a>01744     &lt;/div&gt;
<a name="l01745"></a>01745     &lt;?php } ?&gt;
<a name="l01746"></a>01746 
<a name="l01747"></a>01747     &lt;table border=<span class="stringliteral">&quot;0&quot;</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;clearfloat&quot;</span> <span class="keywordtype">id</span>=<span class="stringliteral">&quot;chartGrid&quot;</span>&gt;
<a name="l01748"></a>01748 
<a name="l01749"></a>01749     &lt;/table&gt;
<a name="l01750"></a>01750     &lt;div <span class="keywordtype">id</span>=<span class="stringliteral">&quot;logTable&quot;</span>&gt;
<a name="l01751"></a>01751         &lt;br/&gt;
<a name="l01752"></a>01752     &lt;/div&gt;
<a name="l01753"></a>01753 
<a name="l01754"></a>01754     &lt;script type=<span class="stringliteral">&quot;text/javascript&quot;</span>&gt;
<a name="l01755"></a>01755         variableNames = [ &lt;?php
<a name="l01756"></a>01756             <a class="code" href="config_8sample_8inc_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a>=0;
<a name="l01757"></a>01757             <span class="keywordflow">foreach</span> ($server_status as <a class="code" href="wab_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a>=&gt;$value) {
<a name="l01758"></a>01758                 <span class="keywordflow">if</span> (is_numeric($value)) {
<a name="l01759"></a>01759                     <span class="keywordflow">if</span> ($i++ &gt; 0) {
<a name="l01760"></a>01760                         echo <span class="stringliteral">&quot;, &quot;</span>;
<a name="l01761"></a>01761                     }
<a name="l01762"></a>01762                     echo <span class="stringliteral">&quot;&#39;&quot;</span> . <a class="code" href="wab_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a> . <span class="stringliteral">&quot;&#39;&quot;</span>;
<a name="l01763"></a>01763                 }
<a name="l01764"></a>01764             }
<a name="l01765"></a>01765             ?&gt; ];
<a name="l01766"></a>01766     &lt;/script&gt;
<a name="l01767"></a>01767 &lt;?php
<a name="l01768"></a>01768 }
<a name="l01769"></a>01769 
<a name="l01770"></a>01770 <span class="comment">/* Builds a &lt;select&gt; list for refresh rates */</span>
<a name="l01771"></a><a class="code" href="server__status_8php.html#a7e69f133303e6a45a0edffd671ff004e">01771</a> <span class="keyword">function</span> <a class="code" href="server__status_8php.html#a7e69f133303e6a45a0edffd671ff004e">refreshList</a>(<a class="code" href="wab_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a>, $defaultRate=5, $refreshRates=Array(1, 2, 5, 10, 20, 40, 60, 120, 300, 600))
<a name="l01772"></a>01772 {
<a name="l01773"></a>01773 ?&gt;
<a name="l01774"></a>01774     &lt;select name=<span class="stringliteral">&quot;&lt;?php echo $name; ?&gt;&quot;</span> <span class="keywordtype">id</span>=<span class="stringliteral">&quot;id_&lt;?php echo $name; ?&gt;&quot;</span>&gt;
<a name="l01775"></a>01775         &lt;?php
<a name="l01776"></a>01776             <span class="keywordflow">foreach</span> ($refreshRates as $rate) {
<a name="l01777"></a>01777                 $selected = ($rate == $defaultRate)?<span class="stringliteral">&#39; selected=&quot;selected&quot;&#39;</span>:<span class="stringliteral">&#39;&#39;</span>;
<a name="l01778"></a>01778 
<a name="l01779"></a>01779                 <span class="keywordflow">if</span> ($rate&lt;60) {
<a name="l01780"></a>01780                     echo <span class="stringliteral">&#39;&lt;option value=&quot;&#39;</span> . $rate . <span class="charliteral">&#39;&quot;&#39;</span> . $selected . <span class="charliteral">&#39;&gt;&#39;</span> . sprintf(_ngettext(<span class="stringliteral">&#39;%d second&#39;</span>, <span class="stringliteral">&#39;%d seconds&#39;</span>, $rate), $rate) . <span class="stringliteral">&#39;&lt;/option&gt;&#39;</span>;
<a name="l01781"></a>01781                 } <span class="keywordflow">else</span> {
<a name="l01782"></a>01782                     echo <span class="stringliteral">&#39;&lt;option value=&quot;&#39;</span> . $rate . <span class="charliteral">&#39;&quot;&#39;</span> . $selected . <span class="charliteral">&#39;&gt;&#39;</span> . sprintf(_ngettext(<span class="stringliteral">&#39;%d minute&#39;</span>, <span class="stringliteral">&#39;%d minutes&#39;</span>, $rate/60), $rate/60) . <span class="stringliteral">&#39;&lt;/option&gt;&#39;</span>;
<a name="l01783"></a>01783                 }
<a name="l01784"></a>01784             }
<a name="l01785"></a>01785         ?&gt;
<a name="l01786"></a>01786     &lt;/select&gt;
<a name="l01787"></a>01787 &lt;?php
<a name="l01788"></a>01788 }
<a name="l01789"></a>01789 <span class="comment"></span>
<a name="l01790"></a>01790 <span class="comment">/**</span>
<a name="l01791"></a>01791 <span class="comment"> * cleanup of some deprecated values</span>
<a name="l01792"></a>01792 <span class="comment"> *</span>
<a name="l01793"></a>01793 <span class="comment"> * @param array &amp;$server_status</span>
<a name="l01794"></a>01794 <span class="comment"> */</span>
<a name="l01795"></a><a class="code" href="server__status_8php.html#a83b5a15a5ad32060bb1abe5966b579a8">01795</a> <span class="keyword">function</span> <a class="code" href="server__status_8php.html#a83b5a15a5ad32060bb1abe5966b579a8" title="cleanup of some deprecated values">cleanDeprecated</a>(&amp;<a class="code" href="server__status_8php.html#ae46650638d6130e555f8469eb632aadc" title="flush status variables if requested">$server_status</a>)
<a name="l01796"></a>01796 {
<a name="l01797"></a>01797     $deprecated = array(
<a name="l01798"></a>01798         <span class="stringliteral">&#39;Com_prepare_sql&#39;</span> =&gt; <span class="stringliteral">&#39;Com_stmt_prepare&#39;</span>,
<a name="l01799"></a>01799         <span class="stringliteral">&#39;Com_execute_sql&#39;</span> =&gt; <span class="stringliteral">&#39;Com_stmt_execute&#39;</span>,
<a name="l01800"></a>01800         <span class="stringliteral">&#39;Com_dealloc_sql&#39;</span> =&gt; <span class="stringliteral">&#39;Com_stmt_close&#39;</span>,
<a name="l01801"></a>01801     );
<a name="l01802"></a>01802 
<a name="l01803"></a>01803     <span class="keywordflow">foreach</span> ($deprecated as $old =&gt; $new) {
<a name="l01804"></a>01804         <span class="keywordflow">if</span> (isset(<a class="code" href="server__status_8php.html#ae46650638d6130e555f8469eb632aadc" title="flush status variables if requested">$server_status</a>[$old]) &amp;&amp; isset(<a class="code" href="server__status_8php.html#ae46650638d6130e555f8469eb632aadc" title="flush status variables if requested">$server_status</a>[$new])) {
<a name="l01805"></a>01805             unset(<a class="code" href="server__status_8php.html#ae46650638d6130e555f8469eb632aadc" title="flush status variables if requested">$server_status</a>[$old]);
<a name="l01806"></a>01806         }
<a name="l01807"></a>01807     }
<a name="l01808"></a>01808 }
<a name="l01809"></a>01809 <span class="comment"></span>
<a name="l01810"></a>01810 <span class="comment">/**</span>
<a name="l01811"></a>01811 <span class="comment"> * Sends the footer</span>
<a name="l01812"></a>01812 <span class="comment"> */</span>
<a name="l01813"></a>01813 require <span class="stringliteral">&#39;./libraries/footer.inc.php&#39;</span>;
<a name="l01814"></a>01814 ?&gt;
</pre></div></div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="server__status_8php.html">server_status.php</a>      </li>

    <li class="footer">Generated on Fri Mar 14 2014 04:14:50 for RFSCMSAPIDocumentation by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
