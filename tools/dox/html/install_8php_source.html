<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>RFSCMSAPIDocumentation: install.php Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">RFSCMSAPIDocumentation
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('install_8php.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">install.php</div>  </div>
</div><!--header-->
<div class="contents">
<a href="install_8php.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?
<a name="l00002"></a>00002 @session_name(str_replace(<span class="stringliteral">&quot; &quot;</span>,<span class="stringliteral">&quot;_&quot;</span>,<span class="stringliteral">&quot;R_F_S_INSTALLER&quot;</span>));
<a name="l00003"></a>00003 @session_cache_expire(99999);
<a name="l00004"></a>00004 @session_start();
<a name="l00005"></a>00005 
<a name="l00006"></a><a class="code" href="install_8php.html#a9797d7a3fd8a00f6bd57692c9f01d0ca">00006</a> <a class="code" href="config_8sitevars_8php.html#a9797d7a3fd8a00f6bd57692c9f01d0ca">$RFS_SITE_OS</a>=<span class="stringliteral">&quot;X&quot;</span>;
<a name="l00007"></a><a class="code" href="install_8php.html#a5a9f0160be449ee6a3c6275e63083319">00007</a> <a class="code" href="config_8sitevars_8php.html#a5a9f0160be449ee6a3c6275e63083319">$RFS_SITE_PATH_SEP</a>=<span class="stringliteral">&quot;/&quot;</span>;
<a name="l00008"></a>00008 <span class="keywordflow">if</span>(substr(PHP_OS,0,3)==<span class="stringliteral">&quot;WIN&quot;</span>) {
<a name="l00009"></a>00009     <a class="code" href="config_8sitevars_8php.html#a5a9f0160be449ee6a3c6275e63083319">$RFS_SITE_PATH_SEP</a>=<span class="stringliteral">&quot;\\&quot;</span>;
<a name="l00010"></a>00010     <a class="code" href="config_8sitevars_8php.html#a9797d7a3fd8a00f6bd57692c9f01d0ca">$RFS_SITE_OS</a>=<span class="stringliteral">&quot;Windows&quot;</span>;
<a name="l00011"></a>00011 }
<a name="l00012"></a>00012 
<a name="l00013"></a><a class="code" href="install_8php.html#a0269849deedc7ed4aa98081a1446c6b3">00013</a> <span class="keyword">function</span> <a class="code" href="install_8php.html#a0269849deedc7ed4aa98081a1446c6b3">install_mysql_open_database</a>(){
<a name="l00014"></a>00014     $mysql=@mysql_connect(  <a class="code" href="config_8php.html#aad108a6abffdea835bc6cc2f3244751e">$GLOBALS</a>[<span class="stringliteral">&#39;authdbaddress&#39;</span>], <a class="code" href="config_8php.html#aad108a6abffdea835bc6cc2f3244751e">$GLOBALS</a>[<span class="stringliteral">&#39;authdbuser&#39;</span>], <a class="code" href="config_8php.html#aad108a6abffdea835bc6cc2f3244751e">$GLOBALS</a>[<span class="stringliteral">&#39;authdbpass&#39;</span>]);
<a name="l00015"></a>00015     <span class="keywordflow">if</span>(empty($mysql))   {
<a name="l00016"></a>00016         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00017"></a>00017     }
<a name="l00018"></a>00018     mysql_select_db( <a class="code" href="config_8php.html#aad108a6abffdea835bc6cc2f3244751e">$GLOBALS</a>[<span class="stringliteral">&#39;authdbname&#39;</span>], $mysql);
<a name="l00019"></a>00019     <span class="keywordflow">return</span> $mysql;
<a name="l00020"></a>00020 }
<a name="l00021"></a><a class="code" href="install_8php.html#afa91f7485d17479a06a17af042682e3c">00021</a> <span class="keyword">function</span> <a class="code" href="install_8php.html#afa91f7485d17479a06a17af042682e3c">install_mysql_query</a>($query) {
<a name="l00022"></a>00022     <span class="keywordflow">if</span>(stristr($query,<span class="stringliteral">&quot;`users`&quot;</span>)) { $x=<a class="code" href="lib_8mysql_8php.html#a6fa7adf3de43024970dae3e43ea978f0">lib_mysql_query_user_db</a>($query); <span class="keywordflow">return</span> $x; }
<a name="l00023"></a>00023     $mysql=<a class="code" href="lib_8mysql_8php.html#aaa8a1d12f0cf7b04ec8219ff48847551">lib_mysql_open_database</a>(); <span class="keywordflow">if</span>($mysql==<span class="keyword">false</span>) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00024"></a>00024     <a class="code" href="link__out_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a>=mysql_query($query,$mysql);
<a name="l00025"></a>00025     <span class="keywordflow">if</span>(empty(<a class="code" href="link__out_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a>)) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00026"></a>00026     <span class="keywordflow">return</span> <a class="code" href="link__out_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a>;
<a name="l00027"></a>00027 }
<a name="l00028"></a><a class="code" href="install_8php.html#aeb5cd467a03c45f598d0b7f6222ecee1">00028</a> <span class="keyword">function</span> <a class="code" href="install_8php.html#aeb5cd467a03c45f598d0b7f6222ecee1">install_mysql_query_user_db</a>($q){
<a name="l00029"></a>00029     <a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>=<a class="code" href="lib_8mysql_8php.html#a2eba06a83588d3b2776980e7205c57a9">lib_mysql_query_other_db</a>(<a class="code" href="config_8php.html#aad108a6abffdea835bc6cc2f3244751e">$GLOBALS</a>[<span class="stringliteral">&#39;userdbname&#39;</span>], <a class="code" href="config_8php.html#aad108a6abffdea835bc6cc2f3244751e">$GLOBALS</a>[<span class="stringliteral">&#39;userdbaddress&#39;</span>], <a class="code" href="config_8php.html#aad108a6abffdea835bc6cc2f3244751e">$GLOBALS</a>[<span class="stringliteral">&#39;userdbuser&#39;</span>],<a class="code" href="config_8php.html#aad108a6abffdea835bc6cc2f3244751e">$GLOBALS</a>[<span class="stringliteral">&#39;userdbpass&#39;</span>],$q);
<a name="l00030"></a>00030     <span class="keywordflow">return</span><a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>;
<a name="l00031"></a>00031 }
<a name="l00032"></a><a class="code" href="install_8php.html#a54b1d6a615ab70de29c91b4f32611aed">00032</a> <span class="keyword">function</span> <a class="code" href="install_8php.html#a54b1d6a615ab70de29c91b4f32611aed">install_mysql_query_other_db</a>($db,$host,<a class="code" href="showprofile_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a>,$pass,$query){
<a name="l00033"></a>00033     $mysql=mysql_connect($host,<a class="code" href="showprofile_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a>,$pass);
<a name="l00034"></a>00034     mysql_select_db($db, $mysql);
<a name="l00035"></a>00035     <a class="code" href="link__out_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a>=mysql_query($query,$mysql);
<a name="l00036"></a>00036     <span class="keywordflow">return</span> <a class="code" href="link__out_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a>;
<a name="l00037"></a>00037 }
<a name="l00038"></a>00038 
<a name="l00039"></a><a class="code" href="install_8php.html#a0304f1c6ce0928c6dda1a31ca21a58ae">00039</a> <a class="code" href="config_8sitevars_8php.html#a0304f1c6ce0928c6dda1a31ca21a58ae">$RFS_SITE_PATH</a> = getcwd();
<a name="l00040"></a><a class="code" href="install_8php.html#ae4dfbab9fe9db195435618436fd75565">00040</a> <a class="code" href="install_8php.html#ae4dfbab9fe9db195435618436fd75565">$cwdx</a>=explode(<a class="code" href="config_8sitevars_8php.html#a5a9f0160be449ee6a3c6275e63083319">$RFS_SITE_PATH_SEP</a>,<a class="code" href="config_8sitevars_8php.html#a0304f1c6ce0928c6dda1a31ca21a58ae">$RFS_SITE_PATH</a>);
<a name="l00041"></a><a class="code" href="install_8php.html#a2457dd2ce6ded23bd04803ec7693885f">00041</a> <a class="code" href="install_8php.html#a2457dd2ce6ded23bd04803ec7693885f">$installd</a>=array_pop(<a class="code" href="install_8php.html#ae4dfbab9fe9db195435618436fd75565">$cwdx</a>);
<a name="l00042"></a>00042 <a class="code" href="config_8sitevars_8php.html#a0304f1c6ce0928c6dda1a31ca21a58ae">$RFS_SITE_PATH</a>=join(<a class="code" href="config_8sitevars_8php.html#a5a9f0160be449ee6a3c6275e63083319">$RFS_SITE_PATH_SEP</a>,<a class="code" href="install_8php.html#ae4dfbab9fe9db195435618436fd75565">$cwdx</a>);
<a name="l00043"></a>00043 <span class="keywordflow">if</span>(<a class="code" href="install_8php.html#a2457dd2ce6ded23bd04803ec7693885f">$installd</a>!=<span class="stringliteral">&quot;install&quot;</span>) {
<a name="l00044"></a>00044     <a class="code" href="config_8sitevars_8php.html#a0304f1c6ce0928c6dda1a31ca21a58ae">$RFS_SITE_PATH</a>.=<a class="code" href="config_8sitevars_8php.html#a5a9f0160be449ee6a3c6275e63083319">$RFS_SITE_PATH_SEP</a>.$installd;
<a name="l00045"></a>00045     chdir(<span class="stringliteral">&quot;install&quot;</span>);
<a name="l00046"></a>00046 }
<a name="l00047"></a>00047 
<a name="l00048"></a><a class="code" href="install_8php.html#a367320ed2c4ef3c0525529de84a79b4a">00048</a> <a class="code" href="config_8sitevars_8php.html#ac3d3378b57bd437398e3c2ef9fc1989a">$RFS_SITE_URL</a>  = <span class="stringliteral">&quot;http://&quot;</span>.$_SERVER[<span class="stringliteral">&#39;SERVER_NAME&#39;</span>].$_SERVER[<span class="stringliteral">&#39;PHP_SELF&#39;</span>];
<a name="l00049"></a><a class="code" href="install_8php.html#a8c02be5fce37c217cb52e37f621da629">00049</a> <a class="code" href="install_8php.html#a8c02be5fce37c217cb52e37f621da629">$hostx</a>=explode(<span class="stringliteral">&quot;/&quot;</span>,<a class="code" href="config_8sitevars_8php.html#ac3d3378b57bd437398e3c2ef9fc1989a">$RFS_SITE_URL</a>);
<a name="l00050"></a><a class="code" href="install_8php.html#a0a44e6760141442bb439b1ab1395d8ff">00050</a> <a class="code" href="install_8php.html#a0a44e6760141442bb439b1ab1395d8ff">$page</a>=array_pop(<a class="code" href="install_8php.html#a8c02be5fce37c217cb52e37f621da629">$hostx</a>);
<a name="l00051"></a><a class="code" href="install_8php.html#a5ade1bb16ee3a241cefc0b84918f1598">00051</a> <a class="code" href="install_8php.html#a5ade1bb16ee3a241cefc0b84918f1598">$folder</a>=array_pop(<a class="code" href="install_8php.html#a8c02be5fce37c217cb52e37f621da629">$hostx</a>);
<a name="l00052"></a>00052 <a class="code" href="config_8sitevars_8php.html#ac3d3378b57bd437398e3c2ef9fc1989a">$RFS_SITE_URL</a>=join(<span class="stringliteral">&quot;/&quot;</span>,<a class="code" href="install_8php.html#a8c02be5fce37c217cb52e37f621da629">$hostx</a>);
<a name="l00053"></a>00053 <span class="keywordflow">if</span>(<a class="code" href="install_8php.html#a5ade1bb16ee3a241cefc0b84918f1598">$folder</a>!=<span class="stringliteral">&quot;install&quot;</span>) <a class="code" href="config_8sitevars_8php.html#ac3d3378b57bd437398e3c2ef9fc1989a">$RFS_SITE_URL</a>.=<span class="stringliteral">&quot;/&quot;</span>.$folder;
<a name="l00054"></a>00054 
<a name="l00055"></a><a class="code" href="install_8php.html#a98904427c6610c1e0eb529c2f580ecd5">00055</a> <a class="code" href="install_8php.html#a98904427c6610c1e0eb529c2f580ecd5">$table_width</a>=<span class="stringliteral">&quot;85%&quot;</span>;
<a name="l00056"></a>00056 
<a name="l00057"></a>00057 include(<span class="stringliteral">&quot;../include/version.php&quot;</span>);
<a name="l00058"></a><a class="code" href="install_8php.html#a6c3916d4db25e8bfde2fb622808dc61f">00058</a> <a class="code" href="version_8php.html#a6c3916d4db25e8bfde2fb622808dc61f">$RFS_BUILD</a>=file_get_contents(<span class="stringliteral">&quot;../build.dat&quot;</span>);
<a name="l00059"></a><a class="code" href="install_8php.html#af2f2aa63da4d2092315e9eee020134f4">00059</a> <a class="code" href="install_8php.html#af2f2aa63da4d2092315e9eee020134f4">$rver</a>=file_get_contents(<span class="stringliteral">&quot;https://raw.github.com/sethcoder/rfscms/master/include/version.php&quot;</span>);
<a name="l00060"></a><a class="code" href="install_8php.html#a239b69ec2c60cd10673d2f8fe7bf28b7">00060</a> <a class="code" href="install_8php.html#a239b69ec2c60cd10673d2f8fe7bf28b7">$rbld</a>=file_get_contents(<span class="stringliteral">&quot;https://raw.github.com/sethcoder/rfscms/master/build.dat&quot;</span>);
<a name="l00061"></a>00061 
<a name="l00062"></a><a class="code" href="install_8php.html#afa46477781fdee556c550face17fb5b1">00062</a> <a class="code" href="install_8php.html#afa46477781fdee556c550face17fb5b1">$rverx</a>=explode(<span class="stringliteral">&quot;\&quot;&quot;</span>,<a class="code" href="install_8php.html#af2f2aa63da4d2092315e9eee020134f4">$rver</a>);
<a name="l00063"></a>00063 
<a name="l00064"></a>00064 <span class="comment">// echo &quot; [$RFS_VERSION][$RFS_BUILD] [$rverx[1]][$rbld]\n&quot;;</span>
<a name="l00065"></a>00065 
<a name="l00066"></a><a class="code" href="install_8php.html#a300998b3494c9833f304cf74ac038bb2">00066</a> <span class="keywordflow">if</span>( (<a class="code" href="version_8php.html#a9cdec9fe3ad5a07ac6aa1f1be15288ae">$RFS_VERSION</a>!=<a class="code" href="install_8php.html#afa46477781fdee556c550face17fb5b1">$rverx</a>[1]) ||
<a name="l00067"></a>00067      (intval(<a class="code" href="version_8php.html#a6c3916d4db25e8bfde2fb622808dc61f">$RFS_BUILD</a>)!=intval(<a class="code" href="install_8php.html#a239b69ec2c60cd10673d2f8fe7bf28b7">$rbld</a>))) {
<a name="l00068"></a>00068     echo <span class="stringliteral">&quot;&lt;div width=100% style=&#39;font-size: 23px; background-color: red; color:white;&#39;&gt;</span>
<a name="l00069"></a>00069 <span class="stringliteral">    ATTENTION: NEW VERSION AVAILABLE: \n&quot;</span>.
<a name="l00070"></a>00070             <a class="code" href="install_8php.html#afa46477781fdee556c550face17fb5b1">$rverx</a>[1].<span class="stringliteral">&quot; BUILD $rbld. Get it at </span>
<a name="l00071"></a>00071 <span class="stringliteral">            &lt;a href=\&quot;https://www.github.com/sethcoder/rfscms/\&quot;&gt;Github&lt;/a&gt;.</span>
<a name="l00072"></a>00072 <span class="stringliteral">            &lt;/div&gt;&quot;</span>;
<a name="l00073"></a>00073 }
<a name="l00074"></a>00074 
<a name="l00075"></a>00075 echo <span class="stringliteral">&quot;&lt;html&gt;&lt;head&gt;&lt;title&gt;RFS CMS $RFS_VERSION Installer&lt;/title&gt;&quot;</span>;
<a name="l00076"></a>00076 echo <span class="stringliteral">&quot;&lt;link rel=\&quot;stylesheet\&quot; href=\&quot;$RFS_SITE_URL/install/install.css\&quot; type=\&quot;text/css\&quot;&gt;\n&quot;</span>;
<a name="l00077"></a>00077 echo <span class="stringliteral">&quot;&lt;/head&gt;&lt;body style=&#39;</span>
<a name="l00078"></a>00078 <span class="stringliteral">background-image: url(\&quot;$RFS_SITE_URL/install/install.bkg.jpg\&quot;);</span>
<a name="l00079"></a>00079 <span class="stringliteral">background-width: 100%;</span>
<a name="l00080"></a>00080 <span class="stringliteral">background-height: 100%;</span>
<a name="l00081"></a>00081 <span class="stringliteral">background-repeat: no-repeat;</span>
<a name="l00082"></a>00082 <span class="stringliteral">background-attachment: fixed;</span>
<a name="l00083"></a>00083 <span class="stringliteral">&#39;&gt;&quot;</span>;
<a name="l00084"></a>00084 
<a name="l00085"></a>00085 echo <span class="stringliteral">&quot;&lt;div width=100% style=&#39;background-color: blue; color:white;&#39;&gt;</span>
<a name="l00086"></a>00086 <span class="stringliteral">RFS CMS $RFS_VERSION Installation.</span>
<a name="l00087"></a>00087 <span class="stringliteral">For full docs and support goto</span>
<a name="l00088"></a>00088 <span class="stringliteral">&lt;a href=\&quot;http://www.sethcoder.com/modules/wiki/rfswiki.php?name=RFS+Content+Management+System\&quot; </span>
<a name="l00089"></a>00089 <span class="stringliteral">target=_blank&gt;SethCoder.com&lt;/a&gt; (Home of RFS CMS)</span>
<a name="l00090"></a>00090 <span class="stringliteral">&lt;/div&gt;</span>
<a name="l00091"></a>00091 <span class="stringliteral">&quot;</span>;
<a name="l00092"></a>00092 
<a name="l00093"></a><a class="code" href="install_8php.html#a8dc44ca1918c6673de6a7397946566f4">00093</a> <a class="code" href="install_8php.html#a8dc44ca1918c6673de6a7397946566f4">$rfs_password</a>=<span class="stringliteral">&quot;&quot;</span>;
<a name="l00094"></a><a class="code" href="install_8php.html#a9834e8a805208c60c6ccaedbce99efaf">00094</a> <a class="code" href="install_8php.html#a9834e8a805208c60c6ccaedbce99efaf">$rfs_password_c</a>=<span class="stringliteral">&quot;&quot;</span>;
<a name="l00095"></a><a class="code" href="install_8php.html#ab8f6d5b9f97457d1fee1006ac9e50cab">00095</a> <a class="code" href="install_8php.html#ab8f6d5b9f97457d1fee1006ac9e50cab">$rfs_site_url</a>=<span class="stringliteral">&quot;&quot;</span>;
<a name="l00096"></a><a class="code" href="install_8php.html#a374515df22d9784221c899c391ffa509">00096</a> <a class="code" href="install_8php.html#a374515df22d9784221c899c391ffa509">$rfs_db_password</a>=<span class="stringliteral">&quot;&quot;</span>;
<a name="l00097"></a><a class="code" href="install_8php.html#a21ac5ba0332c475c4297867c6861acbd">00097</a> <a class="code" href="install_8php.html#a21ac5ba0332c475c4297867c6861acbd">$rfs_db_password_confirm</a>=<span class="stringliteral">&quot;&quot;</span>;
<a name="l00098"></a>00098 
<a name="l00099"></a>00099 
<a name="l00100"></a>00100 <span class="keywordflow">foreach</span>( $_REQUEST as $k =&gt; $v ) { <span class="keywordflow">if</span>(stristr($k,<span class="stringliteral">&quot;rfs_&quot;</span>)) { <a class="code" href="config_8php.html#aad108a6abffdea835bc6cc2f3244751e">$GLOBALS</a>[<span class="stringliteral">&quot;$k&quot;</span>]=$v; } }
<a name="l00101"></a>00101 
<a name="l00102"></a><a class="code" href="install_8php.html#af9da176a74bd49cb97ea35c6ac7257bc">00102</a> <a class="code" href="install_8php.html#af9da176a74bd49cb97ea35c6ac7257bc">$action</a>=<span class="stringliteral">&quot;&quot;</span>;
<a name="l00103"></a>00103 <span class="keywordflow">if</span>(isset($_REQUEST[<span class="stringliteral">&#39;action&#39;</span>])) <a class="code" href="install_8php.html#af9da176a74bd49cb97ea35c6ac7257bc">$action</a>=$_REQUEST[<span class="stringliteral">&#39;action&#39;</span>];
<a name="l00104"></a>00104 
<a name="l00105"></a>00105 <span class="keywordflow">if</span>((<a class="code" href="install_8php.html#af9da176a74bd49cb97ea35c6ac7257bc">$action</a>==<span class="stringliteral">&quot;go_install&quot;</span>) || (empty(<a class="code" href="install_8php.html#af9da176a74bd49cb97ea35c6ac7257bc">$action</a>)) ) {
<a name="l00106"></a>00106 
<a name="l00107"></a>00107     echo <span class="stringliteral">&quot;&lt;center&gt; &lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&quot;</span>;
<a name="l00108"></a>00108     echo <span class="stringliteral">&quot;&lt;table border=0 width=$table_width&gt;&lt;tr&gt;&lt;td class=formboxd&gt;&quot;</span>;
<a name="l00109"></a>00109     echo <span class="stringliteral">&quot;&lt;center&gt;&lt;h1&gt; RFS CMS $RFS_VERSION ( Build: $RFS_BUILD)&lt;/h1&gt;&lt;/center&gt;&quot;</span>;
<a name="l00110"></a>00110     echo <span class="stringliteral">&quot;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&quot;</span>;
<a name="l00111"></a>00111     echo <span class="stringliteral">&quot;</span>
<a name="l00112"></a>00112 <span class="stringliteral">        &lt;table border=0 width=$table_width&gt;&lt;tr&gt;&lt;td class=formboxd&gt;</span>
<a name="l00113"></a>00113 <span class="stringliteral">        &lt;br&gt;&quot;</span>;
<a name="l00114"></a>00114         echo <span class="stringliteral">&quot;</span>
<a name="l00115"></a>00115 <span class="stringliteral">        &lt;p align=center&gt;Really Frickin Simple Content Management System (RFSCMS) $RFS_VERSION Installation.&lt;/p&gt;&quot;</span>;
<a name="l00116"></a>00116         echo <span class="stringliteral">&quot;</span>
<a name="l00117"></a>00117 <span class="stringliteral">&lt;p style=\&quot;padding: 20px;\&quot;&gt;</span>
<a name="l00118"></a>00118 <span class="stringliteral">Thank you for deciding to try out RFSCMS. I have put a lot of hard work into making this over the years. My goal was to make the best possible CMS, while at the same time making it easy to use. If you have any questions or comments, or would like to make suggestions for further releases of RFS, or if you would like to help develop this open source CMS, please contact me.&lt;br&gt;&lt;br&gt;</span>
<a name="l00119"></a>00119 <span class="stringliteral">&lt;/p&gt;&quot;</span>;
<a name="l00120"></a>00120 
<a name="l00121"></a>00121   echo <span class="stringliteral">&quot;&lt;p align=center&gt;</span>
<a name="l00122"></a>00122 <span class="stringliteral">&lt;a href=&#39;mailto:defectiveseth@gmail.com&#39; target=_blank&gt;Email me!&lt;br&gt; </span>
<a name="l00123"></a>00123 <span class="stringliteral"> &lt;img src=\&quot;$RFS_SITE_URL/images/icons/email.gif\&quot;&gt;&lt;/a&gt;&lt;br&gt;</span>
<a name="l00124"></a>00124 <span class="stringliteral">Follow me on Twitter!&lt;br&gt;</span>
<a name="l00125"></a>00125 <span class="stringliteral">&lt;br&gt;</span>
<a name="l00126"></a>00126 <span class="stringliteral">&lt;a href=\&quot;https://twitter.com/sethcoder\&quot;</span>
<a name="l00127"></a>00127 <span class="stringliteral">class=\&quot;twitter-follow-button\&quot;</span>
<a name="l00128"></a>00128 <span class="stringliteral">data-show-count=\&quot;true\&quot;</span>
<a name="l00129"></a>00129 <span class="stringliteral">data-show-screen-name=\&quot;false\&quot;&gt; &lt;/a&gt; &lt;script&gt;!function(d,s,id)</span>
<a name="l00130"></a>00130 <span class="stringliteral">{var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id))</span>
<a name="l00131"></a>00131 <span class="stringliteral">    {js=d.createElement(s);js.id=id;</span>
<a name="l00132"></a>00132 <span class="stringliteral">    js.src=\&quot;//platform.twitter.com/widgets.js\&quot;;</span>
<a name="l00133"></a>00133 <span class="stringliteral">    fjs.parentNode.insertBefore(js,fjs);}}(document,\&quot;script\&quot;,\&quot;twitter-wjs\&quot;);</span>
<a name="l00134"></a>00134 <span class="stringliteral">    &lt;/script&gt; &lt;/p&gt;&quot;</span>;
<a name="l00135"></a>00135 
<a name="l00136"></a>00136 echo <span class="stringliteral">&quot;</span>
<a name="l00137"></a>00137 <span class="stringliteral">&lt;p align=center&gt;</span>
<a name="l00138"></a>00138 <span class="stringliteral"></span>
<a name="l00139"></a>00139 <span class="stringliteral">&lt;a href=&#39;https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=WP3BJCCH5P8N2&#39; target=_blank&gt;Donate!&lt;br&gt;</span>
<a name="l00140"></a>00140 <span class="stringliteral">&lt;img src=\&quot;$RFS_SITE_URL/images/icons/paypal.gif\&quot;&gt;&lt;/a&gt;</span>
<a name="l00141"></a>00141 <span class="stringliteral">&lt;/p&gt;&quot;</span>;
<a name="l00142"></a>00142         echo <span class="stringliteral">&quot;&lt;br&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;</span>
<a name="l00143"></a>00143 <span class="stringliteral">        &lt;table width=$table_width&gt;&lt;tr&gt;&lt;td class=formboxd&gt;&lt;center&gt;</span>
<a name="l00144"></a>00144 <span class="stringliteral">        &lt;br&gt;</span>
<a name="l00145"></a>00145 <span class="stringliteral">        &lt;a href=$RFS_SITE_URL/install/install.php?action=step_a&amp;submit=Begin&gt;BEGIN!&lt;br&gt;</span>
<a name="l00146"></a>00146 <span class="stringliteral">        </span>
<a name="l00147"></a>00147 <span class="stringliteral">        &lt;img src=\&quot;$RFS_SITE_URL/images/icons/next.png\&quot;&gt;</span>
<a name="l00148"></a>00148 <span class="stringliteral">        &lt;/a&gt;</span>
<a name="l00149"></a>00149 <span class="stringliteral">        &lt;br&gt;&amp;nbsp;&lt;br&gt;</span>
<a name="l00150"></a>00150 <span class="stringliteral">        &lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;</span>
<a name="l00151"></a>00151 <span class="stringliteral">        &lt;/center&gt;</span>
<a name="l00152"></a>00152 <span class="stringliteral">        &quot;</span>;
<a name="l00153"></a>00153 }
<a name="l00154"></a>00154 
<a name="l00155"></a>00155 
<a name="l00156"></a>00156 <span class="keywordflow">if</span>(<a class="code" href="install_8php.html#af9da176a74bd49cb97ea35c6ac7257bc">$action</a>==<span class="stringliteral">&quot;step_b&quot;</span>) {
<a name="l00157"></a>00157 
<a name="l00158"></a>00158 <span class="keywordflow">if</span>(     (<a class="code" href="install_8php.html#a374515df22d9784221c899c391ffa509">$rfs_db_password</a>   !=  <a class="code" href="install_8php.html#a21ac5ba0332c475c4297867c6861acbd">$rfs_db_password_confirm</a>) ||
<a name="l00159"></a>00159         ($rfs_udb_password  !=  $rfs_udb_password_confirm) ||
<a name="l00160"></a>00160         (<a class="code" href="install_8php.html#a8dc44ca1918c6673de6a7397946566f4">$rfs_password</a>      !=  <a class="code" href="install_8php.html#a9834e8a805208c60c6ccaedbce99efaf">$rfs_password_c</a>)                        ) {
<a name="l00161"></a>00161 
<a name="l00162"></a>00162         echo <span class="stringliteral">&quot;&lt;div width=100% style=&#39;background-color: red; color:white;&#39;&gt;CAN NOT PROCEED: THE PASSWORDS DID NOT MATCH!&lt;/div&gt;&quot;</span>;
<a name="l00163"></a>00163         <a class="code" href="install_8php.html#af9da176a74bd49cb97ea35c6ac7257bc">$action</a>=<span class="stringliteral">&quot;step_a&quot;</span>;
<a name="l00164"></a>00164     }
<a name="l00165"></a>00165     <span class="keywordflow">else</span> {
<a name="l00166"></a>00166         <span class="keywordflow">if</span>(empty($rfs_udb_name))     $rfs_udb_name=$rfs_db_name;
<a name="l00167"></a>00167         <span class="keywordflow">if</span>(empty($rfs_udb_address))  $rfs_udb_address=$rfs_db_address;
<a name="l00168"></a>00168         <span class="keywordflow">if</span>(empty($rfs_udb_user))     $rfs_udb_user=$rfs_db_user;
<a name="l00169"></a>00169         <span class="keywordflow">if</span>(empty($rfs_udb_password)) $rfs_udb_password=<a class="code" href="install_8php.html#a374515df22d9784221c899c391ffa509">$rfs_db_password</a>;
<a name="l00170"></a>00170 
<a name="l00171"></a>00171         echo <span class="stringliteral">&quot;&lt;div width=100% style=&#39;background-color: cyan; color: black;&#39;&gt;Attempting to create $RFS_SITE_PATH/config/config.php&lt;/div&gt;&quot;</span>;
<a name="l00172"></a>00172         <a class="code" href="backup-packages_8php.html#a1d2c1369c63343a169bc25d1a0475482">$fp</a>=fopen(<span class="stringliteral">&quot;$RFS_SITE_PATH/config/config.php&quot;</span>,<span class="stringliteral">&quot;wt&quot;</span>);
<a name="l00173"></a>00173 
<a name="l00174"></a>00174         fwrite(<a class="code" href="backup-packages_8php.html#a1d2c1369c63343a169bc25d1a0475482">$fp</a>, <span class="stringliteral">&quot;&lt;?\n/////////////////////////////////////////////////////\n// RFSCMS $RFS_VERSION\n// http://www.sethcoder.com/ \n&quot;</span>);
<a name="l00175"></a>00175         fwrite(<a class="code" href="backup-packages_8php.html#a1d2c1369c63343a169bc25d1a0475482">$fp</a>, <span class="stringliteral">&quot;\$GLOBALS[&#39;authdbname&#39;]    = \&quot;$rfs_db_name\&quot;; \n&quot;</span>);
<a name="l00176"></a>00176         fwrite(<a class="code" href="backup-packages_8php.html#a1d2c1369c63343a169bc25d1a0475482">$fp</a>, <span class="stringliteral">&quot;\$GLOBALS[&#39;authdbaddress&#39;] = \&quot;$rfs_db_address\&quot;; \n&quot;</span>);
<a name="l00177"></a>00177         fwrite(<a class="code" href="backup-packages_8php.html#a1d2c1369c63343a169bc25d1a0475482">$fp</a>, <span class="stringliteral">&quot;\$GLOBALS[&#39;authdbuser&#39;]    = \&quot;$rfs_db_user\&quot;; \n&quot;</span>);
<a name="l00178"></a>00178         fwrite(<a class="code" href="backup-packages_8php.html#a1d2c1369c63343a169bc25d1a0475482">$fp</a>, <span class="stringliteral">&quot;\$GLOBALS[&#39;authdbpass&#39;]    = \&quot;$rfs_db_password\&quot;; \n&quot;</span>);
<a name="l00179"></a>00179         fwrite(<a class="code" href="backup-packages_8php.html#a1d2c1369c63343a169bc25d1a0475482">$fp</a>, <span class="stringliteral">&quot;\$GLOBALS[&#39;userdbname&#39;]    = \&quot;$rfs_udb_name\&quot;; \n&quot;</span>);
<a name="l00180"></a>00180         fwrite(<a class="code" href="backup-packages_8php.html#a1d2c1369c63343a169bc25d1a0475482">$fp</a>, <span class="stringliteral">&quot;\$GLOBALS[&#39;userdbaddress&#39;] = \&quot;$rfs_udb_address\&quot;; \n&quot;</span>);
<a name="l00181"></a>00181         fwrite(<a class="code" href="backup-packages_8php.html#a1d2c1369c63343a169bc25d1a0475482">$fp</a>, <span class="stringliteral">&quot;\$GLOBALS[&#39;userdbuser&#39;]    = \&quot;$rfs_udb_user\&quot;; \n&quot;</span>);
<a name="l00182"></a>00182         fwrite(<a class="code" href="backup-packages_8php.html#a1d2c1369c63343a169bc25d1a0475482">$fp</a>, <span class="stringliteral">&quot;\$GLOBALS[&#39;userdbpass&#39;]    = \&quot;$rfs_udb_password\&quot;; \n ?&gt;&quot;</span>);
<a name="l00183"></a>00183 
<a name="l00184"></a>00184         fclose(<a class="code" href="backup-packages_8php.html#a1d2c1369c63343a169bc25d1a0475482">$fp</a>);
<a name="l00185"></a>00185 
<a name="l00186"></a>00186         <span class="keywordflow">if</span>(file_exists(<span class="stringliteral">&quot;$RFS_SITE_PATH/config/config.php&quot;</span>)) {
<a name="l00187"></a>00187 
<a name="l00188"></a>00188             echo <span class="stringliteral">&quot;&lt;div width=100% style=&#39;background-color: green; color:white;&#39;&gt;$RFS_SITE_PATH/config/config.php created&lt;/div&gt;&quot;</span>;
<a name="l00189"></a>00189 
<a name="l00190"></a>00190             <a class="code" href="config_8php.html#aad108a6abffdea835bc6cc2f3244751e">$GLOBALS</a>[<span class="stringliteral">&quot;authdbname&quot;</span>]    = $rfs_db_name;
<a name="l00191"></a>00191             <a class="code" href="config_8php.html#aad108a6abffdea835bc6cc2f3244751e">$GLOBALS</a>[<span class="stringliteral">&quot;authdbaddress&quot;</span>] = $rfs_db_address;
<a name="l00192"></a>00192             <a class="code" href="config_8php.html#aad108a6abffdea835bc6cc2f3244751e">$GLOBALS</a>[<span class="stringliteral">&quot;authdbuser&quot;</span>]    = $rfs_db_user;
<a name="l00193"></a>00193             <a class="code" href="config_8php.html#aad108a6abffdea835bc6cc2f3244751e">$GLOBALS</a>[<span class="stringliteral">&quot;authdbpass&quot;</span>]    = <a class="code" href="install_8php.html#a374515df22d9784221c899c391ffa509">$rfs_db_password</a>;
<a name="l00194"></a>00194             <a class="code" href="config_8php.html#aad108a6abffdea835bc6cc2f3244751e">$GLOBALS</a>[<span class="stringliteral">&quot;userdbname&quot;</span>]    = $rfs_udb_name;
<a name="l00195"></a>00195             <a class="code" href="config_8php.html#aad108a6abffdea835bc6cc2f3244751e">$GLOBALS</a>[<span class="stringliteral">&quot;userdbaddress&quot;</span>] = $rfs_udb_address;
<a name="l00196"></a>00196             <a class="code" href="config_8php.html#aad108a6abffdea835bc6cc2f3244751e">$GLOBALS</a>[<span class="stringliteral">&quot;userdbuser&quot;</span>]    = $rfs_udb_user;
<a name="l00197"></a>00197             <a class="code" href="config_8php.html#aad108a6abffdea835bc6cc2f3244751e">$GLOBALS</a>[<span class="stringliteral">&quot;userdbpass&quot;</span>]    = $rfs_udb_password;
<a name="l00198"></a>00198 
<a name="l00199"></a>00199             echo <a class="code" href="config_8php.html#aad108a6abffdea835bc6cc2f3244751e">$GLOBALS</a>[<span class="stringliteral">&quot;authdbname&quot;</span>].<span class="stringliteral">&quot; DB IN USE &lt;BR&gt;&quot;</span>;
<a name="l00200"></a>00200             <span class="comment"></span>
<a name="l00201"></a>00201 <span class="comment">            ///////////////////////////////////////////////////////////////////////////////</span>
<a name="l00202"></a>00202 <span class="comment"></span>            <span class="comment">// UPDATE DATABASE install.sql</span>
<a name="l00203"></a>00203             $qx=explode(<span class="stringliteral">&quot;;&quot;</span>,file_get_contents(<span class="stringliteral">&quot;$RFS_SITE_PATH/install/install.sql&quot;</span>));
<a name="l00204"></a>00204             <span class="keywordflow">for</span>($i=0;$i&lt;count($qx);$i++) {
<a name="l00205"></a>00205                 $q=$qx[$i];
<a name="l00206"></a>00206                 <a class="code" href="lib_8mysql_8php.html#a06fb53fc71e262dce115fd3a98bcecdd">lib_mysql_query</a>(<span class="stringliteral">&quot;$q;&quot;</span>);
<a name="l00207"></a>00207             }
<a name="l00208"></a>00208             <a class="code" href="install_8php.html#a8dc44ca1918c6673de6a7397946566f4">$rfs_password</a>=md5(<a class="code" href="install_8php.html#a8dc44ca1918c6673de6a7397946566f4">$rfs_password</a>);
<a name="l00209"></a>00209             <a class="code" href="lib_8mysql_8php.html#a06fb53fc71e262dce115fd3a98bcecdd">lib_mysql_query</a>(<span class="stringliteral">&quot;</span>
<a name="l00210"></a>00210 <span class="stringliteral">            INSERT INTO `users` (`name`, `pass`, `real_name`, `email`, `access`, `access_groups`, `theme`) VALUES</span>
<a name="l00211"></a>00211 <span class="stringliteral">            (&#39;$rfs_admin&#39;, &#39;$rfs_password&#39;, &#39;$rfs_admin_name&#39;, &#39;$rfs_admin_email&#39;,  &#39;255&#39;,  &#39;Administrator&#39;, &#39;default&#39;); &quot;</span>);
<a name="l00212"></a>00212                                             <span class="comment"></span>
<a name="l00213"></a>00213 <span class="comment">            ///////////////////////////////////////////////////////////////////////////////</span>
<a name="l00214"></a>00214 <span class="comment"></span>            <span class="comment">// CHECK DATABASE               </span>
<a name="l00215"></a>00215             <a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>=<a class="code" href="lib_8mysql_8php.html#a06fb53fc71e262dce115fd3a98bcecdd">lib_mysql_query</a>(<span class="stringliteral">&quot;select * from users&quot;</span>);
<a name="l00216"></a>00216             $n=0;
<a name="l00217"></a>00217             <span class="keywordflow">if</span>(<a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>) $n=mysql_num_rows(<a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>);
<a name="l00218"></a>00218             <span class="keywordflow">if</span>(!$n) {
<a name="l00219"></a>00219                 echo <span class="stringliteral">&quot;&lt;div width=100% style=&#39;background-color: red; color:white;&#39;&gt;Database error! database: $rfs_udb_name, $rfs_udb_address, $rfs_udb_user, $rfs_udb_password &lt;/div&gt;&quot;</span>;
<a name="l00220"></a>00220                 <a class="code" href="install_8php.html#af9da176a74bd49cb97ea35c6ac7257bc">$action</a>=<span class="stringliteral">&quot;step_a&quot;</span>;
<a name="l00221"></a>00221             } <span class="keywordflow">else</span> {
<a name="l00222"></a>00222                 echo <span class="stringliteral">&quot;&lt;div width=100% style=&#39;background-color: green; color:white;&#39;&gt;Database activated... Adding RFSCMS data.&lt;/div&gt;&quot;</span>;<span class="comment"></span>
<a name="l00223"></a>00223 <span class="comment">            ///////////////////////////////////////////////////////////////////////////////</span>
<a name="l00224"></a>00224 <span class="comment"></span>            <span class="comment">// UPDATE DATABASE              </span>
<a name="l00225"></a>00225             <a class="code" href="lib_8mysql_8php.html#a06fb53fc71e262dce115fd3a98bcecdd">lib_mysql_query</a>(<span class="stringliteral">&quot;</span>
<a name="l00226"></a>00226 <span class="stringliteral">            INSERT INTO `site_vars` (`name`, `value`) VALUES</span>
<a name="l00227"></a>00227 <span class="stringliteral">            (&#39;path&#39;, &#39;$RFS_SITE_PATH&#39;),</span>
<a name="l00228"></a>00228 <span class="stringliteral">            (&#39;url&#39;,  &#39;$RFS_SITE_URL&#39;),</span>
<a name="l00229"></a>00229 <span class="stringliteral">            (&#39;name&#39;, &#39;$rfs_site_name&#39;); &quot;</span>);<span class="comment"></span>
<a name="l00230"></a>00230 <span class="comment">            ///////////////////////////////////////////////////////////////////////////////</span>
<a name="l00231"></a>00231 <span class="comment"></span>            <span class="comment">// UPDATE DATABASE install.data.sql</span>
<a name="l00232"></a>00232             $f=<span class="stringliteral">&quot;$RFS_SITE_PATH/install/install.data.sql&quot;</span>;
<a name="l00233"></a>00233             $qx=explode(<span class="stringliteral">&quot;-;-&quot;</span>,file_get_contents($f));
<a name="l00234"></a>00234             <span class="keywordflow">for</span>($i=0;$i&lt;count($qx);$i++) {
<a name="l00235"></a>00235                 $q=$qx[$i];
<a name="l00236"></a>00236                 echo <span class="stringliteral">&quot;&lt;hr&gt;&quot;</span>;
<a name="l00237"></a>00237                 <span class="comment">// echo nl2br(&quot;$q;&quot;);</span>
<a name="l00238"></a>00238                 <a class="code" href="lib_8mysql_8php.html#a06fb53fc71e262dce115fd3a98bcecdd">lib_mysql_query</a>(<span class="stringliteral">&quot;$q;&quot;</span>);
<a name="l00239"></a>00239             }<span class="comment"></span>
<a name="l00240"></a>00240 <span class="comment">            ///////////////////////////////////////////////////////////////////////////////</span>
<a name="l00241"></a>00241 <span class="comment"></span>                    <span class="comment"></span>
<a name="l00242"></a>00242 <span class="comment">            ///////////////////////////////////////////////////////////////////////////////</span>
<a name="l00243"></a>00243 <span class="comment"></span>            <span class="comment">// Make system folders</span>
<a name="l00244"></a>00244             system(<span class="stringliteral">&quot;mkdir $RFS_SITE_PATH/log&quot;</span>);
<a name="l00245"></a>00245             system(<span class="stringliteral">&quot;mkdir $RFS_SITE_PATH/files&quot;</span>);
<a name="l00246"></a>00246             system(<span class="stringliteral">&quot;mkdir $RFS_SITE_PATH/files/pictures&quot;</span>);
<a name="l00247"></a>00247             system(<span class="stringliteral">&quot;mkdir $RFS_SITE_PATH/images&quot;</span>);
<a name="l00248"></a>00248             system(<span class="stringliteral">&quot;mkdir $RFS_SITE_PATH/images/avatars&quot;</span>);
<a name="l00249"></a>00249 
<a name="l00250"></a>00250 
<a name="l00251"></a>00251            echo <span class="stringliteral">&quot;  &lt;center&gt; &lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;</span>
<a name="l00252"></a>00252 <span class="stringliteral">                    &lt;table border=0 width=$table_width&gt;</span>
<a name="l00253"></a>00253 <span class="stringliteral">                    &lt;tr&gt;&lt;td class=formboxd&gt;&lt;center&gt;</span>
<a name="l00254"></a>00254 <span class="stringliteral">                    &lt;img src=\&quot;$RFS_SITE_URL/images/icons/thumbup.png\&quot;&gt;</span>
<a name="l00255"></a>00255 <span class="stringliteral">                    &lt;p&gt;Congratulations, Your site is configured!&lt;/p&gt;</span>
<a name="l00256"></a>00256 <span class="stringliteral">                    &lt;p&gt;You should now delete the install folder, </span>
<a name="l00257"></a>00257 <span class="stringliteral">                    unless you want malicious stuff to happen.&lt;/p&gt;  </span>
<a name="l00258"></a>00258 <span class="stringliteral">                    &lt;p&gt;The page should redirect in 5 seconds, if it</span>
<a name="l00259"></a>00259 <span class="stringliteral">                    doesn&#39;t click here &lt;a href=$RFS_SITE_URL&gt;$RFS_SITE_URL&lt;/a&gt;</span>
<a name="l00260"></a>00260 <span class="stringliteral">                    to begin customizing&lt;/p&gt;</span>
<a name="l00261"></a>00261 <span class="stringliteral">                    &lt;p&gt; &amp;nbsp; &lt;/p&gt;</span>
<a name="l00262"></a>00262 <span class="stringliteral">                    &lt;/center&gt;</span>
<a name="l00263"></a>00263 <span class="stringliteral">                   &lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&quot;</span>;
<a name="l00264"></a>00264                    
<a name="l00265"></a>00265                 echo <span class="stringliteral">&quot;&lt;META HTTP-EQUIV=\&quot;refresh\&quot; content=\&quot;5;URL=$RFS_SITE_URL\&quot;&gt;&quot;</span>;
<a name="l00266"></a>00266             }
<a name="l00267"></a>00267         }
<a name="l00268"></a>00268         <span class="keywordflow">else</span> {
<a name="l00269"></a>00269             echo <span class="stringliteral">&quot;&lt;div width=100% style=&#39;background-color: red; color:white;&#39;&gt;Can not create $RFS_SITE_PATH/config/config.php make sure $RFS_SITE_PATH/config folder permission is set to 777&lt;/div&gt;&quot;</span>;
<a name="l00270"></a>00270             <a class="code" href="install_8php.html#af9da176a74bd49cb97ea35c6ac7257bc">$action</a>=<span class="stringliteral">&quot;step_a&quot;</span>;
<a name="l00271"></a>00271         }
<a name="l00272"></a>00272     }
<a name="l00273"></a>00273 }
<a name="l00274"></a>00274 
<a name="l00275"></a>00275 
<a name="l00276"></a>00276 <span class="keywordflow">if</span>(<a class="code" href="install_8php.html#af9da176a74bd49cb97ea35c6ac7257bc">$action</a>==<span class="stringliteral">&quot;step_a&quot;</span>) {
<a name="l00277"></a>00277 
<a name="l00278"></a>00278     echo <span class="stringliteral">&quot;&lt;div width=100% style=&#39;background-color: green; color:white;&#39;&gt;Detected file path: $RFS_SITE_PATH&lt;/div&gt;&lt;div width=100% style=&#39;background-color: green; color:white;&#39;&gt;Detected domain name: $RFS_SITE_URL&lt;/div&gt;&quot;</span>;
<a name="l00279"></a>00279     <span class="keywordflow">if</span>(empty($rfs_site_name))   $rfs_site_name=<span class="stringliteral">&quot;My Cool RFS Site!&quot;</span>;
<a name="l00280"></a>00280     <span class="keywordflow">if</span>(empty($rfs_site_path))   $rfs_site_path=<a class="code" href="config_8sitevars_8php.html#a0304f1c6ce0928c6dda1a31ca21a58ae">$RFS_SITE_PATH</a>;
<a name="l00281"></a>00281     <span class="keywordflow">if</span>(empty($rfs_db_name))     $rfs_db_name=<span class="stringliteral">&quot;rfs_cms&quot;</span>;
<a name="l00282"></a>00282     <span class="keywordflow">if</span>(empty($rfs_db_address))  $rfs_db_address=<span class="stringliteral">&quot;localhost&quot;</span>;
<a name="l00283"></a>00283     <span class="keywordflow">if</span>(empty($rfs_db_user))     $rfs_db_user=<span class="stringliteral">&quot;rfs_cms_user&quot;</span>;
<a name="l00284"></a>00284     <span class="keywordflow">if</span>(empty($rfs_admin))       $rfs_admin=<span class="stringliteral">&quot;Your_User_Name&quot;</span>;
<a name="l00285"></a>00285     <span class="keywordflow">if</span>(empty($rfs_admin_name))  $rfs_admin_name=<span class="stringliteral">&quot;Your Real Name&quot;</span>;
<a name="l00286"></a>00286     <span class="keywordflow">if</span>(empty($rfs_country))     $rfs_country=<span class="stringliteral">&quot;Country of your home&quot;</span>;
<a name="l00287"></a>00287     <span class="keywordflow">if</span>(empty($rfs_admin_email)) $rfs_admin_email=<span class="stringliteral">&quot;youremail@youremaildomain.what&quot;</span>;
<a name="l00288"></a>00288     
<a name="l00289"></a>00289 
<a name="l00290"></a>00290     echo <span class="stringliteral">&quot;  &lt;center&gt; &lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;table border=0 width=$table_width&gt;&lt;tr&gt;&lt;td class=formboxd&gt;&quot;</span>;
<a name="l00291"></a>00291     
<a name="l00292"></a>00292     echo <span class="stringliteral">&quot;&lt;img src=\&quot;$RFS_SITE_URL/images/icons/infobox.png\&quot; style=\&quot;float: right;\&quot;&gt; &quot;</span>;
<a name="l00293"></a>00293     
<a name="l00294"></a>00294     echo <span class="stringliteral">&quot;</span>
<a name="l00295"></a>00295 <span class="stringliteral">            &lt;p style=\&quot;vertical-align: center;\&quot;&gt;&lt;br&gt;</span>
<a name="l00296"></a>00296 <span class="stringliteral">            &lt;center&gt;&lt;h1&gt;Enter your information&lt;/h1&gt;&lt;/center&gt;</span>
<a name="l00297"></a>00297 <span class="stringliteral">            &lt;/p&gt;</span>
<a name="l00298"></a>00298 <span class="stringliteral">            &lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;</span>
<a name="l00299"></a>00299 <span class="stringliteral">            &lt;table width=$table_width&gt;&lt;tr&gt;&lt;td class=formboxd&gt;&lt;center&gt;</span>
<a name="l00300"></a>00300 <span class="stringliteral">            &lt;table width=100%&gt;&lt;tr&gt;&lt;td&gt;&lt;p&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;</span>
<a name="l00301"></a>00301 <span class="stringliteral">            &lt;table width=100%&gt;</span>
<a name="l00302"></a>00302 <span class="stringliteral">            &lt;tr&gt;&lt;td&gt;</span>
<a name="l00303"></a>00303 <span class="stringliteral">&lt;form action=\&quot;install.php\&quot; method=\&quot;POST\&quot; enctype=\&quot;application/x-www-form-URLencoded\&quot;&gt;&lt;/td&gt;                &lt;td&gt;                    &lt;input type=hidden name=action value=step_b&gt;</span>
<a name="l00304"></a>00304 <span class="stringliteral">&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;</span>
<a name="l00305"></a>00305 <span class="stringliteral"></span>
<a name="l00306"></a>00306 <span class="stringliteral">&lt;td&gt;Name of your site (not domain name)&lt;/td&gt;</span>
<a name="l00307"></a>00307 <span class="stringliteral">&lt;td&gt;&lt;input size=100 type=\&quot;text\&quot; name=\&quot;rfs_site_name\&quot; value=\&quot;$rfs_site_name\&quot;&gt;&lt;/td&gt;</span>
<a name="l00308"></a>00308 <span class="stringliteral">&lt;/tr&gt;</span>
<a name="l00309"></a>00309 <span class="stringliteral"></span>
<a name="l00310"></a>00310 <span class="stringliteral">&lt;tr&gt;</span>
<a name="l00311"></a>00311 <span class="stringliteral">&lt;td&gt;Your Username for the site&lt;/td&gt;</span>
<a name="l00312"></a>00312 <span class="stringliteral">&lt;td&gt;&lt;input size=100 type=\&quot;text\&quot; name=\&quot;rfs_admin\&quot; value=\&quot;$rfs_admin\&quot;&gt;&lt;/td&gt;</span>
<a name="l00313"></a>00313 <span class="stringliteral">&lt;/tr&gt;</span>
<a name="l00314"></a>00314 <span class="stringliteral"></span>
<a name="l00315"></a>00315 <span class="stringliteral">&lt;tr&gt;</span>
<a name="l00316"></a>00316 <span class="stringliteral">&lt;td&gt;Your password for the site&lt;/td&gt;</span>
<a name="l00317"></a>00317 <span class="stringliteral">&lt;td&gt;&lt;input size=100 type=\&quot;password\&quot; name=\&quot;rfs_password\&quot; value=\&quot;$rfs_password\&quot;&gt;&lt;/td&gt;</span>
<a name="l00318"></a>00318 <span class="stringliteral">&lt;/tr&gt;</span>
<a name="l00319"></a>00319 <span class="stringliteral"></span>
<a name="l00320"></a>00320 <span class="stringliteral">&lt;tr&gt;</span>
<a name="l00321"></a>00321 <span class="stringliteral">&lt;td&gt;Your password for the site (confirm)&lt;/td&gt;</span>
<a name="l00322"></a>00322 <span class="stringliteral">&lt;td&gt;&lt;input size=100 type=\&quot;password\&quot; name=\&quot;rfs_password_c\&quot; value=\&quot;$rfs_password_c\&quot;&gt;&lt;/td&gt;</span>
<a name="l00323"></a>00323 <span class="stringliteral">&lt;/tr&gt;</span>
<a name="l00324"></a>00324 <span class="stringliteral"></span>
<a name="l00325"></a>00325 <span class="stringliteral">&lt;tr&gt;</span>
<a name="l00326"></a>00326 <span class="stringliteral">&lt;td&gt;Your Real Name&lt;/td&gt;</span>
<a name="l00327"></a>00327 <span class="stringliteral">&lt;td&gt;&lt;input size=100 type=\&quot;text\&quot; name=\&quot;rfs_admin_name\&quot; value=\&quot;$rfs_admin_name\&quot;&gt;&lt;/td&gt;</span>
<a name="l00328"></a>00328 <span class="stringliteral">&lt;/tr&gt;</span>
<a name="l00329"></a>00329 <span class="stringliteral"></span>
<a name="l00330"></a>00330 <span class="stringliteral">&lt;tr&gt;</span>
<a name="l00331"></a>00331 <span class="stringliteral">&lt;td&gt;Your email address&lt;/td&gt;</span>
<a name="l00332"></a>00332 <span class="stringliteral">&lt;td&gt;&lt;input size=100 type=\&quot;text\&quot; name=\&quot;rfs_admin_email\&quot; value=\&quot;$rfs_admin_email\&quot;&gt;&lt;/td&gt;</span>
<a name="l00333"></a>00333 <span class="stringliteral">&lt;/tr&gt;</span>
<a name="l00334"></a>00334 <span class="stringliteral"></span>
<a name="l00335"></a>00335 <span class="stringliteral">&lt;tr&gt;</span>
<a name="l00336"></a>00336 <span class="stringliteral">&lt;td&gt;Working directory&lt;/td&gt;</span>
<a name="l00337"></a>00337 <span class="stringliteral">&lt;td&gt;&lt;input size=100 type=\&quot;text\&quot; name=\&quot;rfs_site_path\&quot; value=\&quot;$rfs_site_path\&quot;&gt;&lt;/td&gt;</span>
<a name="l00338"></a>00338 <span class="stringliteral">&lt;/tr&gt;</span>
<a name="l00339"></a>00339 <span class="stringliteral">&lt;tr&gt;</span>
<a name="l00340"></a>00340 <span class="stringliteral">&lt;td&gt;Database Name</span>
<a name="l00341"></a>00341 <span class="stringliteral"></span>
<a name="l00342"></a>00342 <span class="stringliteral">&lt;a href=\&quot;$rfs_site_url/3rdparty/phpmyadmin/\&quot; target=_blank&gt;Set up Database&lt;/a&gt;</span>
<a name="l00343"></a>00343 <span class="stringliteral">&lt;/td&gt;</span>
<a name="l00344"></a>00344 <span class="stringliteral">&lt;td&gt;&lt;input size=100 type=\&quot;text\&quot; name=\&quot;rfs_db_name\&quot; value=\&quot;$rfs_db_name\&quot;&gt;&lt;/td&gt;</span>
<a name="l00345"></a>00345 <span class="stringliteral">&lt;/tr&gt;</span>
<a name="l00346"></a>00346 <span class="stringliteral">&lt;tr&gt;</span>
<a name="l00347"></a>00347 <span class="stringliteral">&lt;td&gt;Database Address&lt;/td&gt;</span>
<a name="l00348"></a>00348 <span class="stringliteral">&lt;td&gt;&lt;input  size=100 type=\&quot;text\&quot; name=\&quot;rfs_db_address\&quot; value=\&quot;$rfs_db_address\&quot;&gt;&lt;/td&gt;</span>
<a name="l00349"></a>00349 <span class="stringliteral">&lt;/tr&gt;</span>
<a name="l00350"></a>00350 <span class="stringliteral">&lt;tr&gt;</span>
<a name="l00351"></a>00351 <span class="stringliteral">&lt;td&gt;Database User&lt;/td&gt;</span>
<a name="l00352"></a>00352 <span class="stringliteral">&lt;td&gt;&lt;input  size=100 type=\&quot;text\&quot; name=\&quot;rfs_db_user\&quot; value=\&quot;$rfs_db_user\&quot;&gt;&lt;/td&gt;</span>
<a name="l00353"></a>00353 <span class="stringliteral">&lt;/tr&gt;</span>
<a name="l00354"></a>00354 <span class="stringliteral">&lt;tr&gt;</span>
<a name="l00355"></a>00355 <span class="stringliteral">&lt;td&gt;Database Password&lt;/td&gt;</span>
<a name="l00356"></a>00356 <span class="stringliteral">&lt;td&gt;&lt;input size=100 type=\&quot;password\&quot; name=\&quot;rfs_db_password\&quot; value=\&quot;$rfs_db_password\&quot;&gt;&lt;/td&gt;</span>
<a name="l00357"></a>00357 <span class="stringliteral">&lt;/tr&gt;</span>
<a name="l00358"></a>00358 <span class="stringliteral">&lt;tr&gt;</span>
<a name="l00359"></a>00359 <span class="stringliteral">&lt;td&gt;(Confirm Password)&lt;/td&gt;</span>
<a name="l00360"></a>00360 <span class="stringliteral">&lt;td&gt;&lt;input size=100 type=\&quot;password\&quot; name=\&quot;rfs_db_password_confirm\&quot; value=\&quot;$rfs_db_password_confirm\&quot;&gt;&lt;/td&gt;</span>
<a name="l00361"></a>00361 <span class="stringliteral">&lt;/tr&gt;</span>
<a name="l00362"></a>00362 <span class="stringliteral">&lt;tr&gt;</span>
<a name="l00363"></a>00363 <span class="stringliteral"></span>
<a name="l00364"></a>00364 <span class="stringliteral"></span>
<a name="l00365"></a>00365 <span class="stringliteral">&lt;tr&gt;</span>
<a name="l00366"></a>00366 <span class="stringliteral">&lt;td&gt;&lt;/td&gt;</span>
<a name="l00367"></a>00367 <span class="stringliteral">&lt;td&gt;&lt;input type=submit name=submit value=\&quot;Proceed\&quot;&gt;</span>
<a name="l00368"></a>00368 <span class="stringliteral"></span>
<a name="l00369"></a>00369 <span class="stringliteral">&lt;/form&gt;</span>
<a name="l00370"></a>00370 <span class="stringliteral"></span>
<a name="l00371"></a>00371 <span class="stringliteral">&lt;/td&gt;</span>
<a name="l00372"></a>00372 <span class="stringliteral">&lt;/tr&gt;</span>
<a name="l00373"></a>00373 <span class="stringliteral"></span>
<a name="l00374"></a>00374 <span class="stringliteral">&lt;/table&gt;</span>
<a name="l00375"></a>00375 <span class="stringliteral">&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;</span>
<a name="l00376"></a>00376 <span class="stringliteral">&lt;/center&gt; &quot;</span>;
<a name="l00377"></a>00377 }
<a name="l00378"></a>00378 
<a name="l00379"></a>00379 <span class="comment">/*</span>
<a name="l00380"></a>00380 <span class="comment"> * </span>
<a name="l00381"></a>00381 <span class="comment"> * &lt;tr&gt;</span>
<a name="l00382"></a>00382 <span class="comment">&lt;td&gt;User Database Name (leave blank if it is the same database as above)&lt;/td&gt;</span>
<a name="l00383"></a>00383 <span class="comment">&lt;td&gt;&lt;input size=100 type=\&quot;text\&quot; name=\&quot;rfs_udb_name\&quot; value=\&quot;\&quot;&gt;&lt;/td&gt;</span>
<a name="l00384"></a>00384 <span class="comment">&lt;/tr&gt;</span>
<a name="l00385"></a>00385 <span class="comment">&lt;tr&gt;</span>
<a name="l00386"></a>00386 <span class="comment">&lt;td&gt;User Database Address&lt;/td&gt;</span>
<a name="l00387"></a>00387 <span class="comment">&lt;td&gt;&lt;input  size=100 type=\&quot;text\&quot; name=\&quot;rfs_udb_address\&quot; value=\&quot;\&quot;&gt;&lt;/td&gt;</span>
<a name="l00388"></a>00388 <span class="comment">&lt;/tr&gt;</span>
<a name="l00389"></a>00389 <span class="comment">&lt;tr&gt;</span>
<a name="l00390"></a>00390 <span class="comment">&lt;td&gt;User Database User&lt;/td&gt;</span>
<a name="l00391"></a>00391 <span class="comment">&lt;td&gt;&lt;input  size=100 type=\&quot;text\&quot; name=\&quot;rfs_udb_user\&quot; value=\&quot;\&quot;&gt;&lt;/td&gt;</span>
<a name="l00392"></a>00392 <span class="comment">&lt;/tr&gt;</span>
<a name="l00393"></a>00393 <span class="comment">&lt;tr&gt;</span>
<a name="l00394"></a>00394 <span class="comment">&lt;td&gt;User Database Password&lt;/td&gt;</span>
<a name="l00395"></a>00395 <span class="comment">&lt;td&gt;&lt;input size=100 type=\&quot;password\&quot; name=\&quot;rfs_udb_password\&quot; value=\&quot;\&quot;&gt;&lt;/td&gt;</span>
<a name="l00396"></a>00396 <span class="comment">&lt;/tr&gt;</span>
<a name="l00397"></a>00397 <span class="comment">&lt;tr&gt;</span>
<a name="l00398"></a>00398 <span class="comment">&lt;td&gt;(Confirm Password)&lt;/td&gt;</span>
<a name="l00399"></a>00399 <span class="comment">&lt;td&gt;&lt;input size=100 type=\&quot;password\&quot; name=\&quot;rfs_udb_password_confirm\&quot; value=\&quot;\&quot;&gt;&lt;/td&gt;</span>
<a name="l00400"></a>00400 <span class="comment">&lt;/tr&gt;</span>
<a name="l00401"></a>00401 <span class="comment"></span>
<a name="l00402"></a>00402 <span class="comment"> * */</span>
<a name="l00403"></a>00403  
<a name="l00404"></a>00404 
<a name="l00405"></a>00405 ?&gt;
</pre></div></div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="install_8php.html">install.php</a>      </li>

    <li class="footer">Generated on Fri Mar 14 2014 04:15:32 for RFSCMSAPIDocumentation by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
