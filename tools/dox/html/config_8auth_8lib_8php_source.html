<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>RFSCMSAPIDocumentation: config.auth.lib.php Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">RFSCMSAPIDocumentation
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('config_8auth_8lib_8php.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">config.auth.lib.php</div>  </div>
</div><!--header-->
<div class="contents">
<a href="config_8auth_8lib_8php.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php
<a name="l00002"></a>00002 <span class="comment">/* vim: set expandtab sw=4 ts=4 sts=4: */</span><span class="comment"></span>
<a name="l00003"></a>00003 <span class="comment">/**</span>
<a name="l00004"></a>00004 <span class="comment"> * Set of functions used to run config authentication (ie no authentication).</span>
<a name="l00005"></a>00005 <span class="comment"> *</span>
<a name="l00006"></a>00006 <span class="comment"> * @package PhpMyAdmin-Auth-Config</span>
<a name="l00007"></a>00007 <span class="comment"> */</span>
<a name="l00008"></a>00008 
<a name="l00009"></a>00009 <span class="comment"></span>
<a name="l00010"></a>00010 <span class="comment">/**</span>
<a name="l00011"></a>00011 <span class="comment"> * Displays authentication form</span>
<a name="l00012"></a>00012 <span class="comment"> *</span>
<a name="l00013"></a>00013 <span class="comment"> * @return  boolean   always true</span>
<a name="l00014"></a>00014 <span class="comment"> *</span>
<a name="l00015"></a>00015 <span class="comment"> * @access  public</span>
<a name="l00016"></a>00016 <span class="comment"> */</span>
<a name="l00017"></a><a class="code" href="config_8auth_8lib_8php.html#a7b36f9e978b1a9bc56724c5484a2d8b9">00017</a> <span class="keyword">function</span> <a class="code" href="config_8auth_8lib_8php.html#a7b36f9e978b1a9bc56724c5484a2d8b9" title="Displays authentication form.">PMA_auth</a>()
<a name="l00018"></a>00018 {
<a name="l00019"></a>00019     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00020"></a>00020 } <span class="comment">// end of the &#39;PMA_auth()&#39; function</span>
<a name="l00021"></a>00021 
<a name="l00022"></a>00022 <span class="comment"></span>
<a name="l00023"></a>00023 <span class="comment">/**</span>
<a name="l00024"></a>00024 <span class="comment"> * Gets advanced authentication settings</span>
<a name="l00025"></a>00025 <span class="comment"> *</span>
<a name="l00026"></a>00026 <span class="comment"> * @return  boolean   always true</span>
<a name="l00027"></a>00027 <span class="comment"> *</span>
<a name="l00028"></a>00028 <span class="comment"> * @access  public</span>
<a name="l00029"></a>00029 <span class="comment"> */</span>
<a name="l00030"></a><a class="code" href="config_8auth_8lib_8php.html#a2d936cfc368eae56d285409a65e51a11">00030</a> <span class="keyword">function</span> <a class="code" href="config_8auth_8lib_8php.html#a2d936cfc368eae56d285409a65e51a11" title="Gets advanced authentication settings.">PMA_auth_check</a>()
<a name="l00031"></a>00031 {
<a name="l00032"></a>00032     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00033"></a>00033 } <span class="comment">// end of the &#39;PMA_auth_check()&#39; function</span>
<a name="l00034"></a>00034 
<a name="l00035"></a>00035 <span class="comment"></span>
<a name="l00036"></a>00036 <span class="comment">/**</span>
<a name="l00037"></a>00037 <span class="comment"> * Set the user and password after last checkings if required</span>
<a name="l00038"></a>00038 <span class="comment"> *</span>
<a name="l00039"></a>00039 <span class="comment"> * @return  boolean   always true</span>
<a name="l00040"></a>00040 <span class="comment"> *</span>
<a name="l00041"></a>00041 <span class="comment"> * @access  public</span>
<a name="l00042"></a>00042 <span class="comment"> */</span>
<a name="l00043"></a><a class="code" href="config_8auth_8lib_8php.html#ae03f38eddca4d39e3ea5dc06e771eec3">00043</a> <span class="keyword">function</span> <a class="code" href="config_8auth_8lib_8php.html#ae03f38eddca4d39e3ea5dc06e771eec3" title="Set the user and password after last checkings if required.">PMA_auth_set_user</a>()
<a name="l00044"></a>00044 {
<a name="l00045"></a>00045     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00046"></a>00046 } <span class="comment">// end of the &#39;PMA_auth_set_user()&#39; function</span>
<a name="l00047"></a>00047 
<a name="l00048"></a>00048 <span class="comment"></span>
<a name="l00049"></a>00049 <span class="comment">/**</span>
<a name="l00050"></a>00050 <span class="comment"> * User is not allowed to login to MySQL -&gt; authentication failed</span>
<a name="l00051"></a>00051 <span class="comment"> *</span>
<a name="l00052"></a>00052 <span class="comment"> * @global  string    the MySQL error message PHP returns</span>
<a name="l00053"></a>00053 <span class="comment"> * @global  string    the connection type (persistent or not)</span>
<a name="l00054"></a>00054 <span class="comment"> * @global  string    the MySQL server port to use</span>
<a name="l00055"></a>00055 <span class="comment"> * @global  string    the MySQL socket port to use</span>
<a name="l00056"></a>00056 <span class="comment"> * @global  array     the current server settings</span>
<a name="l00057"></a>00057 <span class="comment"> * @global  string    the font face to use in case of failure</span>
<a name="l00058"></a>00058 <span class="comment"> * @global  string    the default font size to use in case of failure</span>
<a name="l00059"></a>00059 <span class="comment"> * @global  string    the big font size to use in case of failure</span>
<a name="l00060"></a>00060 <span class="comment"> * @global  boolean   tell the &quot;PMA_mysqlDie()&quot; function headers have been</span>
<a name="l00061"></a>00061 <span class="comment"> *                    sent</span>
<a name="l00062"></a>00062 <span class="comment"> *</span>
<a name="l00063"></a>00063 <span class="comment"> * @return  boolean   always true (no return indeed)</span>
<a name="l00064"></a>00064 <span class="comment"> *</span>
<a name="l00065"></a>00065 <span class="comment"> * @access  public</span>
<a name="l00066"></a>00066 <span class="comment"> */</span>
<a name="l00067"></a><a class="code" href="config_8auth_8lib_8php.html#a29189416351efab06c47b2b9bf24e082">00067</a> <span class="keyword">function</span> <a class="code" href="config_8auth_8lib_8php.html#a29189416351efab06c47b2b9bf24e082" title="User is not allowed to login to MySQL -&gt; authentication failed.">PMA_auth_fails</a>()
<a name="l00068"></a>00068 {
<a name="l00069"></a>00069     $conn_error = <a class="code" href="drizzle_8dbi_8lib_8php.html#a704868d694079bc38c1947d370b8bf79" title="returns last error message or false if no errors occured">PMA_DBI_getError</a>();
<a name="l00070"></a>00070     <span class="keywordflow">if</span> (!$conn_error) {
<a name="l00071"></a>00071         $conn_error = __(<span class="stringliteral">&#39;Cannot connect: invalid settings.&#39;</span>);
<a name="l00072"></a>00072     }
<a name="l00073"></a>00073 
<a name="l00074"></a>00074     <span class="comment">// Defines the charset to be used</span>
<a name="l00075"></a>00075     header(<span class="stringliteral">&#39;Content-Type: text/html; charset=utf-8&#39;</span>);
<a name="l00076"></a>00076     <span class="comment">/* HTML header */</span>
<a name="l00077"></a>00077     <a class="code" href="themes_8php.html#ace7d5ca2414fbd4f411985155fe2f643">$page_title</a> = __(<span class="stringliteral">&#39;Access denied&#39;</span>);
<a name="l00078"></a>00078     include <span class="stringliteral">&#39;./libraries/header_meta_style.inc.php&#39;</span>;
<a name="l00079"></a>00079     include <span class="stringliteral">&#39;./libraries/header_scripts.inc.php&#39;</span>;
<a name="l00080"></a>00080     ?&gt;
<a name="l00081"></a>00081 
<a name="l00082"></a>00082 &lt;/head&gt;
<a name="l00083"></a>00083 
<a name="l00084"></a>00084 &lt;body&gt;
<a name="l00085"></a>00085 &lt;br /&gt;&lt;br /&gt;
<a name="l00086"></a>00086 &lt;center&gt;
<a name="l00087"></a>00087     &lt;<a class="code" href="original_2css_2theme__right_8css_8php.html#a304cd561b05d45e8a6c4f1ff995b553f" title="login form">h1</a>&gt;&lt;?php echo sprintf(__(<span class="stringliteral">&#39;Welcome to %s&#39;</span>), <span class="stringliteral">&#39; phpMyAdmin &#39;</span>); ?&gt;&lt;/<a class="code" href="original_2css_2theme__right_8css_8php.html#a304cd561b05d45e8a6c4f1ff995b553f" title="login form">h1</a>&gt;
<a name="l00088"></a>00088 &lt;/center&gt;
<a name="l00089"></a>00089 &lt;br /&gt;
<a name="l00090"></a>00090 &lt;table border=<span class="stringliteral">&quot;0&quot;</span> cellpadding=<span class="stringliteral">&quot;0&quot;</span> cellspacing=<span class="stringliteral">&quot;3&quot;</span> <a class="code" href="pmahomme_2css_2theme__left_8css_8php.html#a9b6f332f9d4b2823ecb71de89c575f11">align</a>=<span class="stringliteral">&quot;center&quot;</span> <a class="code" href="pmahomme_2css_2theme__left_8css_8php.html#a8eba97439dc06bd5160020dd878c1070">width</a>=<span class="stringliteral">&quot;80%&quot;</span>&gt;
<a name="l00091"></a>00091     &lt;tr&gt;
<a name="l00092"></a>00092         &lt;<a class="code" href="original_2css_2theme__right_8css_8php.html#a2cb7bbff99e906a4fef499891dc9e6f5">td</a>&gt;
<a name="l00093"></a>00093 
<a name="l00094"></a>00094     &lt;?php
<a name="l00095"></a>00095     <a class="code" href="config_2config_8php.html#aad108a6abffdea835bc6cc2f3244751e">$GLOBALS</a>[<span class="stringliteral">&#39;is_header_sent&#39;</span>] = <span class="keyword">true</span>;
<a name="l00096"></a>00096 
<a name="l00097"></a>00097     <span class="keywordflow">if</span> (isset($GLOBALS[<span class="stringliteral">&#39;allowDeny_forbidden&#39;</span>]) &amp;&amp; $GLOBALS[<span class="stringliteral">&#39;allowDeny_forbidden&#39;</span>]) {
<a name="l00098"></a>00098         trigger_error(__(<span class="stringliteral">&#39;Access denied&#39;</span>), E_USER_NOTICE);
<a name="l00099"></a>00099     } <span class="keywordflow">else</span> {
<a name="l00100"></a>00100         <span class="comment">// Check whether user has configured something</span>
<a name="l00101"></a>00101         <span class="keywordflow">if</span> ($GLOBALS[<span class="stringliteral">&#39;PMA_Config&#39;</span>]-&gt;source_mtime == 0) {
<a name="l00102"></a>00102             echo <span class="stringliteral">&#39;&lt;p&gt;&#39;</span> . sprintf(__(<span class="stringliteral">&#39;You probably did not create a configuration file. You might want to use the %1$ssetup script%2$s to create one.&#39;</span>), <span class="stringliteral">&#39;&lt;a href=&quot;setup/&quot;&gt;&#39;</span>, <span class="stringliteral">&#39;&lt;/a&gt;&#39;</span>) . <span class="stringliteral">&#39;&lt;/p&gt;&#39;</span> . <span class="stringliteral">&quot;\n&quot;</span>;
<a name="l00103"></a>00103         } <a class="code" href="import_8php.html#a7cbb4f0532e284397800df76c439983e">elseif</a> (!isset($GLOBALS[<span class="stringliteral">&#39;errno&#39;</span>]) || (isset($GLOBALS[<span class="stringliteral">&#39;errno&#39;</span>]) &amp;&amp; $GLOBALS[<span class="stringliteral">&#39;errno&#39;</span>] != 2002) &amp;&amp; $GLOBALS[<span class="stringliteral">&#39;errno&#39;</span>] != 2003) {
<a name="l00104"></a>00104         <span class="comment">// if we display the &quot;Server not responding&quot; error, do not confuse users</span>
<a name="l00105"></a>00105         <span class="comment">// by telling them they have a settings problem</span>
<a name="l00106"></a>00106         <span class="comment">// (note: it&#39;s true that they could have a badly typed host name, but</span>
<a name="l00107"></a>00107         <span class="comment">//  anyway the current message tells that the server</span>
<a name="l00108"></a>00108         <span class="comment">//  rejected the connection, which is not really what happened)</span>
<a name="l00109"></a>00109         <span class="comment">// 2002 is the error given by mysqli</span>
<a name="l00110"></a>00110         <span class="comment">// 2003 is the error given by mysql</span>
<a name="l00111"></a>00111             trigger_error(__(<span class="stringliteral">&#39;phpMyAdmin tried to connect to the MySQL server, and the server rejected the connection. You should check the host, username and password in your configuration and make sure that they correspond to the information given by the administrator of the MySQL server.&#39;</span>), E_USER_WARNING);
<a name="l00112"></a>00112         }
<a name="l00113"></a>00113         <a class="code" href="common_8lib_8php.html#a4b5abc57e204c6266283131d03f66395" title="Displays a MySQL error message in the right frame.">PMA_mysqlDie</a>($conn_error, <span class="stringliteral">&#39;&#39;</span>, <span class="keyword">true</span>, <span class="stringliteral">&#39;&#39;</span>, <span class="keyword">false</span>);
<a name="l00114"></a>00114     }
<a name="l00115"></a>00115     $GLOBALS[<span class="stringliteral">&#39;error_handler&#39;</span>]-&gt;dispUserErrors();
<a name="l00116"></a>00116 ?&gt;
<a name="l00117"></a>00117         &lt;/<a class="code" href="original_2css_2theme__right_8css_8php.html#a2cb7bbff99e906a4fef499891dc9e6f5">td</a>&gt;
<a name="l00118"></a>00118     &lt;/tr&gt;
<a name="l00119"></a>00119 &lt;?php
<a name="l00120"></a>00120     <span class="keywordflow">if</span> (count($GLOBALS[<span class="stringliteral">&#39;cfg&#39;</span>][<span class="stringliteral">&#39;Servers&#39;</span>]) &gt; 1) {
<a name="l00121"></a>00121         <span class="comment">// offer a chance to login to other servers if the current one failed</span>
<a name="l00122"></a>00122         include_once <span class="stringliteral">&#39;./libraries/select_server.lib.php&#39;</span>;
<a name="l00123"></a>00123         echo <span class="stringliteral">&#39;&lt;tr&gt;&#39;</span> . <span class="stringliteral">&quot;\n&quot;</span>;
<a name="l00124"></a>00124         echo <span class="stringliteral">&#39; &lt;td&gt;&#39;</span> . <span class="stringliteral">&quot;\n&quot;</span>;
<a name="l00125"></a>00125         <a class="code" href="select__server_8lib_8php.html#a3da852f4adae279e2069cd2482b2b677" title="display server selection in list or selectbox form, or option tags only">PMA_select_server</a>(<span class="keyword">true</span>, <span class="keyword">true</span>);
<a name="l00126"></a>00126         echo <span class="stringliteral">&#39; &lt;/td&gt;&#39;</span> . <span class="stringliteral">&quot;\n&quot;</span>;
<a name="l00127"></a>00127         echo <span class="stringliteral">&#39;&lt;/tr&gt;&#39;</span> . <span class="stringliteral">&quot;\n&quot;</span>;
<a name="l00128"></a>00128     }
<a name="l00129"></a>00129     echo <span class="stringliteral">&#39;&lt;/table&gt;&#39;</span> . <span class="stringliteral">&quot;\n&quot;</span>;
<a name="l00130"></a>00130     include <span class="stringliteral">&#39;./libraries/footer.inc.php&#39;</span>;
<a name="l00131"></a>00131     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00132"></a>00132 } <span class="comment">// end of the &#39;PMA_auth_fails()&#39; function</span>
<a name="l00133"></a>00133 
<a name="l00134"></a>00134 ?&gt;
</pre></div></div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="config_8auth_8lib_8php.html">config.auth.lib.php</a>      </li>

    <li class="footer">Generated on Fri Mar 14 2014 04:14:48 for RFSCMSAPIDocumentation by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
