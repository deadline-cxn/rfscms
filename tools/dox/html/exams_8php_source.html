<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>RFSCMSAPIDocumentation: exams.php Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">RFSCMSAPIDocumentation
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('exams_8php.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">exams.php</div>  </div>
</div><!--header-->
<div class="contents">
<a href="exams_8php.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?
<a name="l00002"></a>00002 chdir(<span class="stringliteral">&quot;../../&quot;</span>);
<a name="l00003"></a>00003 include(<span class="stringliteral">&quot;include/lib.mysql.php&quot;</span>);
<a name="l00004"></a>00004 
<a name="l00005"></a>00005 <span class="keywordflow">if</span>(empty(<a class="code" href="install_8php.html#af9da176a74bd49cb97ea35c6ac7257bc">$action</a>)) <a class="code" href="install_8php.html#af9da176a74bd49cb97ea35c6ac7257bc">$action</a>=<span class="stringliteral">&quot;list_exams&quot;</span>;
<a name="l00006"></a>00006 
<a name="l00007"></a>00007 <span class="keywordflow">if</span>(empty($_REQUEST[<span class="stringliteral">&#39;exam_id&#39;</span>])) <a class="code" href="adm_8php.html#ada57e7bb7c152edad18fe2f166188691">$title</a>=<span class="stringliteral">&quot;Exams&quot;</span>;
<a name="l00008"></a>00008 <span class="keywordflow">else</span> {  $tex=<a class="code" href="lib_8mysql_8php.html#a80af159483fec4094697cef8c5c187a6">lib_mysql_fetch_one_object</a>(<span class="stringliteral">&quot;select * from exams where id=&#39;&quot;</span>.$_REQUEST[<span class="stringliteral">&#39;exam_id&#39;</span>].<span class="stringliteral">&quot;&#39;&quot;</span>);
<a name="l00009"></a>00009         <a class="code" href="adm_8php.html#ada57e7bb7c152edad18fe2f166188691">$title</a>=<span class="stringliteral">&quot;Exam ($tex-&gt;name)&quot;</span>;
<a name="l00010"></a>00010 }
<a name="l00011"></a>00011 include(<span class="stringliteral">&quot;header.php&quot;</span>);
<a name="l00012"></a>00012 
<a name="l00013"></a>00013 echo <span class="stringliteral">&quot;&lt;h1&gt;Exams&lt;/h1&gt;&quot;</span>;
<a name="l00014"></a>00014 
<a name="l00015"></a>00015 <span class="keywordflow">if</span>(!<a class="code" href="lib_8rfs_8php.html#a41646ab38b8723bf0f938082d18cbd3a">lib_rfs_bool_true</a>(<a class="code" href="wab_8php.html#a7e78406241b519489b23a8c902b4a8de">$_SESSION</a>[<span class="stringliteral">&#39;logged_in&#39;</span>])) {
<a name="l00016"></a>00016     echo <span class="stringliteral">&quot;You&#39;re not logged in. &lt;br&gt; &quot;</span>; 
<a name="l00017"></a>00017     <span class="keywordflow">for</span>($i=0;$i&lt;35;$i++) echo <span class="stringliteral">&quot;&lt;br&gt;&quot;</span>;
<a name="l00018"></a>00018     include(<span class="stringliteral">&quot;footer.php&quot;</span>);
<a name="l00019"></a>00019     exit;
<a name="l00020"></a>00020 }
<a name="l00021"></a>00021 
<a name="l00022"></a><a class="code" href="exams_8php.html#af397406e5685e63a367db43187f0dca2">00022</a>     <a class="code" href="exams_8php.html#af397406e5685e63a367db43187f0dca2">$qc</a>=<a class="code" href="wab_8php.html#a7e78406241b519489b23a8c902b4a8de">$_SESSION</a>[<span class="stringliteral">&quot;question_id&quot;</span>];
<a name="l00023"></a>00023     <span class="keywordflow">if</span>(<a class="code" href="exams_8php.html#af397406e5685e63a367db43187f0dca2">$qc</a>) {
<a name="l00024"></a>00024 
<a name="l00025"></a>00025         <a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>=<a class="code" href="lib_8mysql_8php.html#a06fb53fc71e262dce115fd3a98bcecdd">lib_mysql_query</a>(<span class="stringliteral">&quot;select * from exam_questions where id=&#39;$qc&#39;&quot;</span>);
<a name="l00026"></a>00026         $q=mysql_fetch_assoc(<a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>);
<a name="l00027"></a>00027                 
<a name="l00028"></a>00028         $correct=<span class="keyword">false</span>;
<a name="l00029"></a>00029         
<a name="l00030"></a>00030         <a class="code" href="lib_8debug_8php.html#a724b8757fd23253e49a92069cfb59fa7">d_echo</a>(<span class="stringliteral">&quot;PREVIOUS QUESTION RESULTS: ($exam_id.$qc) &quot;</span>);
<a name="l00031"></a>00031         <a class="code" href="lib_8debug_8php.html#a724b8757fd23253e49a92069cfb59fa7">d_echo</a>(<span class="stringliteral">&quot;type: &quot;</span>.$q[<span class="stringliteral">&#39;type&#39;</span>].<span class="stringliteral">&quot; &quot;</span>.<span class="stringliteral">&quot;correct answer: &quot;</span>.$q[<span class="stringliteral">&#39;correct_answer&#39;</span>]);
<a name="l00032"></a>00032 
<a name="l00033"></a>00033        $qx=explode(<span class="stringliteral">&quot;,&quot;</span>,$q[<span class="stringliteral">&quot;correct_answer&quot;</span>]);
<a name="l00034"></a>00034         
<a name="l00035"></a>00035         <span class="keywordflow">for</span>($i=0;$i&lt;count($qx);$i++) <a class="code" href="lib_8debug_8php.html#a724b8757fd23253e49a92069cfb59fa7">d_echo</a>($qx[$i].<span class="stringliteral">&quot; -&gt; &quot;</span>.$q[<span class="stringliteral">&quot;choice_&quot;</span>.$qx[$i]]);
<a name="l00036"></a>00036 
<a name="l00037"></a>00037         <span class="keywordflow">if</span> ($q[<span class="stringliteral">&quot;type&quot;</span>]==<span class="stringliteral">&quot;multi_select&quot;</span>)  {
<a name="l00038"></a>00038 
<a name="l00039"></a>00039             <span class="keywordflow">if</span>(<a class="code" href="database__upgrades_8php.html#acebf83966ef6d7e5645a6b62ba368f9f">$a</a>==<span class="stringliteral">&quot;A&quot;</span>) $correct=<span class="stringliteral">&quot;$a&quot;</span>;
<a name="l00040"></a>00040             <span class="keywordflow">if</span>(<a class="code" href="database__upgrades_8php.html#ab9eb087b791749ae45deabb0899b7ccc">$b</a>==<span class="stringliteral">&quot;B&quot;</span>) $correct.=<span class="stringliteral">&quot;,$b&quot;</span>;
<a name="l00041"></a>00041             <span class="keywordflow">if</span>(<a class="code" href="sp_8php.html#a26c2f6c0ee7cb69a545305a8949c045c">$c</a>==<span class="stringliteral">&quot;C&quot;</span>) $correct.=<span class="stringliteral">&quot;,$c&quot;</span>;
<a name="l00042"></a>00042             <span class="keywordflow">if</span>($d==<span class="stringliteral">&quot;D&quot;</span>) $correct.=<span class="stringliteral">&quot;,$d&quot;</span>;
<a name="l00043"></a>00043             <span class="keywordflow">if</span>($e==<span class="stringliteral">&quot;E&quot;</span>) $correct.=<span class="stringliteral">&quot;,$e&quot;</span>;
<a name="l00044"></a>00044             <span class="keywordflow">if</span>($f==<span class="stringliteral">&quot;F&quot;</span>) $correct.=<span class="stringliteral">&quot;,$f&quot;</span>;
<a name="l00045"></a>00045 
<a name="l00046"></a>00046             $correct=ltrim($correct,<span class="stringliteral">&quot;,&quot;</span>);
<a name="l00047"></a>00047             $answer=$correct;
<a name="l00048"></a>00048 
<a name="l00049"></a>00049             <span class="comment">// echo &quot; $correct &lt;BR&gt;&quot;;</span>
<a name="l00050"></a>00050             <span class="comment">//echo $q[&#39;correct_answer&#39;].&quot; &lt;br&gt;&quot;;</span>
<a name="l00051"></a>00051             
<a name="l00052"></a>00052             <span class="keywordflow">if</span>($correct==$q[<span class="stringliteral">&#39;correct_answer&#39;</span>]) {
<a name="l00053"></a>00053                 $correct=<span class="keyword">true</span>;
<a name="l00054"></a>00054                 <span class="comment">//echo &quot;CORRECT!&lt;BR&gt;&quot;;</span>
<a name="l00055"></a>00055             } <span class="keywordflow">else</span> {
<a name="l00056"></a>00056                 $correct=<span class="keyword">false</span>;
<a name="l00057"></a>00057                 <span class="comment">//echo &quot;INCORRECT!&lt;BR&gt;&quot;;</span>
<a name="l00058"></a>00058             }
<a name="l00059"></a>00059         }
<a name="l00060"></a>00060 
<a name="l00061"></a>00061         <span class="keywordflow">if</span> (    ($q[<span class="stringliteral">&quot;type&quot;</span>]==<span class="stringliteral">&quot;fib_dropdown&quot;</span>) ||
<a name="l00062"></a>00062                 ($q[<span class="stringliteral">&quot;type&quot;</span>]==<span class="stringliteral">&quot;fill_in_blank&quot;</span>) ) {
<a name="l00063"></a>00063 
<a name="l00064"></a>00064                     <span class="keywordflow">if</span>(!empty($qx[0])) {
<a name="l00065"></a>00065                         <span class="comment">//echo $qx[0].&quot; --- &quot;.$a.&quot; --- &quot;;</span>
<a name="l00066"></a>00066                         <span class="keywordflow">if</span>($qx[0]==<a class="code" href="database__upgrades_8php.html#acebf83966ef6d7e5645a6b62ba368f9f">$a</a>) {
<a name="l00067"></a>00067                             <span class="comment">// echo &quot;CORRECT&quot;;</span>
<a name="l00068"></a>00068                             $correct=<span class="keyword">true</span>;
<a name="l00069"></a>00069                             }
<a name="l00070"></a>00070                         }
<a name="l00071"></a>00071                         
<a name="l00072"></a>00072                     <span class="keywordflow">if</span>(!empty($qx[1])) {
<a name="l00073"></a>00073                          <span class="comment">//echo $qx[1].&quot; --- &quot;.$b.&quot; --- &quot;;</span>
<a name="l00074"></a>00074                         <span class="keywordflow">if</span>($qx[1]==<a class="code" href="database__upgrades_8php.html#ab9eb087b791749ae45deabb0899b7ccc">$b</a>) { 
<a name="l00075"></a>00075                             <span class="comment">// echo &quot;CORRECT&quot;;</span>
<a name="l00076"></a>00076                              $correct=<span class="keyword">true</span>; 
<a name="l00077"></a>00077                             }
<a name="l00078"></a>00078                             <span class="keywordflow">else</span> $correct=<span class="keyword">false</span>;
<a name="l00079"></a>00079                         }
<a name="l00080"></a>00080                         
<a name="l00081"></a>00081                     <span class="keywordflow">if</span>(!empty($qx[2])) {
<a name="l00082"></a>00082                         <span class="comment">//echo $qx[2].&quot; --- &quot;.$c.&quot; --- &quot;;</span>
<a name="l00083"></a>00083                         <span class="keywordflow">if</span>($qx[2]==<a class="code" href="sp_8php.html#a26c2f6c0ee7cb69a545305a8949c045c">$c</a>) { 
<a name="l00084"></a>00084                             <span class="comment">//echo &quot;CORRECT&quot;;</span>
<a name="l00085"></a>00085                             $correct=<span class="keyword">true</span>; 
<a name="l00086"></a>00086                             }
<a name="l00087"></a>00087                             <span class="keywordflow">else</span> $correct=<span class="keyword">false</span>;
<a name="l00088"></a>00088                         }
<a name="l00089"></a>00089                         
<a name="l00090"></a>00090                     <span class="keywordflow">if</span>(!empty($qx[3])) {
<a name="l00091"></a>00091                         <span class="comment">//echo $qx[3].&quot; --- &quot;.$d.&quot; --- &quot;;</span>
<a name="l00092"></a>00092                         <span class="keywordflow">if</span>($qx[3]==$d) { 
<a name="l00093"></a>00093                             <span class="comment">//echo &quot;CORRECT&quot;;</span>
<a name="l00094"></a>00094                             $correct=<span class="keyword">true</span>; 
<a name="l00095"></a>00095                             }
<a name="l00096"></a>00096                             <span class="keywordflow">else</span> $correct=<span class="keyword">false</span>;
<a name="l00097"></a>00097                         }
<a name="l00098"></a>00098                         
<a name="l00099"></a>00099                     <span class="keywordflow">if</span>(!empty($qx[4])) {
<a name="l00100"></a>00100                         <span class="comment">//echo $qx[4].&quot; --- &quot;.$e.&quot; --- &quot;;</span>
<a name="l00101"></a>00101                         <span class="keywordflow">if</span>($qx[4]==$e) { 
<a name="l00102"></a>00102                             <span class="comment">//echo &quot;CORRECT&quot;;</span>
<a name="l00103"></a>00103                             $correct=<span class="keyword">true</span>; 
<a name="l00104"></a>00104                             }
<a name="l00105"></a>00105                             <span class="keywordflow">else</span> $correct=<span class="keyword">false</span>;
<a name="l00106"></a>00106                         }
<a name="l00107"></a>00107                         
<a name="l00108"></a>00108                     <span class="keywordflow">if</span>(!empty($qx[5])) {
<a name="l00109"></a>00109                         <span class="comment">//echo $qx[5].&quot; --- &quot;.$f.&quot; --- &quot;;</span>
<a name="l00110"></a>00110                         <span class="keywordflow">if</span>($qx[5]==$f) { 
<a name="l00111"></a>00111                             <span class="comment">//echo &quot;CORRECT&quot;;</span>
<a name="l00112"></a>00112                             $correct=<span class="keyword">true</span>; 
<a name="l00113"></a>00113                             }
<a name="l00114"></a>00114                             <span class="keywordflow">else</span> $correct=<span class="keyword">false</span>;
<a name="l00115"></a>00115                         }
<a name="l00116"></a>00116                 
<a name="l00117"></a>00117         }
<a name="l00118"></a>00118         
<a name="l00119"></a>00119         
<a name="l00120"></a>00120         <span class="keywordflow">if</span>($q[<span class="stringliteral">&quot;type&quot;</span>]==<span class="stringliteral">&quot;multiple_choice&quot;</span>) {
<a name="l00121"></a>00121             
<a name="l00122"></a>00122             <span class="comment">//echo &quot; --- $group1 --- &quot;;</span>
<a name="l00123"></a>00123             <span class="comment">//echo $q[&#39;correct_answer&#39;];</span><span class="comment"></span>
<a name="l00124"></a>00124 <span class="comment">            /// echo &quot; --- &quot;;</span>
<a name="l00125"></a>00125 <span class="comment"></span>            $answer=$group1;
<a name="l00126"></a>00126             
<a name="l00127"></a>00127             <span class="keywordflow">if</span>($group1==$q[<span class="stringliteral">&quot;correct_answer&quot;</span>])  {
<a name="l00128"></a>00128                 <span class="comment">//echo &quot;CORRECT&quot;;</span>
<a name="l00129"></a>00129                 $correct=<span class="keyword">true</span>;
<a name="l00130"></a>00130             }               
<a name="l00131"></a>00131         }  <span class="comment">// c3745-is-mz.122-13.T9.bin</span>
<a name="l00132"></a>00132         
<a name="l00133"></a>00133         <span class="keywordflow">if</span>($q[<span class="stringliteral">&quot;type&quot;</span>]==<span class="stringliteral">&quot;true_false&quot;</span>) {
<a name="l00134"></a>00134             
<a name="l00135"></a>00135             <span class="comment">//echo &quot; --- $group1 --- &quot;;</span>
<a name="l00136"></a>00136             <span class="comment">//echo $q[&#39;correct_answer&#39;];</span>
<a name="l00137"></a>00137             <span class="comment">//echo &quot; --- &quot;;</span>
<a name="l00138"></a>00138             
<a name="l00139"></a>00139             $answer=$group1;        
<a name="l00140"></a>00140             
<a name="l00141"></a>00141             <span class="keywordflow">if</span>(strtolower($group1)==$q[<span class="stringliteral">&quot;correct_answer&quot;</span>]) {
<a name="l00142"></a>00142                 
<a name="l00143"></a>00143              <span class="comment">//echo &quot;CORRECT&quot;;</span>
<a name="l00144"></a>00144                 $correct=<span class="keyword">true</span>;  
<a name="l00145"></a>00145             }
<a name="l00146"></a>00146         }
<a name="l00147"></a>00147         
<a name="l00148"></a>00148         <a class="code" href="lib_8debug_8php.html#a724b8757fd23253e49a92069cfb59fa7">d_echo</a>(<span class="stringliteral">&quot;group1: $group1 &lt;BR&gt;</span>
<a name="l00149"></a>00149 <span class="stringliteral">        a: $a &lt;BR&gt;</span>
<a name="l00150"></a>00150 <span class="stringliteral">        b: $b &lt;BR&gt;</span>
<a name="l00151"></a>00151 <span class="stringliteral">        c: $c &lt;BR&gt;</span>
<a name="l00152"></a>00152 <span class="stringliteral">        d: $d &lt;BR&gt;</span>
<a name="l00153"></a>00153 <span class="stringliteral">        e: $e &lt;BR&gt;</span>
<a name="l00154"></a>00154 <span class="stringliteral">        f: $f&quot;</span>);
<a name="l00155"></a>00155         
<a name="l00156"></a>00156         
<a name="l00157"></a>00157         <a class="code" href="lib_8debug_8php.html#a724b8757fd23253e49a92069cfb59fa7">d_echo</a> (<span class="stringliteral">&quot; CORRECT: $correct &quot;</span>);     
<a name="l00158"></a>00158 
<a name="l00159"></a>00159             <a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>=<a class="code" href="lib_8mysql_8php.html#a06fb53fc71e262dce115fd3a98bcecdd">lib_mysql_query</a>(<span class="stringliteral">&quot;select * from exam_users where `question_id`=&#39;$qc&#39; and</span>
<a name="l00160"></a>00160 <span class="stringliteral">                                                              `user`=&#39;$data-&gt;name&#39; and</span>
<a name="l00161"></a>00161 <span class="stringliteral">                                                              `exam_id`=&#39;$exam_id&#39; &quot;</span>);
<a name="l00162"></a>00162                                                               
<a name="l00163"></a>00163             $eud=@mysql_fetch_object(<a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>);
<a name="l00164"></a>00164                                                             
<a name="l00165"></a>00165             <span class="keywordflow">if</span>($eud-&gt;id) { 
<a name="l00166"></a>00166                 
<a name="l00167"></a>00167                 
<a name="l00168"></a>00168                     <a class="code" href="lib_8mysql_8php.html#a06fb53fc71e262dce115fd3a98bcecdd">lib_mysql_query</a>(<span class="stringliteral">&quot;update exam_users set `correct`=&#39;$correct&#39;  where `question_id`=&#39;$qc&#39; and `user`=&#39;$data-&gt;name&#39; and `exam_id`=&#39;$exam_id&#39; &quot;</span>);
<a name="l00169"></a>00169                     <a class="code" href="lib_8mysql_8php.html#a06fb53fc71e262dce115fd3a98bcecdd">lib_mysql_query</a>(<span class="stringliteral">&quot;update exam_users set `completed`=&#39;$answer&#39;  where `question_id`=&#39;$qc&#39; and `user`=&#39;$data-&gt;name&#39; and `exam_id`=&#39;$exam_id&#39; &quot;</span>);
<a name="l00170"></a>00170                     
<a name="l00171"></a>00171                     
<a name="l00172"></a>00172             }
<a name="l00173"></a>00173             <span class="keywordflow">else</span> {
<a name="l00174"></a>00174                     <span class="keywordflow">if</span>(!empty($exam_id)) {
<a name="l00175"></a>00175                         $q= <span class="stringliteral">&quot;insert into exam_users   (`user`, `exam_id`, `question_id`, `correct`) values (&#39;$data-&gt;name&#39;, &#39;$exam_id&#39;, &#39;$qc&#39;, &#39;$correct&#39;) &quot;</span>;
<a name="l00176"></a>00176                         echo $q.<span class="stringliteral">&quot;&lt;br&gt;&quot;</span>;
<a name="l00177"></a>00177                         <a class="code" href="lib_8mysql_8php.html#a06fb53fc71e262dce115fd3a98bcecdd">lib_mysql_query</a>($q);
<a name="l00178"></a>00178                         
<a name="l00179"></a>00179                     }
<a name="l00180"></a>00180                                                     
<a name="l00181"></a>00181             }
<a name="l00182"></a>00182 
<a name="l00183"></a>00183         <span class="comment">//echo &quot;&lt;hr&gt;&quot;;</span>
<a name="l00184"></a>00184         <a class="code" href="wab_8php.html#a7e78406241b519489b23a8c902b4a8de">$_SESSION</a>[<span class="stringliteral">&quot;question_id&quot;</span>]=<span class="stringliteral">&quot;&quot;</span>;
<a name="l00185"></a>00185     }
<a name="l00186"></a>00186     
<a name="l00187"></a>00187 <span class="comment">//}</span>
<a name="l00188"></a>00188 
<a name="l00189"></a>00189 
<a name="l00190"></a>00190 <span class="keywordflow">if</span>(<a class="code" href="install_8php.html#af9da176a74bd49cb97ea35c6ac7257bc">$action</a>==<span class="stringliteral">&quot;reset_exam&quot;</span>){
<a name="l00191"></a>00191     $qid=0;
<a name="l00192"></a>00192     <a class="code" href="wab_8php.html#a7e78406241b519489b23a8c902b4a8de">$_SESSION</a>[<span class="stringliteral">&quot;exam_$exam_id&quot;</span>]=<span class="stringliteral">&quot;0&quot;</span>;
<a name="l00193"></a>00193 }
<a name="l00194"></a>00194 
<a name="l00195"></a>00195 <span class="keywordflow">if</span>(<a class="code" href="install_8php.html#af9da176a74bd49cb97ea35c6ac7257bc">$action</a>==<span class="stringliteral">&quot;admin_exam_test&quot;</span>) {
<a name="l00196"></a>00196     <a class="code" href="wab_8php.html#a7e78406241b519489b23a8c902b4a8de">$_SESSION</a>[<span class="stringliteral">&quot;exam_$exam_id&quot;</span>]=<span class="stringliteral">&quot;1&quot;</span>;
<a name="l00197"></a>00197     <a class="code" href="install_8php.html#af9da176a74bd49cb97ea35c6ac7257bc">$action</a>=<span class="stringliteral">&quot;run_exam&quot;</span>;
<a name="l00198"></a>00198 }
<a name="l00199"></a>00199 
<a name="l00200"></a>00200 <span class="keywordflow">if</span>(<a class="code" href="install_8php.html#af9da176a74bd49cb97ea35c6ac7257bc">$action</a>==<span class="stringliteral">&quot;list_exams&quot;</span>) {
<a name="l00201"></a>00201 
<a name="l00202"></a>00202     <span class="keywordflow">if</span>( <a class="code" href="lib_8access_8php.html#af6adaf74ff6c2ded2143f472076c176a">lib_access_check</a>(<span class="stringliteral">&quot;exams&quot;</span>,<span class="stringliteral">&quot;edit&quot;</span>) ) { 
<a name="l00203"></a>00203             echo <span class="stringliteral">&quot;[&lt;a href=&#39;$RFS_SITE_URL/modules/exams/exams.php?action=admin_edit&#39;&gt;Exam Administration&lt;/a&gt;]&quot;</span>;
<a name="l00204"></a>00204     }   
<a name="l00205"></a>00205     
<a name="l00206"></a>00206     
<a name="l00207"></a>00207     $n=0;
<a name="l00208"></a>00208     <a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>=<a class="code" href="lib_8mysql_8php.html#a06fb53fc71e262dce115fd3a98bcecdd">lib_mysql_query</a>(<span class="stringliteral">&quot;select * from exams&quot;</span>);
<a name="l00209"></a>00209     <span class="keywordflow">if</span>(<a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>) $n=mysql_num_rows(<a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>);
<a name="l00210"></a>00210     
<a name="l00211"></a>00211     echo <span class="stringliteral">&quot;&lt;table border=0 cellspacing=0 cellpadding=2&gt;&quot;</span>;    
<a name="l00212"></a>00212     echo <span class="stringliteral">&quot;&lt;tr&gt; &lt;td&gt;&lt;/td&gt; &lt;td&gt; Name &lt;/td&gt;  &lt;td&gt;Completed&lt;/td&gt; &lt;td&gt;Your Score&lt;/td&gt;  &lt;td&gt;Passing Score&lt;/td&gt; &lt;/tr&gt;&quot;</span>;
<a name="l00213"></a>00213     <span class="keywordflow">for</span>($i=0;$i&lt;$n;$i++) {
<a name="l00214"></a>00214             <a class="code" href="top__referrers_2linkbin_8php.html#acc3ddc926074609c4cff4f0aa1793fad">$gt</a>++; <span class="keywordflow">if</span>(<a class="code" href="top__referrers_2linkbin_8php.html#acc3ddc926074609c4cff4f0aa1793fad">$gt</a>&gt;1) <a class="code" href="top__referrers_2linkbin_8php.html#acc3ddc926074609c4cff4f0aa1793fad">$gt</a>=0;
<a name="l00215"></a>00215             $exam=mysql_fetch_object(<a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>);
<a name="l00216"></a>00216             echo <span class="stringliteral">&quot;&lt;tr&gt;&quot;</span>;
<a name="l00217"></a>00217             
<a name="l00218"></a>00218             echo <span class="stringliteral">&quot;&lt;td class=rfs_project_table_$gt&gt;&quot;</span>;            
<a name="l00219"></a>00219             echo <span class="stringliteral">&quot;&lt;a href=&#39;$RFS_SITE_URL/modules/exams/exams.php?action=wipe_exam&amp;exam_id=$exam-&gt;id&#39;&gt;</span>
<a name="l00220"></a>00220 <span class="stringliteral">            &lt;img src=&#39;$RFS_SITE_URL/images/icons/Play.png&#39; width=16 border=0&gt;&lt;/a&gt;</span>
<a name="l00221"></a>00221 <span class="stringliteral">            &lt;/td&gt;&quot;</span>;
<a name="l00222"></a>00222             
<a name="l00223"></a>00223             echo <span class="stringliteral">&quot;&lt;td class=rfs_project_table_$gt&gt;&quot;</span>;
<a name="l00224"></a>00224             
<a name="l00225"></a>00225             echo <span class="stringliteral">&quot;&lt;a href=&#39;$RFS_SITE_URL/modules/exams/exams.php?action=wipe_exam&amp;exam_id=$exam-&gt;id&#39;&gt;$exam-&gt;name&lt;/a&gt;&quot;</span>;
<a name="l00226"></a>00226             
<a name="l00227"></a>00227             echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l00228"></a>00228             
<a name="l00229"></a>00229             echo <span class="stringliteral">&quot;&lt;td class=rfs_project_table_$gt&gt;&quot;</span>;
<a name="l00230"></a>00230             echo <a class="code" href="module_8exams_8php.html#a346cbfcaf6d4eac8d9eeb85657ac9c45">exams_get_total_questions_answered</a>(<a class="code" href="video__wall_8php.html#a6efc15b5a2314dd4b5aaa556a375c6d6">$data</a>-&gt;name,$exam-&gt;id);
<a name="l00231"></a>00231             
<a name="l00232"></a>00232             echo <span class="stringliteral">&quot; ( &quot;</span>.exams_get_completed_prct(<a class="code" href="video__wall_8php.html#a6efc15b5a2314dd4b5aaa556a375c6d6">$data</a>-&gt;name,$exam-&gt;id).<span class="stringliteral">&quot;% )&quot;</span>;
<a name="l00233"></a>00233             
<a name="l00234"></a>00234             echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l00235"></a>00235             
<a name="l00236"></a>00236             
<a name="l00237"></a>00237             echo <span class="stringliteral">&quot;&lt;td class=rfs_project_table_$gt&gt;&quot;</span>;
<a name="l00238"></a>00238             $eprct=<a class="code" href="module_8exams_8php.html#a9806992330b13f93930b7d77043f6af6">exams_get_prct</a>(<a class="code" href="video__wall_8php.html#a6efc15b5a2314dd4b5aaa556a375c6d6">$data</a>-&gt;name,$exam-&gt;id);
<a name="l00239"></a>00239             $escor=<a class="code" href="module_8exams_8php.html#a23a9e36c4642c574f1dcc00404ae1926">exams_get_score</a>(<a class="code" href="video__wall_8php.html#a6efc15b5a2314dd4b5aaa556a375c6d6">$data</a>-&gt;name,$exam-&gt;id);
<a name="l00240"></a>00240             $etotq=<a class="code" href="module_8exams_8php.html#abc7a2842625f3b9d9c427f8e4cd9a52d">exams_get_total_questions</a>($exam-&gt;id);
<a name="l00241"></a>00241             
<a name="l00242"></a>00242             $oclr=<span class="stringliteral">&quot;RED&quot;</span>;
<a name="l00243"></a>00243             <span class="keywordflow">if</span>($eprct&gt;=$exam-&gt;pass_percent) $oclr=<span class="stringliteral">&quot;GREEN&quot;</span>;
<a name="l00244"></a>00244             
<a name="l00245"></a>00245             <a class="code" href="lib_8forms_8php.html#ad285a3a501e01b34c5905b2d94728dd6">lib_forms_info</a>(<span class="stringliteral">&quot;$escor/$etotq : $eprct%&quot;</span>, <span class="stringliteral">&quot;WHITE&quot;</span>, $oclr);
<a name="l00246"></a>00246             
<a name="l00247"></a>00247             echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l00248"></a>00248             
<a name="l00249"></a>00249 
<a name="l00250"></a>00250             echo <span class="stringliteral">&quot;&lt;td class=rfs_project_table_$gt&gt;&quot;</span>;
<a name="l00251"></a>00251             echo $exam-&gt;pass_percent.<span class="stringliteral">&quot;%&quot;</span>;           
<a name="l00252"></a>00252             echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l00253"></a>00253             
<a name="l00254"></a>00254             
<a name="l00255"></a>00255             echo <span class="stringliteral">&quot;&lt;/tr&gt;&quot;</span>;           
<a name="l00256"></a>00256     }
<a name="l00257"></a>00257     echo <span class="stringliteral">&quot;&lt;/table&gt;&quot;</span>;
<a name="l00258"></a>00258     <span class="keywordflow">if</span>(!$n) echo <span class="stringliteral">&quot;There are no exams... yet.&lt;br&gt;&quot;</span>;
<a name="l00259"></a>00259 
<a name="l00260"></a>00260 }
<a name="l00261"></a>00261 
<a name="l00262"></a>00262 <span class="keywordflow">if</span>(<a class="code" href="install_8php.html#af9da176a74bd49cb97ea35c6ac7257bc">$action</a>==<span class="stringliteral">&quot;wipe_exam&quot;</span>) {
<a name="l00263"></a>00263         
<a name="l00264"></a>00264     $exam   = <a class="code" href="lib_8mysql_8php.html#a80af159483fec4094697cef8c5c187a6">lib_mysql_fetch_one_object</a>(<span class="stringliteral">&quot;select * from exams where id=&#39;$exam_id&#39;&quot;</span>);
<a name="l00265"></a>00265     $eprct  = <a class="code" href="module_8exams_8php.html#a9806992330b13f93930b7d77043f6af6">exams_get_prct</a>(<a class="code" href="video__wall_8php.html#a6efc15b5a2314dd4b5aaa556a375c6d6">$data</a>-&gt;name,$exam_id);
<a name="l00266"></a>00266     $escor  = <a class="code" href="module_8exams_8php.html#a23a9e36c4642c574f1dcc00404ae1926">exams_get_score</a>(<a class="code" href="video__wall_8php.html#a6efc15b5a2314dd4b5aaa556a375c6d6">$data</a>-&gt;name,$exam_id);
<a name="l00267"></a>00267     $etotq  = <a class="code" href="module_8exams_8php.html#abc7a2842625f3b9d9c427f8e4cd9a52d">exams_get_total_questions</a>($exam_id);
<a name="l00268"></a>00268     $etotqa = <a class="code" href="module_8exams_8php.html#a346cbfcaf6d4eac8d9eeb85657ac9c45">exams_get_total_questions_answered</a>(<a class="code" href="video__wall_8php.html#a6efc15b5a2314dd4b5aaa556a375c6d6">$data</a>-&gt;name,$exam_id);
<a name="l00269"></a>00269     $oclr=<span class="stringliteral">&quot;RED&quot;</span>;
<a name="l00270"></a>00270     <span class="keywordflow">if</span>($eprct&gt;=$exam-&gt;pass_percent)
<a name="l00271"></a>00271         $oclr=<span class="stringliteral">&quot;GREEN&quot;</span>;
<a name="l00272"></a>00272     <span class="keywordflow">if</span>(!$confirmed)
<a name="l00273"></a>00273     <span class="keywordflow">if</span>($oclr==<span class="stringliteral">&quot;GREEN&quot;</span>) {
<a name="l00274"></a>00274         <span class="keywordflow">if</span>( $etotq == $etotqa ) {
<a name="l00275"></a>00275             <span class="keywordflow">if</span>(<a class="code" href="wab_8php.html#a7e78406241b519489b23a8c902b4a8de">$_SESSION</a>[<span class="stringliteral">&quot;question_id&quot;</span>]&lt;1) {
<a name="l00276"></a>00276                 <a class="code" href="lib_8forms_8php.html#ad285a3a501e01b34c5905b2d94728dd6">lib_forms_info</a>(<span class="stringliteral">&quot;$escor/$etotq : $eprct%&quot;</span>, <span class="stringliteral">&quot;WHITE&quot;</span>, $oclr);
<a name="l00277"></a>00277                 <a class="code" href="lib_8forms_8php.html#ad285a3a501e01b34c5905b2d94728dd6">lib_forms_info</a>($exam-&gt;pass_percent.<span class="stringliteral">&quot;% minimum passing score required.&quot;</span>, <span class="stringliteral">&quot;WHITE&quot;</span>, <span class="stringliteral">&quot;BLUE&quot;</span>);
<a name="l00278"></a>00278                 <a class="code" href="lib_8forms_8php.html#a28847af0b09a9d3157d7854442125a23">lib_forms_warn</a>(<span class="stringliteral">&quot;You have already taken this exam and passed. If you wish, you may retake the exam, but your current score will be erased and you will have to take the exam in it&#39;s entirety with a passing score to recieve credit. If you are sure then</span>
<a name="l00279"></a>00279 <span class="stringliteral">                &lt;a href=&#39;$RFS_SITE_URL/modules/exams/exams.php?action=wipe_exam&amp;exam_id=$exam_id&amp;confirmed=true&#39;&gt;&lt;img src=$RFS_SITE_URL/images/icons/Play.png border=0&gt;click here&lt;/a&gt;. Note: This action can not be reversed.&quot;</span>);
<a name="l00280"></a>00280                 <span class="keywordflow">for</span>($i=0;$i&lt;35;$i++) echo <span class="stringliteral">&quot;&lt;br&gt;&quot;</span>;
<a name="l00281"></a>00281                 include(<span class="stringliteral">&quot;footer.php&quot;</span>);
<a name="l00282"></a>00282                 exit();     
<a name="l00283"></a>00283                 
<a name="l00284"></a>00284             }
<a name="l00285"></a>00285         }
<a name="l00286"></a>00286     }
<a name="l00287"></a>00287     
<a name="l00288"></a>00288     $x=<a class="code" href="module_8exams_8php.html#abf004a941dfe49f26b78cc9e8179aad2">exams_get_last_question_answered</a>(<a class="code" href="video__wall_8php.html#a6efc15b5a2314dd4b5aaa556a375c6d6">$data</a>-&gt;name,$exam_id);
<a name="l00289"></a>00289     <span class="keywordflow">if</span>($x) {
<a name="l00290"></a>00290         <a class="code" href="database__upgrades_8php.html#acebf83966ef6d7e5645a6b62ba368f9f">$a</a> = <a class="code" href="module_8exams_8php.html#ab8ddb160aa269e02af3c55a221698adf">exams_convert_question_id_to_sequence</a>($x);
<a name="l00291"></a>00291         $texam_sequence = <a class="code" href="database__upgrades_8php.html#acebf83966ef6d7e5645a6b62ba368f9f">$a</a>[<span class="stringliteral">&quot;exam_sequence&quot;</span>];
<a name="l00292"></a>00292         <span class="keywordflow">if</span>(($texam_sequence) &gt; 1) { 
<a name="l00293"></a>00293             <a class="code" href="wab_8php.html#a7e78406241b519489b23a8c902b4a8de">$_SESSION</a>[<span class="stringliteral">&quot;exam_$exam_id&quot;</span>]=$texam_sequence;
<a name="l00294"></a>00294             $question=<a class="code" href="lib_8mysql_8php.html#a80af159483fec4094697cef8c5c187a6">lib_mysql_fetch_one_object</a>(<span class="stringliteral">&quot;select * from exam_questions where exam_sequence=&#39;$texam_sequence&#39; and exam_id=&#39;$exam_id&#39;&quot;</span>);  
<a name="l00295"></a>00295             
<a name="l00296"></a>00296             <a class="code" href="lib_8forms_8php.html#a348d44386a8efb03802323d887094d75">lib_forms_question</a>(<span class="stringliteral">&quot; </span>
<a name="l00297"></a>00297 <span class="stringliteral">            &lt;h1&gt; $exam-&gt;name CBT</span>
<a name="l00298"></a>00298 <span class="stringliteral">            </span>
<a name="l00299"></a>00299 <span class="stringliteral">            &lt;hr&gt;</span>
<a name="l00300"></a>00300 <span class="stringliteral">            You have already completed a portion of this test.&lt;br&gt;</span>
<a name="l00301"></a>00301 <span class="stringliteral">            Would you like to resume this test, or restart it?&lt;br&gt;</span>
<a name="l00302"></a>00302 <span class="stringliteral">                        </span>
<a name="l00303"></a>00303 <span class="stringliteral">            &lt;hr&gt;</span>
<a name="l00304"></a>00304 <span class="stringliteral">            </span>
<a name="l00305"></a>00305 <span class="stringliteral">            &lt;center&gt;</span>
<a name="l00306"></a>00306 <span class="stringliteral">            &quot;</span>.
<a name="l00307"></a>00307             <a class="code" href="lib_8buttons_8php.html#a248ceefceff04cb69a1032f6cfc1dad6">lib_buttons_text</a>(<span class="stringliteral">&quot;$RFS_SITE_URL/modules/exams/exams.php?exam_id=$exam-&gt;id&amp;action=really_wipe_exam&quot;</span>,<span class="stringliteral">&quot;RESTART&quot;</span>)
<a name="l00308"></a>00308             .
<a name="l00309"></a>00309             <a class="code" href="lib_8buttons_8php.html#a248ceefceff04cb69a1032f6cfc1dad6">lib_buttons_text</a>(<span class="stringliteral">&quot;$RFS_SITE_URL/modules/exams/exams.php?exam_id=$exam-&gt;id&amp;action=run_exam&quot;</span>,<span class="stringliteral">&quot;RESUME&quot;</span>).<span class="stringliteral">&quot;</span>
<a name="l00310"></a>00310 <span class="stringliteral">            &lt;/center&gt;</span>
<a name="l00311"></a>00311 <span class="stringliteral">            &lt;hr&gt;</span>
<a name="l00312"></a>00312 <span class="stringliteral">            &lt;br&gt;</span>
<a name="l00313"></a>00313 <span class="stringliteral">            </span>
<a name="l00314"></a>00314 <span class="stringliteral">            </span>
<a name="l00315"></a>00315 <span class="stringliteral">            &quot;</span>);
<a name="l00316"></a>00316             
<a name="l00317"></a>00317             
<a name="l00318"></a>00318             <span class="comment">// $action=&quot;run_exam&quot;;</span>
<a name="l00319"></a>00319         }
<a name="l00320"></a>00320         <span class="keywordflow">else</span> {
<a name="l00321"></a>00321             <a class="code" href="install_8php.html#af9da176a74bd49cb97ea35c6ac7257bc">$action</a>=<span class="stringliteral">&quot;really_wipe_exam&quot;</span>;
<a name="l00322"></a>00322         }
<a name="l00323"></a>00323     }
<a name="l00324"></a>00324     <span class="keywordflow">else</span> {
<a name="l00325"></a>00325             <a class="code" href="install_8php.html#af9da176a74bd49cb97ea35c6ac7257bc">$action</a>=<span class="stringliteral">&quot;really_wipe_exam&quot;</span>;
<a name="l00326"></a>00326     }
<a name="l00327"></a>00327 }
<a name="l00328"></a>00328 
<a name="l00329"></a>00329 <span class="keywordflow">if</span>(<a class="code" href="install_8php.html#af9da176a74bd49cb97ea35c6ac7257bc">$action</a>==<span class="stringliteral">&quot;really_wipe_exam&quot;</span>) {
<a name="l00330"></a>00330     
<a name="l00331"></a>00331     <a class="code" href="module_8exams_8php.html#af57111353abc0d0a53d61d6fc6f16129">exams_wipe_user_exam</a>(<a class="code" href="video__wall_8php.html#a6efc15b5a2314dd4b5aaa556a375c6d6">$data</a>-&gt;name,$exam_id);
<a name="l00332"></a>00332     <a class="code" href="wab_8php.html#a7e78406241b519489b23a8c902b4a8de">$_SESSION</a>[<span class="stringliteral">&quot;question_id&quot;</span>]=0;
<a name="l00333"></a>00333     <a class="code" href="wab_8php.html#a7e78406241b519489b23a8c902b4a8de">$_SESSION</a>[<span class="stringliteral">&quot;exam_$exam_id&quot;</span>]=1;
<a name="l00334"></a>00334     <a class="code" href="install_8php.html#af9da176a74bd49cb97ea35c6ac7257bc">$action</a>=<span class="stringliteral">&quot;run_exam&quot;</span>;
<a name="l00335"></a>00335     
<a name="l00336"></a>00336 }
<a name="l00337"></a>00337 
<a name="l00338"></a>00338 <span class="keywordflow">if</span>(<a class="code" href="install_8php.html#af9da176a74bd49cb97ea35c6ac7257bc">$action</a>==<span class="stringliteral">&quot;run_exam&quot;</span>) {
<a name="l00339"></a>00339     
<a name="l00340"></a>00340     $exam   = <a class="code" href="lib_8mysql_8php.html#a80af159483fec4094697cef8c5c187a6">lib_mysql_fetch_one_object</a>(<span class="stringliteral">&quot;select * from exams where id=&#39;$exam_id&#39;&quot;</span>);
<a name="l00341"></a>00341     $eprct  = <a class="code" href="module_8exams_8php.html#a9806992330b13f93930b7d77043f6af6">exams_get_prct</a>(<a class="code" href="video__wall_8php.html#a6efc15b5a2314dd4b5aaa556a375c6d6">$data</a>-&gt;name,$exam_id);
<a name="l00342"></a>00342     $escor  = <a class="code" href="module_8exams_8php.html#a23a9e36c4642c574f1dcc00404ae1926">exams_get_score</a>(<a class="code" href="video__wall_8php.html#a6efc15b5a2314dd4b5aaa556a375c6d6">$data</a>-&gt;name,$exam_id);
<a name="l00343"></a>00343     $etotq  = <a class="code" href="module_8exams_8php.html#abc7a2842625f3b9d9c427f8e4cd9a52d">exams_get_total_questions</a>($exam_id);
<a name="l00344"></a>00344     $etotqa = <a class="code" href="module_8exams_8php.html#a346cbfcaf6d4eac8d9eeb85657ac9c45">exams_get_total_questions_answered</a>(<a class="code" href="video__wall_8php.html#a6efc15b5a2314dd4b5aaa556a375c6d6">$data</a>-&gt;name,$exam_id);
<a name="l00345"></a>00345     
<a name="l00346"></a>00346     $oclr=<span class="stringliteral">&quot;RED&quot;</span>;
<a name="l00347"></a>00347     <span class="keywordflow">if</span>($eprct&gt;=$exam-&gt;pass_percent) $oclr=<span class="stringliteral">&quot;GREEN&quot;</span>;
<a name="l00348"></a>00348     
<a name="l00349"></a>00349     <a class="code" href="lib_8debug_8php.html#a724b8757fd23253e49a92069cfb59fa7">d_echo</a>(<span class="stringliteral">&quot;Exam $exam_id&quot;</span>);
<a name="l00350"></a>00350     $exam=<a class="code" href="lib_8mysql_8php.html#a80af159483fec4094697cef8c5c187a6">lib_mysql_fetch_one_object</a>(<span class="stringliteral">&quot;select * from exams where id=&#39;$exam_id&#39;&quot;</span>);
<a name="l00351"></a>00351     <a class="code" href="lib_8debug_8php.html#a724b8757fd23253e49a92069cfb59fa7">d_echo</a>(<span class="stringliteral">&quot;$exam-&gt;name&quot;</span>);
<a name="l00352"></a>00352 
<a name="l00353"></a>00353     <span class="keywordflow">if</span>($qsid!=<a class="code" href="wab_8php.html#a7e78406241b519489b23a8c902b4a8de">$_SESSION</a>[<span class="stringliteral">&quot;exam_$exam_id&quot;</span>]) {
<a name="l00354"></a>00354         <span class="keywordflow">if</span>(!empty($qsid)) 
<a name="l00355"></a>00355         <a class="code" href="wab_8php.html#a7e78406241b519489b23a8c902b4a8de">$_SESSION</a>[<span class="stringliteral">&quot;exam_$exam_id&quot;</span>]=$qsid;       
<a name="l00356"></a>00356     } 
<a name="l00357"></a>00357 
<a name="l00358"></a>00358     <a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>=<a class="code" href="lib_8mysql_8php.html#a06fb53fc71e262dce115fd3a98bcecdd">lib_mysql_query</a>(<span class="stringliteral">&quot;select * from exam_questions where exam_id=&#39;$exam_id&#39;&quot;</span>);
<a name="l00359"></a>00359     $nq=mysql_num_rows(<a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>);
<a name="l00360"></a>00360 
<a name="l00361"></a>00361     <a class="code" href="lib_8debug_8php.html#a724b8757fd23253e49a92069cfb59fa7">d_echo</a>(<span class="stringliteral">&quot;$nq&quot;</span>);
<a name="l00362"></a>00362 
<a name="l00363"></a>00363     $qsid=<a class="code" href="wab_8php.html#a7e78406241b519489b23a8c902b4a8de">$_SESSION</a>[<span class="stringliteral">&quot;exam_$exam_id&quot;</span>];
<a name="l00364"></a>00364     
<a name="l00365"></a>00365     <span class="comment">// echo &quot;exam_$exam_id &lt;br&gt; \$qsid: $qsid &lt;br&gt;&quot;;</span>
<a name="l00366"></a>00366 
<a name="l00367"></a>00367     <span class="keywordflow">if</span>($qsid&lt;2) $qsid=1;
<a name="l00368"></a>00368         <a class="code" href="wab_8php.html#a7e78406241b519489b23a8c902b4a8de">$_SESSION</a>[<span class="stringliteral">&quot;exam_$exam_id&quot;</span>]=1;
<a name="l00369"></a>00369 
<a name="l00370"></a>00370     <a class="code" href="lib_8debug_8php.html#a724b8757fd23253e49a92069cfb59fa7">d_echo</a>(<span class="stringliteral">&quot;$qsid&quot;</span>);
<a name="l00371"></a>00371     $question=<a class="code" href="lib_8mysql_8php.html#a80af159483fec4094697cef8c5c187a6">lib_mysql_fetch_one_object</a>(<span class="stringliteral">&quot;select * from exam_questions where exam_sequence=&#39;$qsid&#39; and exam_id=&#39;$exam_id&#39;&quot;</span>);
<a name="l00372"></a>00372     <a class="code" href="lib_8debug_8php.html#a724b8757fd23253e49a92069cfb59fa7">d_echo</a>($question-&gt;type);
<a name="l00373"></a>00373     
<a name="l00374"></a>00374     <a class="code" href="wab_8php.html#a7e78406241b519489b23a8c902b4a8de">$_SESSION</a>[<span class="stringliteral">&quot;question_id&quot;</span>]=$question-&gt;id;
<a name="l00375"></a>00375     
<a name="l00376"></a>00376     <span class="comment">// echo &quot;!!!! \$question-&gt;type = $question-&gt;type&lt;br&gt;&quot;;</span>
<a name="l00377"></a>00377     <span class="comment">// echo &quot;!!!! \$question-&gt;id = $question-&gt;id&lt;br&gt;&quot;;</span>
<a name="l00378"></a>00378     
<a name="l00379"></a>00379     
<a name="l00380"></a>00380     <span class="keywordflow">if</span>(empty($question-&gt;type)) {
<a name="l00381"></a>00381         
<a name="l00382"></a>00382         
<a name="l00383"></a>00383         $qq=<span class="stringliteral">&quot; &lt;BR&gt;&lt;h1&gt;END OF EXAM!&lt;/h1&gt;&lt;HR&gt;&quot;</span>;
<a name="l00384"></a>00384         
<a name="l00385"></a>00385         <span class="comment">/*</span>
<a name="l00386"></a>00386 <span class="comment">        $r=lib_mysql_query(&quot;select * from exam_users where user=&#39;$data-&gt;name&#39; and exam_id=&#39;$exam_id&#39;&quot;);     </span>
<a name="l00387"></a>00387 <span class="comment">        $nq=mysql_num_rows($r);</span>
<a name="l00388"></a>00388 <span class="comment">        </span>
<a name="l00389"></a>00389 <span class="comment">        $r=lib_mysql_query(&quot;select * from exam_users where user=&#39;$data-&gt;name&#39; and exam_id=&#39;$exam_id&#39; and correct=&#39;1&#39;&quot;);</span>
<a name="l00390"></a>00390 <span class="comment">        $nqc=mysql_num_rows($r);</span>
<a name="l00391"></a>00391 <span class="comment">        </span>
<a name="l00392"></a>00392 <span class="comment">        $prct=$nqc/$nq;</span>
<a name="l00393"></a>00393 <span class="comment">        </span>
<a name="l00394"></a>00394 <span class="comment">        $prct=round($prct*100);</span>
<a name="l00395"></a>00395 <span class="comment">        */</span>
<a name="l00396"></a>00396         $nqc=<a class="code" href="module_8exams_8php.html#a23a9e36c4642c574f1dcc00404ae1926">exams_get_score</a>(<a class="code" href="video__wall_8php.html#a6efc15b5a2314dd4b5aaa556a375c6d6">$data</a>-&gt;name,$exam_id);
<a name="l00397"></a>00397         $prct=<a class="code" href="module_8exams_8php.html#a9806992330b13f93930b7d77043f6af6">exams_get_prct</a>(<a class="code" href="video__wall_8php.html#a6efc15b5a2314dd4b5aaa556a375c6d6">$data</a>-&gt;name,$exam_id);
<a name="l00398"></a>00398 
<a name="l00399"></a>00399         $qq.=<span class="stringliteral">&quot;&lt;h1&gt;&quot;</span>;
<a name="l00400"></a>00400         $qq.=<span class="stringliteral">&quot;You answered $nqc questions correctly out of $nq &lt;br&gt;&quot;</span>;       
<a name="l00401"></a>00401         $qq.=<span class="stringliteral">&quot;Percentage answered correctly $prct %&lt;br&gt;&quot;</span>;       
<a name="l00402"></a>00402         
<a name="l00403"></a>00403         $exam=<a class="code" href="lib_8mysql_8php.html#a80af159483fec4094697cef8c5c187a6">lib_mysql_fetch_one_object</a>(<span class="stringliteral">&quot;select * from exams where id=&#39;$exam_id&#39;&quot;</span>);
<a name="l00404"></a>00404         
<a name="l00405"></a>00405         $qq.=<span class="stringliteral">&quot;Minimum passing score for this exam: $exam-&gt;pass_percent &lt;br&gt; &lt;hr&gt;&quot;</span>;      
<a name="l00406"></a>00406         <span class="keywordflow">if</span>($prct&gt;$exam-&gt;pass_percent) {
<a name="l00407"></a>00407             $qq.=<span class="stringliteral">&quot;&lt;BR&gt;Congratulations, you passed.&lt;br&gt;&lt;BR&gt;&lt;hr&gt;&quot;</span>;
<a name="l00408"></a>00408             $qq.=<span class="stringliteral">&quot;Tasks covered by this exam:&lt;br&gt;&quot;</span>;
<a name="l00409"></a>00409             <a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>=<a class="code" href="lib_8mysql_8php.html#a06fb53fc71e262dce115fd3a98bcecdd">lib_mysql_query</a>(<span class="stringliteral">&quot;select distinct task from exam_questions where exam_id=&#39;$exam_id&#39;&quot;</span>);
<a name="l00410"></a>00410             <span class="keywordflow">for</span>($i=0;$i&lt;mysql_num_rows(<a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>);$i++) {
<a name="l00411"></a>00411                 $eq=mysql_fetch_object(<a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>);
<a name="l00412"></a>00412                 $qq.= <span class="stringliteral">&quot; $eq-&gt;task &lt;br&gt;&quot;</span>;
<a name="l00413"></a>00413             }
<a name="l00414"></a>00414             
<a name="l00415"></a>00415         } <span class="keywordflow">else</span> {
<a name="l00416"></a>00416             $qq.=<span class="stringliteral">&quot;You did not pass, please review the missed questions.&lt;br&gt;&lt;br&gt;&quot;</span>;
<a name="l00417"></a>00417             
<a name="l00418"></a>00418             
<a name="l00419"></a>00419         }       
<a name="l00420"></a>00420         $qq.=<span class="stringliteral">&quot;&lt;hr&gt;&lt;/h1&gt;&quot;</span>;
<a name="l00421"></a>00421 
<a name="l00422"></a>00422         $qq.=<span class="stringliteral">&quot;[&lt;a href=\&quot;$RFS_SITE_URL/modules/exams/exams.php?action=wipe_exam&amp;exam_id=$exam_id\&quot;&gt;Take this exam again&lt;/a&gt;]&quot;</span>;
<a name="l00423"></a>00423         $qq.=<span class="stringliteral">&quot;[Review missed questions]&quot;</span>;
<a name="l00424"></a>00424         $qq.=<span class="stringliteral">&quot;[Review all questions]&quot;</span>;
<a name="l00425"></a>00425         
<a name="l00426"></a>00426         <span class="keywordflow">if</span>( <a class="code" href="lib_8access_8php.html#af6adaf74ff6c2ded2143f472076c176a">lib_access_check</a>(<span class="stringliteral">&quot;exam_questions&quot;</span>,<span class="stringliteral">&quot;edit&quot;</span>) ) {
<a name="l00427"></a>00427                 $qq.=<span class="stringliteral">&quot;[&lt;a href=&#39;$RFS_SITE_URL/modules/exams/exams.php?action=admin_edit&#39;&gt;Exam Administration&lt;/a&gt;]&quot;</span>;
<a name="l00428"></a>00428         }
<a name="l00429"></a>00429         
<a name="l00430"></a>00430         $qq.=<span class="stringliteral">&quot;&lt;BR&gt;&lt;BR&gt; &lt;BR&gt;&lt;BR&gt;&quot;</span>;
<a name="l00431"></a>00431         
<a name="l00432"></a>00432         <a class="code" href="lib_8forms_8php.html#a348d44386a8efb03802323d887094d75">lib_forms_question</a>($qq);
<a name="l00433"></a>00433             
<a name="l00434"></a>00434         
<a name="l00435"></a>00435         
<a name="l00436"></a>00436         
<a name="l00437"></a>00437     }
<a name="l00438"></a>00438     <span class="keywordflow">else</span> {
<a name="l00439"></a>00439 
<a name="l00440"></a>00440     $qq= <span class="stringliteral">&quot;&lt;br&gt;&lt;h1&gt; EXAM: $exam-&gt;name question ($qsid / $nq) &lt;/h1&gt; &quot;</span>;
<a name="l00441"></a>00441 
<a name="l00442"></a>00442     $qq.=<span class="stringliteral">&quot;&lt;hr&gt;&quot;</span>;
<a name="l00443"></a>00443 
<a name="l00444"></a>00444     $qsid++;
<a name="l00445"></a>00445 
<a name="l00446"></a>00446     $qq.=<span class="stringliteral">&quot;&lt;form action=\&quot;$RFS_SITE_URL/modules/exams/exams.php\&quot; method=\&quot;post\&quot;&gt;\n&quot;</span>;
<a name="l00447"></a>00447     $ql= <span class="stringliteral">&quot; &lt;hr&gt;&lt;center&gt;</span>
<a name="l00448"></a>00448 <span class="stringliteral">    &lt;input type=hidden name=exam_id value=$exam-&gt;id&gt;</span>
<a name="l00449"></a>00449 <span class="stringliteral">    &lt;input type=hidden name=qsid value=$qsid&gt;</span>
<a name="l00450"></a>00450 <span class="stringliteral">    &lt;input type=hidden name=action value=run_exam&gt;</span>
<a name="l00451"></a>00451 <span class="stringliteral">    &lt;input type=submit name=submit value=Continue&gt;</span>
<a name="l00452"></a>00452 <span class="stringliteral">    &lt;/form&gt;\n&quot;</span>;
<a name="l00453"></a>00453 
<a name="l00454"></a>00454     <span class="keywordflow">if</span>(!empty($question-&gt;intro))   $qq.= <span class="stringliteral">&quot;$question-&gt;intro &lt;hr&gt;&quot;</span>;
<a name="l00455"></a>00455 
<a name="l00456"></a>00456     <span class="keywordflow">if</span>($question-&gt;type==<span class="stringliteral">&quot;multiple_choice&quot;</span>) {
<a name="l00457"></a>00457 
<a name="l00458"></a>00458         lib_div(<span class="stringliteral">&quot;MULTIPLE CHOICE TEST QUESTION&quot;</span>);
<a name="l00459"></a>00459 
<a name="l00460"></a>00460         $qq.=<span class="stringliteral">&quot;$question-&gt;question &lt;BR&gt;\n&quot;</span>;
<a name="l00461"></a>00461         $qq.=<span class="stringliteral">&quot;&lt;center&gt;&lt;img src=&#39;$question-&gt;question_image&#39; border=0 align=center width=64&gt;&lt;/center&gt;&lt;hr&gt;\n&quot;</span>;
<a name="l00462"></a>00462 
<a name="l00463"></a>00463 
<a name="l00464"></a>00464 
<a name="l00465"></a>00465         $qq.= <span class="stringliteral">&quot;&lt;input type=\&quot;radio\&quot; name=\&quot;group1\&quot; value=\&quot;A\&quot;&gt; A) $question-&gt;choice_1 &lt;br&gt;\n&quot;</span>;
<a name="l00466"></a>00466         $qq.= <span class="stringliteral">&quot;&lt;input type=\&quot;radio\&quot; name=\&quot;group1\&quot; value=\&quot;B\&quot;&gt; B) $question-&gt;choice_2 &lt;br&gt;\n&quot;</span>;
<a name="l00467"></a>00467 
<a name="l00468"></a>00468         <span class="keywordflow">if</span>(!empty($question-&gt;choice_3))
<a name="l00469"></a>00469             $qq.= <span class="stringliteral">&quot;&lt;input type=\&quot;radio\&quot; name=\&quot;group1\&quot; value=\&quot;C\&quot;&gt; C) $question-&gt;choice_3 &lt;br&gt;\n&quot;</span>;
<a name="l00470"></a>00470         <span class="keywordflow">if</span>(!empty($question-&gt;choice_4))
<a name="l00471"></a>00471             $qq.= <span class="stringliteral">&quot;&lt;input type=\&quot;radio\&quot; name=\&quot;group1\&quot; value=\&quot;D\&quot;&gt; D) $question-&gt;choice_4 &lt;br&gt;\n&quot;</span>;
<a name="l00472"></a>00472         <span class="keywordflow">if</span>(!empty($question-&gt;choice_5))
<a name="l00473"></a>00473             $qq.= <span class="stringliteral">&quot;&lt;input type=\&quot;radio\&quot; name=\&quot;group1\&quot; value=\&quot;A\&quot;&gt; E) $question-&gt;choice_5 &lt;br&gt;\n&quot;</span>;
<a name="l00474"></a>00474         <span class="keywordflow">if</span>(!empty($question-&gt;choice_6))
<a name="l00475"></a>00475             $qq.= <span class="stringliteral">&quot;&lt;input type=\&quot;radio\&quot; name=\&quot;group1\&quot; value=\&quot;A\&quot;&gt; F) $question-&gt;choice_6 &lt;br&gt;\n&quot;</span>;
<a name="l00476"></a>00476 
<a name="l00477"></a>00477        $qq.=$ql;
<a name="l00478"></a>00478     }
<a name="l00479"></a>00479 
<a name="l00480"></a>00480     <span class="keywordflow">if</span>($question-&gt;type==<span class="stringliteral">&quot;multi_select&quot;</span>) {       
<a name="l00481"></a>00481         lib_div(<span class="stringliteral">&quot;MULTI SELECT TEST QUESTION&quot;</span>);
<a name="l00482"></a>00482                 
<a name="l00483"></a>00483         $qq.=<span class="stringliteral">&quot;$question-&gt;question&lt;br&gt;&lt;br&gt;&quot;</span>;
<a name="l00484"></a>00484 
<a name="l00485"></a>00485         $qq.=<span class="stringliteral">&quot;&lt;input type=checkbox name=a value=\&quot;A\&quot;&gt; $question-&gt;choice_1 &lt;br&gt;\n&quot;</span>;
<a name="l00486"></a>00486         $qq.=<span class="stringliteral">&quot;&lt;input type=checkbox name=b value=\&quot;B\&quot;&gt; $question-&gt;choice_2 &lt;br&gt;\n&quot;</span>;
<a name="l00487"></a>00487         <span class="keywordflow">if</span>(!empty($question-&gt;choice_3)) 
<a name="l00488"></a>00488             $qq.=<span class="stringliteral">&quot;&lt;input type=checkbox name=c value=\&quot;C\&quot;&gt; $question-&gt;choice_3 &lt;br&gt;\n&quot;</span>;
<a name="l00489"></a>00489         <span class="keywordflow">if</span>(!empty($question-&gt;choice_4)) 
<a name="l00490"></a>00490             $qq.=<span class="stringliteral">&quot;&lt;input type=checkbox name=d value=\&quot;D\&quot;&gt; $question-&gt;choice_4 &lt;br&gt;\n&quot;</span>;
<a name="l00491"></a>00491         <span class="keywordflow">if</span>(!empty($question-&gt;choice_5)) 
<a name="l00492"></a>00492             $qq.=<span class="stringliteral">&quot;&lt;input type=checkbox name=e value=\&quot;E\&quot;&gt; $question-&gt;choice_5 &lt;br&gt;\n&quot;</span>;
<a name="l00493"></a>00493         <span class="keywordflow">if</span>(!empty($question-&gt;choice_6)) 
<a name="l00494"></a>00494             $qq.=<span class="stringliteral">&quot;&lt;input type=checkbox name=f value=\&quot;F\&quot;&gt; $question-&gt;choice_6 &lt;br&gt;\n&quot;</span>;
<a name="l00495"></a>00495             
<a name="l00496"></a>00496         $qq.=$ql;
<a name="l00497"></a>00497 
<a name="l00498"></a>00498     }
<a name="l00499"></a>00499 
<a name="l00500"></a>00500     <span class="keywordflow">if</span>($question-&gt;type==<span class="stringliteral">&quot;true_false&quot;</span>) {
<a name="l00501"></a>00501 
<a name="l00502"></a>00502 
<a name="l00503"></a>00503         lib_div(<span class="stringliteral">&quot;TRUE OR FALSE TEST QUESTION&quot;</span>);
<a name="l00504"></a>00504 
<a name="l00505"></a>00505         $qq.=<span class="stringliteral">&quot;$question-&gt;question&lt;br&gt;&lt;br&gt;&quot;</span>;
<a name="l00506"></a>00506 
<a name="l00507"></a>00507         $qq.= <span class="stringliteral">&quot;&lt;input type=\&quot;radio\&quot; name=\&quot;group1\&quot; value=\&quot;TRUE\&quot;&gt; TRUE &lt;br&gt;\n&quot;</span>;
<a name="l00508"></a>00508         $qq.= <span class="stringliteral">&quot;&lt;input type=\&quot;radio\&quot; name=\&quot;group1\&quot; value=\&quot;FALSE\&quot;&gt; FALSE &lt;br&gt;\n&quot;</span>;
<a name="l00509"></a>00509 
<a name="l00510"></a>00510         <span class="comment">//        $qq.=&quot;TRUE or FALSE &lt;br&gt;&quot;;</span>
<a name="l00511"></a>00511         $qq.=$ql;
<a name="l00512"></a>00512     }
<a name="l00513"></a>00513 
<a name="l00514"></a>00514     <span class="keywordflow">if</span>($question-&gt;type==<span class="stringliteral">&quot;fill_in_blank&quot;</span>) {
<a name="l00515"></a>00515 
<a name="l00516"></a>00516         lib_div(<span class="stringliteral">&quot;FILL IN THE BLANK TEST QUESTION&quot;</span>);
<a name="l00517"></a>00517 
<a name="l00518"></a>00518         $oq=str_replace(<span class="stringliteral">&quot;-a-&quot;</span>,<span class="stringliteral">&quot;&lt;input type=text name=a&gt;&quot;</span>, $question-&gt;question);
<a name="l00519"></a>00519         $oq=str_replace(<span class="stringliteral">&quot;-b-&quot;</span>,<span class="stringliteral">&quot;&lt;input type=text name=b&gt;&quot;</span>, $oq);
<a name="l00520"></a>00520         $oq=str_replace(<span class="stringliteral">&quot;-c-&quot;</span>,<span class="stringliteral">&quot;&lt;input type=text name=c&gt;&quot;</span>, $oq);
<a name="l00521"></a>00521         $oq=str_replace(<span class="stringliteral">&quot;-d-&quot;</span>,<span class="stringliteral">&quot;&lt;input type=text name=d&gt;&quot;</span>, $oq);
<a name="l00522"></a>00522         $oq=str_replace(<span class="stringliteral">&quot;-e-&quot;</span>,<span class="stringliteral">&quot;&lt;input type=text name=e&gt;&quot;</span>, $oq);
<a name="l00523"></a>00523         $oq=str_replace(<span class="stringliteral">&quot;-f-&quot;</span>,<span class="stringliteral">&quot;&lt;input type=text name=f&gt;&quot;</span>, $oq);
<a name="l00524"></a>00524 
<a name="l00525"></a>00525 
<a name="l00526"></a>00526         $qq.=$oq.$ql;
<a name="l00527"></a>00527     }
<a name="l00528"></a>00528 
<a name="l00529"></a>00529                            
<a name="l00530"></a>00530     <span class="keywordflow">if</span>($question-&gt;type==<span class="stringliteral">&quot;fib_dropdown&quot;</span>) {
<a name="l00531"></a>00531 
<a name="l00532"></a>00532             lib_div(<span class="stringliteral">&quot;FILL IN THE BLANK DROP DOWN TEST QUESTION&quot;</span>);
<a name="l00533"></a>00533 
<a name="l00534"></a>00534             $opts = <span class="stringliteral">&quot;&lt;option name=none&gt;Fill in the blank\n&quot;</span>;
<a name="l00535"></a>00535             $opts.= <span class="stringliteral">&quot;&lt;option&gt;$question-&gt;choice_1\n&quot;</span>;
<a name="l00536"></a>00536             $opts.= <span class="stringliteral">&quot;&lt;option&gt;$question-&gt;choice_2\n&quot;</span>;
<a name="l00537"></a>00537             <span class="keywordflow">if</span>(!empty($question-&gt;choice_3))
<a name="l00538"></a>00538             $opts.= <span class="stringliteral">&quot;&lt;option&gt;$question-&gt;choice_3\n&quot;</span>;
<a name="l00539"></a>00539             <span class="keywordflow">if</span>(!empty($question-&gt;choice_4))
<a name="l00540"></a>00540             $opts.= <span class="stringliteral">&quot;&lt;option&gt;$question-&gt;choice_4\n&quot;</span>;
<a name="l00541"></a>00541             <span class="keywordflow">if</span>(!empty($question-&gt;choice_5))
<a name="l00542"></a>00542             $opts.= <span class="stringliteral">&quot;&lt;option&gt;$question-&gt;choice_5\n&quot;</span>;
<a name="l00543"></a>00543             <span class="keywordflow">if</span>(!empty($question-&gt;choice_6))
<a name="l00544"></a>00544             $opts.= <span class="stringliteral">&quot;&lt;option&gt;$question-&gt;choice_6\n&quot;</span>;
<a name="l00545"></a>00545 
<a name="l00546"></a>00546 
<a name="l00547"></a>00547             $oq=str_replace(<span class="stringliteral">&quot;-a-&quot;</span>,<span class="stringliteral">&quot;&lt;select name=a&gt;&quot;</span>.$opts.<span class="stringliteral">&quot;&lt;/select&gt;&quot;</span>, $question-&gt;question);
<a name="l00548"></a>00548             $oq=str_replace(<span class="stringliteral">&quot;-b-&quot;</span>,<span class="stringliteral">&quot;&lt;select name=b&gt;&quot;</span>.$opts.<span class="stringliteral">&quot;&lt;/select&gt;&quot;</span>, $oq);
<a name="l00549"></a>00549             $oq=str_replace(<span class="stringliteral">&quot;-c-&quot;</span>,<span class="stringliteral">&quot;&lt;select name=c&gt;&quot;</span>.$opts.<span class="stringliteral">&quot;&lt;/select&gt;&quot;</span>, $oq);
<a name="l00550"></a>00550             $oq=str_replace(<span class="stringliteral">&quot;-d-&quot;</span>,<span class="stringliteral">&quot;&lt;select name=d&gt;&quot;</span>.$opts.<span class="stringliteral">&quot;&lt;/select&gt;&quot;</span>, $oq);
<a name="l00551"></a>00551             $oq=str_replace(<span class="stringliteral">&quot;-e-&quot;</span>,<span class="stringliteral">&quot;&lt;select name=e&gt;&quot;</span>.$opts.<span class="stringliteral">&quot;&lt;/select&gt;&quot;</span>, $oq);
<a name="l00552"></a>00552             $oq=str_replace(<span class="stringliteral">&quot;-f-&quot;</span>,<span class="stringliteral">&quot;&lt;select name=f&gt;&quot;</span>.$opts.<span class="stringliteral">&quot;&lt;/select&gt;&quot;</span>, $oq);
<a name="l00553"></a>00553 
<a name="l00554"></a>00554             $qq.=$oq.$ql;
<a name="l00555"></a>00555     }
<a name="l00556"></a>00556 
<a name="l00557"></a>00557 
<a name="l00558"></a>00558     $qq.=<span class="stringliteral">&quot;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&quot;</span>;
<a name="l00559"></a>00559     
<a name="l00560"></a>00560     <a class="code" href="lib_8forms_8php.html#a348d44386a8efb03802323d887094d75">lib_forms_question</a>($qq);
<a name="l00561"></a>00561     
<a name="l00562"></a>00562     lib_div(<span class="stringliteral">&quot;END OF TEST QUESTION&quot;</span>);
<a name="l00563"></a>00563     
<a name="l00564"></a>00564     }
<a name="l00565"></a>00565 }
<a name="l00566"></a>00566 
<a name="l00567"></a>00567 
<a name="l00568"></a>00568 <span class="keywordflow">if</span>(<a class="code" href="lib_8access_8php.html#af6adaf74ff6c2ded2143f472076c176a">lib_access_check</a>(<span class="stringliteral">&quot;exams&quot;</span>,<span class="stringliteral">&quot;edit&quot;</span>) ) {
<a name="l00569"></a>00569     
<a name="l00570"></a>00570     <span class="keywordflow">if</span>(<a class="code" href="install_8php.html#af9da176a74bd49cb97ea35c6ac7257bc">$action</a>==<span class="stringliteral">&quot;admin_exam_edit_questions&quot;</span>) {
<a name="l00571"></a>00571         <span class="keywordflow">if</span>(!is_numeric($questions)) $questions=100;
<a name="l00572"></a>00572         
<a name="l00573"></a>00573         <a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>=<a class="code" href="lib_8mysql_8php.html#a06fb53fc71e262dce115fd3a98bcecdd">lib_mysql_query</a>(<span class="stringliteral">&quot;select * from exam_questions where exam_id=&#39;$exam_id&#39; order by exam_sequence&quot;</span>);
<a name="l00574"></a>00574         $n=mysql_num_rows(<a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>);
<a name="l00575"></a>00575         <span class="keywordflow">if</span>($questions&gt;$n) $questions=$n;
<a name="l00576"></a>00576         
<a name="l00577"></a>00577         <a class="code" href="lib_8mysql_8php.html#a06fb53fc71e262dce115fd3a98bcecdd">lib_mysql_query</a>(<span class="stringliteral">&quot;update exams set `questions` = &#39;$questions&#39; where id=&#39;$exam_id&#39;&quot;</span>);
<a name="l00578"></a>00578         <a class="code" href="install_8php.html#af9da176a74bd49cb97ea35c6ac7257bc">$action</a>=<span class="stringliteral">&quot;admin_exam_edit&quot;</span>;
<a name="l00579"></a>00579     }
<a name="l00580"></a>00580     
<a name="l00581"></a>00581     <span class="keywordflow">if</span>(<a class="code" href="install_8php.html#af9da176a74bd49cb97ea35c6ac7257bc">$action</a>==<span class="stringliteral">&quot;admin_exam_edit_method&quot;</span>) {
<a name="l00582"></a>00582         <a class="code" href="lib_8mysql_8php.html#a06fb53fc71e262dce115fd3a98bcecdd">lib_mysql_query</a>(<span class="stringliteral">&quot;update exams set `method`=&#39;$method&#39; where id=&#39;$exam_id&#39;&quot;</span>);
<a name="l00583"></a>00583         <a class="code" href="install_8php.html#af9da176a74bd49cb97ea35c6ac7257bc">$action</a>=<span class="stringliteral">&quot;admin_exam_edit&quot;</span>;
<a name="l00584"></a>00584     }
<a name="l00585"></a>00585     
<a name="l00586"></a>00586     <span class="keywordflow">if</span>(<a class="code" href="install_8php.html#af9da176a74bd49cb97ea35c6ac7257bc">$action</a>==<span class="stringliteral">&quot;admin_exam_edit_pass_percent&quot;</span>) {
<a name="l00587"></a>00587         <span class="keywordflow">if</span>(!is_numeric($pass_percent)) $pass_percent=70;
<a name="l00588"></a>00588         <span class="comment">// echo &quot; $exam_id  $pass_percent &lt;br&gt;&quot;;</span>
<a name="l00589"></a>00589         <a class="code" href="lib_8mysql_8php.html#a06fb53fc71e262dce115fd3a98bcecdd">lib_mysql_query</a>(<span class="stringliteral">&quot;update exams set `pass_percent`=&#39;$pass_percent&#39; where id=&#39;$exam_id&#39;&quot;</span>);
<a name="l00590"></a>00590         <a class="code" href="install_8php.html#af9da176a74bd49cb97ea35c6ac7257bc">$action</a>=<span class="stringliteral">&quot;admin_exam_edit&quot;</span>;      
<a name="l00591"></a>00591     }
<a name="l00592"></a>00592         
<a name="l00593"></a>00593     <span class="keywordflow">if</span>(<a class="code" href="install_8php.html#af9da176a74bd49cb97ea35c6ac7257bc">$action</a>==<span class="stringliteral">&quot;admin_exam_question_edit&quot;</span>) {
<a name="l00594"></a>00594                 
<a name="l00595"></a>00595         echo <span class="stringliteral">&quot;[&lt;a href=$RFS_SITE_URL/modules/exams/exams.php?action=run_exam&amp;exam_id=$exam_id&gt;Run this exam&lt;/a&gt;]&quot;</span>;
<a name="l00596"></a>00596         echo <span class="stringliteral">&quot;[&lt;a href=$RFS_SITE_URL/modules/exams/exams.php?action=admin_edit&gt;List all exams&lt;/a&gt;]&quot;</span>;
<a name="l00597"></a>00597         echo <span class="stringliteral">&quot;[&lt;a href=$RFS_SITE_URL/modules/exams/exams.php?action=admin_exam_edit&amp;exam_id=$exam_id&gt;List all questions&lt;/a&gt;]&lt;br&gt;&quot;</span>;
<a name="l00598"></a>00598                 
<a name="l00599"></a>00599         $qt=<a class="code" href="lib_8mysql_8php.html#a80af159483fec4094697cef8c5c187a6">lib_mysql_fetch_one_object</a>(<span class="stringliteral">&quot;select * from exam_questions where id=&#39;$q&#39;&quot;</span>);
<a name="l00600"></a>00600             
<a name="l00601"></a>00601         <a class="code" href="lib_8forms_8php.html#a1490fdf9f61cae1f1ffebc9f3aaad0eb">lib_forms_build</a>( <span class="stringliteral">&quot;$RFS_SITE_URL/modules/exams/exams.php&quot;</span>,
<a name="l00602"></a>00602                <span class="stringliteral">&quot;action=admin_exam_question_edit_2&quot;</span>.<a class="code" href="config_8sitevars_8php.html#a06fab752c166675deeb7a9191add17ab">$RFS_SITE_DELIMITER</a>.
<a name="l00603"></a>00603                <span class="stringliteral">&quot;SHOW_SELECTOR_exam_question_types#name#type#$qt-&gt;type&quot;</span>.$RFS_SITE_DELIMITER. 
<a name="l00604"></a>00604                <span class="stringliteral">&quot;SHOW_SELECTOR_cfetp_tasks#task&amp;name#task#$qt-&gt;task&quot;</span>,
<a name="l00605"></a>00605                <span class="stringliteral">&quot;exam_questions&quot;</span>,
<a name="l00606"></a>00606                <span class="stringliteral">&quot;select * from exam_questions where id=&#39;$q&#39;&quot;</span>,
<a name="l00607"></a>00607                <span class="stringliteral">&quot;id&quot;</span>,
<a name="l00608"></a>00608                <span class="stringliteral">&quot;type&quot;</span>.$RFS_SITE_DELIMITER.<span class="stringliteral">&quot;task&quot;</span>,
<a name="l00609"></a>00609                <span class="stringliteral">&quot;omit&quot;</span>,
<a name="l00610"></a>00610                <span class="stringliteral">&quot;&quot;</span>,
<a name="l00611"></a>00611                100,
<a name="l00612"></a>00612                <span class="stringliteral">&quot;submit&quot;</span> );      
<a name="l00613"></a>00613     }
<a name="l00614"></a>00614     
<a name="l00615"></a>00615     <span class="keywordflow">if</span>(<a class="code" href="install_8php.html#af9da176a74bd49cb97ea35c6ac7257bc">$action</a>==<span class="stringliteral">&quot;admin_exam_question_edit_2&quot;</span>) {
<a name="l00616"></a>00616     
<a name="l00617"></a>00617         <a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>=<a class="code" href="lib_8mysql_8php.html#a06fb53fc71e262dce115fd3a98bcecdd">lib_mysql_query</a>(<span class="stringliteral">&quot;select * from exam_question_types where name=&#39;$type&#39;&quot;</span>);
<a name="l00618"></a>00618         $eqt=mysql_fetch_object(<a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>);
<a name="l00619"></a>00619         
<a name="l00620"></a>00620         <span class="keywordflow">if</span>(empty($eqt-&gt;type)){
<a name="l00621"></a>00621             <a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>=<a class="code" href="lib_8mysql_8php.html#a06fb53fc71e262dce115fd3a98bcecdd">lib_mysql_query</a>(<span class="stringliteral">&quot;select * from exam_question_types where type=&#39;$type&#39;&quot;</span>);
<a name="l00622"></a>00622             $eqt=mysql_fetch_object(<a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>);
<a name="l00623"></a>00623         }
<a name="l00624"></a>00624         <span class="keywordflow">if</span>(empty($eqt-&gt;type)) $eqt-&gt;type=<span class="stringliteral">&quot;multiple_choice&quot;</span>;
<a name="l00625"></a>00625 
<a name="l00626"></a>00626 
<a name="l00627"></a>00627         <a class="code" href="lib_8mysql_8php.html#a06fb53fc71e262dce115fd3a98bcecdd">lib_mysql_query</a>(<span class="stringliteral">&quot;update exam_questions set `exam_id`=&#39;$exam_id&#39; where id=&#39;$id&#39;&quot;</span>);
<a name="l00628"></a>00628         <a class="code" href="lib_8mysql_8php.html#a06fb53fc71e262dce115fd3a98bcecdd">lib_mysql_query</a>(<span class="stringliteral">&quot;update exam_questions set `exam_sequence` =&#39;$exam_sequence&#39; where id=&#39;$id&#39;&quot;</span>);
<a name="l00629"></a>00629         <a class="code" href="lib_8mysql_8php.html#a06fb53fc71e262dce115fd3a98bcecdd">lib_mysql_query</a>(<span class="stringliteral">&quot;update exam_questions set `type`=&#39;$eqt-&gt;type&#39; where id=&#39;$id&#39;&quot;</span>);
<a name="l00630"></a>00630         <a class="code" href="lib_8mysql_8php.html#a06fb53fc71e262dce115fd3a98bcecdd">lib_mysql_query</a>(<span class="stringliteral">&quot;update exam_questions set `intro`=&#39;$intro&#39; where id=&#39;$id&#39;&quot;</span>);
<a name="l00631"></a>00631         <a class="code" href="lib_8mysql_8php.html#a06fb53fc71e262dce115fd3a98bcecdd">lib_mysql_query</a>(<span class="stringliteral">&quot;update exam_questions set `question`=&#39;$question&#39; where id=&#39;$id&#39;&quot;</span>);
<a name="l00632"></a>00632         <a class="code" href="lib_8mysql_8php.html#a06fb53fc71e262dce115fd3a98bcecdd">lib_mysql_query</a>(<span class="stringliteral">&quot;update exam_questions set `question_image`=&#39;$question_image&#39; where id=&#39;$id&#39;&quot;</span>);
<a name="l00633"></a>00633         <a class="code" href="lib_8mysql_8php.html#a06fb53fc71e262dce115fd3a98bcecdd">lib_mysql_query</a>(<span class="stringliteral">&quot;update exam_questions set `correct_answer`=&#39;$correct_answer&#39; where id=&#39;$id&#39;&quot;</span>);
<a name="l00634"></a>00634         <a class="code" href="lib_8mysql_8php.html#a06fb53fc71e262dce115fd3a98bcecdd">lib_mysql_query</a>(<span class="stringliteral">&quot;update exam_questions set `choice_1`=&#39;$choice_1&#39; where id=&#39;$id&#39;&quot;</span>);
<a name="l00635"></a>00635         <a class="code" href="lib_8mysql_8php.html#a06fb53fc71e262dce115fd3a98bcecdd">lib_mysql_query</a>(<span class="stringliteral">&quot;update exam_questions set `choice_2`=&#39;$choice_2&#39; where id=&#39;$id&#39;&quot;</span>);
<a name="l00636"></a>00636         <a class="code" href="lib_8mysql_8php.html#a06fb53fc71e262dce115fd3a98bcecdd">lib_mysql_query</a>(<span class="stringliteral">&quot;update exam_questions set `choice_3`=&#39;$choice_3&#39; where id=&#39;$id&#39;&quot;</span>);
<a name="l00637"></a>00637         <a class="code" href="lib_8mysql_8php.html#a06fb53fc71e262dce115fd3a98bcecdd">lib_mysql_query</a>(<span class="stringliteral">&quot;update exam_questions set `choice_4`=&#39;$choice_4&#39; where id=&#39;$id&#39;&quot;</span>);
<a name="l00638"></a>00638         <a class="code" href="lib_8mysql_8php.html#a06fb53fc71e262dce115fd3a98bcecdd">lib_mysql_query</a>(<span class="stringliteral">&quot;update exam_questions set `choice_5`=&#39;$choice_5&#39; where id=&#39;$id&#39;&quot;</span>);
<a name="l00639"></a>00639         <a class="code" href="lib_8mysql_8php.html#a06fb53fc71e262dce115fd3a98bcecdd">lib_mysql_query</a>(<span class="stringliteral">&quot;update exam_questions set `choice_6`=&#39;$choice_6&#39; where id=&#39;$id&#39;&quot;</span>);
<a name="l00640"></a>00640         <a class="code" href="lib_8mysql_8php.html#a06fb53fc71e262dce115fd3a98bcecdd">lib_mysql_query</a>(<span class="stringliteral">&quot;update exam_questions set `task`=&#39;$task&#39; where id=&#39;$id&#39;&quot;</span>);
<a name="l00641"></a>00641             
<a name="l00642"></a>00642         <a class="code" href="install_8php.html#af9da176a74bd49cb97ea35c6ac7257bc">$action</a>=<span class="stringliteral">&quot;admin_exam_edit&quot;</span>;
<a name="l00643"></a>00643         
<a name="l00644"></a>00644     }
<a name="l00645"></a>00645     
<a name="l00646"></a>00646     <span class="keywordflow">if</span>(<a class="code" href="install_8php.html#af9da176a74bd49cb97ea35c6ac7257bc">$action</a>==<span class="stringliteral">&quot;admin_exam_edit_add&quot;</span>) {
<a name="l00647"></a>00647         echo <span class="stringliteral">&quot;Adding a new exam question ($exam_sequence) for exam $exam_id&lt;br&gt;&quot;</span>;
<a name="l00648"></a>00648         
<a name="l00649"></a>00649         <span class="comment">// echo &quot;&lt;p&gt;Choose the type of exam question.&lt;/p&gt;&quot;;</span>
<a name="l00650"></a>00650                 
<a name="l00651"></a>00651         <a class="code" href="lib_8forms_8php.html#ac4d83760afdff6685ce95c3fb58f6316">lib_forms_optionize</a>(    <span class="stringliteral">&quot;$RFS_SITE_URL/modules/exams/exams.php&quot;</span>,
<a name="l00652"></a>00652                            <span class="stringliteral">&quot;action=admin_exam_edit_add_2&quot;</span>.<a class="code" href="config_8sitevars_8php.html#a06fab752c166675deeb7a9191add17ab">$RFS_SITE_DELIMITER</a>.
<a name="l00653"></a>00653                            <span class="stringliteral">&quot;exam_id=$exam_id&quot;</span>.$RFS_SITE_DELIMITER.
<a name="l00654"></a>00654                            <span class="stringliteral">&quot;exam_sequence=$exam_sequence&quot;</span>,
<a name="l00655"></a>00655                            <span class="stringliteral">&quot;exam_question_types&quot;</span>,
<a name="l00656"></a>00656                            <span class="stringliteral">&quot;name&quot;</span>,
<a name="l00657"></a>00657                            0,
<a name="l00658"></a>00658                            <span class="stringliteral">&quot;Select type of exam question&quot;</span>,
<a name="l00659"></a>00659                            1);
<a name="l00660"></a>00660     }
<a name="l00661"></a>00661     
<a name="l00662"></a>00662     <span class="keywordflow">if</span>(<a class="code" href="install_8php.html#af9da176a74bd49cb97ea35c6ac7257bc">$action</a>==<span class="stringliteral">&quot;admin_exam_edit_add_2&quot;</span>) {
<a name="l00663"></a>00663         
<a name="l00664"></a>00664         <a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>=<a class="code" href="lib_8mysql_8php.html#a06fb53fc71e262dce115fd3a98bcecdd">lib_mysql_query</a>(<span class="stringliteral">&quot;select * from exam_question_types where name=&#39;$name&#39;&quot;</span>);
<a name="l00665"></a>00665         $eqt=mysql_fetch_object(<a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>);
<a name="l00666"></a>00666                 
<a name="l00667"></a>00667         echo <span class="stringliteral">&quot;Adding new question to exam: $exam_id -&gt; $exam_sequence -&gt; $name ($eqt-&gt;type)&lt;br&gt;&quot;</span>;       
<a name="l00668"></a>00668         
<a name="l00669"></a>00669         <a class="code" href="lib_8forms_8php.html#a1490fdf9f61cae1f1ffebc9f3aaad0eb">lib_forms_build</a>( <span class="stringliteral">&quot;$RFS_SITE_URL/modules/exams/exams.php&quot;</span>,
<a name="l00670"></a>00670            <span class="stringliteral">&quot;action=admin_exam_edit_add_3&quot;</span>.<a class="code" href="config_8sitevars_8php.html#a06fab752c166675deeb7a9191add17ab">$RFS_SITE_DELIMITER</a>.
<a name="l00671"></a>00671            <span class="stringliteral">&quot;aeexam_id=$exam_id&quot;</span>.$RFS_SITE_DELIMITER.
<a name="l00672"></a>00672            <span class="stringliteral">&quot;aeexam_sequence=$exam_sequence&quot;</span>.$RFS_SITE_DELIMITER.
<a name="l00673"></a>00673            <span class="stringliteral">&quot;aetype=$eqt-&gt;type&quot;</span>.$RFS_SITE_DELIMITER.
<a name="l00674"></a>00674            <span class="stringliteral">&quot;SHOW_SELECTOR_cfetp_tasks#task&amp;name#task#Select a task to associate with this question&quot;</span>,
<a name="l00675"></a>00675            <span class="stringliteral">&quot;exam_questions&quot;</span>,
<a name="l00676"></a>00676            <span class="stringliteral">&quot;&quot;</span>,
<a name="l00677"></a>00677            <span class="stringliteral">&quot;id&quot;</span>.$RFS_SITE_DELIMITER.
<a name="l00678"></a>00678            <span class="stringliteral">&quot;exam_id&quot;</span>.$RFS_SITE_DELIMITER.
<a name="l00679"></a>00679            <span class="stringliteral">&quot;exam_sequence&quot;</span>.$RFS_SITE_DELIMITER.
<a name="l00680"></a>00680            <span class="stringliteral">&quot;type&quot;</span>,
<a name="l00681"></a>00681            <span class="stringliteral">&quot;task&quot;</span>,
<a name="l00682"></a>00682            <span class="stringliteral">&quot;omit&quot;</span>,
<a name="l00683"></a>00683            <span class="stringliteral">&quot;&quot;</span>,
<a name="l00684"></a>00684            100,
<a name="l00685"></a>00685            <span class="stringliteral">&quot;submit&quot;</span> );
<a name="l00686"></a>00686         
<a name="l00687"></a>00687     }
<a name="l00688"></a>00688     
<a name="l00689"></a>00689     <span class="keywordflow">if</span>(<a class="code" href="install_8php.html#af9da176a74bd49cb97ea35c6ac7257bc">$action</a>==<span class="stringliteral">&quot;admin_exam_edit_add_3&quot;</span>) {
<a name="l00690"></a>00690 
<a name="l00691"></a>00691         $exam_id=$aeexam_id;
<a name="l00692"></a>00692         $exam_sequence=$aeexam_sequence;
<a name="l00693"></a>00693         <a class="code" href="sp_8php.html#a9a4a6fba2208984cabb3afacadf33919">$type</a>=$aetype;
<a name="l00694"></a>00694         
<a name="l00695"></a>00695         <a class="code" href="lib_8mysql_8php.html#a06fb53fc71e262dce115fd3a98bcecdd">lib_mysql_query</a>(<span class="stringliteral">&quot; insert into exam_questions </span>
<a name="l00696"></a>00696 <span class="stringliteral">                            (`exam_id`,`exam_sequence`,`type`, `intro`, `question`, `question_image`, `correct_answer`, `choice_1`, `choice_2`, `choice_3`, `choice_4`, `choice_5`, `choice_6`, `task` )</span>
<a name="l00697"></a>00697 <span class="stringliteral">                    VALUES (&#39;$exam_id&#39;,&#39;$exam_sequence&#39;,&#39;$type&#39;, &#39;$intro&#39;, &#39;$question&#39;, &#39;$question_image&#39;, &#39;$correct_answer&#39;, &#39;$choice_1&#39;, &#39;$choice_2&#39;, &#39;$choice_3&#39;, &#39;$choice_4&#39;, &#39;$choice_5&#39;, &#39;$choice_6&#39;, &#39;$task&#39; )   &quot;</span>);
<a name="l00698"></a>00698         <a class="code" href="lib_8mysql_8php.html#a06fb53fc71e262dce115fd3a98bcecdd">lib_mysql_query</a>(<span class="stringliteral">&quot; update exams set `questions`=`questions`+1 where id=&#39;$exam_id&#39;&quot;</span>);
<a name="l00699"></a>00699         <a class="code" href="install_8php.html#af9da176a74bd49cb97ea35c6ac7257bc">$action</a>=<span class="stringliteral">&quot;admin_exam_edit&quot;</span>;
<a name="l00700"></a>00700     }
<a name="l00701"></a>00701     
<a name="l00702"></a>00702     <span class="keywordflow">if</span>(<a class="code" href="install_8php.html#af9da176a74bd49cb97ea35c6ac7257bc">$action</a>==<span class="stringliteral">&quot;admin_exam_edit&quot;</span>) {
<a name="l00703"></a>00703         
<a name="l00704"></a>00704         $exam=<a class="code" href="lib_8mysql_8php.html#a80af159483fec4094697cef8c5c187a6">lib_mysql_fetch_one_object</a>(<span class="stringliteral">&quot;select * from exams where id=&#39;$exam_id&#39;&quot;</span>);
<a name="l00705"></a>00705         
<a name="l00706"></a>00706         echo <span class="stringliteral">&quot;&lt;h1&gt;EDIT EXAM $exam_id $exam-&gt;name&lt;/h1&gt;&quot;</span>;
<a name="l00707"></a>00707         
<a name="l00708"></a>00708         echo <span class="stringliteral">&quot;[&lt;a href=$RFS_SITE_URL/modules/exams/exams.php?action=run_exam&amp;exam_id=$exam_id&gt;Run this exam&lt;/a&gt;]&quot;</span>;
<a name="l00709"></a>00709         echo <span class="stringliteral">&quot;[&lt;a href=$RFS_SITE_URL/modules/exams/exams.php?action=admin_edit&gt;List all exams&lt;/a&gt;]&lt;br&gt;&quot;</span>;
<a name="l00710"></a>00710         
<a name="l00711"></a>00711         echo <span class="stringliteral">&quot;&lt;table border=0&gt;&lt;tr&gt;&lt;td&gt; Method: $exam-&gt;method &lt;/td&gt;&lt;td&gt;&quot;</span>;        
<a name="l00712"></a>00712         echo <span class="stringliteral">&quot; &lt;form action=&#39;$RFS_SITE_URL/modules/exams/exams.php&#39; method=&#39;post&#39;&gt;  </span>
<a name="l00713"></a>00713 <span class="stringliteral">                &lt;input type=&#39;hidden&#39; name=&#39;action&#39; value=&#39;admin_exam_edit_method&#39;&gt;</span>
<a name="l00714"></a>00714 <span class="stringliteral">                &lt;input type=&#39;hidden&#39; name=&#39;exam_id&#39; value=&#39;$exam_id&#39;&gt;                               </span>
<a name="l00715"></a>00715 <span class="stringliteral">                &lt;select name=&#39;method&#39; onchange=&#39;this.form.submit()&#39;&gt;</span>
<a name="l00716"></a>00716 <span class="stringliteral">                &lt;option&gt;Select testing method</span>
<a name="l00717"></a>00717 <span class="stringliteral">                &lt;option&gt;Sequential&lt;option&gt;Random&lt;/select&gt;</span>
<a name="l00718"></a>00718 <span class="stringliteral">                &lt;/form&gt; &lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&quot;</span>;
<a name="l00719"></a>00719                 
<a name="l00720"></a>00720         
<a name="l00721"></a>00721         echo <span class="stringliteral">&quot;&lt;table border=0&gt;&lt;tr&gt;&lt;td&gt;Passing percentage: &lt;/td&gt;&lt;td&gt;&quot;</span>;
<a name="l00722"></a>00722         echo <span class="stringliteral">&quot; &lt;form action=&#39;$RFS_SITE_URL/modules/exams/exams.php&#39; method=&#39;post&#39;&gt;  </span>
<a name="l00723"></a>00723 <span class="stringliteral">                &lt;input type=&#39;hidden&#39; name=&#39;action&#39; value=&#39;admin_exam_edit_pass_percent&#39;&gt;</span>
<a name="l00724"></a>00724 <span class="stringliteral">                &lt;input type=&#39;hidden&#39; name=&#39;exam_id&#39; value=&#39;$exam_id&#39;&gt;</span>
<a name="l00725"></a>00725 <span class="stringliteral">                &lt;input name=&#39;pass_percent&#39; size=&#39;2&#39; value=&#39;$exam-&gt;pass_percent&#39;  onblur=&#39;this.form.submit()&#39;  &gt;</span>
<a name="l00726"></a>00726 <span class="stringliteral">                &lt;/form&gt; &lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&quot;</span>;        
<a name="l00727"></a>00727         
<a name="l00728"></a>00728         echo <span class="stringliteral">&quot;&lt;table border=0&gt;&lt;tr&gt;&lt;td&gt;Questions: $exam-&gt;questions&lt;/td&gt;&lt;td&gt;&quot;</span>;        
<a name="l00729"></a>00729         echo <span class="stringliteral">&quot; &lt;form action=&#39;$RFS_SITE_URL/modules/exams/exams.php&#39; method=&#39;post&#39;&gt;  </span>
<a name="l00730"></a>00730 <span class="stringliteral">                &lt;input type=&#39;hidden&#39; name=&#39;action&#39; value=&#39;admin_exam_edit_questions&#39;&gt;</span>
<a name="l00731"></a>00731 <span class="stringliteral">                &lt;input type=&#39;hidden&#39; name=&#39;exam_id&#39; value=&#39;$exam_id&#39;&gt;</span>
<a name="l00732"></a>00732 <span class="stringliteral">                &lt;input name=&#39;questions&#39; size=&#39;2&#39; value=&#39;$exam-&gt;questions&#39;  onblur=&#39;this.form.submit()&#39;  &gt;</span>
<a name="l00733"></a>00733 <span class="stringliteral">                &lt;/form&gt; &lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&quot;</span>;        
<a name="l00734"></a>00734         
<a name="l00735"></a>00735         
<a name="l00736"></a>00736         echo <span class="stringliteral">&quot;&lt;hr&gt;Question Pool:&lt;br&gt;&quot;</span>;
<a name="l00737"></a>00737         
<a name="l00738"></a>00738         $q= <span class="stringliteral">&quot;select MAX(`exam_sequence`) from `exam_questions` where exam_id=&#39;$exam_id&#39;&quot;</span>;
<a name="l00739"></a>00739         $rrr=<a class="code" href="lib_8mysql_8php.html#a06fb53fc71e262dce115fd3a98bcecdd">lib_mysql_query</a>($q);
<a name="l00740"></a>00740         $exq=mysql_fetch_array($rrr);
<a name="l00741"></a>00741         $exam_sequence=$exq[0]+1;
<a name="l00742"></a>00742         
<a name="l00743"></a>00743         echo <span class="stringliteral">&quot;[&lt;a href=&#39;$RFS_SITE_URL/modules/exams/exams.php?action=admin_exam_edit_add&amp;exam_id=$exam_id&amp;exam_sequence=$exam_sequence&#39;&gt;&lt;img src=&#39;$RFS_SITE_URL/images/icons/plus_2.gif&#39; width=16 border=0&gt;Add Question&lt;/a&gt;]&lt;br&gt;&quot;</span>;      
<a name="l00744"></a>00744 
<a name="l00745"></a>00745         echo <span class="stringliteral">&quot;&lt;table border=0 cellspacing=0&gt;&quot;</span>;
<a name="l00746"></a>00746         echo <span class="stringliteral">&quot;&lt;tr&gt;&quot;</span>;
<a name="l00747"></a>00747         echo <span class="stringliteral">&quot;&lt;td&gt; &amp;nbsp; &lt;/td&gt;&quot;</span>;
<a name="l00748"></a>00748         echo <span class="stringliteral">&quot;&lt;td&gt; &amp;nbsp; &lt;/td&gt;&quot;</span>;
<a name="l00749"></a>00749         echo <span class="stringliteral">&quot;&lt;td&gt; &amp;nbsp; &lt;/td&gt;&quot;</span>;
<a name="l00750"></a>00750         echo <span class="stringliteral">&quot;&lt;td&gt; &amp;nbsp; &lt;/td&gt;&quot;</span>;
<a name="l00751"></a>00751         echo <span class="stringliteral">&quot;&lt;td&gt; &amp;nbsp; &lt;/td&gt;&quot;</span>;
<a name="l00752"></a>00752         echo <span class="stringliteral">&quot;&lt;td&gt; Type &lt;/td&gt;&quot;</span>;
<a name="l00753"></a>00753         echo <span class="stringliteral">&quot;&lt;td&gt; Intro &lt;/td&gt;&quot;</span>;
<a name="l00754"></a>00754         echo <span class="stringliteral">&quot;&lt;td&gt; Question &lt;/td&gt;&quot;</span>;
<a name="l00755"></a>00755         echo <span class="stringliteral">&quot;&lt;td&gt; Correct Answer &lt;/td&gt;&quot;</span>;
<a name="l00756"></a>00756         echo <span class="stringliteral">&quot;&lt;td&gt; Choice 1 (A)&lt;/td&gt;&quot;</span>;
<a name="l00757"></a>00757         echo <span class="stringliteral">&quot;&lt;td&gt; Choice 2 (B)&lt;/td&gt;&quot;</span>;
<a name="l00758"></a>00758         echo <span class="stringliteral">&quot;&lt;td&gt; Choice 3 (C)&lt;/td&gt;&quot;</span>;
<a name="l00759"></a>00759         echo <span class="stringliteral">&quot;&lt;td&gt; Choice 4 (D)&lt;/td&gt;&quot;</span>;
<a name="l00760"></a>00760         echo <span class="stringliteral">&quot;&lt;td&gt; Choice 5 (E)&lt;/td&gt;&quot;</span>;
<a name="l00761"></a>00761         echo <span class="stringliteral">&quot;&lt;td&gt; Choice 6 (F)&lt;/td&gt;&quot;</span>;
<a name="l00762"></a>00762         
<a name="l00763"></a>00763         echo <span class="stringliteral">&quot;&lt;td&gt; Task &lt;/td&gt;&quot;</span>;
<a name="l00764"></a>00764         
<a name="l00765"></a>00765         
<a name="l00766"></a>00766         echo <span class="stringliteral">&quot;&lt;/tr&gt;&quot;</span>;
<a name="l00767"></a>00767             
<a name="l00768"></a>00768         <a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>=<a class="code" href="lib_8mysql_8php.html#a06fb53fc71e262dce115fd3a98bcecdd">lib_mysql_query</a>(<span class="stringliteral">&quot;select * from exam_questions where exam_id=&#39;$exam_id&#39; order by exam_sequence&quot;</span>);
<a name="l00769"></a>00769         $n=mysql_num_rows(<a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>);
<a name="l00770"></a>00770         <span class="keywordflow">for</span>($i=0;$i&lt;$n;$i++){
<a name="l00771"></a>00771             
<a name="l00772"></a>00772                 <a class="code" href="top__referrers_2linkbin_8php.html#acc3ddc926074609c4cff4f0aa1793fad">$gt</a>++; <span class="keywordflow">if</span>(<a class="code" href="top__referrers_2linkbin_8php.html#acc3ddc926074609c4cff4f0aa1793fad">$gt</a>&gt;1) <a class="code" href="top__referrers_2linkbin_8php.html#acc3ddc926074609c4cff4f0aa1793fad">$gt</a>=0;
<a name="l00773"></a>00773             
<a name="l00774"></a>00774                 echo <span class="stringliteral">&quot;&lt;tr&gt;&quot;</span>;
<a name="l00775"></a>00775         
<a name="l00776"></a>00776                 $q=mysql_fetch_object(<a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>);
<a name="l00777"></a>00777                 echo <span class="stringliteral">&quot;&lt;td class=rfs_project_table_$gt&gt;</span>
<a name="l00778"></a>00778 <span class="stringliteral">                &lt;a href=&#39;$RFS_SITE_URL/modules/exams/exams.php?action=admin_exam_question_edit&amp;exam_id=$exam-&gt;id&amp;q=$q-&gt;id&#39;&gt;&quot;</span>;
<a name="l00779"></a>00779                 echo <span class="stringliteral">&quot;&lt;img src=&#39;$RFS_SITE_URL/images/icons/Edit.png&#39; width=16 border=0&gt;&quot;</span>;
<a name="l00780"></a>00780                 echo <span class="stringliteral">&quot;&lt;/a&gt;</span>
<a name="l00781"></a>00781 <span class="stringliteral">                &lt;/td&gt;&quot;</span>;             
<a name="l00782"></a>00782 
<a name="l00783"></a>00783 
<a name="l00784"></a>00784                                 
<a name="l00785"></a>00785                 echo <span class="stringliteral">&quot;&lt;td class=rfs_project_table_$gt&gt;</span>
<a name="l00786"></a>00786 <span class="stringliteral">                &lt;a href=&#39;$RFS_SITE_URL/modules/exams/exams.php?action=admin_exam_question_remove&amp;exam_id=$exam-&gt;id&amp;q=$q-&gt;id&#39;&gt;&quot;</span>;
<a name="l00787"></a>00787                 echo <span class="stringliteral">&quot;&lt;img src=&#39;$RFS_SITE_URL/images/icons/Delete.png&#39; width=16 border=0&gt;&quot;</span>;
<a name="l00788"></a>00788                 echo <span class="stringliteral">&quot;&lt;/a&gt;</span>
<a name="l00789"></a>00789 <span class="stringliteral">                &lt;/td&gt;&quot;</span>;
<a name="l00790"></a>00790                 echo <span class="stringliteral">&quot;&lt;td class=rfs_project_table_$gt&gt;&lt;img src=&#39;$RFS_SITE_URL/images/icons/arrow-up.png&#39; border=0 width=16&gt;&lt;/td&gt;&quot;</span>;
<a name="l00791"></a>00791                 echo <span class="stringliteral">&quot;&lt;td class=rfs_project_table_$gt&gt;&lt;img src=&#39;$RFS_SITE_URL/images/icons/arrow-down.png&#39; border=0 width=16&gt;&lt;/td&gt;&quot;</span>;
<a name="l00792"></a>00792                 echo <span class="stringliteral">&quot;&lt;td class=rfs_project_table_$gt&gt;$q-&gt;exam_sequence)&lt;/td&gt;&quot;</span>;
<a name="l00793"></a>00793                 echo <span class="stringliteral">&quot;&lt;td class=rfs_project_table_$gt&gt;$q-&gt;type&lt;/td&gt;&quot;</span>;
<a name="l00794"></a>00794                 echo <span class="stringliteral">&quot;&lt;td class=rfs_project_table_$gt&gt;&quot;</span>.lib_string_truncate($q-&gt;intro,85).<span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l00795"></a>00795                 echo <span class="stringliteral">&quot;&lt;td class=rfs_project_table_$gt&gt;$q-&gt;question&lt;/td&gt;&quot;</span>;
<a name="l00796"></a>00796                 echo <span class="stringliteral">&quot;&lt;td class=rfs_project_table_$gt&gt;$q-&gt;correct_answer&lt;/td&gt;&quot;</span>;
<a name="l00797"></a>00797                 
<a name="l00798"></a>00798                 echo <span class="stringliteral">&quot;&lt;td class=rfs_project_table_$gt&gt;$q-&gt;choice_1&lt;/td&gt;&quot;</span>;
<a name="l00799"></a>00799                 echo <span class="stringliteral">&quot;&lt;td class=rfs_project_table_$gt&gt;$q-&gt;choice_2&lt;/td&gt;&quot;</span>;
<a name="l00800"></a>00800                 echo <span class="stringliteral">&quot;&lt;td class=rfs_project_table_$gt&gt;$q-&gt;choice_3&lt;/td&gt;&quot;</span>;
<a name="l00801"></a>00801                 echo <span class="stringliteral">&quot;&lt;td class=rfs_project_table_$gt&gt;$q-&gt;choice_4&lt;/td&gt;&quot;</span>;
<a name="l00802"></a>00802                 echo <span class="stringliteral">&quot;&lt;td class=rfs_project_table_$gt&gt;$q-&gt;choice_5&lt;/td&gt;&quot;</span>;
<a name="l00803"></a>00803                 echo <span class="stringliteral">&quot;&lt;td class=rfs_project_table_$gt&gt;$q-&gt;choice_6&lt;/td&gt;&quot;</span>;
<a name="l00804"></a>00804                 
<a name="l00805"></a>00805                 echo <span class="stringliteral">&quot;&lt;td class=rfs_project_table_$gt&gt;$q-&gt;task&lt;/td&gt;&quot;</span>;
<a name="l00806"></a>00806                 
<a name="l00807"></a>00807                 
<a name="l00808"></a>00808                 
<a name="l00809"></a>00809                 
<a name="l00810"></a>00810                 
<a name="l00811"></a>00811                 
<a name="l00812"></a>00812                 echo <span class="stringliteral">&quot;&lt;td class=rfs_project_table_$gt&gt;&quot;</span>;
<a name="l00813"></a>00813                 <span class="keywordflow">if</span>(!empty($q-&gt;question_image)) 
<a name="l00814"></a>00814                     <a class="code" href="lib_8rfs_8php.html#a905520775646905a0d80482ddcb07fa8">lib_rfs_echo</a>(<span class="stringliteral">&quot;&lt;img src=$q-&gt;question_image width=32&gt;&quot;</span>);
<a name="l00815"></a>00815                 echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l00816"></a>00816                 echo <span class="stringliteral">&quot;&lt;/tr&gt;&quot;</span>;
<a name="l00817"></a>00817                 $exam_sequence=$q-&gt;exam_sequence;
<a name="l00818"></a>00818         }
<a name="l00819"></a>00819         echo <span class="stringliteral">&quot;&lt;/table&gt;&quot;</span>;
<a name="l00820"></a>00820         $exam_sequence++;
<a name="l00821"></a>00821         
<a name="l00822"></a>00822 
<a name="l00823"></a>00823     }
<a name="l00824"></a>00824     
<a name="l00825"></a>00825     <span class="keywordflow">if</span>(<a class="code" href="install_8php.html#af9da176a74bd49cb97ea35c6ac7257bc">$action</a>==<span class="stringliteral">&quot;admin_new_exam&quot;</span>) {
<a name="l00826"></a>00826 
<a name="l00827"></a>00827         <a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>=<a class="code" href="lib_8mysql_8php.html#a06fb53fc71e262dce115fd3a98bcecdd">lib_mysql_query</a>( <span class="stringliteral">&quot;insert into exams (`name`) VALUES (&#39;$name&#39;)&quot;</span>);
<a name="l00828"></a>00828         $id = mysql_insert_id();
<a name="l00829"></a>00829         echo <span class="stringliteral">&quot;&lt;p&gt; &quot;</span>;
<a name="l00830"></a>00830         <span class="keywordflow">if</span>($id)
<a name="l00831"></a>00831             echo <span class="stringliteral">&quot; Exam $name ($id) created&quot;</span>;
<a name="l00832"></a>00832         <span class="keywordflow">else</span>
<a name="l00833"></a>00833             echo <span class="stringliteral">&quot; Exam creation error. &quot;</span>;
<a name="l00834"></a>00834         echo <span class="stringliteral">&quot;&lt;/p&gt; &quot;</span>;
<a name="l00835"></a>00835     }
<a name="l00836"></a>00836 
<a name="l00837"></a>00837     <span class="keywordflow">if</span>(<a class="code" href="install_8php.html#af9da176a74bd49cb97ea35c6ac7257bc">$action</a>==<span class="stringliteral">&quot;admin_exam_change_pod&quot;</span>) {
<a name="l00838"></a>00838     
<a name="l00839"></a>00839         echo <span class="stringliteral">&quot;&lt;p&gt; CHANGE EXAM POD &lt;/p&gt;&quot;</span>;
<a name="l00840"></a>00840         echo <span class="stringliteral">&quot;&lt;p&gt; Exam: $exam_id &lt;/p&gt;&quot;</span>;
<a name="l00841"></a>00841         echo <span class="stringliteral">&quot;&lt;p&gt; POD: $name &lt;/p&gt;&quot;</span>;
<a name="l00842"></a>00842         <span class="comment">// $pod=lib_mysql_fetch_one_object(&quot;select * from pods where name=&#39;$name&#39;&quot;);</span>
<a name="l00843"></a>00843         $q=<span class="stringliteral">&quot;update `exams` set `pod_id`=&#39;$name&#39; where `id`=&#39;$exam_id&#39;&quot;</span>;
<a name="l00844"></a>00844         
<a name="l00845"></a>00845         <a class="code" href="lib_8mysql_8php.html#a06fb53fc71e262dce115fd3a98bcecdd">lib_mysql_query</a>($q);
<a name="l00846"></a>00846         
<a name="l00847"></a>00847         <a class="code" href="install_8php.html#af9da176a74bd49cb97ea35c6ac7257bc">$action</a>=<span class="stringliteral">&quot;admin_edit&quot;</span>;
<a name="l00848"></a>00848     }
<a name="l00849"></a>00849 
<a name="l00850"></a>00850     <span class="keywordflow">if</span>(<a class="code" href="install_8php.html#af9da176a74bd49cb97ea35c6ac7257bc">$action</a>==<span class="stringliteral">&quot;admin_edit&quot;</span>){
<a name="l00851"></a>00851         
<a name="l00852"></a>00852             <span class="comment">// Types of questions:</span>
<a name="l00853"></a>00853     <span class="comment">//</span>
<a name="l00854"></a>00854     <span class="comment">// Multiple choice</span>
<a name="l00855"></a>00855     <span class="comment">// Fill in the blank</span>
<a name="l00856"></a>00856     <span class="comment">// Fill in the blank (with dropdown box)</span>
<a name="l00857"></a>00857     <span class="comment">// True / False</span>
<a name="l00858"></a>00858     <span class="comment">// Matching</span>
<a name="l00859"></a>00859 
<a name="l00860"></a>00860         rfs_bqf(<span class="stringliteral">&quot;action=admin_new_exam&quot;</span>.<a class="code" href="config_8sitevars_8php.html#a06fab752c166675deeb7a9191add17ab">$RFS_SITE_DELIMITER</a>.<span class="stringliteral">&quot;SHOW_TEXT_name=new exam&quot;</span>,<span class="stringliteral">&quot;Create new exam&quot;</span>);
<a name="l00861"></a>00861 
<a name="l00862"></a>00862         $q=<span class="stringliteral">&quot;select * from exams order by name &quot;</span>;
<a name="l00863"></a>00863         <a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>=<a class="code" href="lib_8mysql_8php.html#a06fb53fc71e262dce115fd3a98bcecdd">lib_mysql_query</a>($q); $n=mysql_num_rows(<a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>);
<a name="l00864"></a>00864 
<a name="l00865"></a>00865         echo <span class="stringliteral">&quot;&lt;table border=0 cellspacing=o cell padding=0&gt;&quot;</span>;
<a name="l00866"></a>00866 
<a name="l00867"></a>00867         echo <span class="stringliteral">&quot;&lt;tr&gt;&quot;</span>;
<a name="l00868"></a>00868         echo <span class="stringliteral">&quot;&lt;td&gt;Tools&lt;/td&gt;&quot;</span>;
<a name="l00869"></a>00869         echo <span class="stringliteral">&quot;&lt;td&gt;Name &lt;/td&gt;&quot;</span>;
<a name="l00870"></a>00870         echo <span class="stringliteral">&quot;&lt;td&gt;Method&lt;/td&gt;&quot;</span>;
<a name="l00871"></a>00871         echo <span class="stringliteral">&quot;&lt;td&gt;Pass Percent&lt;/td&gt;&quot;</span>;
<a name="l00872"></a>00872         echo <span class="stringliteral">&quot;&lt;td&gt;Questions&lt;/td&gt;&quot;</span>;
<a name="l00873"></a>00873         echo <span class="stringliteral">&quot;&lt;td&gt;Total Questions&lt;/td&gt;&quot;</span>;
<a name="l00874"></a>00874         echo <span class="stringliteral">&quot;&lt;td&gt;POD&lt;/td&gt;&quot;</span>;
<a name="l00875"></a>00875 
<a name="l00876"></a>00876         echo <span class="stringliteral">&quot;&lt;/tr&gt;&quot;</span>;
<a name="l00877"></a>00877 
<a name="l00878"></a>00878         <span class="keywordflow">for</span>($i=0;$i&lt;$n;$i++){
<a name="l00879"></a>00879 
<a name="l00880"></a>00880             $exam=mysql_fetch_object(<a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>);
<a name="l00881"></a>00881             <a class="code" href="top__referrers_2linkbin_8php.html#acc3ddc926074609c4cff4f0aa1793fad">$gt</a>++; <span class="keywordflow">if</span>(<a class="code" href="top__referrers_2linkbin_8php.html#acc3ddc926074609c4cff4f0aa1793fad">$gt</a>&gt;2) <a class="code" href="top__referrers_2linkbin_8php.html#acc3ddc926074609c4cff4f0aa1793fad">$gt</a>=1;
<a name="l00882"></a>00882 
<a name="l00883"></a>00883             echo <span class="stringliteral">&quot;&lt;tr&gt;&quot;</span>;
<a name="l00884"></a>00884 
<a name="l00885"></a>00885                 echo <span class="stringliteral">&quot;&lt;td class=rfs_project_table_$gt&gt;&quot;</span>;<span class="comment"></span>
<a name="l00886"></a>00886 <span class="comment">                ///////// tools</span>
<a name="l00887"></a>00887 <span class="comment"></span>                                                echo <span class="stringliteral">&quot;&lt;table border=0 cellspacing=0 cellpadding=0&gt;&quot;</span>;
<a name="l00888"></a>00888                                         echo <span class="stringliteral">&quot;&lt;tr&gt;&quot;</span>;
<a name="l00889"></a>00889 
<a name="l00890"></a>00890 <span class="comment"></span>
<a name="l00891"></a>00891 <span class="comment">                ///// edit</span>
<a name="l00892"></a>00892 <span class="comment"></span>                                    echo <span class="stringliteral">&quot;&lt;td&gt;&quot;</span>;
<a name="l00893"></a>00893                 echo <span class="stringliteral">&quot;&lt;a href=&#39;$RFS_SITE_URL/modules/exams/exams.php?action=admin_exam_edit&amp;exam_id=$exam-&gt;id&#39;&gt;&quot;</span>;
<a name="l00894"></a>00894                 echo <span class="stringliteral">&quot;&lt;img src=&#39;$RFS_SITE_URL/images/icons/Edit.png&#39; width=32 border=0&gt;&quot;</span>;
<a name="l00895"></a>00895                 echo <span class="stringliteral">&quot;&lt;/a&gt;&quot;</span>;
<a name="l00896"></a>00896                                     echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l00897"></a>00897 
<a name="l00898"></a>00898 <span class="comment"></span>
<a name="l00899"></a>00899 <span class="comment">                ///// delete</span>
<a name="l00900"></a>00900 <span class="comment"></span>                                    echo <span class="stringliteral">&quot;&lt;td&gt;&quot;</span>;
<a name="l00901"></a>00901                 echo <span class="stringliteral">&quot;&lt;a href=&#39;$RFS_SITE_URL/modules/exams/exams.php?action=admin_exam_remove&amp;exam_id=$exam-&gt;id&#39;&gt;&quot;</span>;
<a name="l00902"></a>00902                 echo <span class="stringliteral">&quot;&lt;img src=&#39;$RFS_SITE_URL/images/icons/Delete.png&#39; width=32 border=0&gt;&quot;</span>;
<a name="l00903"></a>00903                 echo <span class="stringliteral">&quot;&lt;/a&gt;&quot;</span>;
<a name="l00904"></a>00904                                     echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l00905"></a>00905 <span class="comment"></span>
<a name="l00906"></a>00906 <span class="comment">                ///// rename</span>
<a name="l00907"></a>00907 <span class="comment"></span>
<a name="l00908"></a>00908                                     echo <span class="stringliteral">&quot;&lt;td&gt;&quot;</span>;
<a name="l00909"></a>00909                 echo <span class="stringliteral">&quot;&lt;a href=&#39;$RFS_SITE_URL/modules/exams/exams.php?action=admin_exam_rename&amp;exam_id=$exam-&gt;id&#39;&gt;&quot;</span>;
<a name="l00910"></a>00910                 echo <span class="stringliteral">&quot;&lt;img src=&#39;$RFS_SITE_URL/images/icons/Tag.png&#39; width=32  border=0&gt;&quot;</span>;
<a name="l00911"></a>00911                 echo <span class="stringliteral">&quot;&lt;/a&gt;&quot;</span>;
<a name="l00912"></a>00912                                     echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l00913"></a>00913 
<a name="l00914"></a>00914 
<a name="l00915"></a>00915 <span class="comment"></span>
<a name="l00916"></a>00916 <span class="comment">                ///// run</span>
<a name="l00917"></a>00917 <span class="comment"></span>
<a name="l00918"></a>00918                                     echo <span class="stringliteral">&quot;&lt;td&gt;&quot;</span>;
<a name="l00919"></a>00919                 echo <span class="stringliteral">&quot;&lt;a href=&#39;$RFS_SITE_URL/modules/exams/exams.php?action=admin_exam_test&amp;exam_id=$exam-&gt;id&#39;&gt;&quot;</span>;
<a name="l00920"></a>00920                 echo <span class="stringliteral">&quot;&lt;img src=&#39;$RFS_SITE_URL/images/icons/Play.png&#39; width=32  border=0&gt;&quot;</span>;
<a name="l00921"></a>00921                 echo <span class="stringliteral">&quot;&lt;/a&gt;&quot;</span>;
<a name="l00922"></a>00922                                     echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l00923"></a>00923 
<a name="l00924"></a>00924 
<a name="l00925"></a>00925 
<a name="l00926"></a>00926                                             echo <span class="stringliteral">&quot;&lt;/tr&gt;&quot;</span>;
<a name="l00927"></a>00927                                                     echo <span class="stringliteral">&quot;&lt;/table&gt;&quot;</span>;
<a name="l00928"></a>00928 
<a name="l00929"></a>00929                 echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l00930"></a>00930 <span class="comment"></span>
<a name="l00931"></a>00931 <span class="comment">                //// exam name</span>
<a name="l00932"></a>00932 <span class="comment"></span>
<a name="l00933"></a>00933                 echo <span class="stringliteral">&quot;&lt;td class=rfs_project_table_$gt&gt;&quot;</span>;
<a name="l00934"></a>00934                     echo $exam-&gt;name;
<a name="l00935"></a>00935                 echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l00936"></a>00936 
<a name="l00937"></a>00937 <span class="comment"></span>
<a name="l00938"></a>00938 <span class="comment">                //// exam method</span>
<a name="l00939"></a>00939 <span class="comment"></span>
<a name="l00940"></a>00940                 echo <span class="stringliteral">&quot;&lt;td class=rfs_project_table_$gt&gt;&quot;</span>;
<a name="l00941"></a>00941                     echo $exam-&gt;method;
<a name="l00942"></a>00942                 echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l00943"></a>00943                 <span class="comment"></span>
<a name="l00944"></a>00944 <span class="comment">               //// exam pass percent</span>
<a name="l00945"></a>00945 <span class="comment"></span>
<a name="l00946"></a>00946                 echo <span class="stringliteral">&quot;&lt;td class=rfs_project_table_$gt&gt;&quot;</span>;
<a name="l00947"></a>00947                     echo $exam-&gt;pass_percent;
<a name="l00948"></a>00948                 echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l00949"></a>00949         <span class="comment"></span>
<a name="l00950"></a>00950 <span class="comment">               //// exam questions</span>
<a name="l00951"></a>00951 <span class="comment"></span>
<a name="l00952"></a>00952                 echo <span class="stringliteral">&quot;&lt;td class=rfs_project_table_$gt&gt;&quot;</span>;
<a name="l00953"></a>00953                     echo $exam-&gt;questions;
<a name="l00954"></a>00954                 echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l00955"></a>00955                 
<a name="l00956"></a>00956                 <span class="comment"></span>
<a name="l00957"></a>00957 <span class="comment">               //// exam total questions</span>
<a name="l00958"></a>00958 <span class="comment"></span>
<a name="l00959"></a>00959                 echo <span class="stringliteral">&quot;&lt;td class=rfs_project_table_$gt&gt;&quot;</span>;
<a name="l00960"></a>00960                 $rnq=<a class="code" href="lib_8mysql_8php.html#a06fb53fc71e262dce115fd3a98bcecdd">lib_mysql_query</a>(<span class="stringliteral">&quot;select * from exam_questions where exam_id=&#39;$exam-&gt;id&#39;&quot;</span>);
<a name="l00961"></a>00961                 $nq=mysql_num_rows($rnq);
<a name="l00962"></a>00962                     echo $nq;
<a name="l00963"></a>00963                 echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l00964"></a>00964 
<a name="l00965"></a>00965 
<a name="l00966"></a>00966 
<a name="l00967"></a>00967                 
<a name="l00968"></a>00968 <span class="comment"></span>
<a name="l00969"></a>00969 <span class="comment">                //// POD association</span>
<a name="l00970"></a>00970 <span class="comment"></span>                    echo <span class="stringliteral">&quot;&lt;td class=rfs_project_table_$gt&gt;&quot;</span>;
<a name="l00971"></a>00971                     $pod_id=$exam-&gt;pod_id;
<a name="l00972"></a>00972                     $pod=<span class="stringliteral">&quot; &quot;</span>;
<a name="l00973"></a>00973                     <span class="keywordflow">if</span>($pod_id==0){
<a name="l00974"></a>00974                         $pod=<span class="stringliteral">&quot;Select POD to associate with this exam&quot;</span>;
<a name="l00975"></a>00975                     }
<a name="l00976"></a>00976                     <span class="keywordflow">else</span>    {
<a name="l00977"></a>00977                             $podd=<a class="code" href="lib_8mysql_8php.html#a80af159483fec4094697cef8c5c187a6">lib_mysql_fetch_one_object</a>(<span class="stringliteral">&quot;select * from pods where id=&#39;$pod_id&#39;&quot;</span>);
<a name="l00978"></a>00978                             $pod=$podd-&gt;name;
<a name="l00979"></a>00979                     }
<a name="l00980"></a>00980                     
<a name="l00981"></a>00981 
<a name="l00982"></a>00982                 <a class="code" href="lib_8forms_8php.html#ac4d83760afdff6685ce95c3fb58f6316">lib_forms_optionize</a>(    <a class="code" href="lib_8domain_8php.html#a298425b552e261433262bcbd0768fa12">lib_domain_phpself</a>(),
<a name="l00983"></a>00983                                 <span class="stringliteral">&quot;action=admin_exam_change_pod&quot;</span>.<a class="code" href="config_8sitevars_8php.html#a06fab752c166675deeb7a9191add17ab">$RFS_SITE_DELIMITER</a>.
<a name="l00984"></a>00984                                 <span class="stringliteral">&quot;exam_id=$exam-&gt;id&quot;</span>,
<a name="l00985"></a>00985                                 <span class="stringliteral">&quot;pods&quot;</span>,
<a name="l00986"></a>00986                                 <span class="stringliteral">&quot;name&quot;</span>,
<a name="l00987"></a>00987                                 <span class="stringliteral">&quot;1&quot;</span>,
<a name="l00988"></a>00988                                 $pod,
<a name="l00989"></a>00989                                 <span class="stringliteral">&quot;1&quot;</span>
<a name="l00990"></a>00990                                 );
<a name="l00991"></a>00991                 echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l00992"></a>00992 
<a name="l00993"></a>00993 
<a name="l00994"></a>00994             echo <span class="stringliteral">&quot;&lt;/tr&gt;&quot;</span>;
<a name="l00995"></a>00995         }
<a name="l00996"></a>00996 
<a name="l00997"></a>00997         echo <span class="stringliteral">&quot;&lt;/table&gt;&quot;</span>;        
<a name="l00998"></a>00998     }
<a name="l00999"></a>00999 
<a name="l01000"></a>01000 }
<a name="l01001"></a>01001 
<a name="l01002"></a>01002 
<a name="l01003"></a>01003 <span class="keywordflow">for</span>($i=0;$i&lt;35;$i++) echo <span class="stringliteral">&quot;&lt;br&gt;&quot;</span>;
<a name="l01004"></a>01004 include(<span class="stringliteral">&quot;footer.php&quot;</span>);
<a name="l01005"></a>01005 
<a name="l01006"></a>01006 
<a name="l01007"></a>01007 ?&gt;
</pre></div></div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="exams_8php.html">exams.php</a>      </li>

    <li class="footer">Generated on Tue Mar 18 2014 03:33:39 for RFSCMSAPIDocumentation by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
