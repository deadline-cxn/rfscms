<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>RFSCMSAPIDocumentation: adm.php Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">RFSCMSAPIDocumentation
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('adm_8php.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">adm.php</div>  </div>
</div><!--header-->
<div class="contents">
<a href="adm_8php.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001  &lt;? <span class="comment"></span>
<a name="l00002"></a>00002 <span class="comment">/////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l00003"></a>00003 <span class="comment"></span><span class="comment">// RFS CMS http://www.sethcoder.com/</span><span class="comment"></span>
<a name="l00004"></a>00004 <span class="comment">/////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l00005"></a><a class="code" href="adm_8php.html#ada57e7bb7c152edad18fe2f166188691">00005</a> <span class="comment"></span><a class="code" href="adm_8php.html#ada57e7bb7c152edad18fe2f166188691">$title</a>=<span class="stringliteral">&quot;Administration&quot;</span>;<span class="comment"></span>
<a name="l00006"></a>00006 <span class="comment">/////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l00007"></a><a class="code" href="adm_8php.html#ab2f55426a598f5f8a994284f1de192d9">00007</a> <span class="comment"></span><span class="keyword">function</span> <a class="code" href="adm_8php.html#ab2f55426a598f5f8a994284f1de192d9">adm_db_query</a>( $x ) { eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l00008"></a>00008     $x=urldecode( $x );
<a name="l00009"></a>00009     $ax=explode( <span class="stringliteral">&quot; &quot;</span>, $x );
<a name="l00010"></a>00010     <span class="keywordflow">for</span>( $i=0; $i&lt;count( $ax ); $i++ )
<a name="l00011"></a>00011         <span class="keywordflow">if</span>( strtolower( $ax[$i] )==<span class="stringliteral">&quot;select&quot;</span> ) $ax[$i]=<span class="stringliteral">&quot;zlect&quot;</span>;
<a name="l00012"></a>00012     $ox=join( <span class="stringliteral">&quot; &quot;</span>,$ax );
<a name="l00013"></a>00013     echo <span class="stringliteral">&quot;&lt;a href=\&quot;$RFS_SITE_URL/admin/adm.php?action=db_query&amp;query=$ox\&quot; target=_top&gt;$x&lt;/a&gt;&lt;br&gt;&quot;</span>;
<a name="l00014"></a>00014 }<span class="comment"></span>
<a name="l00015"></a>00015 <span class="comment">/////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l00016"></a>00016 <span class="comment"></span><span class="keywordflow">if</span>( $_REQUEST[<span class="stringliteral">&#39;db_queries&#39;</span>]==<span class="stringliteral">&quot;list&quot;</span> ) {
<a name="l00017"></a>00017     <span class="keywordflow">if</span>(array_pop(explode(<span class="stringliteral">&quot;/&quot;</span>,getcwd()))==<span class="stringliteral">&quot;admin&quot;</span>) chdir(<span class="stringliteral">&quot;..&quot;</span>);
<a name="l00018"></a>00018     include_once(<span class="stringliteral">&quot;include/lib.all.php&quot;</span>);
<a name="l00019"></a>00019     <span class="keywordflow">if</span>(!<a class="code" href="lib_8mysql_8php.html#acdc8ebc6dbeee8624b9ddcfd3f892098">sc_access_check</a>(<span class="stringliteral">&quot;admin&quot;</span>,<span class="stringliteral">&quot;access&quot;</span>)) exit();
<a name="l00020"></a>00020     <span class="keywordflow">if</span>( empty( <a class="code" href="v_8php.html#a1ae541f7fe1c5e21cb4535f88ec9e9dc">$theme</a> ) )               <a class="code" href="v_8php.html#a1ae541f7fe1c5e21cb4535f88ec9e9dc">$theme</a>=<a class="code" href="config_8sitevars_8php.html#ae4a3bb11eb4124d7bf971d8258cdd4aa">$RFS_SITE_DEFAULT_THEME</a>;
<a name="l00021"></a>00021     <span class="keywordflow">if</span>( !empty( <a class="code" href="adm_8php.html#a6efc15b5a2314dd4b5aaa556a375c6d6">$data</a>-&gt;theme ) )        <a class="code" href="v_8php.html#a1ae541f7fe1c5e21cb4535f88ec9e9dc">$theme</a>=<a class="code" href="adm_8php.html#a6efc15b5a2314dd4b5aaa556a375c6d6">$data</a>-&gt;theme;
<a name="l00022"></a>00022     <span class="keywordflow">if</span>( <a class="code" href="lib_8rfs_8php.html#a3609b7f3d3b5fd21ee37b823c7c32546">sc_yes</a>( <a class="code" href="config_8sitevars_8php.html#abb0051c332d18b8256a4bfd7db2fbe61">$RFS_SITE_FORCE_THEME</a> ) ) <a class="code" href="v_8php.html#a1ae541f7fe1c5e21cb4535f88ec9e9dc">$theme</a>=<a class="code" href="config_8sitevars_8php.html#ace98164e78bce9598b5dc24ee4389f93">$RFS_SITE_FORCED_THEME</a>;
<a name="l00023"></a>00023     echo <span class="stringliteral">&quot;&lt;link rel=\&quot;stylesheet\&quot; href=\&quot;$RFS_SITE_URL/themes/$theme/t.css\&quot; type=\&quot;text/css\&quot;&gt;\n&quot;</span>;
<a name="l00024"></a>00024     
<a name="l00025"></a>00025     <a class="code" href="adm_8php.html#ab2f55426a598f5f8a994284f1de192d9">adm_db_query</a>( <span class="stringliteral">&quot;SELECT name,email,donated FROM users&quot;</span> );
<a name="l00026"></a>00026     <a class="code" href="adm_8php.html#ab2f55426a598f5f8a994284f1de192d9">adm_db_query</a>( <span class="stringliteral">&quot;SELECT * FROM users&quot;</span> );
<a name="l00027"></a>00027     <a class="code" href="adm_8php.html#ab2f55426a598f5f8a994284f1de192d9">adm_db_query</a>( <span class="stringliteral">&quot;SHOW FULL COLUMNS FROM users&quot;</span> );
<a name="l00028"></a>00028     
<a name="l00029"></a>00029     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot; CREATE TABLE db_queries2 like db_queries; &quot;</span> );
<a name="l00030"></a>00030     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot; INSERT db_queries2 SELECT * FROM db_queries GROUP BY query;&quot;</span> );
<a name="l00031"></a>00031     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot; RENAME TABLE `db_queries`  TO `db_goto_hell`; &quot;</span> );
<a name="l00032"></a>00032     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot; RENAME TABLE `db_queries2` TO `db_queries`; &quot;</span> );
<a name="l00033"></a>00033     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot; DROP TABLE db_goto_hell; &quot;</span> );
<a name="l00034"></a>00034 
<a name="l00035"></a>00035     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>(<span class="stringliteral">&quot; CREATE TABLE IF NOT EXISTS `db_queries` (</span>
<a name="l00036"></a>00036 <span class="stringliteral">                `id` int(11) NOT NULL AUTO_INCREMENT,</span>
<a name="l00037"></a>00037 <span class="stringliteral">                `query` text COLLATE utf8_unicode_ci NOT NULL,</span>
<a name="l00038"></a>00038 <span class="stringliteral">                `time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,</span>
<a name="l00039"></a>00039 <span class="stringliteral">                PRIMARY KEY (`id`)) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=350 ; &quot;</span>);
<a name="l00040"></a>00040 
<a name="l00041"></a>00041     <a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>=<a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>(<span class="stringliteral">&quot;select distinct query from `db_queries` order by `time`&quot;</span>);
<a name="l00042"></a>00042     <span class="keywordflow">if</span>(<a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>) {
<a name="l00043"></a>00043         $n=mysql_num_rows(<a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>);
<a name="l00044"></a>00044         <span class="keywordflow">for</span>( $i=0; $i&lt;$n; $i++ ) {
<a name="l00045"></a>00045             $dq=mysql_fetch_object( <a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a> );
<a name="l00046"></a>00046             $y=$dq-&gt;query;
<a name="l00047"></a>00047             $y=str_replace( <span class="stringliteral">&quot;\n&quot;</span>,<span class="stringliteral">&quot;&quot;</span>,$y );
<a name="l00048"></a>00048             $x=urlencode( $y );
<a name="l00049"></a>00049             <a class="code" href="adm_8php.html#ab2f55426a598f5f8a994284f1de192d9">adm_db_query</a>( $x );            
<a name="l00050"></a>00050         }
<a name="l00051"></a>00051     }
<a name="l00052"></a>00052     include(<span class="stringliteral">&quot;footer.php&quot;</span>);
<a name="l00053"></a>00053     exit();
<a name="l00054"></a>00054 }<span class="comment"></span>
<a name="l00055"></a>00055 <span class="comment">/////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l00056"></a>00056 <span class="comment"></span>chdir( <span class="stringliteral">&quot;../&quot;</span> );
<a name="l00057"></a><a class="code" href="adm_8php.html#ae7684ea2cc0efa4d24d38862e53fe94a">00057</a> <span class="keywordflow">if</span>(stristr($_REQUEST[<span class="stringliteral">&#39;action&#39;</span>],<span class="stringliteral">&quot;ajx&quot;</span>)) {
<a name="l00058"></a>00058     include(<span class="stringliteral">&quot;include/lib.all.php&quot;</span>);
<a name="l00059"></a>00059     <a class="code" href="lib_8rfs_8php.html#a0d0525a46866112b607d7f37b58aabdb">sc_do_action</a>();
<a name="l00060"></a>00060     exit();
<a name="l00061"></a>00061 }
<a name="l00062"></a>00062 <span class="keywordflow">else</span>
<a name="l00063"></a>00063     include( <span class="stringliteral">&quot;header.php&quot;</span> );
<a name="l00064"></a>00064 <span class="comment"></span>
<a name="l00065"></a>00065 <span class="comment">/////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l00066"></a>00066 <span class="comment"></span><span class="comment">// ACCESS CHECK</span>
<a name="l00067"></a><a class="code" href="adm_8php.html#a6efc15b5a2314dd4b5aaa556a375c6d6">00067</a> <a class="code" href="adm_8php.html#a6efc15b5a2314dd4b5aaa556a375c6d6">$data</a>=<a class="code" href="lib_8mysql_8php.html#ac84822f7ca31fb168bb94fa3331a6923">sc_getuserdata</a>(<a class="code" href="session_8php.html#ad56c24858a88af52e4da3ae2f6a2b3b0">$_SESSION</a>[<span class="stringliteral">&#39;valid_user&#39;</span>]);
<a name="l00068"></a>00068 <span class="keywordflow">if</span>(!<a class="code" href="lib_8mysql_8php.html#acdc8ebc6dbeee8624b9ddcfd3f892098">sc_access_check</a>(<span class="stringliteral">&quot;admin&quot;</span>,<span class="stringliteral">&quot;access&quot;</span>)) {
<a name="l00069"></a>00069     echo <a class="code" href="lib_8rfs_8php.html#ae90d9606f0fc99c3462a0bc897b4d6bd">smiles</a>( <span class="stringliteral">&quot;&lt;table border=0 width=300&gt;&lt;tr&gt;&lt;td class=warning&gt;&lt;center&gt;^X&lt;br&gt;You can not use admin&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;\n&quot;</span> );
<a name="l00070"></a>00070     <a class="code" href="lib_8log_8php.html#a85306751b884541d0eff4186e78730fa">sc_log</a>( <span class="stringliteral">&quot;*****&gt; $data-&gt;name tried to access the admin area!&quot;</span> );
<a name="l00071"></a>00071     include(<span class="stringliteral">&quot;footer.php&quot;</span>);
<a name="l00072"></a>00072     exit();
<a name="l00073"></a>00073 }<span class="comment"></span>
<a name="l00074"></a>00074 <span class="comment">////////////////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l00075"></a>00075 <span class="comment"></span><span class="comment">// ADM CHECK FOR UPDATES</span>
<a name="l00076"></a><a class="code" href="adm_8php.html#a4ed67fbdce7a0ea6a15dcb58f2ddbbcb">00076</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a4ed67fbdce7a0ea6a15dcb58f2ddbbcb">adm_action_update</a>() { eval(<a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>());
<a name="l00077"></a>00077     echo <span class="stringliteral">&quot;&lt;pre&gt;&quot;</span>;
<a name="l00078"></a>00078     system(<span class="stringliteral">&quot;git pull https://github.com/sethcoder/rfscms.git&quot;</span>);
<a name="l00079"></a>00079     echo <span class="stringliteral">&quot;&lt;/pre&gt;&quot;</span>;
<a name="l00080"></a>00080     include(<span class="stringliteral">&quot;footer.php&quot;</span>);
<a name="l00081"></a>00081     exit();
<a name="l00082"></a>00082 }<span class="comment"></span>
<a name="l00083"></a>00083 <span class="comment">////////////////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l00084"></a>00084 <span class="comment"></span><span class="comment">// ADM_ARRANGE FUNCTIONS</span>
<a name="l00085"></a><a class="code" href="adm_8php.html#add52b5bf86adea79c125a549b100fa3c">00085</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#add52b5bf86adea79c125a549b100fa3c">sc_admin_module</a>( $loc ) { eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l00086"></a>00086     $location=$loc;
<a name="l00087"></a>00087     <a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>=<a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;select * from arrangement where location=&#39;$location&#39; order by sequence&quot;</span> );
<a name="l00088"></a>00088     <span class="keywordflow">if</span>(<a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>){
<a name="l00089"></a>00089         echo <span class="stringliteral">&quot;&lt;center&gt;&lt;h2&gt;Arrange location $location&quot;</span>;
<a name="l00090"></a>00090         <span class="keywordflow">if</span>( $location==<span class="stringliteral">&quot;left&quot;</span> ) echo <span class="stringliteral">&quot; (left panel)&quot;</span>;
<a name="l00091"></a>00091         echo <span class="stringliteral">&quot;&lt;/h2&gt;&lt;/center&gt;&quot;</span>;
<a name="l00092"></a>00092         $n=mysql_num_rows(<a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>);
<a name="l00093"></a>00093         <span class="keywordflow">if</span>(!$n) echo <span class="stringliteral">&quot; ( NOTHING IN THIS AREA! ) &lt;BR&gt; &quot;</span>;
<a name="l00094"></a>00094         <span class="keywordflow">else</span>
<a name="l00095"></a>00095         <span class="keywordflow">for</span>( $i=0; $i&lt;$n; $i++ ) {
<a name="l00096"></a>00096             $ar=mysql_fetch_object( <a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a> );
<a name="l00097"></a>00097             echo <span class="stringliteral">&quot;&lt;table border=0 cellspacing=0&gt;&lt;tr&gt;&lt;td&gt;&quot;</span>;
<a name="l00098"></a>00098             echo <span class="stringliteral">&quot;&lt;a href=&#39;$RFS_SITE_URL/admin/adm.php?action=f_arrange_delete&amp;location=$location&amp;arid=$ar-&gt;id&#39;&gt;&quot;</span>;
<a name="l00099"></a>00099             echo <span class="stringliteral">&quot;&lt;img src=&#39;$RFS_SITE_URL/images/icons/circle-delete.png&#39; border=&#39;0&#39;&gt;&quot;</span>;
<a name="l00100"></a>00100             echo <span class="stringliteral">&quot;&lt;/a&gt;&quot;</span>;
<a name="l00101"></a>00101 
<a name="l00102"></a>00102             <span class="keywordflow">if</span>( $ar-&gt;sequence &gt; 1 )
<a name="l00103"></a>00103                 echo <span class="stringliteral">&quot; &lt;img src=$RFS_SITE_URL/images/icons/arrow-up.png width=32 height=32 border=0&gt; &quot;</span>;
<a name="l00104"></a>00104             <span class="keywordflow">if</span>( $ar-&gt;sequence &lt; $n )
<a name="l00105"></a>00105                 echo <span class="stringliteral">&quot; &lt;img src=$RFS_SITE_URL/images/icons/arrow-down.png width=32 height=32 border=0&gt; &quot;</span>;
<a name="l00106"></a>00106             <span class="keywordflow">if</span>( $location!=<span class="stringliteral">&quot;left&quot;</span> )
<a name="l00107"></a>00107                 echo <span class="stringliteral">&quot; &lt;img src=$RFS_SITE_URL/images/icons/arrow-left.png width=32 height=32 border=0&gt; &quot;</span>;
<a name="l00108"></a>00108             <span class="keywordflow">if</span>( $location!=<span class="stringliteral">&quot;right&quot;</span> )
<a name="l00109"></a>00109                 echo <span class="stringliteral">&quot; &lt;img src=$RFS_SITE_URL/images/icons/arrow-right.png width=32 height=32 border=0&gt; &quot;</span>;
<a name="l00110"></a>00110             echo <span class="stringliteral">&quot;  &lt;/td&gt;&lt;td&gt;&quot;</span>;
<a name="l00111"></a>00111             echo ucwords( <span class="stringliteral">&quot;Module: $ar-&gt;mini show &quot;</span> );
<a name="l00112"></a>00112             echo <span class="stringliteral">&quot;&lt;/td&gt; &lt;form action=&#39;$RFS_SITE_URL/admin/adm.php&#39; method=&#39;post&#39;&gt;   &lt;td&gt;</span>
<a name="l00113"></a>00113 <span class="stringliteral">            &lt;input type=hidden name=action value=f_module_chg_num&gt;</span>
<a name="l00114"></a>00114 <span class="stringliteral">            &lt;input type=hidden name=id value=&#39;$ar-&gt;id&#39;&gt;</span>
<a name="l00115"></a>00115 <span class="stringliteral">            &lt;input name=num size=1 value=$ar-&gt;num  onblur=&#39;this.form.submit()&#39;  &gt;</span>
<a name="l00116"></a>00116 <span class="stringliteral">            &lt;/td&gt;   &lt;/form&gt; &lt;td&gt; results&lt;/td&gt;   &lt;/tr&gt;&lt;/table&gt;&quot;</span>;
<a name="l00117"></a>00117         }
<a name="l00118"></a>00118         echo <span class="stringliteral">&quot;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&quot;</span>;
<a name="l00119"></a>00119     }
<a name="l00120"></a>00120     echo <span class="stringliteral">&quot;&lt;form action=&#39;$RFS_SITE_URL/admin/adm.php&#39; method=&#39;post&#39;&gt;&quot;</span>;
<a name="l00121"></a>00121     echo <span class="stringliteral">&quot;&lt;input type=hidden name=action value=f_module_add&gt;&quot;</span>;
<a name="l00122"></a>00122     echo <span class="stringliteral">&quot;&lt;input type=hidden name=location value=$location&gt;&quot;</span>;
<a name="l00123"></a>00123     echo <span class="stringliteral">&quot;&lt;select name=module onchange=&#39;this.form.submit();&#39;&gt;&quot;</span>;
<a name="l00124"></a>00124     echo <span class="stringliteral">&quot;&lt;option&gt;Add module to this area&quot;</span>;
<a name="l00125"></a>00125     $arr=get_defined_functions();
<a name="l00126"></a>00126     <span class="keywordflow">foreach</span>( $arr[<span class="stringliteral">&#39;user&#39;</span>] as $k=&gt;$v ) {
<a name="l00127"></a>00127         <span class="keywordflow">if</span>( stristr( $v,<span class="stringliteral">&quot;sc_module_&quot;</span> ) ) {
<a name="l00128"></a>00128             $v=str_replace( <span class="stringliteral">&quot;sc_module_&quot;</span>,<span class="stringliteral">&quot;&quot;</span>,$v );
<a name="l00129"></a>00129             echo <span class="stringliteral">&quot;&lt;option name=&#39;$v&#39; value=&#39;$v&#39;&gt;&quot;</span>;
<a name="l00130"></a>00130             echo ucwords( str_replace( <span class="stringliteral">&quot;_&quot;</span>,<span class="stringliteral">&quot; &quot;</span>,$v ) );
<a name="l00131"></a>00131         }
<a name="l00132"></a>00132     }
<a name="l00133"></a>00133     echo <span class="stringliteral">&quot;&lt;/select&gt;&quot;</span>;
<a name="l00134"></a>00134     echo <span class="stringliteral">&quot;&lt;/form&gt;&quot;</span>;
<a name="l00135"></a>00135 }<span class="comment"></span>
<a name="l00136"></a>00136 <span class="comment">/////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l00137"></a><a class="code" href="adm_8php.html#a64663480ee47d72412ac90c15ad0c4ac">00137</a> <span class="comment"></span><span class="keyword">function</span> <a class="code" href="adm_8php.html#a64663480ee47d72412ac90c15ad0c4ac">adm_action_f_arrange_delete_go</a>() { eval(<a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>());
<a name="l00138"></a>00138     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>(<span class="stringliteral">&quot;delete from arrangement where `id`=&#39;$id&#39;&quot;</span>);
<a name="l00139"></a>00139     <a class="code" href="adm_8php.html#a2ac96e4daa68800ac6b2b47fd8455f01">adm_action_arrange</a>();
<a name="l00140"></a>00140 }<span class="comment"></span>
<a name="l00141"></a>00141 <span class="comment">/////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l00142"></a><a class="code" href="adm_8php.html#a55a732630eb7b827c13b5d395c55be5f">00142</a> <span class="comment"></span><span class="keyword">function</span> <a class="code" href="adm_8php.html#a55a732630eb7b827c13b5d395c55be5f">adm_action_f_arrange_delete</a>() { eval(<a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>());
<a name="l00143"></a>00143     $ar=<a class="code" href="lib_8mysql_8php.html#ad42d2c11477299cecf3dd06b259a316e">mfo1</a>(<span class="stringliteral">&quot;select * from arrangement where `location` = &#39;$location&#39; and `id`= &#39;$arid&#39; &quot;</span>);
<a name="l00144"></a>00144     echo <span class="stringliteral">&quot;Delete arrangement ($location: $ar-&gt;mini)&lt;br&gt;&quot;</span>;
<a name="l00145"></a>00145     <a class="code" href="lib_8mysql_8php.html#a238eaa47b98b06591deb8e16a715e14c">sc_confirmform</a>( <span class="stringliteral">&quot;Delete $ar-&gt;mini from $location?&quot;</span>,
<a name="l00146"></a>00146                     <span class="stringliteral">&quot;$RFS_SITE_URL/admin/adm.php&quot;</span>,
<a name="l00147"></a>00147                     <span class="stringliteral">&quot;action=f_arrange_delete_go&quot;</span>.<a class="code" href="config_8sitevars_8php.html#a06fab752c166675deeb7a9191add17ab">$RFS_SITE_DELIMITER</a>.<span class="stringliteral">&quot;id=$ar-&gt;id&quot;</span> );
<a name="l00148"></a>00148     <a class="code" href="adm_8php.html#a2ac96e4daa68800ac6b2b47fd8455f01">adm_action_arrange</a>();
<a name="l00149"></a>00149 }<span class="comment"></span>
<a name="l00150"></a>00150 <span class="comment">/////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l00151"></a><a class="code" href="adm_8php.html#a097ca241dc9cf2b292b097d3c647c0f2">00151</a> <span class="comment"></span><span class="keyword">function</span> <a class="code" href="adm_8php.html#a097ca241dc9cf2b292b097d3c647c0f2">adm_action_f_module_add</a>() { eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l00152"></a>00152     echo <span class="stringliteral">&quot;.. $module... $location&quot;</span>;
<a name="l00153"></a>00153     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;insert into arrangement  (`mini`,`location`,`num`,`sequence`)</span>
<a name="l00154"></a>00154 <span class="stringliteral">              values(&#39;$module&#39;,&#39;$location&#39;,&#39;5&#39;,&#39;999&#39;);&quot;</span> );
<a name="l00155"></a>00155     <a class="code" href="adm_8php.html#a2ac96e4daa68800ac6b2b47fd8455f01">adm_action_arrange</a>();
<a name="l00156"></a>00156 }<span class="comment"></span>
<a name="l00157"></a>00157 <span class="comment">/////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l00158"></a><a class="code" href="adm_8php.html#acf6ff4b0d986b96cce7d7e44ef2e0f50">00158</a> <span class="comment"></span><span class="keyword">function</span> <a class="code" href="adm_8php.html#acf6ff4b0d986b96cce7d7e44ef2e0f50">adm_action_f_module_chg_num</a>() {    eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l00159"></a>00159     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;update arrangement set num=&#39;$num&#39; where id=&#39;$id&#39;&quot;</span> );
<a name="l00160"></a>00160     <a class="code" href="adm_8php.html#a2ac96e4daa68800ac6b2b47fd8455f01">adm_action_arrange</a>();
<a name="l00161"></a>00161 }<span class="comment"></span>
<a name="l00162"></a>00162 <span class="comment">/////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l00163"></a><a class="code" href="adm_8php.html#a2ac96e4daa68800ac6b2b47fd8455f01">00163</a> <span class="comment"></span><span class="keyword">function</span> <a class="code" href="adm_8php.html#a2ac96e4daa68800ac6b2b47fd8455f01">adm_action_arrange</a>() { eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l00164"></a>00164     $location=<span class="stringliteral">&quot;&quot;</span>;
<a name="l00165"></a>00165     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>(<span class="stringliteral">&quot; CREATE TABLE IF NOT EXISTS `arrangement` (</span>
<a name="l00166"></a>00166 <span class="stringliteral">                `id` int(11) NOT NULL AUTO_INCREMENT,</span>
<a name="l00167"></a>00167 <span class="stringliteral">                `location` text NOT NULL,</span>
<a name="l00168"></a>00168 <span class="stringliteral">                `mini` text NOT NULL,</span>
<a name="l00169"></a>00169 <span class="stringliteral">                `num` int(11) NOT NULL,</span>
<a name="l00170"></a>00170 <span class="stringliteral">                `sequence` int(11) NOT NULL,</span>
<a name="l00171"></a>00171 <span class="stringliteral">                PRIMARY KEY (`id`) ) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=17 ; &quot;</span>);
<a name="l00172"></a>00172 
<a name="l00173"></a>00173     echo <span class="stringliteral">&quot;&lt;table border=0&gt;&lt;tr&gt;&quot;</span>; <span class="comment">// TOP START</span>
<a name="l00174"></a>00174     echo <span class="stringliteral">&quot;&lt;td valign=top class=lefttd&gt;&quot;</span>;    
<a name="l00175"></a>00175     <a class="code" href="adm_8php.html#add52b5bf86adea79c125a549b100fa3c">sc_admin_module</a>(<span class="stringliteral">&quot;left&quot;</span>);
<a name="l00176"></a>00176     echo <span class="stringliteral">&quot;&lt;/td&gt;&lt;td valign=top&gt;&quot;</span>; <span class="comment">// MIDDLE START</span>
<a name="l00177"></a>00177     <a class="code" href="adm_8php.html#add52b5bf86adea79c125a549b100fa3c">sc_admin_module</a>(<span class="stringliteral">&quot;middle&quot;</span>);
<a name="l00178"></a>00178     echo <span class="stringliteral">&quot;&lt;/td&gt;&lt;td valign=top&gt;&quot;</span>; <span class="comment">// RIGHT SIDE START</span>
<a name="l00179"></a>00179     <a class="code" href="adm_8php.html#add52b5bf86adea79c125a549b100fa3c">sc_admin_module</a>(<span class="stringliteral">&quot;right&quot;</span>);
<a name="l00180"></a>00180     echo <span class="stringliteral">&quot;&lt;/td&gt; &lt;/tr&gt; &lt;/table&gt;&quot;</span>; <span class="comment">// TOP END</span>
<a name="l00181"></a>00181     echo <span class="stringliteral">&quot;&lt;table border=0&gt;&lt;tr&gt;&lt;td&gt;&quot;</span>; <span class="comment">// BOTTOM START</span>
<a name="l00182"></a>00182     <a class="code" href="adm_8php.html#add52b5bf86adea79c125a549b100fa3c">sc_admin_module</a>(<span class="stringliteral">&quot;bottom&quot;</span>);
<a name="l00183"></a>00183     echo <span class="stringliteral">&quot;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&quot;</span>; <span class="comment">// BOTTOM END</span>
<a name="l00184"></a>00184     include( <span class="stringliteral">&quot;footer.php&quot;</span> );
<a name="l00185"></a>00185     exit();
<a name="l00186"></a>00186 }<span class="comment"></span>
<a name="l00187"></a>00187 <span class="comment">////////////////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l00188"></a>00188 <span class="comment"></span><span class="comment">// ADM ACCESS GROUPS FUNCTIONS</span><span class="comment"></span>
<a name="l00189"></a>00189 <span class="comment">////////////////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l00190"></a>00190 <span class="comment"></span>
<a name="l00191"></a><a class="code" href="adm_8php.html#aa9ce850e912a31f96c26127d33798f6c">00191</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#aa9ce850e912a31f96c26127d33798f6c">adm_action_f_access_group_add</a>() { eval(<a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>());
<a name="l00192"></a>00192     echo <span class="stringliteral">&quot; Adding new access group named [$axnm] &lt;br&gt;&quot;</span>;
<a name="l00193"></a>00193     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>(<span class="stringliteral">&quot; insert into access (`name`) VALUES (&#39;$axnm&#39;); &quot;</span>);
<a name="l00194"></a>00194     <a class="code" href="adm_8php.html#a7f8d42d4bcf1ed84b4afa3a420c65b9a">adm_action_f_access_group_edit</a>();
<a name="l00195"></a>00195 }<span class="comment"></span>
<a name="l00196"></a>00196 <span class="comment">/////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l00197"></a><a class="code" href="adm_8php.html#af552c2683dc2fb316e79d13be013fe3f">00197</a> <span class="comment"></span><span class="keyword">function</span> <a class="code" href="adm_8php.html#af552c2683dc2fb316e79d13be013fe3f">adm_action_f_access_group_edit_go</a>() { eval(<a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>());
<a name="l00198"></a>00198     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>(<span class="stringliteral">&quot;delete from `access` where name=&#39;$axnm&#39;&quot;</span>);
<a name="l00199"></a>00199     <a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>=<a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>(<span class="stringliteral">&quot;select * from access_methods&quot;</span>);
<a name="l00200"></a>00200     <span class="keywordflow">for</span>($i=0;$i&lt;mysql_num_rows(<a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>);$i++) {
<a name="l00201"></a>00201         $am=mysql_fetch_object(<a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>);
<a name="l00202"></a>00202         <span class="keywordflow">if</span>($_POST[<span class="stringliteral">&quot;$am-&gt;page&quot;</span>.<span class="stringliteral">&quot;_$am-&gt;action&quot;</span>]==<span class="stringliteral">&quot;on&quot;</span>) {
<a name="l00203"></a>00203             <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>(<span class="stringliteral">&quot;insert into access (`name`,`page`,`action`) </span>
<a name="l00204"></a>00204 <span class="stringliteral">            VALUES(&#39;$axnm&#39;,&#39;$am-&gt;page&#39;,&#39;$am-&gt;action&#39;)&quot;</span>);
<a name="l00205"></a>00205         }
<a name="l00206"></a>00206     }
<a name="l00207"></a>00207     <a class="code" href="adm_8php.html#ad8dfde1dfc911ad4fef403e4142898a0">adm_action_access_groups</a>();
<a name="l00208"></a>00208 }<span class="comment"></span>
<a name="l00209"></a>00209 <span class="comment">/////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l00210"></a><a class="code" href="adm_8php.html#a7f8d42d4bcf1ed84b4afa3a420c65b9a">00210</a> <span class="comment"></span><span class="keyword">function</span> <a class="code" href="adm_8php.html#a7f8d42d4bcf1ed84b4afa3a420c65b9a">adm_action_f_access_group_edit</a>() { eval(<a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>()); 
<a name="l00211"></a>00211     echo <span class="stringliteral">&quot;&lt;h1&gt;Edit Access Group&lt;/h1&gt;&quot;</span>;
<a name="l00212"></a>00212     echo <span class="stringliteral">&quot;&lt;h2&gt;$axnm&lt;/h2&gt;&quot;</span>;
<a name="l00213"></a>00213     echo <span class="stringliteral">&quot;&lt;hr&gt;&quot;</span>;
<a name="l00214"></a>00214     echo <span class="stringliteral">&quot;&lt;form action=\&quot;$RFS_SITE_URL/admin/adm.php\&quot; method=\&quot;post\&quot;&gt;&quot;</span>;
<a name="l00215"></a>00215     echo <span class="stringliteral">&quot;&lt;input type=\&quot;hidden\&quot; name=\&quot;action\&quot; value=\&quot;f_access_group_edit_go\&quot;&gt;&quot;</span>;
<a name="l00216"></a>00216     echo <span class="stringliteral">&quot;&lt;input type=\&quot;hidden\&quot; name=\&quot;axnm\&quot; value=\&quot;$axnm\&quot;&gt;&quot;</span>;
<a name="l00217"></a>00217     
<a name="l00218"></a>00218     <a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>=<a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>(<span class="stringliteral">&quot;select * from access_methods order by page,action&quot;</span>);
<a name="l00219"></a>00219     <span class="keywordflow">for</span>($i=0;$i&lt;mysql_num_rows(<a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>);$i++) {
<a name="l00220"></a>00220         $am=mysql_fetch_object(<a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>); 
<a name="l00221"></a>00221         $checked=<span class="stringliteral">&quot;&quot;</span>;
<a name="l00222"></a>00222         $rw=<a class="code" href="lib_8mysql_8php.html#ad42d2c11477299cecf3dd06b259a316e">mfo1</a>(<span class="stringliteral">&quot;select * from access where name=&#39;$axnm&#39; and page=&#39;$am-&gt;page&#39; and action=&#39;$am-&gt;action&#39;&quot;</span>);
<a name="l00223"></a>00223         <span class="keywordflow">if</span>($rw-&gt;name==$axnm) { $checked=<span class="stringliteral">&quot;checked&quot;</span>;}
<a name="l00224"></a>00224         echo <span class="stringliteral">&quot;&lt;div style=\&quot;float: left; width: 200px;\&quot;&gt;&quot;</span>;
<a name="l00225"></a>00225         echo <span class="stringliteral">&quot;&lt;input name=\&quot;$am-&gt;page&quot;</span>.<span class="stringliteral">&quot;_$am-&gt;action\&quot; type=checkbox $checked&gt;&quot;</span>;
<a name="l00226"></a>00226         echo <span class="stringliteral">&quot; $am-&gt;page -&gt; $am-&gt;action&quot;</span>;
<a name="l00227"></a>00227         echo <span class="stringliteral">&quot;&lt;/div&gt;&quot;</span>;
<a name="l00228"></a>00228     }   
<a name="l00229"></a>00229     echo <span class="stringliteral">&quot;&lt;div style=\&quot;clear: left;\&quot;&gt;&lt;/div&gt;&quot;</span>;
<a name="l00230"></a>00230     echo <span class="stringliteral">&quot;&lt;hr&gt;&quot;</span>;
<a name="l00231"></a>00231     
<a name="l00232"></a>00232     echo <span class="stringliteral">&quot;&lt;input type=\&quot;submit\&quot; value=\&quot;Update\&quot;&gt;&quot;</span>;
<a name="l00233"></a>00233     
<a name="l00234"></a>00234     echo <span class="stringliteral">&quot;&lt;/form&gt;&quot;</span>;
<a name="l00235"></a>00235     include( <span class="stringliteral">&quot;footer.php&quot;</span> );
<a name="l00236"></a>00236     exit();
<a name="l00237"></a>00237 }<span class="comment"></span>
<a name="l00238"></a>00238 <span class="comment">/////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l00239"></a><a class="code" href="adm_8php.html#a2dcf1c079723791d84e8494261e23818">00239</a> <span class="comment"></span><span class="keyword">function</span> <a class="code" href="adm_8php.html#a2dcf1c079723791d84e8494261e23818">adm_action_f_access_group_add_user</a>() { eval(<a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>());
<a name="l00240"></a>00240     $usr=<a class="code" href="lib_8mysql_8php.html#ac84822f7ca31fb168bb94fa3331a6923">sc_getuserdata</a>(<a class="code" href="wab_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a>);
<a name="l00241"></a>00241     $usr-&gt;access_groups.=<span class="stringliteral">&quot;,$axnm&quot;</span>;  
<a name="l00242"></a>00242     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>(<span class="stringliteral">&quot;update users set access_groups =&#39;$usr-&gt;access_groups&#39; where id=&#39;$usr-&gt;id&#39;&quot;</span>);
<a name="l00243"></a>00243     <a class="code" href="adm_8php.html#ad8dfde1dfc911ad4fef403e4142898a0">adm_action_access_groups</a>();
<a name="l00244"></a>00244 }<span class="comment"></span>
<a name="l00245"></a>00245 <span class="comment">/////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l00246"></a><a class="code" href="adm_8php.html#a74bade2285e1a19314e35379c8bc3bf7">00246</a> <span class="comment"></span><span class="keyword">function</span> <a class="code" href="adm_8php.html#a74bade2285e1a19314e35379c8bc3bf7">adm_action_f_access_group_del_user</a>() { eval(<a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>());
<a name="l00247"></a>00247     echo <a class="code" href="showprofile_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a>;
<a name="l00248"></a>00248     echo <span class="stringliteral">&quot;&lt;br&gt;&quot;</span>;
<a name="l00249"></a>00249     $usr=<a class="code" href="lib_8mysql_8php.html#ac84822f7ca31fb168bb94fa3331a6923">sc_getuserdata</a>($user);
<a name="l00250"></a>00250     $agx=explode(<span class="stringliteral">&quot;,&quot;</span>,$usr-&gt;access_groups);
<a name="l00251"></a>00251     <span class="keywordflow">for</span>($i=0;$i&lt;count($agx);$i++){
<a name="l00252"></a>00252         <span class="keywordflow">if</span>($agx[$i]!=$axnm) {
<a name="l00253"></a>00253             $outag=$outag.$agx[$i].<span class="stringliteral">&quot;,&quot;</span>;
<a name="l00254"></a>00254         }
<a name="l00255"></a>00255     }
<a name="l00256"></a>00256     $outag=rtrim($outag,<span class="stringliteral">&quot;,&quot;</span>);
<a name="l00257"></a>00257     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>(<span class="stringliteral">&quot;update users set access_groups=&#39;$outag&#39; where name=&#39;$user&#39;&quot;</span>);
<a name="l00258"></a>00258     <a class="code" href="adm_8php.html#ad8dfde1dfc911ad4fef403e4142898a0">adm_action_access_groups</a>(); 
<a name="l00259"></a>00259 }<span class="comment"></span>
<a name="l00260"></a>00260 <span class="comment">/////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l00261"></a><a class="code" href="adm_8php.html#a8ae1234993872b7f9152027cd64947ff">00261</a> <span class="comment"></span><span class="keyword">function</span> <a class="code" href="adm_8php.html#a8ae1234993872b7f9152027cd64947ff">adm_action_f_access_group_delete</a>() { eval(<a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>());
<a name="l00262"></a>00262     <a class="code" href="lib_8mysql_8php.html#a238eaa47b98b06591deb8e16a715e14c">sc_confirmform</a>( <span class="stringliteral">&quot;Delete $axnm?&quot;</span>,
<a name="l00263"></a>00263                     <span class="stringliteral">&quot;$RFS_SITE_URL/admin/adm.php&quot;</span>,
<a name="l00264"></a>00264                     <span class="stringliteral">&quot;action=f_access_group_delete_go&quot;</span>.<a class="code" href="config_8sitevars_8php.html#a06fab752c166675deeb7a9191add17ab">$RFS_SITE_DELIMITER</a>.
<a name="l00265"></a>00265                       <span class="stringliteral">&quot;axnm=$axnm&quot;</span> );
<a name="l00266"></a>00266     <a class="code" href="adm_8php.html#ad8dfde1dfc911ad4fef403e4142898a0">adm_action_access_groups</a>();
<a name="l00267"></a>00267 }<span class="comment"></span>
<a name="l00268"></a>00268 <span class="comment">/////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l00269"></a><a class="code" href="adm_8php.html#a73d8151fe0c4dbfd187bb8fd9f2fb330">00269</a> <span class="comment"></span><span class="keyword">function</span> <a class="code" href="adm_8php.html#a73d8151fe0c4dbfd187bb8fd9f2fb330">adm_action_f_access_group_delete_go</a>() { eval(<a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>());
<a name="l00270"></a>00270     echo <span class="stringliteral">&quot;DELETE $axnm access group... &lt;BR&gt;&quot;</span>;
<a name="l00271"></a>00271     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>(<span class="stringliteral">&quot;delete from `access` where name=&#39;$axnm&#39;&quot;</span>);
<a name="l00272"></a>00272     <a class="code" href="adm_8php.html#ad8dfde1dfc911ad4fef403e4142898a0">adm_action_access_groups</a>();
<a name="l00273"></a>00273 }<span class="comment"></span>
<a name="l00274"></a>00274 <span class="comment">/////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l00275"></a><a class="code" href="adm_8php.html#ad8dfde1dfc911ad4fef403e4142898a0">00275</a> <span class="comment"></span><span class="keyword">function</span> <a class="code" href="adm_8php.html#ad8dfde1dfc911ad4fef403e4142898a0">adm_action_access_groups</a>() { eval(<a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>());
<a name="l00276"></a>00276     echo <span class="stringliteral">&quot;&lt;h1&gt;Modify Access Groups&lt;/h1&gt;&quot;</span>;
<a name="l00277"></a>00277     <a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>=<a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>(<span class="stringliteral">&quot;select distinct name from access&quot;</span>);
<a name="l00278"></a>00278     <span class="keywordflow">for</span>($i=0;$i&lt;mysql_num_rows(<a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>);$i++) {
<a name="l00279"></a>00279         echo <span class="stringliteral">&quot;&lt;hr&gt;&quot;</span>;
<a name="l00280"></a>00280         $a=mysql_fetch_object(<a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>);
<a name="l00281"></a>00281         echo <span class="stringliteral">&quot;&lt;h2&gt;$a-&gt;name&lt;/h2&gt;&quot;</span>;
<a name="l00282"></a>00282         echo <span class="stringliteral">&quot;[&lt;a href=\&quot;$RFS_SITE_URL/admin/adm.php?action=f_access_group_delete&amp;axnm=$a-&gt;name\&quot;&gt;delete&lt;/a&gt;] &quot;</span>;
<a name="l00283"></a>00283         echo <span class="stringliteral">&quot;[&lt;a href=\&quot;$RFS_SITE_URL/admin/adm.php?action=f_access_group_edit&amp;axnm=$a-&gt;name\&quot;&gt;edit&lt;/a&gt;]&lt;br&gt;&quot;</span>;
<a name="l00284"></a>00284         
<a name="l00285"></a>00285         echo <span class="stringliteral">&quot;&lt;p&gt;Members: &lt;/p&gt;&quot;</span>;
<a name="l00286"></a>00286         echo <span class="stringliteral">&quot;&lt;p&gt;&quot;</span>;
<a name="l00287"></a>00287         
<a name="l00288"></a>00288         $usrs=<a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>(<span class="stringliteral">&quot;select * from `users`&quot;</span>);
<a name="l00289"></a>00289         <span class="keywordflow">for</span>($j=0;$j&lt;mysql_num_rows($usrs);$j++) {
<a name="l00290"></a>00290             $usr=mysql_fetch_object($usrs);
<a name="l00291"></a>00291             $agrps=explode(<span class="stringliteral">&quot;,&quot;</span>,$usr-&gt;access_groups);
<a name="l00292"></a>00292             <span class="keywordflow">for</span>($k=0;$k&lt;count($agrps);$k++) {
<a name="l00293"></a>00293                 <span class="keywordflow">if</span>($a-&gt;name==$agrps[$k]) {
<a name="l00294"></a>00294                     
<a name="l00295"></a>00295                     echo <span class="stringliteral">&quot;[&lt;a href=\&quot;$RFS_SITE_URL/admin/adm.php?action=f_access_group_del_user&amp;axnm=$a-&gt;name&amp;user=$usr-&gt;name\&quot;&gt;remove&lt;/a&gt;] &quot;</span>;
<a name="l00296"></a>00296                     
<a name="l00297"></a>00297                     echo <span class="stringliteral">&quot; $usr-&gt;name &quot;</span>;
<a name="l00298"></a>00298                 }
<a name="l00299"></a>00299             }
<a name="l00300"></a>00300         }
<a name="l00301"></a>00301         
<a name="l00302"></a>00302         
<a name="l00303"></a>00303         <a class="code" href="lib_8mysql_8php.html#a8594d0f9a34f20d40018060b96f6e679">sc_optionizer</a>(  <span class="stringliteral">&quot;$RFS_SITE_URL/admin/adm.php&quot;</span>,
<a name="l00304"></a>00304                             <span class="stringliteral">&quot;action=f_access_group_add_user&quot;</span>.<a class="code" href="config_8sitevars_8php.html#a06fab752c166675deeb7a9191add17ab">$RFS_SITE_DELIMITER</a>.
<a name="l00305"></a>00305                             <span class="stringliteral">&quot;axnm=$a-&gt;name&quot;</span>.$RFS_SITE_DELIMITER.
<a name="l00306"></a>00306                             <span class="stringliteral">&quot;omit=access_groups:like &#39;%$a-&gt;name%&#39;,name:anonymous&quot;</span>,
<a name="l00307"></a>00307                             <span class="stringliteral">&quot;users&quot;</span>,
<a name="l00308"></a>00308                             <span class="stringliteral">&quot;name&quot;</span>,
<a name="l00309"></a>00309                             0,
<a name="l00310"></a>00310                             <span class="stringliteral">&quot;Add a user to this group&quot;</span>,
<a name="l00311"></a>00311                             1 );
<a name="l00312"></a>00312         echo <span class="stringliteral">&quot;&lt;/p&gt;&quot;</span>;
<a name="l00313"></a>00313     }
<a name="l00314"></a>00314     
<a name="l00315"></a>00315     echo <span class="stringliteral">&quot;&lt;hr&gt;&quot;</span>;
<a name="l00316"></a>00316     echo <span class="stringliteral">&quot;&lt;h2&gt;Create a new access group&lt;/h2&gt;&quot;</span>;
<a name="l00317"></a>00317     sc_div(<span class="stringliteral">&quot;ADD ACCESS GROUP FORM START&quot;</span>);
<a name="l00318"></a>00318     echo <span class="stringliteral">&quot;&lt;form action=\&quot;$RFS_SITE_URL/admin/adm.php\&quot; method=\&quot;post\&quot;&gt;\n&quot;</span>;
<a name="l00319"></a>00319     echo <span class="stringliteral">&quot;&lt;input type=\&quot;hidden\&quot; name=\&quot;action\&quot; value=\&quot;f_access_group_add\&quot;&gt;\n&quot;</span>;
<a name="l00320"></a>00320     echo <span class="stringliteral">&quot;&lt;input name=\&quot;axnm\&quot;&gt;\n&quot;</span>;
<a name="l00321"></a>00321     echo <span class="stringliteral">&quot;&lt;input type=\&quot;submit\&quot; value=\&quot;Add\&quot;&gt;\n&quot;</span>;
<a name="l00322"></a>00322     echo <span class="stringliteral">&quot;&lt;/form&gt;\n&quot;</span>;
<a name="l00323"></a>00323     sc_div(<span class="stringliteral">&quot;ADD ACCESS GROUP FORM END&quot;</span>);
<a name="l00324"></a>00324     include( <span class="stringliteral">&quot;footer.php&quot;</span> );
<a name="l00325"></a>00325     exit();
<a name="l00326"></a>00326 }<span class="comment"></span>
<a name="l00327"></a>00327 <span class="comment">////////////////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l00328"></a>00328 <span class="comment"></span><span class="comment">// ADM_PHPMYADMIN</span>
<a name="l00329"></a><a class="code" href="adm_8php.html#a03840cc256330620d189f3f2bd29bdce">00329</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a03840cc256330620d189f3f2bd29bdce">adm_action_phpmyadmin</a>() { eval(<a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>());
<a name="l00330"></a>00330     <a class="code" href="lib_8domain_8php.html#ae0c30c921e2e8d92aec05e396f18b912">sc_gotopage</a>(<span class="stringliteral">&quot;$RFS_SITE_URL/3rdparty/phpmyadmin/&quot;</span>);
<a name="l00331"></a>00331 }<span class="comment"></span>
<a name="l00332"></a>00332 <span class="comment">////////////////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l00333"></a>00333 <span class="comment"></span><span class="comment">// ADM_NEW PAGE FUNCTIONS</span>
<a name="l00334"></a><a class="code" href="adm_8php.html#a9268c2ae6657a70ca17a9b0ff767e34f">00334</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a9268c2ae6657a70ca17a9b0ff767e34f">adm_action_form_builder</a>() { eval(<a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>());
<a name="l00335"></a>00335     echo<span class="stringliteral">&quot;&lt;p&gt;Form Builder&lt;/p&gt;&quot;</span>;
<a name="l00336"></a>00336     include( <span class="stringliteral">&quot;footer.php&quot;</span> );
<a name="l00337"></a>00337     exit();
<a name="l00338"></a>00338 }<span class="comment"></span>
<a name="l00339"></a>00339 <span class="comment">////////////////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l00340"></a>00340 <span class="comment"></span><span class="comment">// ADM_NEW PAGE FUNCTIONS</span>
<a name="l00341"></a><a class="code" href="adm_8php.html#afbb0f2660d6ec234d8ae91bd19bfd9ce">00341</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#afbb0f2660d6ec234d8ae91bd19bfd9ce">adm_action_new_page</a>() { eval(<a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>());
<a name="l00342"></a>00342     echo<span class="stringliteral">&quot;&lt;p&gt;Create a new page.&lt;/p&gt;&quot;</span>;
<a name="l00343"></a>00343     <a class="code" href="lib_8mysql_8php.html#a80abbdad3e2473fa9a676869019a152f">sc_bqf</a>( <span class="stringliteral">&quot;action=new_page_go&quot;</span>.<a class="code" href="config_8sitevars_8php.html#a06fab752c166675deeb7a9191add17ab">$RFS_SITE_DELIMITER</a>.<span class="stringliteral">&quot;SHOW_TEXT_name=name.php&quot;</span>,<span class="stringliteral">&quot;Create new page&quot;</span>);
<a name="l00344"></a>00344     include( <span class="stringliteral">&quot;footer.php&quot;</span> );
<a name="l00345"></a>00345     exit();
<a name="l00346"></a>00346 }<span class="comment"></span>
<a name="l00347"></a>00347 <span class="comment">////////////////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l00348"></a><a class="code" href="adm_8php.html#a46a846a9e21877edbd57faaa853e462e">00348</a> <span class="comment"></span><span class="keyword">function</span> <a class="code" href="adm_8php.html#a46a846a9e21877edbd57faaa853e462e">adm_action_new_page_go</a>() { eval(<a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>());
<a name="l00349"></a>00349     <span class="keywordflow">if</span>(!file_exists($_GLOBALS[<span class="stringliteral">&#39;name&#39;</span>])){
<a name="l00350"></a>00350     copy(<span class="stringliteral">&quot;_template.php&quot;</span>,$_GLOBALS[<span class="stringliteral">&#39;name&#39;</span>]);
<a name="l00351"></a>00351     }
<a name="l00352"></a>00352     echo <span class="stringliteral">&quot;&lt;p&gt; New file &quot;</span>.$_GLOBALS[<span class="stringliteral">&#39;name&#39;</span>].<span class="stringliteral">&quot; created. &lt;/p&gt;&quot;</span>;
<a name="l00353"></a>00353 }<span class="comment"></span>
<a name="l00354"></a>00354 <span class="comment">////////////////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l00355"></a>00355 <span class="comment"></span><span class="comment">// ADM_EMAIL</span>
<a name="l00356"></a><a class="code" href="adm_8php.html#a9a6c8b42b47f89178b987586cf1733f5">00356</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a9a6c8b42b47f89178b987586cf1733f5">adm_action_email</a>(){            eval(<a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>());
<a name="l00357"></a>00357     echo<span class="stringliteral">&quot;&lt;p&gt;Send an email&lt;/p&gt;&quot;</span>;
<a name="l00358"></a>00358     <a class="code" href="lib_8mysql_8php.html#a80abbdad3e2473fa9a676869019a152f">sc_bqf</a>(     <span class="stringliteral">&quot;action=email_go&quot;</span>.<a class="code" href="config_8sitevars_8php.html#a06fab752c166675deeb7a9191add17ab">$RFS_SITE_DELIMITER</a>.
<a name="l00359"></a>00359                 <span class="stringliteral">&quot;SHOW_TEXT_address=address&quot;</span>.$RFS_SITE_DELIMITER.
<a name="l00360"></a>00360                 <span class="stringliteral">&quot;SHOW_TEXT_subject=subject&quot;</span>.$RFS_SITE_DELIMITER.
<a name="l00361"></a>00361                 <span class="stringliteral">&quot;SHOW_CODEAREA_300#600#message=message&quot;</span>.$RFS_SITE_DELIMITER,
<a name="l00362"></a>00362                 <span class="stringliteral">&quot;Email&quot;</span>);
<a name="l00363"></a>00363     include( <span class="stringliteral">&quot;footer.php&quot;</span> );
<a name="l00364"></a>00364     exit();
<a name="l00365"></a>00365     
<a name="l00366"></a>00366 }<span class="comment"></span>
<a name="l00367"></a>00367 <span class="comment">/////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l00368"></a><a class="code" href="adm_8php.html#ad9415644bb1485ab021d5ca432b7b73b">00368</a> <span class="comment"></span><span class="keyword">function</span> <a class="code" href="adm_8php.html#ad9415644bb1485ab021d5ca432b7b73b">adm_action_email_go</a>(){                     eval(<a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>());
<a name="l00369"></a>00369     echo <span class="stringliteral">&quot;Sending message:&lt;br&gt;&quot;</span>;
<a name="l00370"></a>00370     echo <span class="stringliteral">&quot;TO:$address&lt;br&gt;SUBJECT:$subject&lt;br&gt;MESSAGE:&lt;br&gt;$message&lt;br&gt;&quot;</span>;
<a name="l00371"></a>00371     <a class="code" href="lib_8rfs_8php.html#ab397a8f7bd42dbbed63e446b0901450a">mailgo</a>($address,<a class="code" href="forums_8php.html#abf17cb2dba2ed17cb28aa5f37deb5293">$message</a>,$subject);
<a name="l00372"></a>00372 }<span class="comment"></span>
<a name="l00373"></a>00373 <span class="comment">////////////////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l00374"></a>00374 <span class="comment"></span><span class="comment">// ADM_DATABASE</span>
<a name="l00375"></a><a class="code" href="adm_8php.html#a4cc50e443bbff6e4eb5ed1f48d9f88e3">00375</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a4cc50e443bbff6e4eb5ed1f48d9f88e3">adm_action_db_query</a>() { eval(<a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>());
<a name="l00376"></a>00376     $query=str_replace(<span class="stringliteral">&quot;zlect&quot;</span>,<span class="stringliteral">&quot;select&quot;</span>,$query);
<a name="l00377"></a>00377    echo <span class="stringliteral">&quot;&lt;h3&gt;Database Query&lt;/h3&gt;&quot;</span>;
<a name="l00378"></a>00378    echo <span class="stringliteral">&quot;&lt;iframe id=\&quot;QU\&quot; width=100% class=&#39;iframez&#39; frameborder=0</span>
<a name="l00379"></a>00379 <span class="stringliteral">               src=$RFS_SITE_URL/admin/adm.php?db_queries=list &gt;&lt;/iframe&gt;&quot;</span>;
<a name="l00380"></a>00380     <a class="code" href="lib_8mysql_8php.html#a9eee2bb98800e4f9db3e4f243f1b792f">sc_db_query_form</a>( <span class="stringliteral">&quot;$RFS_SITE_URL/admin/adm.php&quot;</span>,<span class="stringliteral">&quot;db_query&quot;</span>,<span class="stringliteral">&quot;$query&quot;</span> );
<a name="l00381"></a>00381     <span class="keywordflow">if</span>( !empty( $query ) ) {
<a name="l00382"></a>00382         $query=stripslashes($query);
<a name="l00383"></a>00383         echo $query;
<a name="l00384"></a>00384         <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;insert into `db_queries` (`id`, `query`) VALUES (&#39;&#39;,&#39;$query&#39; ) &quot;</span> );
<a name="l00385"></a>00385         echo <span class="stringliteral">&quot;&lt;table cellspacing=0 cellpadding=0 border=0&gt;&lt;tr&gt;&lt;td class=contenttd&gt;&quot;</span>;
<a name="l00386"></a>00386         <a class="code" href="lib_8mysql_8php.html#a187dd36cc05457c2600e5fc7ae20e4c4">sc_db_query</a>( $query, <span class="stringliteral">&quot;true&quot;</span> );
<a name="l00387"></a>00387         echo <span class="stringliteral">&quot;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&quot;</span>;
<a name="l00388"></a>00388 
<a name="l00389"></a>00389     }
<a name="l00390"></a>00390     <a class="code" href="adm_8php.html#a80b875005654440f8f81ee7fa4d42ed4">finishadminpage</a>();
<a name="l00391"></a>00391 }<span class="comment"></span>
<a name="l00392"></a>00392 <span class="comment">////////////////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l00393"></a>00393 <span class="comment"></span><span class="comment">// ADM_EVAL FUNCTIONS</span>
<a name="l00394"></a><a class="code" href="adm_8php.html#a41b999ad649cc054cbb347072e41f610">00394</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a41b999ad649cc054cbb347072e41f610">eval_callback</a>( $txt ) {
<a name="l00395"></a>00395     <span class="keywordflow">if</span>( stristr( <a class="code" href="config_8php.html#aad108a6abffdea835bc6cc2f3244751e">$GLOBALS</a>[<span class="stringliteral">&#39;eval&#39;</span>],<span class="stringliteral">&quot;phpinfo()&quot;</span> ) ) {
<a name="l00396"></a>00396         $txt=str_replace( <span class="stringliteral">&quot;border: 1px solid #000000;&quot;</span>,<span class="stringliteral">&quot;border: 0px solid #000000;&quot;</span>,$txt );
<a name="l00397"></a>00397         $txt=str_replace( <span class="stringliteral">&quot;.e {&quot;</span>,<span class="stringliteral">&quot;.e {border: 1px solid #000000; &quot;</span>,$txt );
<a name="l00398"></a>00398         $txt=str_replace( <span class="stringliteral">&quot;.h {&quot;</span>,<span class="stringliteral">&quot;.h {border: 1px solid #000000; &quot;</span>,$txt );
<a name="l00399"></a>00399         $txt=str_replace( <span class="stringliteral">&quot;.v {&quot;</span>,<span class="stringliteral">&quot;.v {border: 1px solid #000000; &quot;</span>,$txt );
<a name="l00400"></a>00400         $txt=str_replace( <span class="stringliteral">&quot;img {&quot;</span>,<span class="stringliteral">&quot;.imgg {&quot;</span>,$txt );
<a name="l00401"></a>00401         $txt=str_replace( <span class="stringliteral">&quot;&lt;img&quot;</span>,<span class="stringliteral">&quot;&lt;img class=imgg&quot;</span>,$txt );
<a name="l00402"></a>00402     }
<a name="l00403"></a>00403     <span class="keywordflow">return</span> $txt;
<a name="l00404"></a>00404 }<span class="comment"></span>
<a name="l00405"></a>00405 <span class="comment">/////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l00406"></a><a class="code" href="adm_8php.html#a37ae75642c5b1f68bf57837c3479b92b">00406</a> <span class="comment"></span><span class="keyword">function</span> <a class="code" href="adm_8php.html#a37ae75642c5b1f68bf57837c3479b92b">adm_action_eval_form_go</a>() {
<a name="l00407"></a>00407     eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l00408"></a>00408     $eval=stripslashes( $eval );
<a name="l00409"></a>00409     ob_start( <span class="stringliteral">&quot;eval_callback&quot;</span> );
<a name="l00410"></a>00410     eval( <span class="stringliteral">&quot;$eval&quot;</span> );
<a name="l00411"></a>00411     ob_end_flush();
<a name="l00412"></a>00412     <a class="code" href="adm_8php.html#a80b875005654440f8f81ee7fa4d42ed4">finishadminpage</a>();
<a name="l00413"></a>00413 }<span class="comment"></span>
<a name="l00414"></a>00414 <span class="comment">/////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l00415"></a><a class="code" href="adm_8php.html#ae4bd3b1ad635c8ea320779269fae0240">00415</a> <span class="comment"></span><span class="keyword">function</span> <a class="code" href="adm_8php.html#ae4bd3b1ad635c8ea320779269fae0240">adm_action_eval_form</a>() {
<a name="l00416"></a>00416     eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l00417"></a>00417     echo <span class="stringliteral">&quot;&lt;h3&gt;Enter PHP code to eval:&lt;/h3&gt;&lt;br&gt;&quot;</span>;
<a name="l00418"></a>00418     <a class="code" href="lib_8mysql_8php.html#ab2a2e03dfc31eb5074a990325393609d">sc_bf</a>( <a class="code" href="lib_8mysql_8php.html#a90227497e3406a51ddbaad5bcf7ba665">sc_phpself</a>(),
<a name="l00419"></a>00419            <span class="stringliteral">&quot;action=eval_form_go&quot;</span>.<a class="code" href="config_8sitevars_8php.html#a06fab752c166675deeb7a9191add17ab">$RFS_SITE_DELIMITER</a>.
<a name="l00420"></a>00420            <span class="stringliteral">&quot;id=$id&quot;</span>.$RFS_SITE_DELIMITER.
<a name="l00421"></a>00421            <span class="stringliteral">&quot;SHOW_TEXTAREA_16#70#eval=enter code here&quot;</span>,
<a name="l00422"></a>00422            <span class="stringliteral">&quot;&quot;</span>,<span class="stringliteral">&quot;&quot;</span>,<span class="stringliteral">&quot;&quot;</span>,<span class="stringliteral">&quot;&quot;</span>,<span class="stringliteral">&quot;&quot;</span>,<span class="stringliteral">&quot;&quot;</span>,50,<span class="stringliteral">&quot;Eval Code&quot;</span> );
<a name="l00423"></a>00423 }<span class="comment"></span>
<a name="l00424"></a>00424 <span class="comment">////////////////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l00425"></a>00425 <span class="comment"></span><span class="comment">// ADM_THEMES</span>
<a name="l00426"></a><a class="code" href="adm_8php.html#aa91f80c03a054b601bcd65e18ba4e5d7">00426</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#aa91f80c03a054b601bcd65e18ba4e5d7">adm_action_f_theme_edit_php</a>() { eval(<a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>());
<a name="l00427"></a>00427     <span class="keywordflow">if</span>(!empty($delete)) {
<a name="l00428"></a>00428         echo <span class="stringliteral">&quot;&lt;h1&gt;DELETE:&lt;/h1&gt;&quot;</span>;
<a name="l00429"></a>00429         echo <span class="stringliteral">&quot; --- delete[$delete]&lt;br&gt;&quot;</span>;
<a name="l00430"></a>00430         system(<span class="stringliteral">&quot;sudo touch $outfile.out&quot;</span>);
<a name="l00431"></a>00431         system(<span class="stringliteral">&quot;sudo chmod 777 $outfile.out&quot;</span>);
<a name="l00432"></a>00432         $fo=fopen(<span class="stringliteral">&quot;$outfile.out&quot;</span>,wt);
<a name="l00433"></a>00433         <a class="code" href="backup-packages_8php.html#a1d2c1369c63343a169bc25d1a0475482">$fp</a>=fopen($outfile,<span class="stringliteral">&quot;rt&quot;</span>);
<a name="l00434"></a>00434         <span class="keywordflow">while</span>($ln=fgets(<a class="code" href="backup-packages_8php.html#a1d2c1369c63343a169bc25d1a0475482">$fp</a>,256)) {
<a name="l00435"></a>00435             $chk=explode(<span class="stringliteral">&quot;=&quot;</span>,$ln);
<a name="l00436"></a>00436             $chk[0]=trim($chk[0],<span class="stringliteral">&quot; &quot;</span>);
<a name="l00437"></a>00437             <span class="keywordflow">if</span>($chk[0]!=$delete) {
<a name="l00438"></a>00438                 fputs($fo,$ln);
<a name="l00439"></a>00439             }
<a name="l00440"></a>00440         }
<a name="l00441"></a>00441         fclose($fo);
<a name="l00442"></a>00442         fclose(<a class="code" href="backup-packages_8php.html#a1d2c1369c63343a169bc25d1a0475482">$fp</a>);
<a name="l00443"></a>00443         system(<span class="stringliteral">&quot;sudo mv $outfile $outfile.bak.&quot;</span>.time());
<a name="l00444"></a>00444         system(<span class="stringliteral">&quot;sudo mv $outfile.out $outfile&quot;</span>);
<a name="l00445"></a>00445     }
<a name="l00446"></a>00446     <span class="keywordflow">if</span>(!empty(<a class="code" href="modules_2proxy_2index_8php.html#a76aeb354fc71a358526ea9fbd7aae7a4">$add</a>)) {
<a name="l00447"></a>00447         echo <span class="stringliteral">&quot;&lt;h1&gt;ADD:&lt;/h1&gt;&quot;</span>;
<a name="l00448"></a>00448         echo <span class="stringliteral">&quot; --- add[$addvar=$varvalue]&lt;br&gt;&quot;</span>;
<a name="l00449"></a>00449         system(<span class="stringliteral">&quot;sudo touch $outfile.out&quot;</span>);
<a name="l00450"></a>00450         system(<span class="stringliteral">&quot;sudo chmod 777 $outfile.out&quot;</span>);
<a name="l00451"></a>00451         $fo=fopen(<span class="stringliteral">&quot;$outfile.out&quot;</span>,wt);
<a name="l00452"></a>00452         <a class="code" href="backup-packages_8php.html#a1d2c1369c63343a169bc25d1a0475482">$fp</a>=fopen($outfile,<span class="stringliteral">&quot;rt&quot;</span>);
<a name="l00453"></a>00453         <span class="keywordflow">while</span>($ln=fgets(<a class="code" href="backup-packages_8php.html#a1d2c1369c63343a169bc25d1a0475482">$fp</a>,256)) {
<a name="l00454"></a>00454             <span class="keywordflow">if</span>(substr($ln,0,2)!=<span class="stringliteral">&quot;?&gt;&quot;</span>) fputs($fo,$ln);       
<a name="l00455"></a>00455         }
<a name="l00456"></a>00456         fputs($fo,<span class="stringliteral">&quot;$addvar=\&quot;$varvalue\&quot;;\n&quot;</span>);
<a name="l00457"></a>00457         fputs($fo,<span class="stringliteral">&quot;?&gt;&quot;</span>);
<a name="l00458"></a>00458         fclose($fo);
<a name="l00459"></a>00459         fclose(<a class="code" href="backup-packages_8php.html#a1d2c1369c63343a169bc25d1a0475482">$fp</a>);
<a name="l00460"></a>00460         system(<span class="stringliteral">&quot;sudo mv $outfile $outfile.bak.&quot;</span>.time());
<a name="l00461"></a>00461         system(<span class="stringliteral">&quot;sudo mv $outfile.out $outfile&quot;</span>);
<a name="l00462"></a>00462     }
<a name="l00463"></a>00463     <a class="code" href="adm_8php.html#a904dd685b7d93cc532a9d61c93280253">adm_action_f_theme_edit</a>();
<a name="l00464"></a>00464 }
<a name="l00465"></a><a class="code" href="adm_8php.html#ab91ce2cc24b273a690208d8ee067ec75">00465</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#ab91ce2cc24b273a690208d8ee067ec75">adm_action_f_theme_edit_delete_go</a>() { eval(<a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>());
<a name="l00466"></a>00466     <a class="code" href="thumbnail_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a>=<span class="stringliteral">&quot;$RFS_SITE_PATH/themes/$thm/$dfile&quot;</span>;
<a name="l00467"></a>00467     
<a name="l00468"></a>00468     echo <span class="stringliteral">&quot; DELETING $file...&lt;br&gt;&quot;</span>;
<a name="l00469"></a>00469     
<a name="l00470"></a>00470     system(<span class="stringliteral">&quot;sudo rm $file&quot;</span>);
<a name="l00471"></a>00471     <a class="code" href="adm_8php.html#a904dd685b7d93cc532a9d61c93280253">adm_action_f_theme_edit</a>();
<a name="l00472"></a>00472 }
<a name="l00473"></a><a class="code" href="adm_8php.html#a3bd2f5be6668b76b5214b4fb1e3eb8c3">00473</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a3bd2f5be6668b76b5214b4fb1e3eb8c3">adm_action_f_theme_edit_delete</a>() { eval(<a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>());
<a name="l00474"></a>00474     <a class="code" href="thumbnail_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a>=<span class="stringliteral">&quot;$RFS_SITE_PATH/themes/$thm/$dfile&quot;</span>;
<a name="l00475"></a>00475     <a class="code" href="lib_8mysql_8php.html#a238eaa47b98b06591deb8e16a715e14c">sc_confirmform</a>( <span class="stringliteral">&quot;Delete $file&lt;br&gt;&lt;br&gt;&lt;img src=\&quot;$RFS_SITE_URL/themes/$thm/$dfile\&quot; width=500&gt; &quot;</span>,
<a name="l00476"></a>00476                         <span class="stringliteral">&quot;$RFS_SITE_URL/admin/adm.php&quot;</span>,
<a name="l00477"></a>00477                         <span class="stringliteral">&quot;action=f_theme_edit_delete_go&quot;</span>.<a class="code" href="config_8sitevars_8php.html#a06fab752c166675deeb7a9191add17ab">$RFS_SITE_DELIMITER</a>.
<a name="l00478"></a>00478                         <span class="stringliteral">&quot;dfile=$dfile&quot;</span>.$RFS_SITE_DELIMITER.
<a name="l00479"></a>00479                         <span class="stringliteral">&quot;thm=$thm&quot;</span>
<a name="l00480"></a>00480                         
<a name="l00481"></a>00481                         );
<a name="l00482"></a>00482 }
<a name="l00483"></a>00483 
<a name="l00484"></a><a class="code" href="adm_8php.html#a73e2c3c2f5022cf7d92fb9df8e554183">00484</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a73e2c3c2f5022cf7d92fb9df8e554183">adm_action_f_ajx_theme_edit_save_t_php</a>() { eval(<a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>());
<a name="l00485"></a>00485     $thm=$_POST[<span class="stringliteral">&#39;thm&#39;</span>];
<a name="l00486"></a>00486     $taval=$_POST[<span class="stringliteral">&#39;taval&#39;</span>];
<a name="l00487"></a>00487     $taval=urldecode($taval);
<a name="l00488"></a>00488     $taval=stripslashes($taval);
<a name="l00489"></a>00489     <a class="code" href="thumbnail_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a>=<span class="stringliteral">&quot;$RFS_SITE_PATH/themes/$thm/t.php&quot;</span>;
<a name="l00490"></a>00490     system(<span class="stringliteral">&quot;sudo mv $file $file.bak.&quot;</span>.time());
<a name="l00491"></a>00491     system(<span class="stringliteral">&quot;sudo touch $file&quot;</span>);
<a name="l00492"></a>00492     system(<span class="stringliteral">&quot;sudo chmod 777 $file&quot;</span>);
<a name="l00493"></a>00493     <span class="keywordflow">if</span>(!file_put_contents(<a class="code" href="thumbnail_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a>,$taval))
<a name="l00494"></a>00494         <a class="code" href="lib_8rfs_8php.html#aa8cc5d5d1daaf3d80162755c52959d9b">sc_info</a>(<span class="stringliteral">&quot;ERROR SAVING FILE, CHECK PERMISSIONS&quot;</span>,<span class="stringliteral">&quot;WHITE&quot;</span>,<span class="stringliteral">&quot;RED&quot;</span>);
<a name="l00495"></a>00495     <span class="keywordflow">else</span> 
<a name="l00496"></a>00496         <a class="code" href="lib_8rfs_8php.html#aa8cc5d5d1daaf3d80162755c52959d9b">sc_info</a>(<span class="stringliteral">&quot;FILE SAVED&quot;</span>,<span class="stringliteral">&quot;WHITE&quot;</span>,<span class="stringliteral">&quot;GREEN&quot;</span>);
<a name="l00497"></a>00497 }
<a name="l00498"></a>00498 
<a name="l00499"></a><a class="code" href="adm_8php.html#a7bfafa9a316601e9d53fd04cb18fecde">00499</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a7bfafa9a316601e9d53fd04cb18fecde">adm_action_f_theme_edit_t_php</a>() { eval(<a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>()); 
<a name="l00500"></a>00500     echo <span class="stringliteral">&#39;  &lt;div id=&quot;file_status&quot;&gt;&lt;/div&gt;</span>
<a name="l00501"></a>00501 <span class="stringliteral">        &lt;script&gt;</span>
<a name="l00502"></a>00502 <span class="stringliteral">                                            </span>
<a name="l00503"></a>00503 <span class="stringliteral">        function save_t_php(ta,taval) {</span>
<a name="l00504"></a>00504 <span class="stringliteral">                var http=new XMLHttpRequest();</span>
<a name="l00505"></a>00505 <span class="stringliteral">                var url = &quot;&#39;</span>.$RFS_SITE_URL.<span class="stringliteral">&#39;/admin/adm.php&quot;;</span>
<a name="l00506"></a>00506 <span class="stringliteral">                var params = &quot;action=f_ajx_theme_edit_save_t_php&amp;thm=&#39;</span>.$thm.<span class="stringliteral">&#39;&amp;taval=&quot;+encodeURIComponent(taval);</span>
<a name="l00507"></a>00507 <span class="stringliteral">                document.getElementById(&quot;file_status&quot;).innerHTML=&quot;SAVING FILE....&quot;;</span>
<a name="l00508"></a>00508 <span class="stringliteral">                http.open(&quot;POST&quot;, url, true);</span>
<a name="l00509"></a>00509 <span class="stringliteral">                http.setRequestHeader(&quot;Content-type&quot;, &quot;application/x-www-form-urlencoded&quot;);</span>
<a name="l00510"></a>00510 <span class="stringliteral">                http.setRequestHeader(&quot;Content-length&quot;, params.length);</span>
<a name="l00511"></a>00511 <span class="stringliteral">                http.setRequestHeader(&quot;Connection&quot;, &quot;close&quot;);</span>
<a name="l00512"></a>00512 <span class="stringliteral">                http.onreadystatechange = function() {</span>
<a name="l00513"></a>00513 <span class="stringliteral">                        if(http.readyState == 4 &amp;&amp; http.status == 200) {</span>
<a name="l00514"></a>00514 <span class="stringliteral">                            var outward=url+&quot;?action=f_theme_edit&amp;thm=&#39;</span>.$thm.<span class="stringliteral">&#39;&quot;;</span>
<a name="l00515"></a>00515 <span class="stringliteral">                            document.getElementById(&quot;file_status&quot;).innerHTML=http.responseText+&quot;&lt;a href=&quot;+outward+&quot;&gt;Continue&lt;/a&gt;&quot;;</span>
<a name="l00516"></a>00516 <span class="stringliteral">                    }</span>
<a name="l00517"></a>00517 <span class="stringliteral">                }</span>
<a name="l00518"></a>00518 <span class="stringliteral">                http.send(params);</span>
<a name="l00519"></a>00519 <span class="stringliteral">        }</span>
<a name="l00520"></a>00520 <span class="stringliteral">        editAreaLoader.init({</span>
<a name="l00521"></a>00521 <span class="stringliteral">        id: &quot;codecode_t_php&quot;</span>
<a name="l00522"></a>00522 <span class="stringliteral">        ,start_highlight: true</span>
<a name="l00523"></a>00523 <span class="stringliteral">        ,font_size: &quot;8&quot;</span>
<a name="l00524"></a>00524 <span class="stringliteral">        ,font_family: &quot;verdana, monospace&quot;</span>
<a name="l00525"></a>00525 <span class="stringliteral">        ,allow_resize: &quot;n&quot;</span>
<a name="l00526"></a>00526 <span class="stringliteral">        ,allow_toggle: false</span>
<a name="l00527"></a>00527 <span class="stringliteral">        ,language: &quot;en&quot;</span>
<a name="l00528"></a>00528 <span class="stringliteral">        ,syntax: &quot;php&quot;</span>
<a name="l00529"></a>00529 <span class="stringliteral">        ,toolbar: &quot;save,select_font&quot;</span>
<a name="l00530"></a>00530 <span class="stringliteral">        ,load_callback: &quot;my_load&quot;</span>
<a name="l00531"></a>00531 <span class="stringliteral">        ,save_callback: &quot;save_t_php&quot;</span>
<a name="l00532"></a>00532 <span class="stringliteral">        ,plugins: &quot;charmap&quot; </span>
<a name="l00533"></a>00533 <span class="stringliteral">        ,charmap_default: &quot;arrows&quot; });</span>
<a name="l00534"></a>00534 <span class="stringliteral">        &lt;/script&gt; &#39;</span>;
<a name="l00535"></a>00535     echo <span class="stringliteral">&quot;&lt;textarea id=\&quot;codecode_t_php\&quot; style=\&quot;height: 400px; width: 700px;\&quot; name=\&quot;codecode_t_php\&quot;&gt;&quot;</span>;
<a name="l00536"></a>00536     $fc=file_get_contents(<span class="stringliteral">&quot;$RFS_SITE_PATH/themes/$thm/t.php&quot;</span>);
<a name="l00537"></a>00537     $fc=stripslashes(str_replace(<span class="stringliteral">&quot;&lt;&quot;</span>,<span class="stringliteral">&quot;&amp;lt;&quot;</span>,$fc)).<span class="stringliteral">&quot;&lt;/textarea&gt;&quot;</span>;
<a name="l00538"></a>00538     echo $fc;
<a name="l00539"></a>00539     include(<span class="stringliteral">&quot;footer.php&quot;</span>);
<a name="l00540"></a>00540     exit();
<a name="l00541"></a>00541 }
<a name="l00542"></a>00542 
<a name="l00543"></a>00543 
<a name="l00544"></a><a class="code" href="adm_8php.html#ac3c2bcb8304513276ebb7db0f26beac9">00544</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#ac3c2bcb8304513276ebb7db0f26beac9">adm_action_f_ajx_theme_edit_save_t_css</a>() { eval(<a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>());
<a name="l00545"></a>00545     $thm=$_POST[<span class="stringliteral">&#39;thm&#39;</span>];
<a name="l00546"></a>00546     $taval=$_POST[<span class="stringliteral">&#39;taval&#39;</span>];
<a name="l00547"></a>00547     $taval=urldecode($taval);
<a name="l00548"></a>00548     $taval=stripslashes($taval);
<a name="l00549"></a>00549     <a class="code" href="thumbnail_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a>=<span class="stringliteral">&quot;$RFS_SITE_PATH/themes/$thm/t.css&quot;</span>;
<a name="l00550"></a>00550     system(<span class="stringliteral">&quot;sudo mv $file $file.bak.&quot;</span>.time());
<a name="l00551"></a>00551     system(<span class="stringliteral">&quot;sudo touch $file&quot;</span>);
<a name="l00552"></a>00552     system(<span class="stringliteral">&quot;sudo chmod 777 $file&quot;</span>);
<a name="l00553"></a>00553     <span class="keywordflow">if</span>(!file_put_contents(<a class="code" href="thumbnail_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a>,$taval))
<a name="l00554"></a>00554         <a class="code" href="lib_8rfs_8php.html#aa8cc5d5d1daaf3d80162755c52959d9b">sc_info</a>(<span class="stringliteral">&quot;ERROR SAVING FILE, CHECK PERMISSIONS&quot;</span>,<span class="stringliteral">&quot;WHITE&quot;</span>,<span class="stringliteral">&quot;RED&quot;</span>);
<a name="l00555"></a>00555     <span class="keywordflow">else</span> 
<a name="l00556"></a>00556         <a class="code" href="lib_8rfs_8php.html#aa8cc5d5d1daaf3d80162755c52959d9b">sc_info</a>(<span class="stringliteral">&quot;FILE SAVED&quot;</span>,<span class="stringliteral">&quot;WHITE&quot;</span>,<span class="stringliteral">&quot;GREEN&quot;</span>);
<a name="l00557"></a>00557 }
<a name="l00558"></a>00558 
<a name="l00559"></a><a class="code" href="adm_8php.html#a9d7a68b04ee5ebb5af0b1ca5d9f47dd5">00559</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a9d7a68b04ee5ebb5af0b1ca5d9f47dd5">adm_action_f_theme_edit_t_css</a>() { eval(<a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>()); 
<a name="l00560"></a>00560     echo <span class="stringliteral">&#39;  &lt;div id=&quot;file_status&quot;&gt;&lt;/div&gt; &lt;script&gt;</span>
<a name="l00561"></a>00561 <span class="stringliteral">                                            </span>
<a name="l00562"></a>00562 <span class="stringliteral">        function save_t_css(ta,taval) {</span>
<a name="l00563"></a>00563 <span class="stringliteral">                var http=new XMLHttpRequest();</span>
<a name="l00564"></a>00564 <span class="stringliteral">                var url = &quot;&#39;</span>.$RFS_SITE_URL.<span class="stringliteral">&#39;/admin/adm.php&quot;;</span>
<a name="l00565"></a>00565 <span class="stringliteral">                var params = &quot;action=f_ajx_theme_edit_save_t_css&amp;thm=&#39;</span>.$thm.<span class="stringliteral">&#39;&amp;taval=&quot;+encodeURIComponent(taval);</span>
<a name="l00566"></a>00566 <span class="stringliteral">                document.getElementById(&quot;file_status&quot;).innerHTML=&quot;SAVING FILE....&quot;;</span>
<a name="l00567"></a>00567 <span class="stringliteral">                http.open(&quot;POST&quot;, url, true);</span>
<a name="l00568"></a>00568 <span class="stringliteral">                http.setRequestHeader(&quot;Content-type&quot;, &quot;application/x-www-form-urlencoded&quot;);</span>
<a name="l00569"></a>00569 <span class="stringliteral">                http.setRequestHeader(&quot;Content-length&quot;, params.length);</span>
<a name="l00570"></a>00570 <span class="stringliteral">                http.setRequestHeader(&quot;Connection&quot;, &quot;close&quot;);</span>
<a name="l00571"></a>00571 <span class="stringliteral">                http.onreadystatechange = function() {</span>
<a name="l00572"></a>00572 <span class="stringliteral">                        if(http.readyState == 4 &amp;&amp; http.status == 200) {</span>
<a name="l00573"></a>00573 <span class="stringliteral">                            var outward=url+&quot;?action=f_theme_edit&amp;thm=&#39;</span>.$thm.<span class="stringliteral">&#39;&quot;;</span>
<a name="l00574"></a>00574 <span class="stringliteral">                            document.getElementById(&quot;file_status&quot;).innerHTML=http.responseText+&quot;&lt;a href=&quot;+outward+&quot;&gt;Continue&lt;/a&gt;&quot;;</span>
<a name="l00575"></a>00575 <span class="stringliteral">                    }</span>
<a name="l00576"></a>00576 <span class="stringliteral">                }</span>
<a name="l00577"></a>00577 <span class="stringliteral">                http.send(params);</span>
<a name="l00578"></a>00578 <span class="stringliteral">        }</span>
<a name="l00579"></a>00579 <span class="stringliteral">        editAreaLoader.init({</span>
<a name="l00580"></a>00580 <span class="stringliteral">        id: &quot;codecode_t_css&quot;</span>
<a name="l00581"></a>00581 <span class="stringliteral">        ,start_highlight: true</span>
<a name="l00582"></a>00582 <span class="stringliteral">        ,font_size: &quot;8&quot;</span>
<a name="l00583"></a>00583 <span class="stringliteral">        ,font_family: &quot;verdana, monospace&quot;</span>
<a name="l00584"></a>00584 <span class="stringliteral">        ,allow_resize: &quot;n&quot;</span>
<a name="l00585"></a>00585 <span class="stringliteral">        ,allow_toggle: false</span>
<a name="l00586"></a>00586 <span class="stringliteral">        ,language: &quot;en&quot;</span>
<a name="l00587"></a>00587 <span class="stringliteral">        ,syntax: &quot;css&quot;</span>
<a name="l00588"></a>00588 <span class="stringliteral">        ,toolbar: &quot;save,select_font&quot;</span>
<a name="l00589"></a>00589 <span class="stringliteral">        ,load_callback: &quot;my_load&quot;</span>
<a name="l00590"></a>00590 <span class="stringliteral">        ,save_callback: &quot;save_t_css&quot;</span>
<a name="l00591"></a>00591 <span class="stringliteral">        ,plugins: &quot;charmap&quot; </span>
<a name="l00592"></a>00592 <span class="stringliteral">        ,charmap_default: &quot;arrows&quot; });</span>
<a name="l00593"></a>00593 <span class="stringliteral">        &lt;/script&gt; &#39;</span>;
<a name="l00594"></a>00594         
<a name="l00595"></a>00595     echo <span class="stringliteral">&quot;&lt;textarea id=\&quot;codecode_t_css\&quot; style=\&quot;height: 400px; width: 700px;\&quot; name=\&quot;codecode_t_css\&quot;&gt;&quot;</span>;
<a name="l00596"></a>00596     $fc=file_get_contents(<span class="stringliteral">&quot;$RFS_SITE_PATH/themes/$thm/t.css&quot;</span>);
<a name="l00597"></a>00597     $fc=stripslashes(str_replace(<span class="stringliteral">&quot;&lt;&quot;</span>,<span class="stringliteral">&quot;&amp;lt;&quot;</span>,$fc)).<span class="stringliteral">&quot;&lt;/textarea&gt;&quot;</span>;
<a name="l00598"></a>00598     echo $fc;
<a name="l00599"></a>00599     include(<span class="stringliteral">&quot;footer.php&quot;</span>);
<a name="l00600"></a>00600     exit();
<a name="l00601"></a>00601 }
<a name="l00602"></a>00602 
<a name="l00603"></a><a class="code" href="adm_8php.html#acb6014e45c705e5c90c9ab4bd505938e">00603</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#acb6014e45c705e5c90c9ab4bd505938e">adm_action_f_theme_clone_go</a>() { eval(<a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>());
<a name="l00604"></a>00604     $new_name=strtolower($new_name);
<a name="l00605"></a>00605     echo <span class="stringliteral">&quot;Cloning $thm to $new_name&lt;br&gt;&quot;</span>;
<a name="l00606"></a>00606     
<a name="l00607"></a>00607 }
<a name="l00608"></a><a class="code" href="adm_8php.html#aca1d3f205bdc859bf0b2e3d19cc4967b">00608</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#aca1d3f205bdc859bf0b2e3d19cc4967b">adm_action_f_theme_clone</a>() { eval(<a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>());
<a name="l00609"></a>00609     echo <span class="stringliteral">&quot;&lt;h1&gt;Clone $thm theme&lt;/h1&gt;&quot;</span>;
<a name="l00610"></a>00610     $sample=<span class="stringliteral">&quot;themes/$thm/t.sample.png&quot;</span>;
<a name="l00611"></a>00611         <span class="keywordflow">if</span>(file_exists(<span class="stringliteral">&quot;$RFS_SITE_PATH/$sample&quot;</span>)) {
<a name="l00612"></a>00612                 echo <span class="stringliteral">&quot;&lt;img src=\&quot;$RFS_SITE_URL/$sample\&quot;&gt;&quot;</span>;
<a name="l00613"></a>00613         }
<a name="l00614"></a>00614     <a class="code" href="lib_8mysql_8php.html#ab2a2e03dfc31eb5074a990325393609d">sc_bf</a>(  <span class="stringliteral">&quot;$RFS_SITE_URL/admin/adm.php&quot;</span>,
<a name="l00615"></a>00615             <span class="stringliteral">&quot;action=f_theme_clone_go&quot;</span>.<a class="code" href="config_8sitevars_8php.html#a06fab752c166675deeb7a9191add17ab">$RFS_SITE_DELIMITER</a>.
<a name="l00616"></a>00616             <span class="stringliteral">&quot;thm=$thm&quot;</span>.$RFS_SITE_DELIMITER.
<a name="l00617"></a>00617             <span class="stringliteral">&quot;SHOW_TEXT_50#50#new_name=Enter cloned theme name&quot;</span>,
<a name="l00618"></a>00618             <span class="stringliteral">&quot;&quot;</span>,
<a name="l00619"></a>00619             <span class="stringliteral">&quot;&quot;</span>,
<a name="l00620"></a>00620             <span class="stringliteral">&quot;&quot;</span>,
<a name="l00621"></a>00621             <span class="stringliteral">&quot;&quot;</span>,
<a name="l00622"></a>00622             <span class="stringliteral">&quot;&quot;</span>,
<a name="l00623"></a>00623             <span class="stringliteral">&quot;&quot;</span>,
<a name="l00624"></a>00624             100,
<a name="l00625"></a>00625             <span class="stringliteral">&quot;Clone&quot;</span> );
<a name="l00626"></a>00626 }
<a name="l00627"></a><a class="code" href="adm_8php.html#a904dd685b7d93cc532a9d61c93280253">00627</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a904dd685b7d93cc532a9d61c93280253">adm_action_f_theme_edit</a>() { eval(<a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>());
<a name="l00628"></a>00628 
<a name="l00629"></a>00629     <a class="code" href="lib_8buttons_8php.html#a666362cb0a8603c56ee45762028a24a4">sc_button</a>(<span class="stringliteral">&quot;$RFS_SITE_URL/admin/adm.php?action=theme&quot;</span>,<span class="stringliteral">&quot;Themes list&quot;</span>);
<a name="l00630"></a>00630 
<a name="l00631"></a>00631     echo <span class="stringliteral">&quot;Editing theme [$thm]&lt;br&gt;&quot;</span>;
<a name="l00632"></a>00632     <a class="code" href="install_8php.html#a5ade1bb16ee3a241cefc0b84918f1598">$folder</a>=<span class="stringliteral">&quot;$RFS_SITE_PATH/themes/$thm&quot;</span>;
<a name="l00633"></a>00633     echo <span class="stringliteral">&quot;Elements of $folder &lt;br&gt;&quot;</span>;
<a name="l00634"></a>00634     $d = opendir(<a class="code" href="install_8php.html#a5ade1bb16ee3a241cefc0b84918f1598">$folder</a>);
<a name="l00635"></a>00635     <span class="keywordflow">while</span>(<span class="keyword">false</span>!==($entry = readdir($d))) {
<a name="l00636"></a>00636         <span class="keywordflow">if</span>(($entry != <span class="charliteral">&#39;.&#39;</span>) &amp;&amp; ($entry != <span class="stringliteral">&#39;..&#39;</span>) &amp;&amp; (!is_dir($dir.$entry)) ) {
<a name="l00637"></a>00637             <span class="keywordflow">if</span>($entry[0]==<span class="stringliteral">&quot;t&quot;</span>) {
<a name="l00638"></a>00638                 $ft=<a class="code" href="lib_8file_8php.html#a0145e555488271a734d8f0ba81a1b283">sc_getfiletype</a>($entry);
<a name="l00639"></a>00639                 <span class="keywordflow">switch</span>($ft) {
<a name="l00640"></a>00640                     <span class="keywordflow">case</span> <span class="stringliteral">&quot;css&quot;</span>:
<a name="l00641"></a>00641                         <span class="keywordflow">if</span>($entry==<span class="stringliteral">&quot;t.css&quot;</span>) {
<a name="l00642"></a>00642                             echo <span class="stringliteral">&quot;&lt;hr&gt;&quot;</span>;
<a name="l00643"></a>00643                             echo <span class="stringliteral">&quot;&lt;h1&gt;$entry&lt;/h1&gt;&quot;</span>;
<a name="l00644"></a>00644                             
<a name="l00645"></a>00645                             
<a name="l00646"></a>00646                             echo <span class="stringliteral">&quot;[&lt;a href=\&quot;$RFS_SITE_URL/admin/adm.php?action=f_theme_edit_t_css&amp;thm=$thm&amp;tcss=$entry\&quot;&gt;edit this file&lt;/a&gt;]&lt;br&gt;&quot;</span>;
<a name="l00647"></a>00647 
<a name="l00648"></a>00648                             <a class="code" href="lib_8mysql_8php.html#a51c1ebc194a8d354cb3f69933cdd07f7">sc_css_edit_form</a>(<span class="stringliteral">&quot;$folder/$entry&quot;</span>, <span class="stringliteral">&quot;&quot;</span>,<span class="stringliteral">&quot;&quot;</span>);
<a name="l00649"></a>00649                         }
<a name="l00650"></a>00650                         <span class="keywordflow">break</span>;
<a name="l00651"></a>00651                     <span class="keywordflow">case</span> <span class="stringliteral">&quot;php&quot;</span>:
<a name="l00652"></a>00652                         <span class="keywordflow">if</span>($entry==<span class="stringliteral">&quot;t.php&quot;</span>) {
<a name="l00653"></a>00653                             echo <span class="stringliteral">&quot;&lt;hr&gt;&quot;</span>;
<a name="l00654"></a>00654                             echo <span class="stringliteral">&quot;&lt;h1&gt;$entry&lt;/h1&gt;&quot;</span>;
<a name="l00655"></a>00655                             echo <span class="stringliteral">&quot;[&lt;a href=\&quot;$RFS_SITE_URL/admin/adm.php?action=f_theme_edit_t_php&amp;thm=$thm&amp;tphp=$entry\&quot;&gt;edit this file&lt;/a&gt;]&lt;br&gt;&quot;</span>;
<a name="l00656"></a>00656                             
<a name="l00657"></a>00657                             
<a name="l00658"></a>00658                             
<a name="l00659"></a>00659                             <a class="code" href="lib_8mysql_8php.html#a5833117529dd2e2535b8b0e976d3ccb1">sc_php_edit_form</a>(       <span class="stringliteral">&quot;$folder/$entry&quot;</span>,
<a name="l00660"></a>00660                                                     <span class="stringliteral">&quot;$RFS_SITE_URL/admin/adm.php&quot;</span>,
<a name="l00661"></a>00661                                                     <span class="stringliteral">&quot;f_theme_edit_php&quot;</span>,
<a name="l00662"></a>00662                                                     <span class="stringliteral">&quot;thm=$thm&quot;</span>
<a name="l00663"></a>00663                                                     );
<a name="l00664"></a>00664                         }
<a name="l00665"></a>00665                         <span class="keywordflow">else</span> {
<a name="l00666"></a>00666                         }
<a name="l00667"></a>00667                         <span class="keywordflow">break</span>;
<a name="l00668"></a>00668                     <span class="keywordflow">default</span>: 
<a name="l00669"></a>00669                         <span class="keywordflow">break</span>;
<a name="l00670"></a>00670                     
<a name="l00671"></a>00671                 }
<a name="l00672"></a>00672             }
<a name="l00673"></a>00673         }
<a name="l00674"></a>00674     }   
<a name="l00675"></a>00675     closedir($d);
<a name="l00676"></a>00676     
<a name="l00677"></a>00677     $d = opendir(<a class="code" href="install_8php.html#a5ade1bb16ee3a241cefc0b84918f1598">$folder</a>);
<a name="l00678"></a>00678     <span class="keywordflow">while</span>(<span class="keyword">false</span>!==($entry = readdir($d))) {
<a name="l00679"></a>00679         <span class="keywordflow">if</span>(($entry != <span class="charliteral">&#39;.&#39;</span>) &amp;&amp; ($entry != <span class="stringliteral">&#39;..&#39;</span>) &amp;&amp; (!is_dir($dir.$entry)) ) {
<a name="l00680"></a>00680             <span class="keywordflow">if</span>($entry[0]==<span class="stringliteral">&quot;t&quot;</span>) {
<a name="l00681"></a>00681                 $ft=<a class="code" href="lib_8file_8php.html#a0145e555488271a734d8f0ba81a1b283">sc_getfiletype</a>($entry);             
<a name="l00682"></a>00682                 <span class="keywordflow">switch</span>($ft) {                   
<a name="l00683"></a>00683                     <span class="keywordflow">case</span> <span class="stringliteral">&quot;gif&quot;</span>:
<a name="l00684"></a>00684                     <span class="keywordflow">case</span> <span class="stringliteral">&quot;jpg&quot;</span>:
<a name="l00685"></a>00685                     <span class="keywordflow">case</span> <span class="stringliteral">&quot;png&quot;</span>:                 
<a name="l00686"></a>00686                         <a class="code" href="thumbnail_8php.html#a56a9a0da0c26b3d3029cea47a6b9292f">$img</a>=<span class="stringliteral">&quot;$RFS_SITE_URL/themes/$thm/$entry&quot;</span>;
<a name="l00687"></a>00687                         echo <span class="stringliteral">&quot;&lt;hr&gt;&quot;</span>;
<a name="l00688"></a>00688                         echo <span class="stringliteral">&quot;&lt;a href=\&quot;$RFS_SITE_URL/admin/adm.php?action=f_theme_edit_delete&amp;thm=$thm&amp;dfile=$entry\&quot; &gt;</span>
<a name="l00689"></a>00689 <span class="stringliteral">                        &lt;img src=\&quot;$RFS_SITE_URL/images/icons/Delete.png\&quot; border=0 width=16&gt;&lt;/a&gt;&quot;</span>;                     
<a name="l00690"></a>00690                         echo <span class="stringliteral">&quot;$img:&lt;br&gt;&quot;</span>;
<a name="l00691"></a>00691                         echo <span class="stringliteral">&quot;&lt;img src=\&quot;$img\&quot;&gt;&lt;br&gt;&quot;</span>;
<a name="l00692"></a>00692                         <span class="keywordflow">break</span>;
<a name="l00693"></a>00693                     <span class="keywordflow">default</span>: 
<a name="l00694"></a>00694                         <span class="keywordflow">break</span>;
<a name="l00695"></a>00695                     
<a name="l00696"></a>00696                 }
<a name="l00697"></a>00697             }
<a name="l00698"></a>00698         }
<a name="l00699"></a>00699     }   
<a name="l00700"></a>00700     closedir($d);
<a name="l00701"></a>00701     
<a name="l00702"></a>00702     
<a name="l00703"></a>00703     include( <span class="stringliteral">&quot;footer.php&quot;</span> );
<a name="l00704"></a>00704     exit();
<a name="l00705"></a>00705 }
<a name="l00706"></a>00706 
<a name="l00707"></a><a class="code" href="adm_8php.html#a5dddb69b60010e05080d7e7091a1092b">00707</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a5dddb69b60010e05080d7e7091a1092b">adm_action_f_theme_view_classes</a>() { eval(<a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>());
<a name="l00708"></a>00708     <a class="code" href="thumbnail_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a>=<span class="stringliteral">&quot;$RFS_SITE_PATH/classes.out.txt&quot;</span>;
<a name="l00709"></a>00709     echo <a class="code" href="thumbnail_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a>.<span class="stringliteral">&quot;&lt;BR&gt;&quot;</span>;
<a name="l00710"></a>00710     echo <span class="stringliteral">&quot;&lt;pre&gt;&quot;</span>;
<a name="l00711"></a>00711     include(<a class="code" href="thumbnail_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a>);
<a name="l00712"></a>00712     echo <span class="stringliteral">&quot;&lt;/pre&gt;&quot;</span>;
<a name="l00713"></a>00713     <a class="code" href="adm_8php.html#a0615a29e6c064bd5c0c3757734096f3d">adm_action_theme</a>();
<a name="l00714"></a>00714 }
<a name="l00715"></a>00715 
<a name="l00716"></a><a class="code" href="adm_8php.html#a0615a29e6c064bd5c0c3757734096f3d">00716</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a0615a29e6c064bd5c0c3757734096f3d">adm_action_theme</a>() { eval(<a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>());
<a name="l00717"></a>00717 
<a name="l00718"></a>00718     echo <span class="stringliteral">&quot;&lt;h3&gt;Theme Editor&lt;/h3&gt;&quot;</span>;
<a name="l00719"></a>00719 
<a name="l00720"></a>00720     <a class="code" href="lib_8buttons_8php.html#a666362cb0a8603c56ee45762028a24a4">sc_button</a>(<span class="stringliteral">&quot;$RFS_SITE_URL/admin/adm.php?action=f_theme_view_classes&quot;</span>,<span class="stringliteral">&quot;View CSS Classes&quot;</span>);
<a name="l00721"></a>00721     echo <span class="stringliteral">&quot;&lt;table border=0&gt;&quot;</span>;
<a name="l00722"></a>00722     $thms=<a class="code" href="lib_8rfs_8php.html#a0d1d884ddac61fcb47cd073833664bea">sc_get_themes</a>();
<a name="l00723"></a>00723     <span class="keywordflow">while</span>(list($key,$thm)=each($thms)) {
<a name="l00724"></a>00724         echo <span class="stringliteral">&quot;&lt;tr&gt;&quot;</span>;
<a name="l00725"></a>00725         
<a name="l00726"></a>00726         echo <span class="stringliteral">&quot;&lt;td&gt;&quot;</span>;
<a name="l00727"></a>00727         $sample=<span class="stringliteral">&quot;themes/$thm/t.sample.png&quot;</span>;
<a name="l00728"></a>00728         <span class="keywordflow">if</span>(file_exists(<span class="stringliteral">&quot;$RFS_SITE_PATH/$sample&quot;</span>)) {
<a name="l00729"></a>00729             echo <a class="code" href="lib_8images_8php.html#ad53b34acc1774634ab3f64856cbfd6ba">sc_picthumb</a>(<span class="stringliteral">&quot;$RFS_SITE_PATH/$sample&quot;</span>,120,120,1);
<a name="l00730"></a>00730         }
<a name="l00731"></a>00731         echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l00732"></a>00732     
<a name="l00733"></a>00733         echo <span class="stringliteral">&quot;&lt;td&gt;$thm&lt;/td&gt;&lt;td&gt;&quot;</span>;
<a name="l00734"></a>00734         echo <span class="stringliteral">&quot;[&lt;a href=\&quot;$RFS_SITE_URL/admin/adm.php?action=f_theme_edit&amp;thm=$thm\&quot;&gt;edit&lt;/a&gt;] &quot;</span>;
<a name="l00735"></a>00735         echo <span class="stringliteral">&quot;[&lt;a href=\&quot;$RFS_SITE_URL/admin/adm.php?action=f_theme_clone&amp;thm=$thm\&quot;&gt;clone&lt;/a&gt;] &quot;</span>;
<a name="l00736"></a>00736         echo <span class="stringliteral">&quot;[&lt;a href=\&quot;$RFS_SITE_URL/admin/adm.php?action=f_theme_delete&amp;thm=$thm\&quot;&gt;delete&lt;/a&gt;] &quot;</span>;
<a name="l00737"></a>00737         echo <span class="stringliteral">&quot;&lt;/td&gt;&lt;/tr&gt;&quot;</span>;
<a name="l00738"></a>00738     }
<a name="l00739"></a>00739     echo <span class="stringliteral">&quot;&lt;/table&gt;&quot;</span>;
<a name="l00740"></a>00740     include( <span class="stringliteral">&quot;footer.php&quot;</span> );
<a name="l00741"></a>00741     exit();
<a name="l00742"></a>00742 }
<a name="l00743"></a>00743 
<a name="l00744"></a>00744 
<a name="l00745"></a>00745 
<a name="l00746"></a>00746 
<a name="l00747"></a>00747 
<a name="l00748"></a>00748 
<a name="l00749"></a>00749 <span class="comment"></span>
<a name="l00750"></a>00750 <span class="comment">////////////////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l00751"></a>00751 <span class="comment"></span><span class="comment">// ADM_FORUMS</span>
<a name="l00752"></a><a class="code" href="adm_8php.html#afd09da1c2fb40e866df9869f28e8dfb6">00752</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#afd09da1c2fb40e866df9869f28e8dfb6">adm_action_f_modify_forum</a>() { eval(<a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>());
<a name="l00753"></a>00753     echo <span class="stringliteral">&quot;&lt;h3&gt;Forum $name updated&lt;/h3&gt;&quot;</span>;
<a name="l00754"></a>00754     <a class="code" href="lib_8mysql_8php.html#a859cf356f7e78d2c2a45011f30e3ce91">sc_updb</a>( <span class="stringliteral">&quot;forum_list&quot;</span>,<span class="stringliteral">&quot;id&quot;</span>,$id, 1 );
<a name="l00755"></a>00755     <a class="code" href="adm_8php.html#aebc49a28621d1a21df14e630d54d8878">adm_action_forum_admin</a>();
<a name="l00756"></a>00756 }<span class="comment"></span>
<a name="l00757"></a>00757 <span class="comment">/////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l00758"></a><a class="code" href="adm_8php.html#a28d52b7190b9adb31b38aabf1ce63abb">00758</a> <span class="comment"></span><span class="keyword">function</span> <a class="code" href="adm_8php.html#a28d52b7190b9adb31b38aabf1ce63abb">adm_action_f_edit_forum</a>() { eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l00759"></a>00759     <a class="code" href="link__out_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a>=<a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;select * from forum_list where `name`=&#39;$name&#39;&quot;</span> );
<a name="l00760"></a>00760     $der=mysql_fetch_object( <a class="code" href="link__out_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a> );
<a name="l00761"></a>00761     $forum_name=$der-&gt;name;
<a name="l00762"></a>00762     echo <span class="stringliteral">&quot;&lt;h3&gt;[$forum_name] (id:$der-&gt;id)&lt;/h3&gt;\n&quot;</span>;
<a name="l00763"></a>00763     <a class="code" href="lib_8mysql_8php.html#ab2a2e03dfc31eb5074a990325393609d">sc_bf</a>( <span class="stringliteral">&quot;$RFS_SITE_URL/admin/adm.php&quot;</span>,
<a name="l00764"></a>00764            <span class="stringliteral">&quot;action=f_modify_forum&quot;</span>,
<a name="l00765"></a>00765            <span class="stringliteral">&quot;forum_list&quot;</span>, <span class="stringliteral">&quot;select * from forum_list where name=&#39;$forum_name&#39;;&quot;</span>,
<a name="l00766"></a>00766            <span class="stringliteral">&quot;id&quot;</span>,<span class="stringliteral">&quot;&quot;</span>,<span class="stringliteral">&quot;omit&quot;</span>,<span class="stringliteral">&quot;&quot;</span>,100,<span class="stringliteral">&quot;submit&quot;</span> );
<a name="l00767"></a>00767     <a class="code" href="adm_8php.html#aebc49a28621d1a21df14e630d54d8878">adm_action_forum_admin</a>();
<a name="l00768"></a>00768 }<span class="comment"></span>
<a name="l00769"></a>00769 <span class="comment">/////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l00770"></a><a class="code" href="adm_8php.html#adaaea1a032db30c071e15a772aa384de">00770</a> <span class="comment"></span><span class="keyword">function</span> <a class="code" href="adm_8php.html#adaaea1a032db30c071e15a772aa384de">adm_action_f_add_forum</a>() { eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l00771"></a>00771     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;insert into forum_list (`name`) VALUES (&#39;$name&#39;) ; &quot;</span> );
<a name="l00772"></a>00772     <a class="code" href="adm_8php.html#a28d52b7190b9adb31b38aabf1ce63abb">adm_action_f_edit_forum</a>();
<a name="l00773"></a>00773 }<span class="comment"></span>
<a name="l00774"></a>00774 <span class="comment">/////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l00775"></a><a class="code" href="adm_8php.html#aebc49a28621d1a21df14e630d54d8878">00775</a> <span class="comment"></span><span class="keyword">function</span> <a class="code" href="adm_8php.html#aebc49a28621d1a21df14e630d54d8878">adm_action_forum_admin</a>() { eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l00776"></a>00776     <a class="code" href="wab_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a>=addslashes( <a class="code" href="wab_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a> );
<a name="l00777"></a>00777     <a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a>=<a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;select * from forum_list&quot;</span> );
<a name="l00778"></a>00778     $n=mysql_num_rows( <a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a> );
<a name="l00779"></a>00779     <span class="keywordflow">if</span>( $n==0 ) echo <span class="stringliteral">&quot;&lt;p&gt;No forums defined.&lt;/p&gt;&quot;</span>;
<a name="l00780"></a>00780     <a class="code" href="lib_8mysql_8php.html#ab2a2e03dfc31eb5074a990325393609d">sc_bf</a>( <span class="stringliteral">&quot;$RFS_SITE_URL/admin/adm.php&quot;</span>,
<a name="l00781"></a>00781            <span class="stringliteral">&quot;action=f_add_forum&quot;</span>.<a class="code" href="config_8sitevars_8php.html#a06fab752c166675deeb7a9191add17ab">$RFS_SITE_DELIMITER</a>.
<a name="l00782"></a>00782            <span class="stringliteral">&quot;SHOW_TEXT_New_Forum=new forum&quot;</span>.$RFS_SITE_DELIMITER.
<a name="l00783"></a>00783            <span class="stringliteral">&quot;name=$name&quot;</span>,
<a name="l00784"></a>00784            <span class="stringliteral">&quot;forum_list&quot;</span>,
<a name="l00785"></a>00785            <span class="stringliteral">&quot;select * from forum_list where name=&#39;$name&#39;;&quot;</span>,
<a name="l00786"></a>00786            <span class="stringliteral">&quot;&quot;</span>,
<a name="l00787"></a>00787            <span class="stringliteral">&quot;&quot;</span>,
<a name="l00788"></a>00788            <span class="stringliteral">&quot;include&quot;</span>,
<a name="l00789"></a>00789            <span class="stringliteral">&quot;&quot;</span>,
<a name="l00790"></a>00790            100,
<a name="l00791"></a>00791            <span class="stringliteral">&quot;Add&quot;</span> );
<a name="l00792"></a>00792     <span class="keywordflow">for</span>( $i=0; $i&lt;$n; $i++ ) {
<a name="l00793"></a>00793         $der=mysql_fetch_object( <a class="code" href="sp_8php.html#a8abe176bc41afd728f32ba8c506cbd98">$r</a> );
<a name="l00794"></a>00794         <a class="code" href="wab_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a>=$der-&gt;name;
<a name="l00795"></a>00795         <span class="comment">// echo &quot;&lt;tr&gt;&lt;td&gt;&quot;;</span>
<a name="l00796"></a>00796         <a class="code" href="lib_8mysql_8php.html#ab2a2e03dfc31eb5074a990325393609d">sc_bf</a>( <span class="stringliteral">&quot;$RFS_SITE_URL/admin/adm.php&quot;</span>,
<a name="l00797"></a>00797                <span class="stringliteral">&quot;action=f_edit_forum&quot;</span>.<a class="code" href="config_8sitevars_8php.html#a06fab752c166675deeb7a9191add17ab">$RFS_SITE_DELIMITER</a>.
<a name="l00798"></a>00798                <span class="stringliteral">&quot;name=$name&quot;</span>,
<a name="l00799"></a>00799                <span class="stringliteral">&quot;forum_list&quot;</span>,
<a name="l00800"></a>00800                <span class="stringliteral">&quot;select * from forum_list where name=&#39;$name&#39;;&quot;</span>,
<a name="l00801"></a>00801                <span class="stringliteral">&quot;&quot;</span>,
<a name="l00802"></a>00802                <span class="stringliteral">&quot;&quot;</span>,
<a name="l00803"></a>00803                <span class="stringliteral">&quot;include&quot;</span>,
<a name="l00804"></a>00804                <span class="stringliteral">&quot;&quot;</span>,
<a name="l00805"></a>00805                100,
<a name="l00806"></a>00806                <span class="stringliteral">&quot;Edit&quot;</span> );
<a name="l00807"></a>00807         <span class="comment">// echo &quot;&lt;/td&gt;&lt;td&gt;</span>
<a name="l00808"></a>00808         echo <a class="code" href="wab_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a>; <span class="comment">//&lt;/td&gt;&lt;/tr&gt;&quot;;</span>
<a name="l00809"></a>00809     }
<a name="l00810"></a>00810     <span class="comment">//echo &quot;&lt;/table&gt;&quot;;</span>
<a name="l00811"></a>00811 }<span class="comment"></span>
<a name="l00812"></a>00812 <span class="comment">////////////////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l00813"></a>00813 <span class="comment"></span><span class="comment">// ADM_SITE VARS</span>
<a name="l00814"></a><a class="code" href="adm_8php.html#a6e3a8c2da3942ace294006b3f623ba33">00814</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a6e3a8c2da3942ace294006b3f623ba33">adm_action_f_addsitevar</a>() { eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l00815"></a>00815     <a class="code" href="wab_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a>=strtolower( <a class="code" href="wab_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a> );
<a name="l00816"></a>00816     <a class="code" href="wab_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a>=str_replace( <span class="stringliteral">&quot; &quot;</span>,<span class="stringliteral">&quot;_&quot;</span>,<a class="code" href="wab_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a> );
<a name="l00817"></a>00817     $val=addslashes( $_REQUEST[<span class="stringliteral">&#39;val&#39;</span>] );
<a name="l00818"></a>00818     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;insert into `site_vars` (`name`,`value`) values (&#39;$name&#39;,&#39;$val&#39;)&quot;</span> );
<a name="l00819"></a>00819     <a class="code" href="adm_8php.html#a92f9924e31d6460b7e54ef0a1553bf08">adm_action_edit_site_vars</a>();
<a name="l00820"></a>00820 }
<a name="l00821"></a><a class="code" href="adm_8php.html#ad6bf8be7b65dfcf97317d89ac8ebe528">00821</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#ad6bf8be7b65dfcf97317d89ac8ebe528">adm_action_f_upsitevar</a>() { eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l00822"></a>00822     echo <a class="code" href="wab_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a>;
<a name="l00823"></a>00823     echo <span class="stringliteral">&quot;&lt;br&gt;&quot;</span>;
<a name="l00824"></a>00824     echo $val;
<a name="l00825"></a>00825     $name=strtolower( $name );
<a name="l00826"></a>00826     $name=str_replace( <span class="stringliteral">&quot; &quot;</span>,<span class="stringliteral">&quot;_&quot;</span>,$name );
<a name="l00827"></a>00827     $val=addslashes( $_REQUEST[<span class="stringliteral">&#39;val&#39;</span>] );
<a name="l00828"></a>00828     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>(<span class="stringliteral">&quot;update `site_vars` set `name`=&#39;$name&#39; where id=&#39;$id&#39;&quot;</span>);
<a name="l00829"></a>00829     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>(<span class="stringliteral">&quot;update `site_vars` set `value`=&#39;$val&#39; where id=&#39;$id&#39;&quot;</span>);
<a name="l00830"></a>00830     <a class="code" href="adm_8php.html#a92f9924e31d6460b7e54ef0a1553bf08">adm_action_edit_site_vars</a>();
<a name="l00831"></a>00831 }
<a name="l00832"></a><a class="code" href="adm_8php.html#a9fb20851caed11d93dc5b53982de6094">00832</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a9fb20851caed11d93dc5b53982de6094">adm_action_f_delsitevar_go</a>() { eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l00833"></a>00833     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;delete from `site_vars` where `id`=&#39;$id&#39;&quot;</span> );
<a name="l00834"></a>00834     <a class="code" href="adm_8php.html#a92f9924e31d6460b7e54ef0a1553bf08">adm_action_edit_site_vars</a>();
<a name="l00835"></a>00835 }
<a name="l00836"></a><a class="code" href="adm_8php.html#add82feef5c2e3494081989990805f154">00836</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#add82feef5c2e3494081989990805f154">adm_action_f_delsitevar</a>() { eval(<a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>());
<a name="l00837"></a>00837     $site_var=<a class="code" href="lib_8mysql_8php.html#ad42d2c11477299cecf3dd06b259a316e">mfo1</a>(<span class="stringliteral">&quot;select * from site_vars where id=&#39;$id&#39;&quot;</span>);
<a name="l00838"></a>00838     <a class="code" href="lib_8mysql_8php.html#a238eaa47b98b06591deb8e16a715e14c">sc_confirmform</a>(<span class="stringliteral">&quot;&lt;p&gt;Delete \$RFS_SITE_$site_var-&gt;name ?&lt;/p&gt;&quot;</span>,<span class="stringliteral">&quot;$RFS_SITE_URL/admin/adm.php?action=f_delsitevar_go&quot;</span>,<span class="stringliteral">&quot;id=$id&quot;</span>);
<a name="l00839"></a>00839     <a class="code" href="adm_8php.html#a92f9924e31d6460b7e54ef0a1553bf08">adm_action_edit_site_vars</a>();
<a name="l00840"></a>00840 }
<a name="l00841"></a><a class="code" href="adm_8php.html#a92f9924e31d6460b7e54ef0a1553bf08">00841</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a92f9924e31d6460b7e54ef0a1553bf08">adm_action_edit_site_vars</a>() { eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l00842"></a>00842 
<a name="l00843"></a>00843     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>(<span class="stringliteral">&quot;ALTER TABLE `site_vars` ADD `id` INT NOT NULL AUTO_INCREMENT PRIMARY KEY FIRST&quot;</span>);
<a name="l00844"></a>00844 
<a name="l00845"></a>00845     echo <span class="stringliteral">&quot;&lt;h3&gt;Edit Site Information&lt;/h3&gt;&quot;</span>;
<a name="l00846"></a>00846     echo <span class="stringliteral">&quot;&lt;p&gt;These variables will be loaded into global scope.&lt;/p&gt;&quot;</span>;
<a name="l00847"></a>00847     echo <span class="stringliteral">&quot;&lt;table border=0&gt;&quot;</span>;
<a name="l00848"></a>00848     <a class="code" href="lib_8sitevars_8php.html#a49a8a4009b02e49717caa88b128affc5">$res</a>=<a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;select * from site_vars order by name&quot;</span> );
<a name="l00849"></a>00849     <span class="keywordflow">for</span>( $i=0; $i&lt;mysql_num_rows( <a class="code" href="lib_8sitevars_8php.html#a49a8a4009b02e49717caa88b128affc5">$res</a> ); $i++ ) {
<a name="l00850"></a>00850         $site_var=mysql_fetch_object( <a class="code" href="lib_8sitevars_8php.html#a49a8a4009b02e49717caa88b128affc5">$res</a> );
<a name="l00851"></a>00851         echo <span class="stringliteral">&quot;&lt;form enctype=application/x-www-form-URLencoded action=\&quot;$RFS_SITE_URL/admin/adm.php\&quot; method=\&quot;post\&quot; enctype=\&quot;application/x-www-form-URLencoded\&quot;&gt;&quot;</span>;
<a name="l00852"></a>00852         echo <span class="stringliteral">&quot;&lt;tr&gt;&lt;td&gt;&quot;</span>;
<a name="l00853"></a>00853         echo <span class="stringliteral">&quot;&lt;input type=hidden name=action value=\&quot;f_upsitevar\&quot;&gt;&quot;</span>;
<a name="l00854"></a>00854         echo <span class="stringliteral">&quot;&lt;input type=hidden name=id value=\&quot;$site_var-&gt;id\&quot;&gt;&quot;</span>;
<a name="l00855"></a>00855         $site_var-&gt;name=strtoupper(stripslashes(($site_var-&gt;name)));
<a name="l00856"></a>00856         echo <span class="stringliteral">&quot;\$RFS_SITE_&lt;input name=name value=\&quot;$site_var-&gt;name\&quot;&gt; = &quot;</span>;
<a name="l00857"></a>00857         $site_var-&gt;value=stripslashes( $site_var-&gt;value );
<a name="l00858"></a>00858         echo <span class="stringliteral">&quot;&lt;input name=val size=40 value=\&quot;$site_var-&gt;value\&quot;&gt;&quot;</span>;
<a name="l00859"></a>00859         echo <span class="stringliteral">&quot;&lt;input type=submit value=\&quot;Update\&quot;&gt;&quot;</span>;
<a name="l00860"></a>00860         
<a name="l00861"></a>00861         echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l00862"></a>00862         echo <span class="stringliteral">&quot;&lt;/form&gt;&quot;</span>;
<a name="l00863"></a>00863         echo <span class="stringliteral">&quot;&lt;td&gt;&quot;</span>;
<a name="l00864"></a>00864         <a class="code" href="lib_8buttons_8php.html#a666362cb0a8603c56ee45762028a24a4">sc_button</a>(<span class="stringliteral">&quot;$RFS_SITE_URL/admin/adm.php?action=f_delsitevar&amp;id=$site_var-&gt;id&quot;</span>,<span class="stringliteral">&quot;Delete&quot;</span>);
<a name="l00865"></a>00865         echo <span class="stringliteral">&quot;&lt;/td&gt;&lt;/tr&gt;&quot;</span>;
<a name="l00866"></a>00866     }
<a name="l00867"></a>00867     echo <span class="stringliteral">&quot;&lt;tr&gt;&lt;td&gt;&quot;</span>;
<a name="l00868"></a>00868     echo <span class="stringliteral">&quot;&lt;form enctype=application/x-www-form-URLencoded action=\&quot;$RFS_SITE_URL/admin/adm.php\&quot;&gt;&quot;</span>;
<a name="l00869"></a>00869     echo <span class="stringliteral">&quot;&lt;input type=hidden name=action value=\&quot;f_addsitevar\&quot;&gt;&quot;</span>;
<a name="l00870"></a>00870     echo <span class="stringliteral">&quot;&lt;input type=hidden name=id value=\&quot;$site_var-&gt;id\&quot;&gt;&quot;</span>;
<a name="l00871"></a>00871     echo <span class="stringliteral">&quot;\$RFS_SITE_&lt;input name=name value=\&quot;ADD NEW\&quot;&gt; = &quot;</span>;
<a name="l00872"></a>00872     echo <span class="stringliteral">&quot;&lt;input name=val size=40 value=\&quot;\&quot;&gt;&quot;</span>;
<a name="l00873"></a>00873     echo <span class="stringliteral">&quot;&lt;input type=submit value=\&quot;go\&quot;&gt;&quot;</span>;
<a name="l00874"></a>00874     echo <span class="stringliteral">&quot;&lt;/form&gt;&quot;</span>;
<a name="l00875"></a>00875     echo <span class="stringliteral">&quot;&lt;/td&gt;&lt;td&gt;&quot;</span>;
<a name="l00876"></a>00876     echo <span class="stringliteral">&quot;&lt;/td&gt;&lt;/tr&gt;&quot;</span>;
<a name="l00877"></a>00877     echo <span class="stringliteral">&quot;&lt;/table&gt;&quot;</span>;
<a name="l00878"></a>00878 }<span class="comment"></span>
<a name="l00879"></a>00879 <span class="comment">///////////////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l00880"></a>00880 <span class="comment"></span><span class="comment">// ADM_MENU ADMIN</span>
<a name="l00881"></a><a class="code" href="adm_8php.html#aef16e5b98508317a04b62e975445f424">00881</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#aef16e5b98508317a04b62e975445f424">adm_action_f_admin_menu_change_icon</a>() { eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l00882"></a>00882     <a class="code" href="session_8php.html#ad56c24858a88af52e4da3ae2f6a2b3b0">$_SESSION</a>[<span class="stringliteral">&#39;select_image_path&#39;</span>]=<span class="stringliteral">&quot;&quot;</span>;
<a name="l00883"></a>00883     <a class="code" href="lib_8mysql_8php.html#a172f01492eb228b893671cf2a02849a8">sc_selectimage</a>( <span class="stringliteral">&quot;images&quot;</span>,<span class="stringliteral">&quot;admin/adm.php&quot;</span>,<span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;admin_menu&quot;</span>, $id, <span class="stringliteral">&quot;icon&quot;</span> );
<a name="l00884"></a>00884 }
<a name="l00885"></a><a class="code" href="adm_8php.html#a18b3f400bb2e8cd263c40de1429c5e0f">00885</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a18b3f400bb2e8cd263c40de1429c5e0f">adm_action_f_admin_menu_edit_del_go</a>() { eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l00886"></a>00886     <a class="code" href="lib_8sitevars_8php.html#a49a8a4009b02e49717caa88b128affc5">$res</a>=<a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;select * from admin_menu where `id`=&#39;$id&#39;&quot;</span> );
<a name="l00887"></a>00887     $menuitem=mysql_fetch_object( <a class="code" href="lib_8sitevars_8php.html#a49a8a4009b02e49717caa88b128affc5">$res</a> );
<a name="l00888"></a>00888     echo <span class="stringliteral">&quot;&lt;h3&gt;Edit Admin Menu :: Delete $menuitem-&gt;name :: DELETED!&lt;/h3&gt;&quot;</span>;
<a name="l00889"></a>00889     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;delete from admin_menu where `id`=&#39;$id&#39;&quot;</span> );
<a name="l00890"></a>00890     <span class="keywordflow">if</span>( <a class="code" href="session_8php.html#ad56c24858a88af52e4da3ae2f6a2b3b0">$_SESSION</a>[<span class="stringliteral">&#39;admed&#39;</span>]==<span class="stringliteral">&quot;on&quot;</span> ) <a class="code" href="adm_8php.html#ace8c7439fed268e4befe9585719e1aca">adm_action_</a>();
<a name="l00891"></a>00891     <span class="keywordflow">else</span> <a class="code" href="adm_8php.html#a924952c6aa96e4c2950a173b574c9fec">adm_action_admin_menu_edit</a>();
<a name="l00892"></a>00892 }
<a name="l00893"></a><a class="code" href="adm_8php.html#a8ca9c7209f4167ca0fda4e5f55eadb8c">00893</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a8ca9c7209f4167ca0fda4e5f55eadb8c">adm_action_f_admin_menu_edit_del</a>() { eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l00894"></a>00894     <a class="code" href="lib_8sitevars_8php.html#a49a8a4009b02e49717caa88b128affc5">$res</a>=<a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;select * from admin_menu where `id`=&#39;$id&#39;&quot;</span> );
<a name="l00895"></a>00895     $menuitem=mysql_fetch_object( <a class="code" href="lib_8sitevars_8php.html#a49a8a4009b02e49717caa88b128affc5">$res</a> );
<a name="l00896"></a>00896     echo <span class="stringliteral">&quot;&lt;h3&gt;Edit Admin Menu&lt;/h3&gt;&quot;</span>;
<a name="l00897"></a>00897     echo <span class="stringliteral">&quot;&lt;table class=warning&gt;&lt;tr&gt;&lt;td&gt;&quot;</span>;
<a name="l00898"></a>00898     echo <a class="code" href="lib_8rfs_8php.html#ae90d9606f0fc99c3462a0bc897b4d6bd">smiles</a>( <span class="stringliteral">&quot;Delete $menuitem-&gt;name ^X&quot;</span> );
<a name="l00899"></a>00899     echo <span class="stringliteral">&quot;&lt;form enctype=\&quot;application/x-www-form-URLencoded\&quot; method=\&quot;post\&quot; action=\&quot;$RFS_SITE_URL/admin/adm.php\&quot;&gt;&quot;</span>;
<a name="l00900"></a>00900     echo <span class="stringliteral">&quot;&lt;input type=hidden name=action value=f_admin_menu_edit_del_go&gt;&quot;</span>;
<a name="l00901"></a>00901     echo <span class="stringliteral">&quot;&lt;input type=hidden name=id value=$id&gt;&quot;</span>;
<a name="l00902"></a>00902     echo <span class="stringliteral">&quot;&lt;input type=submit name=submit value=confirm&gt;&lt;/form&gt;&quot;</span>;
<a name="l00903"></a>00903     echo <span class="stringliteral">&quot;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&quot;</span>;
<a name="l00904"></a>00904     <span class="keywordflow">if</span>( <a class="code" href="session_8php.html#ad56c24858a88af52e4da3ae2f6a2b3b0">$_SESSION</a>[<span class="stringliteral">&#39;admed&#39;</span>]==<span class="stringliteral">&quot;on&quot;</span> ) <a class="code" href="adm_8php.html#ace8c7439fed268e4befe9585719e1aca">adm_action_</a>();
<a name="l00905"></a>00905     <span class="keywordflow">else</span> <a class="code" href="adm_8php.html#a924952c6aa96e4c2950a173b574c9fec">adm_action_admin_menu_edit</a>();
<a name="l00906"></a>00906 }
<a name="l00907"></a><a class="code" href="adm_8php.html#a835f395c55cf333c6f118fc48d58ddd0">00907</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a835f395c55cf333c6f118fc48d58ddd0">adm_action_f_admin_menu_edit_add</a>() { eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l00908"></a>00908     echo <span class="stringliteral">&quot;&lt;h3&gt;Edit Admin Menu :: Add $mname&lt;/h3&gt;&quot;</span>;
<a name="l00909"></a>00909     $mname      =addslashes( $_REQUEST[<span class="stringliteral">&#39;mname&#39;</span>] );
<a name="l00910"></a>00910     $murl       =addslashes( $_REQUEST[<span class="stringliteral">&#39;murl&#39;</span>] );
<a name="l00911"></a>00911     $mtarget    =addslashes( $_REQUEST[<span class="stringliteral">&#39;mtarget&#39;</span>] );
<a name="l00912"></a>00912     $q=<span class="stringliteral">&quot;INSERT INTO `admin_menu`    (`category`,      `name`,    `icon`,    `url`,     `target`)</span>
<a name="l00913"></a>00913 <span class="stringliteral">       VALUES (&#39;$mcategory&#39;,  &#39;$mname&#39;,  &#39;$micon&#39;,  &#39;$murl&#39;,   &#39;$mtarget&#39;) ;&quot;</span>;
<a name="l00914"></a>00914     echo $q.<span class="stringliteral">&quot;&lt;BR&gt;&quot;</span>;
<a name="l00915"></a>00915     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( $q );
<a name="l00916"></a>00916     <span class="keywordflow">if</span>( <a class="code" href="session_8php.html#ad56c24858a88af52e4da3ae2f6a2b3b0">$_SESSION</a>[<span class="stringliteral">&#39;admed&#39;</span>]==<span class="stringliteral">&quot;on&quot;</span> ) <a class="code" href="adm_8php.html#ace8c7439fed268e4befe9585719e1aca">adm_action_</a>();
<a name="l00917"></a>00917     <span class="keywordflow">else</span> <a class="code" href="adm_8php.html#a924952c6aa96e4c2950a173b574c9fec">adm_action_admin_menu_edit</a>();
<a name="l00918"></a>00918 
<a name="l00919"></a>00919 }
<a name="l00920"></a><a class="code" href="adm_8php.html#aa8c44c3b6ceb55a1fb8f74167f680fb1">00920</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#aa8c44c3b6ceb55a1fb8f74167f680fb1">adm_action_f_admin_change_category</a>() { eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l00921"></a>00921     echo <span class="stringliteral">&quot;id: $id&lt;br&gt;&quot;</span>;
<a name="l00922"></a>00922     echo <span class="stringliteral">&quot;cat: $name&lt;br&gt;&quot;</span>;
<a name="l00923"></a>00923     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;update admin_menu set `category`=&#39;$name&#39; where `id`=&#39;$id&#39;&quot;</span> );
<a name="l00924"></a>00924     <span class="keywordflow">if</span>( <a class="code" href="session_8php.html#ad56c24858a88af52e4da3ae2f6a2b3b0">$_SESSION</a>[<span class="stringliteral">&#39;admed&#39;</span>]==<span class="stringliteral">&quot;on&quot;</span> ) <a class="code" href="adm_8php.html#ace8c7439fed268e4befe9585719e1aca">adm_action_</a>();
<a name="l00925"></a>00925     <span class="keywordflow">else</span> <a class="code" href="adm_8php.html#a924952c6aa96e4c2950a173b574c9fec">adm_action_admin_menu_edit</a>();
<a name="l00926"></a>00926 }
<a name="l00927"></a><a class="code" href="adm_8php.html#a3b4a1832441c738d337ba60256318e4b">00927</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a3b4a1832441c738d337ba60256318e4b">adm_action_f_admin_menu_edit_mod</a>() { eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l00928"></a>00928     <a class="code" href="lib_8sitevars_8php.html#a49a8a4009b02e49717caa88b128affc5">$res</a>=<a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;select * from admin_menu where `id`=&#39;$id&#39;&quot;</span> );
<a name="l00929"></a>00929     $menuitem=mysql_fetch_object( <a class="code" href="lib_8sitevars_8php.html#a49a8a4009b02e49717caa88b128affc5">$res</a> );
<a name="l00930"></a>00930     <span class="keywordflow">if</span>(empty($mname)) $mname=<a class="code" href="wab_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a>;
<a name="l00931"></a>00931     echo <span class="stringliteral">&quot;&lt;h3&gt;Edit Admin Menu :: Modify $menuitem-&gt;name = $mname&lt;/h3&gt;&quot;</span>;
<a name="l00932"></a>00932     <span class="keywordflow">if</span>( empty( $mname ) )       $mname=$menuitem-&gt;name;
<a name="l00933"></a>00933     <span class="keywordflow">if</span>( empty( $murl ) )        $murl =$menuitem-&gt;url;
<a name="l00934"></a>00934     <span class="keywordflow">if</span>( empty( $micon ) )       $micon=$menuitem-&gt;icon;
<a name="l00935"></a>00935     <span class="keywordflow">if</span>( empty( $mtarget ) )     $mtarget=$menuitem-&gt;target;
<a name="l00936"></a>00936     <span class="keywordflow">if</span>( empty( $mcategory ) )   $mcategory=$menuitem-&gt;category;
<a name="l00937"></a>00937     echo $murl;
<a name="l00938"></a>00938     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;update admin_menu set `name`=&#39;$mname&#39; where `id`=&#39;$id&#39;&quot;</span> );
<a name="l00939"></a>00939     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;update admin_menu set `url`=&#39;$murl&#39; where `id`=&#39;$id&#39;&quot;</span> );
<a name="l00940"></a>00940     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;update admin_menu set `icon`=&#39;$micon&#39; where `id`=&#39;$id&#39;&quot;</span> );
<a name="l00941"></a>00941     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;update admin_menu set `target`=&#39;$mtarget&#39; where `id`=&#39;$id&#39;&quot;</span> );
<a name="l00942"></a>00942     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;update admin_menu set `category`=&#39;$mcategory&#39; where `id`=&#39;$id&#39;&quot;</span> );
<a name="l00943"></a>00943     <span class="keywordflow">if</span>( <a class="code" href="session_8php.html#ad56c24858a88af52e4da3ae2f6a2b3b0">$_SESSION</a>[<span class="stringliteral">&#39;admed&#39;</span>]==<span class="stringliteral">&quot;on&quot;</span> ) <a class="code" href="adm_8php.html#ace8c7439fed268e4befe9585719e1aca">adm_action_</a>();
<a name="l00944"></a>00944     <span class="keywordflow">else</span> <a class="code" href="adm_8php.html#a924952c6aa96e4c2950a173b574c9fec">adm_action_admin_menu_edit</a>();
<a name="l00945"></a>00945 }
<a name="l00946"></a>00946 
<a name="l00947"></a><a class="code" href="adm_8php.html#a71c4dffd55fffb72fcaa30ac14bb7008">00947</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a71c4dffd55fffb72fcaa30ac14bb7008">adm_action_f_admin_menu_edit_entry_data</a>($inid,$tdlc) { eval(<a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>());
<a name="l00948"></a>00948         $id=$inid;
<a name="l00949"></a>00949         <a class="code" href="lib_8debug_8php.html#a9b55f447faf2e1928eb5c9ce9b9a864d">d_echo</a>(<span class="stringliteral">&quot;EDITING ADMIN MENU ENTRY: $id&quot;</span>);
<a name="l00950"></a>00950         $menuitem=<a class="code" href="lib_8mysql_8php.html#ad42d2c11477299cecf3dd06b259a316e">mfo1</a>( <span class="stringliteral">&quot;select * from admin_menu where id=&#39;$id&#39;&quot;</span> );
<a name="l00951"></a>00951 
<a name="l00952"></a>00952           echo <span class="stringliteral">&quot;&lt;tr&gt;&quot;</span>;
<a name="l00953"></a>00953             echo <span class="stringliteral">&quot;&lt;form enctype=\&quot;application/x-www-form-URLencoded\&quot; method=\&quot;post\&quot; action=\&quot;$RFS_SITE_URL/admin/adm.php\&quot;&gt;&quot;</span>;
<a name="l00954"></a>00954             echo <span class="stringliteral">&quot;&lt;td class=sc_project_table_$tdlc valign=bottom&gt;&quot;</span>;
<a name="l00955"></a>00955 
<a name="l00956"></a>00956             echo <span class="stringliteral">&quot;&lt;input type=hidden name=action value=f_admin_menu_edit_del&gt;&quot;</span>;
<a name="l00957"></a>00957             echo <span class="stringliteral">&quot;&lt;input type=hidden name=id value=$menuitem-&gt;id&gt;&quot;</span>;
<a name="l00958"></a>00958 
<a name="l00959"></a>00959             echo <span class="stringliteral">&quot;&lt;div class=redbutton&gt;&lt;input type=submit name=submit value=delete&gt;&lt;/div&gt;&quot;</span>;
<a name="l00960"></a>00960 
<a name="l00961"></a>00961             echo <span class="stringliteral">&quot;&lt;/form&gt;&quot;</span>;
<a name="l00962"></a>00962 
<a name="l00963"></a>00963             echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l00964"></a>00964             echo <span class="stringliteral">&quot;&lt;form method=\&quot;post\&quot; enctype=\&quot;application/x-www-form-URLencoded\&quot; action=\&quot;$RFS_SITE_URL/admin/adm.php\&quot;&gt;&quot;</span>;
<a name="l00965"></a>00965             echo <span class="stringliteral">&quot;&lt;td class=sc_project_table_$tdlc valign=bottom&gt;&quot;</span>;
<a name="l00966"></a>00966 
<a name="l00967"></a>00967             echo <span class="stringliteral">&quot;&lt;input type=hidden name=action value=f_admin_menu_edit_mod&gt;&quot;</span>;
<a name="l00968"></a>00968 
<a name="l00969"></a>00969             echo <span class="stringliteral">&quot;&lt;input type=hidden name=id value=$menuitem-&gt;id&gt;&quot;</span>;
<a name="l00970"></a>00970             echo <span class="stringliteral">&quot;&lt;input size=20 type=text name=mname value=\&quot;$menuitem-&gt;name\&quot;&gt;&quot;</span>;
<a name="l00971"></a>00971             echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l00972"></a>00972 
<a name="l00973"></a>00973             echo <span class="stringliteral">&quot;&lt;td class=sc_project_table_$tdlc valign=bottom&gt;&quot;</span>;
<a name="l00974"></a>00974             echo <span class="stringliteral">&quot;&lt;Select name=mcategory&gt;&quot;</span>;
<a name="l00975"></a>00975             <span class="keywordflow">if</span>( !empty( $menuitem-&gt;category ) )
<a name="l00976"></a>00976                 echo <span class="stringliteral">&quot;&lt;option&gt;$menuitem-&gt;category&quot;</span>;
<a name="l00977"></a>00977 
<a name="l00978"></a>00978             $cres=<a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;select * from categories order by name&quot;</span> );
<a name="l00979"></a>00979             $j3=mysql_num_rows( $cres );
<a name="l00980"></a>00980 
<a name="l00981"></a>00981             <span class="keywordflow">for</span>( $i3=0; $i3&lt;$j3; $i3++ ) {
<a name="l00982"></a>00982                 <a class="code" href="sp_8php.html#a26c2f6c0ee7cb69a545305a8949c045c">$c</a>=mysql_fetch_object( $cres );
<a name="l00983"></a>00983                 echo <span class="stringliteral">&quot;&lt;option&gt;$c-&gt;name&quot;</span>;
<a name="l00984"></a>00984             }
<a name="l00985"></a>00985             echo <span class="stringliteral">&quot;&lt;/select&gt;&quot;</span>;
<a name="l00986"></a>00986 
<a name="l00987"></a>00987             echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l00988"></a>00988 
<a name="l00989"></a>00989             echo <span class="stringliteral">&quot;&lt;td class=sc_project_table_$tdlc valign=bottom&gt;&quot;</span>;
<a name="l00990"></a>00990             echo <span class="stringliteral">&quot;&lt;input size=40 type=text name=murl value=\&quot;$menuitem-&gt;url\&quot;&gt;&quot;</span>;
<a name="l00991"></a>00991             echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l00992"></a>00992             echo <span class="stringliteral">&quot;&lt;td class=sc_project_table_$tdlc valign=bottom&gt;&quot;</span>;
<a name="l00993"></a>00993 
<a name="l00994"></a>00994 
<a name="l00995"></a>00995             echo <span class="stringliteral">&quot;&lt;a href=&#39;adm.php?action=f_admin_menu_change_icon&amp;id=$menuitem-&gt;id&#39;&gt;&quot;</span>;
<a name="l00996"></a>00996 
<a name="l00997"></a>00997             echo <span class="stringliteral">&quot;&lt;img src=\&quot;$RFS_SITE_URL/$menuitem-&gt;icon\&quot; width=64 height=64 border=&#39;0&#39;&gt;&lt;br&gt;Change&lt;/a&gt;&quot;</span>;
<a name="l00998"></a>00998 
<a name="l00999"></a>00999 
<a name="l01000"></a>01000 
<a name="l01001"></a>01001             echo <span class="stringliteral">&quot;&lt;input size=40 type=text name=micon value=\&quot;$menuitem-&gt;icon\&quot;&gt;&quot;</span>;
<a name="l01002"></a>01002             echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l01003"></a>01003             echo <span class="stringliteral">&quot;&lt;td class=sc_project_table_$tdlc valign=bottom&gt;&quot;</span>;
<a name="l01004"></a>01004             echo <span class="stringliteral">&quot;&lt;input type=text name=mtarget value=\&quot;$menuitem-&gt;target\&quot;&gt;&quot;</span>;
<a name="l01005"></a>01005             echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l01006"></a>01006             echo <span class="stringliteral">&quot;&lt;td class=sc_project_table_$tdlc valign=bottom&gt;&quot;</span>;
<a name="l01007"></a>01007 
<a name="l01008"></a>01008             echo <span class="stringliteral">&quot;&lt;div class=menutop&gt;&lt;input type=submit name=submit value=modify&gt;&lt;/div&gt;&quot;</span>;
<a name="l01009"></a>01009 
<a name="l01010"></a>01010 
<a name="l01011"></a>01011 
<a name="l01012"></a>01012             echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l01013"></a>01013             echo <span class="stringliteral">&quot;&lt;/form&gt;&quot;</span>;
<a name="l01014"></a>01014             echo <span class="stringliteral">&quot;&lt;/tr&gt; &quot;</span>;
<a name="l01015"></a>01015 }
<a name="l01016"></a>01016 
<a name="l01017"></a><a class="code" href="adm_8php.html#a421a8aa7b84f9d5e67881e59f157f75f">01017</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a421a8aa7b84f9d5e67881e59f157f75f">adm_action_f_admin_menu_edit_entry</a>() { eval(<a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>());
<a name="l01018"></a>01018     echo <span class="stringliteral">&quot;&lt;h3&gt;Edit Admin Menu item $id&lt;/h3&gt;&quot;</span>;
<a name="l01019"></a>01019     <a class="code" href="lib_8mysql_8php.html#ab2a2e03dfc31eb5074a990325393609d">sc_bf</a>(  <span class="stringliteral">&quot;$RFS_SITE_URL/admin/adm.php&quot;</span>,
<a name="l01020"></a>01020             <span class="stringliteral">&quot;action=f_admin_menu_edit_mod&quot;</span>.<a class="code" href="config_8sitevars_8php.html#a06fab752c166675deeb7a9191add17ab">$RFS_SITE_DELIMITER</a>.<span class="stringliteral">&quot;id=$id&quot;</span>,
<a name="l01021"></a>01021             <span class="stringliteral">&quot;admin_menu&quot;</span>,
<a name="l01022"></a>01022             <span class="stringliteral">&quot;select * from admin_menu where `id`=&#39;$id&#39;&quot;</span>,
<a name="l01023"></a>01023             <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;id&quot;</span>, <span class="stringliteral">&quot;omit&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, 60, <span class="stringliteral">&quot;Modify&quot;</span> );
<a name="l01024"></a>01024 <span class="comment">/* sc_bf(  &quot;$RFS_SITE_URL/admin/adm.php&quot;,</span>
<a name="l01025"></a>01025 <span class="comment">           &quot;action=f_edit_users_go&quot;.$RFS_SITE_DELIMITER.           &quot;id=$id&quot;,</span>
<a name="l01026"></a>01026 <span class="comment">           &quot;users&quot;,</span>
<a name="l01027"></a>01027 <span class="comment">           &quot;select * from users where `id`=&#39;$id&#39;&quot;,</span>
<a name="l01028"></a>01028 <span class="comment">           &quot;&quot;,</span>
<a name="l01029"></a>01029 <span class="comment">           &quot;id&quot;.$RFS_SITE_DELIMITER.           &quot;first_login&quot;.$RFS_SITE_DELIMITER.          &quot;last_activity&quot;.$RFS_SITE_DELIMITER.        &quot;last_login&quot;.$RFS_SITE_DELIMITER.           &quot;logins&quot;,</span>
<a name="l01030"></a>01030 <span class="comment">           &quot;omit&quot;,</span>
<a name="l01031"></a>01031 <span class="comment">           &quot;&quot;,</span>
<a name="l01032"></a>01032 <span class="comment">           60,</span>
<a name="l01033"></a>01033 <span class="comment">           &quot;update&quot; );            */</span>
<a name="l01034"></a>01034     <span class="comment">/*</span>
<a name="l01035"></a>01035 <span class="comment">    echo &quot;&lt;table border=0 cellspacing=0 cellpadding=0&gt;&quot;;</span>
<a name="l01036"></a>01036 <span class="comment">    echo &quot;&lt;tr&gt;&quot;;</span>
<a name="l01037"></a>01037 <span class="comment">    echo &quot;&lt;td class=contenttd&gt; &amp;nbsp; &lt;/td&gt;&quot;;</span>
<a name="l01038"></a>01038 <span class="comment">    echo &quot;&lt;td class=contenttd&gt; Name &lt;/td&gt;&quot;;</span>
<a name="l01039"></a>01039 <span class="comment">    echo &quot;&lt;td class=contenttd&gt; Category &lt;/td&gt;&quot;;</span>
<a name="l01040"></a>01040 <span class="comment">    echo &quot;&lt;td class=contenttd&gt; URL &lt;/td&gt;&quot;;</span>
<a name="l01041"></a>01041 <span class="comment">    echo &quot;&lt;td class=contenttd&gt; Icon &lt;/td&gt;&quot;;</span>
<a name="l01042"></a>01042 <span class="comment">    echo &quot;&lt;td class=contenttd&gt; Target &lt;/td&gt;&quot;;</span>
<a name="l01043"></a>01043 <span class="comment">    echo &quot;&lt;td class=contenttd&gt; &amp;nbsp; &lt;/td&gt;&quot;;</span>
<a name="l01044"></a>01044 <span class="comment">    echo &quot;&lt;/tr&gt;&quot;;</span>
<a name="l01045"></a>01045 <span class="comment">    adm_action_f_admin_menu_edit_entry_data($id,$tdlc);</span>
<a name="l01046"></a>01046 <span class="comment">    echo &quot;&lt;/table&gt;&quot;;</span>
<a name="l01047"></a>01047 <span class="comment">    */</span>
<a name="l01048"></a>01048 
<a name="l01049"></a>01049     <span class="keywordflow">if</span>( <a class="code" href="session_8php.html#ad56c24858a88af52e4da3ae2f6a2b3b0">$_SESSION</a>[<span class="stringliteral">&#39;admed&#39;</span>]==<span class="stringliteral">&quot;on&quot;</span> ) <a class="code" href="adm_8php.html#ace8c7439fed268e4befe9585719e1aca">adm_action_</a>();
<a name="l01050"></a>01050     <span class="keywordflow">else</span> <a class="code" href="adm_8php.html#a924952c6aa96e4c2950a173b574c9fec">adm_action_admin_menu_edit</a>();
<a name="l01051"></a>01051 }
<a name="l01052"></a>01052 
<a name="l01053"></a><a class="code" href="adm_8php.html#a924952c6aa96e4c2950a173b574c9fec">01053</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a924952c6aa96e4c2950a173b574c9fec">adm_action_admin_menu_edit</a>() { eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l01054"></a>01054     echo <span class="stringliteral">&quot;&lt;h3&gt;Edit Admin Menu&lt;/h3&gt;&quot;</span>;
<a name="l01055"></a>01055     echo <span class="stringliteral">&quot;&lt;table border=0 cellspacing=0 cellpadding=0&gt;&quot;</span>;
<a name="l01056"></a>01056     echo <span class="stringliteral">&quot;&lt;tr&gt;&quot;</span>;
<a name="l01057"></a>01057     echo <span class="stringliteral">&quot;&lt;td class=contenttd&gt; &amp;nbsp; &lt;/td&gt;&quot;</span>;
<a name="l01058"></a>01058     echo <span class="stringliteral">&quot;&lt;td class=contenttd&gt; Name &lt;/td&gt;&quot;</span>;
<a name="l01059"></a>01059     echo <span class="stringliteral">&quot;&lt;td class=contenttd&gt; Category &lt;/td&gt;&quot;</span>;
<a name="l01060"></a>01060     echo <span class="stringliteral">&quot;&lt;td class=contenttd&gt; URL &lt;/td&gt;&quot;</span>;
<a name="l01061"></a>01061     echo <span class="stringliteral">&quot;&lt;td class=contenttd&gt; Icon &lt;/td&gt;&quot;</span>;
<a name="l01062"></a>01062     echo <span class="stringliteral">&quot;&lt;td class=contenttd&gt; Target &lt;/td&gt;&quot;</span>;
<a name="l01063"></a>01063     echo <span class="stringliteral">&quot;&lt;td class=contenttd&gt; &amp;nbsp; &lt;/td&gt;&quot;</span>;
<a name="l01064"></a>01064     echo <span class="stringliteral">&quot;&lt;/tr&gt;&quot;</span>;
<a name="l01065"></a>01065 
<a name="l01066"></a>01066 
<a name="l01067"></a>01067     echo <span class="stringliteral">&quot;&lt;tr &gt;&quot;</span>;
<a name="l01068"></a>01068     echo <span class="stringliteral">&quot;&lt;form enctype=\&quot;application/x-www-form-URLencoded\&quot; method=\&quot;post\&quot; action=\&quot;$RFS_SITE_URL/admin/adm.php\&quot;&gt;&quot;</span>;
<a name="l01069"></a>01069     echo <span class="stringliteral">&quot;&lt;input type=hidden name=action value=f_admin_menu_edit_add&gt;&quot;</span>;
<a name="l01070"></a>01070     echo <span class="stringliteral">&quot;&lt;td&gt;&quot;</span>;
<a name="l01071"></a>01071     echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l01072"></a>01072 
<a name="l01073"></a>01073     echo <span class="stringliteral">&quot;&lt;td&gt;&quot;</span>;
<a name="l01074"></a>01074     echo <span class="stringliteral">&quot;&lt;input size=20 name=mname&gt;&quot;</span>;
<a name="l01075"></a>01075     echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l01076"></a>01076 
<a name="l01077"></a>01077 
<a name="l01078"></a>01078     echo <span class="stringliteral">&quot;&lt;td&gt;&quot;</span>;
<a name="l01079"></a>01079     echo <span class="stringliteral">&quot;&lt;Select name=mcategory&gt;&quot;</span>;
<a name="l01080"></a>01080 
<a name="l01081"></a>01081     $cres=<a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;select * from categories order by name&quot;</span> );
<a name="l01082"></a>01082     $j3=mysql_num_rows( $cres );
<a name="l01083"></a>01083     <span class="keywordflow">for</span>( $i3=0; $i3&lt;$j3; $i3++ ) {
<a name="l01084"></a>01084         <a class="code" href="sp_8php.html#a26c2f6c0ee7cb69a545305a8949c045c">$c</a>=mysql_fetch_object( $cres );
<a name="l01085"></a>01085         echo <span class="stringliteral">&quot;&lt;option&gt;$c-&gt;name&quot;</span>;
<a name="l01086"></a>01086     }
<a name="l01087"></a>01087     echo <span class="stringliteral">&quot;&lt;/select&gt;&quot;</span>;
<a name="l01088"></a>01088 
<a name="l01089"></a>01089     echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l01090"></a>01090 
<a name="l01091"></a>01091 
<a name="l01092"></a>01092     echo <span class="stringliteral">&quot;&lt;td&gt;&quot;</span>;
<a name="l01093"></a>01093     echo <span class="stringliteral">&quot;&lt;input size=40  name=murl&gt;&quot;</span>;
<a name="l01094"></a>01094     echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l01095"></a>01095     echo <span class="stringliteral">&quot;&lt;td&gt;&quot;</span>;
<a name="l01096"></a>01096     echo <span class="stringliteral">&quot;&lt;input size=40 name=micon&gt;&quot;</span>;
<a name="l01097"></a>01097     echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l01098"></a>01098     echo <span class="stringliteral">&quot;&lt;td&gt;&quot;</span>;
<a name="l01099"></a>01099     echo <span class="stringliteral">&quot;&lt;input name=mtarget&gt;&quot;</span>;
<a name="l01100"></a>01100     echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l01101"></a>01101     echo <span class="stringliteral">&quot;&lt;td &gt;&quot;</span>;
<a name="l01102"></a>01102     echo <span class="stringliteral">&quot;&lt;div class=menutop&gt;&lt;input type=submit name=submit value=add&gt;&lt;/div&gt;&quot;</span>;
<a name="l01103"></a>01103 
<a name="l01104"></a>01104     echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l01105"></a>01105     echo <span class="stringliteral">&quot;&lt;/form&gt;&quot;</span>;
<a name="l01106"></a>01106     echo <span class="stringliteral">&quot;&lt;/tr&gt;&quot;</span>;
<a name="l01107"></a>01107 
<a name="l01108"></a>01108     $cresz=<a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;select * from categories order by name asc&quot;</span> );
<a name="l01109"></a>01109     $ccount=mysql_num_rows( $cresz );
<a name="l01110"></a>01110     <span class="keywordflow">for</span>( $ci=0; $ci&lt;$ccount; $ci++ ) {
<a name="l01111"></a>01111         $cc=mysql_fetch_object( $cresz );
<a name="l01112"></a>01112         <a class="code" href="lib_8sitevars_8php.html#a49a8a4009b02e49717caa88b128affc5">$res</a>=<a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;select * from admin_menu where category = &#39;$cc-&gt;name&#39; order by name asc&quot;</span> );
<a name="l01113"></a>01113         <a class="code" href="v_8php.html#af789423037bbc89dc7c850e761177570">$count</a>=mysql_num_rows( <a class="code" href="lib_8sitevars_8php.html#a49a8a4009b02e49717caa88b128affc5">$res</a> );
<a name="l01114"></a>01114         <span class="keywordflow">for</span>( $i=0; $i&lt;<a class="code" href="v_8php.html#af789423037bbc89dc7c850e761177570">$count</a>; $i++ ) {
<a name="l01115"></a>01115             $menuitem=mysql_fetch_object( <a class="code" href="lib_8sitevars_8php.html#a49a8a4009b02e49717caa88b128affc5">$res</a> );
<a name="l01116"></a>01116             $tdlc++;
<a name="l01117"></a>01117             <span class="keywordflow">if</span>( $tdlc==2 ) $tdlc=0;
<a name="l01118"></a>01118             <a class="code" href="adm_8php.html#a71c4dffd55fffb72fcaa30ac14bb7008">adm_action_f_admin_menu_edit_entry_data</a>($menuitem-&gt;id,$tdlc);
<a name="l01119"></a>01119 <span class="comment">/*          echo &quot;&lt;tr&gt;&quot;;</span>
<a name="l01120"></a>01120 <span class="comment">            echo &quot;&lt;form enctype=application/x-www-form-URLencoded action=$RFS_SITE_URL/admin/adm.php&gt;&quot;;</span>
<a name="l01121"></a>01121 <span class="comment">            echo &quot;&lt;td class=sc_project_table_$tdlc valign=bottom&gt;&quot;;</span>
<a name="l01122"></a>01122 <span class="comment"></span>
<a name="l01123"></a>01123 <span class="comment">            echo &quot;&lt;input type=hidden name=action value=f_admin_menu_edit_del&gt;&quot;;</span>
<a name="l01124"></a>01124 <span class="comment">            echo &quot;&lt;input type=hidden name=id value=$menuitem-&gt;id&gt;&quot;;</span>
<a name="l01125"></a>01125 <span class="comment"></span>
<a name="l01126"></a>01126 <span class="comment">            echo &quot;&lt;div class=redbutton&gt;&lt;input type=submit name=submit value=delete&gt;&lt;/div&gt;&quot;;</span>
<a name="l01127"></a>01127 <span class="comment"></span>
<a name="l01128"></a>01128 <span class="comment">            echo &quot;&lt;/form&gt;&quot;;</span>
<a name="l01129"></a>01129 <span class="comment"></span>
<a name="l01130"></a>01130 <span class="comment">            echo &quot;&lt;/td&gt;&quot;;</span>
<a name="l01131"></a>01131 <span class="comment">            echo &quot;&lt;form enctype=application/x-www-form-URLencoded action=$RFS_SITE_URL/admin/adm.php&gt;&quot;;</span>
<a name="l01132"></a>01132 <span class="comment">            echo &quot;&lt;td class=sc_project_table_$tdlc valign=bottom&gt;&quot;;</span>
<a name="l01133"></a>01133 <span class="comment"></span>
<a name="l01134"></a>01134 <span class="comment">            echo &quot;&lt;input type=hidden name=action value=f_admin_menu_edit_mod&gt;&quot;;</span>
<a name="l01135"></a>01135 <span class="comment"></span>
<a name="l01136"></a>01136 <span class="comment">            echo &quot;&lt;input type=hidden name=id value=$menuitem-&gt;id&gt;&quot;;</span>
<a name="l01137"></a>01137 <span class="comment">            echo &quot;&lt;input size=20 type=text name=mname value=\&quot;$menuitem-&gt;name\&quot;&gt;&quot;;</span>
<a name="l01138"></a>01138 <span class="comment">            echo &quot;&lt;/td&gt;&quot;;</span>
<a name="l01139"></a>01139 <span class="comment"></span>
<a name="l01140"></a>01140 <span class="comment">            echo &quot;&lt;td class=sc_project_table_$tdlc valign=bottom&gt;&quot;;</span>
<a name="l01141"></a>01141 <span class="comment">            echo &quot;&lt;Select name=mcategory&gt;&quot;;</span>
<a name="l01142"></a>01142 <span class="comment">            if( !empty( $menuitem-&gt;category ) )</span>
<a name="l01143"></a>01143 <span class="comment">                echo &quot;&lt;option&gt;$menuitem-&gt;category&quot;;</span>
<a name="l01144"></a>01144 <span class="comment"></span>
<a name="l01145"></a>01145 <span class="comment">            $cres=sc_query( &quot;select * from categories order by name&quot; );</span>
<a name="l01146"></a>01146 <span class="comment">            $j3=mysql_num_rows( $cres );</span>
<a name="l01147"></a>01147 <span class="comment"></span>
<a name="l01148"></a>01148 <span class="comment">            for( $i3=0; $i3&lt;$j3; $i3++ ) {</span>
<a name="l01149"></a>01149 <span class="comment">                $c=mysql_fetch_object( $cres );</span>
<a name="l01150"></a>01150 <span class="comment">                echo &quot;&lt;option&gt;$c-&gt;name&quot;;</span>
<a name="l01151"></a>01151 <span class="comment">            }</span>
<a name="l01152"></a>01152 <span class="comment">            echo &quot;&lt;/select&gt;&quot;;</span>
<a name="l01153"></a>01153 <span class="comment"></span>
<a name="l01154"></a>01154 <span class="comment">            echo &quot;&lt;/td&gt;&quot;;</span>
<a name="l01155"></a>01155 <span class="comment"></span>
<a name="l01156"></a>01156 <span class="comment">            echo &quot;&lt;td class=sc_project_table_$tdlc valign=bottom&gt;&quot;;</span>
<a name="l01157"></a>01157 <span class="comment">            echo &quot;&lt;input size=40 type=text name=murl value=\&quot;$menuitem-&gt;url\&quot;&gt;&quot;;</span>
<a name="l01158"></a>01158 <span class="comment">            echo &quot;&lt;/td&gt;&quot;;</span>
<a name="l01159"></a>01159 <span class="comment">            echo &quot;&lt;td class=sc_project_table_$tdlc valign=bottom&gt;&quot;;</span>
<a name="l01160"></a>01160 <span class="comment"></span>
<a name="l01161"></a>01161 <span class="comment"></span>
<a name="l01162"></a>01162 <span class="comment">            echo &quot;&lt;a href=&#39;adm.php?action=f_admin_menu_change_icon&amp;id=$menuitem-&gt;id&#39;&gt;&quot;;</span>
<a name="l01163"></a>01163 <span class="comment"></span>
<a name="l01164"></a>01164 <span class="comment">            echo &quot;&lt;img src=\&quot;$RFS_SITE_URL/$menuitem-&gt;icon\&quot; width=64 height=64 border=&#39;0&#39;&gt;&lt;br&gt;Change&lt;/a&gt;&quot;;</span>
<a name="l01165"></a>01165 <span class="comment"></span>
<a name="l01166"></a>01166 <span class="comment"></span>
<a name="l01167"></a>01167 <span class="comment"></span>
<a name="l01168"></a>01168 <span class="comment">            echo &quot;&lt;input size=40 type=text name=micon value=\&quot;$menuitem-&gt;icon\&quot;&gt;&quot;;</span>
<a name="l01169"></a>01169 <span class="comment">            echo &quot;&lt;/td&gt;&quot;;</span>
<a name="l01170"></a>01170 <span class="comment">            echo &quot;&lt;td class=sc_project_table_$tdlc valign=bottom&gt;&quot;;</span>
<a name="l01171"></a>01171 <span class="comment">            echo &quot;&lt;input type=text name=mtarget value=\&quot;$menuitem-&gt;target\&quot;&gt;&quot;;</span>
<a name="l01172"></a>01172 <span class="comment">            echo &quot;&lt;/td&gt;&quot;;</span>
<a name="l01173"></a>01173 <span class="comment">            echo &quot;&lt;td class=sc_project_table_$tdlc valign=bottom&gt;&quot;;</span>
<a name="l01174"></a>01174 <span class="comment"></span>
<a name="l01175"></a>01175 <span class="comment">            echo &quot;&lt;div class=menutop&gt;&lt;input type=submit name=submit value=modify&gt;&lt;/div&gt;&quot;;</span>
<a name="l01176"></a>01176 <span class="comment"></span>
<a name="l01177"></a>01177 <span class="comment"></span>
<a name="l01178"></a>01178 <span class="comment"></span>
<a name="l01179"></a>01179 <span class="comment">            echo &quot;&lt;/td&gt;&quot;;</span>
<a name="l01180"></a>01180 <span class="comment">            echo &quot;&lt;/form&gt;&quot;;</span>
<a name="l01181"></a>01181 <span class="comment">            echo &quot;&lt;/tr&gt; &quot;;</span>
<a name="l01182"></a>01182 <span class="comment">            */</span>
<a name="l01183"></a>01183 
<a name="l01184"></a>01184         }
<a name="l01185"></a>01185     }
<a name="l01186"></a>01186     echo <span class="stringliteral">&quot;&lt;/table&gt;&quot;</span>;
<a name="l01187"></a>01187     echo <span class="stringliteral">&quot;&lt;br&gt;&lt;br&gt;&quot;</span>;
<a name="l01188"></a>01188     include( <span class="stringliteral">&quot;footer.php&quot;</span> );
<a name="l01189"></a>01189     exit();
<a name="l01190"></a>01190 }<span class="comment"></span>
<a name="l01191"></a>01191 <span class="comment">///////////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l01192"></a>01192 <span class="comment"></span><span class="comment">// ADM_MENU TOP</span>
<a name="l01193"></a><a class="code" href="adm_8php.html#acf0b6e1ef7e8c8cff1e257eab7a0d667">01193</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#acf0b6e1ef7e8c8cff1e257eab7a0d667">adm_action_f_menu_topedit_del_go</a>() { eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l01194"></a>01194     <a class="code" href="lib_8sitevars_8php.html#a49a8a4009b02e49717caa88b128affc5">$res</a>=<a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;select * from menu_top where `id`=&#39;$id&#39;&quot;</span> );
<a name="l01195"></a>01195     $menuitem=mysql_fetch_object( <a class="code" href="lib_8sitevars_8php.html#a49a8a4009b02e49717caa88b128affc5">$res</a> );
<a name="l01196"></a>01196     echo <span class="stringliteral">&quot;&lt;h3&gt;Edit Top Menu :: Delete $menuitem-&gt;name :: DELETED!&lt;/h3&gt;&quot;</span>;
<a name="l01197"></a>01197     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;delete from menu_top where `id`=&#39;$id&#39;&quot;</span> );
<a name="l01198"></a>01198     <a class="code" href="adm_8php.html#aae94f7ea022b6e8d2a1adfce9d2f65c6">adm_action_menu_topedit</a>();
<a name="l01199"></a>01199 }
<a name="l01200"></a><a class="code" href="adm_8php.html#a4a88c32904560c7599bc83465f89335d">01200</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a4a88c32904560c7599bc83465f89335d">adm_action_f_menu_topedit_del</a>() { eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l01201"></a>01201     <a class="code" href="lib_8sitevars_8php.html#a49a8a4009b02e49717caa88b128affc5">$res</a>=<a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;select * from menu_top where `id`=&#39;$id&#39;&quot;</span> );
<a name="l01202"></a>01202     $menuitem=mysql_fetch_object( <a class="code" href="lib_8sitevars_8php.html#a49a8a4009b02e49717caa88b128affc5">$res</a> );
<a name="l01203"></a>01203     echo <span class="stringliteral">&quot;&lt;h3&gt;Edit Top Menu :: Delete $menuitem-&gt;name&lt;/h3&gt;&quot;</span>;
<a name="l01204"></a>01204     echo <span class="stringliteral">&quot;&lt;form enctype=\&quot;application/x-www-form-URLencoded\&quot; method=\&quot;post\&quot; action=\&quot;$RFS_SITE_URL/admin/adm.php\&quot;&gt;&quot;</span>;
<a name="l01205"></a>01205     echo <span class="stringliteral">&quot;&lt;input type=hidden name=action value=f_menu_topedit_del_go&gt;&quot;</span>;
<a name="l01206"></a>01206     echo <span class="stringliteral">&quot;&lt;input type=hidden name=id value=$id&gt;&quot;</span>;
<a name="l01207"></a>01207     echo <span class="stringliteral">&quot;&lt;input type=submit name=submit value=confirm&gt;&lt;/form&gt;&quot;</span>;
<a name="l01208"></a>01208 
<a name="l01209"></a>01209     <a class="code" href="adm_8php.html#aae94f7ea022b6e8d2a1adfce9d2f65c6">adm_action_menu_topedit</a>();
<a name="l01210"></a>01210 }
<a name="l01211"></a><a class="code" href="adm_8php.html#a8b7202d1838a6884135fbc91e6a93df0">01211</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a8b7202d1838a6884135fbc91e6a93df0">adm_action_f_menu_topedit_add</a>() { eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l01212"></a>01212     echo <span class="stringliteral">&quot;&lt;h3&gt;Edit Top Menu :: Add $mname&lt;/h3&gt;&quot;</span>;
<a name="l01213"></a>01213     
<a name="l01214"></a>01214     echo <span class="stringliteral">&quot;$mname &lt;br&gt;&quot;</span>;
<a name="l01215"></a>01215     echo <span class="stringliteral">&quot;$menu_url&lt;br&gt;&quot;</span>;
<a name="l01216"></a>01216     echo <span class="stringliteral">&quot;$target&lt;br&gt;&quot;</span>;
<a name="l01217"></a>01217     echo <span class="stringliteral">&quot;$msor&lt;br&gt;&quot;</span>;
<a name="l01218"></a>01218     echo <span class="stringliteral">&quot;$access&lt;br&gt;&quot;</span>;
<a name="l01219"></a>01219     
<a name="l01220"></a>01220     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;insert into menu_top (   `name`,      `link`, `target`, `sort_order`, `access`)</span>
<a name="l01221"></a>01221 <span class="stringliteral">                                  values(&#39;$mname&#39;, &#39;$menu_url&#39;, &#39;$target&#39;,     &#39;$msor&#39;, &#39;$access&#39;);&quot;</span> );
<a name="l01222"></a>01222     <a class="code" href="adm_8php.html#aae94f7ea022b6e8d2a1adfce9d2f65c6">adm_action_menu_topedit</a>();
<a name="l01223"></a>01223 }
<a name="l01224"></a><a class="code" href="adm_8php.html#a67a0446146aa4ac11acecef521214d68">01224</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a67a0446146aa4ac11acecef521214d68">adm_action_f_menu_topedit_mod</a>() { eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l01225"></a>01225     <a class="code" href="lib_8sitevars_8php.html#a49a8a4009b02e49717caa88b128affc5">$res</a>=<a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;select * from menu_top where `id`=&#39;$id&#39;&quot;</span> );
<a name="l01226"></a>01226     $menuitem=mysql_fetch_object( <a class="code" href="lib_8sitevars_8php.html#a49a8a4009b02e49717caa88b128affc5">$res</a> );
<a name="l01227"></a>01227     echo <span class="stringliteral">&quot;&lt;h3&gt;Edit Top Menu :: Modify $menuitem-&gt;name = $mname&lt;/h3&gt;&quot;</span>;
<a name="l01228"></a>01228     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;update menu_top set `name`=&#39;$mname&#39; where `id`=&#39;$id&#39;&quot;</span> );
<a name="l01229"></a>01229     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;update menu_top set `link`=&#39;$menu_url&#39; where `id`=&#39;$id&#39;&quot;</span> );
<a name="l01230"></a>01230     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;update menu_top set `target`=&#39;$target&#39; where `id`=&#39;$id&#39;&quot;</span> );
<a name="l01231"></a>01231     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;update menu_top set `sort_order`=&#39;$msor&#39; where `id`=&#39;$id&#39;&quot;</span> );
<a name="l01232"></a>01232     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;update menu_top set `access`=&#39;$access&#39; where `id`=&#39;$id&#39;&quot;</span> );
<a name="l01233"></a>01233 
<a name="l01234"></a>01234     <a class="code" href="adm_8php.html#aae94f7ea022b6e8d2a1adfce9d2f65c6">adm_action_menu_topedit</a>();
<a name="l01235"></a>01235 }
<a name="l01236"></a><a class="code" href="adm_8php.html#aae94f7ea022b6e8d2a1adfce9d2f65c6">01236</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#aae94f7ea022b6e8d2a1adfce9d2f65c6">adm_action_menu_topedit</a>() { eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l01237"></a>01237     echo <span class="stringliteral">&quot;&lt;h3&gt;Edit Top Menu&lt;/h3&gt;&quot;</span>;
<a name="l01238"></a>01238     
<a name="l01239"></a>01239     echo <span class="stringliteral">&quot;&lt;table border=0 cellspacing=0 cellpadding=0&gt;&quot;</span>;
<a name="l01240"></a>01240     echo <span class="stringliteral">&quot;&lt;tr&gt;&quot;</span>;
<a name="l01241"></a>01241     echo <span class="stringliteral">&quot;&lt;td class=contenttd&gt; &amp;nbsp; &lt;/td&gt;&quot;</span>;
<a name="l01242"></a>01242     echo <span class="stringliteral">&quot;&lt;td class=contenttd&gt; name &lt;/td&gt;&quot;</span>;
<a name="l01243"></a>01243     echo <span class="stringliteral">&quot;&lt;td class=contenttd&gt; link &lt;/td&gt;&quot;</span>;
<a name="l01244"></a>01244     echo <span class="stringliteral">&quot;&lt;td class=contenttd&gt; target &lt;/td&gt;&quot;</span>;
<a name="l01245"></a>01245     echo <span class="stringliteral">&quot;&lt;td class=contenttd&gt; sort order &lt;/td&gt;&quot;</span>;
<a name="l01246"></a>01246     echo <span class="stringliteral">&quot;&lt;td class=contenttd&gt; access &lt;/td&gt;&quot;</span>;
<a name="l01247"></a>01247     echo <span class="stringliteral">&quot;&lt;td class=contenttd&gt; &amp;nbsp; &lt;/td&gt;&quot;</span>;
<a name="l01248"></a>01248     echo <span class="stringliteral">&quot;&lt;/tr&gt;&quot;</span>;
<a name="l01249"></a>01249     <a class="code" href="lib_8sitevars_8php.html#a49a8a4009b02e49717caa88b128affc5">$res</a>=<a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;select * from menu_top order by sort_order asc&quot;</span> );
<a name="l01250"></a>01250     <a class="code" href="v_8php.html#af789423037bbc89dc7c850e761177570">$count</a>=mysql_num_rows( <a class="code" href="lib_8sitevars_8php.html#a49a8a4009b02e49717caa88b128affc5">$res</a> );
<a name="l01251"></a>01251     <span class="keywordflow">for</span>( $i=0; $i&lt;<a class="code" href="v_8php.html#af789423037bbc89dc7c850e761177570">$count</a>; $i++ ) {
<a name="l01252"></a>01252         $menuitem=mysql_fetch_object( <a class="code" href="lib_8sitevars_8php.html#a49a8a4009b02e49717caa88b128affc5">$res</a> );
<a name="l01253"></a>01253 
<a name="l01254"></a>01254         echo <span class="stringliteral">&quot;&lt;tr&gt;&quot;</span>;
<a name="l01255"></a>01255         echo <span class="stringliteral">&quot;&lt;form enctype=\&quot;application/x-www-form-URLencoded\&quot; method=\&quot;post\&quot; action=\&quot;$RFS_SITE_URL/admin/adm.php\&quot;&gt;&quot;</span>;
<a name="l01256"></a>01256         echo <span class="stringliteral">&quot;&lt;td class=contenttd&gt;&quot;</span>;
<a name="l01257"></a>01257 
<a name="l01258"></a>01258         
<a name="l01259"></a>01259         
<a name="l01260"></a>01260         
<a name="l01261"></a>01261 
<a name="l01262"></a>01262         
<a name="l01263"></a>01263         echo <span class="stringliteral">&quot;&lt;input type=hidden name=action value=f_menu_topedit_del&gt;&quot;</span>;
<a name="l01264"></a>01264         echo <span class="stringliteral">&quot;&lt;input type=hidden name=id value=$menuitem-&gt;id&gt;&quot;</span>;
<a name="l01265"></a>01265         echo <span class="stringliteral">&quot;&lt;input type=submit name=submit value=delete&gt;&quot;</span>;
<a name="l01266"></a>01266         
<a name="l01267"></a>01267         
<a name="l01268"></a>01268 
<a name="l01269"></a>01269         echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l01270"></a>01270         echo <span class="stringliteral">&quot;&lt;/form&gt;&quot;</span>;
<a name="l01271"></a>01271 
<a name="l01272"></a>01272         echo <span class="stringliteral">&quot;&lt;form enctype=\&quot;application/x-www-form-URLencode\&quot; method=\&quot;post\&quot; action=\&quot;$RFS_SITE_URL/admin/adm.php\&quot;&gt;&quot;</span>;
<a name="l01273"></a>01273         echo <span class="stringliteral">&quot;&lt;td class=contenttd&gt;&quot;</span>;
<a name="l01274"></a>01274         
<a name="l01275"></a>01275         echo <span class="stringliteral">&quot;&lt;input type=\&quot;hidden\&quot; name=\&quot;action\&quot; value=\&quot;f_menu_topedit_mod\&quot;&gt;&quot;</span>;
<a name="l01276"></a>01276         echo <span class="stringliteral">&quot;&lt;input type=\&quot;hidden\&quot; name=\&quot;id\&quot; value=\&quot;$menuitem-&gt;id\&quot;&gt;&quot;</span>;
<a name="l01277"></a>01277         echo <span class="stringliteral">&quot;&lt;input size=\&quot;20\&quot; type=text name=\&quot;mname\&quot; value=\&quot;$menuitem-&gt;name\&quot;&gt;&quot;</span>;
<a name="l01278"></a>01278         echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l01279"></a>01279         
<a name="l01280"></a>01280         echo <span class="stringliteral">&quot;&lt;td class=\&quot;contenttd\&quot;&gt;&quot;</span>;
<a name="l01281"></a>01281         echo <span class="stringliteral">&quot;&lt;input size=\&quot;40\&quot; type=\&quot;text\&quot; name=\&quot;menu_url\&quot; value=\&quot;$menuitem-&gt;link\&quot;&gt;&quot;</span>;
<a name="l01282"></a>01282         echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l01283"></a>01283         
<a name="l01284"></a>01284         echo <span class="stringliteral">&quot;&lt;td class=\&quot;contenttd\&quot;&gt;&quot;</span>;
<a name="l01285"></a>01285         echo <span class="stringliteral">&quot;&lt;input size=\&quot;10\&quot; type=\&quot;text\&quot; name=\&quot;target\&quot; value=\&quot;$menuitem-&gt;target\&quot;&gt;&quot;</span>;
<a name="l01286"></a>01286         echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l01287"></a>01287 
<a name="l01288"></a>01288         echo <span class="stringliteral">&quot;&lt;td class=\&quot;contenttd\&quot;&gt;&quot;</span>;
<a name="l01289"></a>01289         echo <span class="stringliteral">&quot;&lt;input size=\&quot;10\&quot; type=\&quot;text\&quot; name=\&quot;msor\&quot; value=\&quot;$menuitem-&gt;sort_order\&quot;&gt;&quot;</span>;
<a name="l01290"></a>01290         echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l01291"></a>01291 
<a name="l01292"></a>01292         echo <span class="stringliteral">&quot;&lt;td class=\&quot;contenttd\&quot;&gt;&quot;</span>;
<a name="l01293"></a>01293         echo <span class="stringliteral">&quot;&lt;input size=\&quot;10\&quot; type=\&quot;text\&quot; name=\&quot;access\&quot; value=\&quot;$menuitem-&gt;access\&quot;&gt;&quot;</span>;
<a name="l01294"></a>01294         echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l01295"></a>01295         
<a name="l01296"></a>01296         echo <span class="stringliteral">&quot;&lt;td class=\&quot;contenttd\&quot;&gt;&quot;</span>;
<a name="l01297"></a>01297         echo <span class="stringliteral">&quot;&lt;input type=\&quot;submit\&quot; name=\&quot;submit\&quot; value=\&quot;modify\&quot;&gt;&quot;</span>;
<a name="l01298"></a>01298         echo <span class="stringliteral">&quot;&lt;/form&gt;&quot;</span>;
<a name="l01299"></a>01299         echo <span class="stringliteral">&quot;&lt;/td&gt;&lt;/tr&gt;&quot;</span>;
<a name="l01300"></a>01300     }
<a name="l01301"></a>01301 
<a name="l01302"></a>01302     echo <span class="stringliteral">&quot;&lt;tr&gt;&quot;</span>;
<a name="l01303"></a>01303 
<a name="l01304"></a>01304     echo <span class="stringliteral">&quot;&lt;form enctype=application/x-www-form-URLencoded method=\&quot;post\&quot; action=adm.php&gt;&quot;</span>;
<a name="l01305"></a>01305     echo <span class="stringliteral">&quot;&lt;input type=hidden name=action value=f_menu_topedit_add&gt;&quot;</span>;
<a name="l01306"></a>01306     echo <span class="stringliteral">&quot;&lt;td class=contenttd&gt;&quot;</span>;
<a name="l01307"></a>01307     echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l01308"></a>01308     echo <span class="stringliteral">&quot;&lt;td class=contenttd&gt;&quot;</span>;
<a name="l01309"></a>01309     echo <span class="stringliteral">&quot;&lt;input size=20 name=mname&gt;&quot;</span>;
<a name="l01310"></a>01310     echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l01311"></a>01311     echo <span class="stringliteral">&quot;&lt;td class=contenttd&gt;&quot;</span>;
<a name="l01312"></a>01312     echo <span class="stringliteral">&quot;&lt;input size=40  name=menu_url&gt;&quot;</span>;
<a name="l01313"></a>01313     echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;   
<a name="l01314"></a>01314     echo <span class="stringliteral">&quot;&lt;td class=contenttd&gt;&quot;</span>;
<a name="l01315"></a>01315     echo <span class="stringliteral">&quot;&lt;input size=10  name=target&gt;&quot;</span>;
<a name="l01316"></a>01316     echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l01317"></a>01317     
<a name="l01318"></a>01318     echo <span class="stringliteral">&quot;&lt;td class=contenttd&gt;&quot;</span>;
<a name="l01319"></a>01319     echo <span class="stringliteral">&quot;&lt;input size=10 name=msor&gt;&quot;</span>;
<a name="l01320"></a>01320     echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l01321"></a>01321     echo <span class="stringliteral">&quot;&lt;td class=contenttd&gt;&quot;</span>;
<a name="l01322"></a>01322     echo <span class="stringliteral">&quot;&lt;input size=10 name=access&gt;&quot;</span>;
<a name="l01323"></a>01323     echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l01324"></a>01324     echo <span class="stringliteral">&quot;&lt;td class=contenttd&gt;&quot;</span>;
<a name="l01325"></a>01325     echo <span class="stringliteral">&quot;&lt;input type=submit name=submit value=add&gt;&quot;</span>;
<a name="l01326"></a>01326     echo <span class="stringliteral">&quot;&lt;/form&gt;&quot;</span>;
<a name="l01327"></a>01327     echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l01328"></a>01328 
<a name="l01329"></a>01329     echo <span class="stringliteral">&quot;&lt;/tr&gt;&quot;</span>;
<a name="l01330"></a>01330     echo <span class="stringliteral">&quot;&lt;/table&gt;&quot;</span>;
<a name="l01331"></a>01331     echo <span class="stringliteral">&quot;&lt;br&gt;&lt;br&gt;&quot;</span>;
<a name="l01332"></a>01332 
<a name="l01333"></a>01333     include( <span class="stringliteral">&quot;footer.php&quot;</span> );
<a name="l01334"></a>01334     exit();
<a name="l01335"></a>01335 }<span class="comment"></span>
<a name="l01336"></a>01336 <span class="comment">///////////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l01337"></a>01337 <span class="comment"></span><span class="comment">// ADM_CATEGORIES</span>
<a name="l01338"></a><a class="code" href="adm_8php.html#a0e25910326a836c905765a2c72c52b46">01338</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a0e25910326a836c905765a2c72c52b46">adm_action_f_category_change_icon</a>() {
<a name="l01339"></a>01339     eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l01340"></a>01340     <a class="code" href="session_8php.html#ad56c24858a88af52e4da3ae2f6a2b3b0">$_SESSION</a>[<span class="stringliteral">&#39;select_image_path&#39;</span>]=<span class="stringliteral">&quot;&quot;</span>;
<a name="l01341"></a>01341     <a class="code" href="lib_8mysql_8php.html#a172f01492eb228b893671cf2a02849a8">sc_selectimage</a>( <span class="stringliteral">&quot;images&quot;</span>,<span class="stringliteral">&quot;admin/adm.php&quot;</span>,<span class="stringliteral">&quot;edit_categories&quot;</span>, <span class="stringliteral">&quot;categories&quot;</span>, $id, <span class="stringliteral">&quot;image&quot;</span> );
<a name="l01342"></a>01342 }
<a name="l01343"></a><a class="code" href="adm_8php.html#a37b10926e55ee6add81ad723e80b222a">01343</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a37b10926e55ee6add81ad723e80b222a">adm_action_f_delete_category</a>() {
<a name="l01344"></a>01344     eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l01345"></a>01345     echo <span class="stringliteral">&quot;&lt;p&gt;Category $category deleted&lt;/p&gt;&quot;</span>;
<a name="l01346"></a>01346     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;delete from categories where `name`=&#39;$category&#39;&quot;</span> );
<a name="l01347"></a>01347     <a class="code" href="adm_8php.html#aeaa4548b4a8644fc20af22875432526a">adm_action_edit_categories</a>();
<a name="l01348"></a>01348 }
<a name="l01349"></a><a class="code" href="adm_8php.html#a5e7827da17fe29bd70ecbebacc9064c3">01349</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a5e7827da17fe29bd70ecbebacc9064c3">adm_action_f_add_category</a>() {
<a name="l01350"></a>01350     eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l01351"></a>01351     echo <span class="stringliteral">&quot;&lt;p&gt;Added category $category&lt;/p&gt;&quot;</span>;
<a name="l01352"></a>01352     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;insert into categories (`name`, `image` ) values (&#39;$category&#39;, &#39;$image&#39;)&quot;</span> );
<a name="l01353"></a>01353     <a class="code" href="adm_8php.html#aeaa4548b4a8644fc20af22875432526a">adm_action_edit_categories</a>();
<a name="l01354"></a>01354 }
<a name="l01355"></a><a class="code" href="adm_8php.html#a2f1518facac570f06bf0c34ea133edae">01355</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a2f1518facac570f06bf0c34ea133edae">adm_action_f_rename_category</a>() {
<a name="l01356"></a>01356     eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l01357"></a>01357     echo <span class="stringliteral">&quot;&lt;p&gt;Renamed category from $category to $newname&lt;/p&gt;&quot;</span>;
<a name="l01358"></a>01358     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;update categories set image=&#39;$image&#39; where name = &#39;$category&#39;&quot;</span> );
<a name="l01359"></a>01359     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;update categories set name=&#39;$newname&#39; where name = &#39;$category&#39;&quot;</span> );
<a name="l01360"></a>01360     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;update admin_menu set category = &#39;$newname&#39; where category = &#39;$category&#39;&quot;</span> );
<a name="l01361"></a>01361     <a class="code" href="adm_8php.html#aeaa4548b4a8644fc20af22875432526a">adm_action_edit_categories</a>();
<a name="l01362"></a>01362 }
<a name="l01363"></a><a class="code" href="adm_8php.html#aeaa4548b4a8644fc20af22875432526a">01363</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#aeaa4548b4a8644fc20af22875432526a">adm_action_edit_categories</a>() {
<a name="l01364"></a>01364     eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l01365"></a>01365     echo <span class="stringliteral">&quot;&lt;h3&gt;Edit Categories (aka tags)&lt;/h3&gt;&quot;</span>;
<a name="l01366"></a>01366     <a class="code" href="link__out_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a>=<a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;select * from categories order by name asc&quot;</span> );
<a name="l01367"></a>01367     <a class="code" href="files_8php.html#a75fc289e2dfa4d8c56e6511eaa3893d8">$numcats</a>=mysql_num_rows( <a class="code" href="link__out_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a> );
<a name="l01368"></a>01368     <span class="keywordflow">if</span>( <a class="code" href="files_8php.html#a75fc289e2dfa4d8c56e6511eaa3893d8">$numcats</a>==0 ) echo <span class="stringliteral">&quot;&lt;p&gt;There are no categories!&lt;/p&gt;\n&quot;</span>;
<a name="l01369"></a>01369     echo <span class="stringliteral">&quot;&lt;table border=0&gt;&quot;</span>;
<a name="l01370"></a>01370 
<a name="l01371"></a>01371     echo <span class="stringliteral">&quot;</span>
<a name="l01372"></a>01372 <span class="stringliteral"></span>
<a name="l01373"></a>01373 <span class="stringliteral"></span>
<a name="l01374"></a>01374 <span class="stringliteral">    &lt;tr&gt;</span>
<a name="l01375"></a>01375 <span class="stringliteral"></span>
<a name="l01376"></a>01376 <span class="stringliteral">    &lt;td&gt;&amp;nbsp;&lt;/td&gt;</span>
<a name="l01377"></a>01377 <span class="stringliteral">    &lt;td&gt;</span>
<a name="l01378"></a>01378 <span class="stringliteral">    &lt;form enctype=\&quot;application/x-www-form-URLencoded\&quot; action=\&quot;$RFS_SITE_URL/admin/adm.php\&quot; method=\&quot;post\&quot;&gt;</span>
<a name="l01379"></a>01379 <span class="stringliteral">    &lt;input type=hidden name=&#39;action&#39;   value=&#39;f_add_category&#39;&gt;</span>
<a name="l01380"></a>01380 <span class="stringliteral">    &lt;input type=text   name=&#39;category&#39; value=&#39;&#39; style=&#39; width: 100%;&#39;&gt;</span>
<a name="l01381"></a>01381 <span class="stringliteral">    &lt;/td&gt;</span>
<a name="l01382"></a>01382 <span class="stringliteral"></span>
<a name="l01383"></a>01383 <span class="stringliteral">    &lt;td&gt;</span>
<a name="l01384"></a>01384 <span class="stringliteral">    &lt;img src=$RFS_SITE_URL/images/icons/exclamation.png width=64 height=64 border=&#39;0&#39;&gt;</span>
<a name="l01385"></a>01385 <span class="stringliteral">    &lt;/td&gt;</span>
<a name="l01386"></a>01386 <span class="stringliteral">    &lt;td&gt;</span>
<a name="l01387"></a>01387 <span class="stringliteral">    &lt;input type=text name=image value=&#39;&#39;&gt;</span>
<a name="l01388"></a>01388 <span class="stringliteral">    &lt;/td&gt;</span>
<a name="l01389"></a>01389 <span class="stringliteral">    &lt;td&gt;</span>
<a name="l01390"></a>01390 <span class="stringliteral">    &lt;div class=menutop&gt;</span>
<a name="l01391"></a>01391 <span class="stringliteral">    &lt;input type=submit name=submit        value=add&gt;</span>
<a name="l01392"></a>01392 <span class="stringliteral">    &lt;/div&gt;</span>
<a name="l01393"></a>01393 <span class="stringliteral"></span>
<a name="l01394"></a>01394 <span class="stringliteral">    &lt;/form&gt;</span>
<a name="l01395"></a>01395 <span class="stringliteral">    &lt;/td&gt;</span>
<a name="l01396"></a>01396 <span class="stringliteral"></span>
<a name="l01397"></a>01397 <span class="stringliteral">    &lt;/tr&gt;</span>
<a name="l01398"></a>01398 <span class="stringliteral"></span>
<a name="l01399"></a>01399 <span class="stringliteral">    &quot;</span>;
<a name="l01400"></a>01400 
<a name="l01401"></a>01401     <span class="keywordflow">for</span>( $i=0; $i&lt;<a class="code" href="files_8php.html#a75fc289e2dfa4d8c56e6511eaa3893d8">$numcats</a>; $i++ ) {
<a name="l01402"></a>01402         $cat=mysql_fetch_object( <a class="code" href="link__out_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a> );
<a name="l01403"></a>01403         echo <span class="stringliteral">&quot;&lt;form enctype=application/x-www-form-URLencoded action=\&quot;$RFS_SITE_URL/admin/adm.php\&quot; method=\&quot;post\&quot;&gt;&lt;tr&gt;&lt;td&gt;&quot;</span>;
<a name="l01404"></a>01404         echo <span class="stringliteral">&quot;&lt;input type=hidden name=action    value=f_delete_category&gt;\n&quot;</span>;
<a name="l01405"></a>01405         echo <span class="stringliteral">&quot;&lt;input type=hidden name=category  value=\&quot;$cat-&gt;name\&quot;&gt;\n&quot;</span>;
<a name="l01406"></a>01406         echo <span class="stringliteral">&quot;&lt;div class=menutop&gt;&quot;</span>;
<a name="l01407"></a>01407         echo <span class="stringliteral">&quot;&lt;input type=submit name=submit    value=delete&gt;\n&quot;</span>;
<a name="l01408"></a>01408         echo <span class="stringliteral">&quot;&lt;/div&gt;&quot;</span>;
<a name="l01409"></a>01409         echo <span class="stringliteral">&quot;&lt;/form&gt;&lt;/td&gt;\n&quot;</span>;
<a name="l01410"></a>01410         echo <span class="stringliteral">&quot;&lt;td&gt;&lt;form enctype=application/x-www-form-URLencoded action=\&quot;$RFS_SITE_URL/admin/adm.php\&quot; method=\&quot;post\&quot;&gt;\n&quot;</span>;
<a name="l01411"></a>01411         echo <span class="stringliteral">&quot;&lt;input type=hidden name=action    value=f_rename_category&gt;\n&quot;</span>;
<a name="l01412"></a>01412         echo <span class="stringliteral">&quot;&lt;input type=hidden name=category  value=\&quot;$cat-&gt;name\&quot;&gt;\n&quot;</span>;
<a name="l01413"></a>01413         echo <span class="stringliteral">&quot;&lt;input size=40 type=text   name=newname  value=\&quot;$cat-&gt;name\&quot;&gt;\n&quot;</span>;
<a name="l01414"></a>01414         <span class="keywordflow">if</span>(empty($cat-&gt;image)) $cat-&gt;image=<span class="stringliteral">&quot;images/icons/exclamation.png&quot;</span>;
<a name="l01415"></a>01415         <span class="keywordflow">if</span>(!file_exists(<span class="stringliteral">&quot;$RFS_SITE_PATH/$cat-&gt;image&quot;</span>)) {
<a name="l01416"></a>01416             $cat-&gt;image=<span class="stringliteral">&quot;images/icons/404.png&quot;</span>;
<a name="l01417"></a>01417         }
<a name="l01418"></a>01418         echo <span class="stringliteral">&quot;&lt;/td&gt;</span>
<a name="l01419"></a>01419 <span class="stringliteral">        &lt;td&gt;</span>
<a name="l01420"></a>01420 <span class="stringliteral">        &lt;a href=&#39;$RFS_SITE_URL/admin/adm.php?action=f_category_change_icon&amp;id=$cat-&gt;id&#39;&gt;        </span>
<a name="l01421"></a>01421 <span class="stringliteral">        &lt;img src=&#39;$RFS_SITE_URL/$cat-&gt;image&#39; border=&#39;0&#39; width=64 height=64&gt; &lt;/a&gt;</span>
<a name="l01422"></a>01422 <span class="stringliteral">        &lt;/td&gt;</span>
<a name="l01423"></a>01423 <span class="stringliteral">        &lt;td&gt;</span>
<a name="l01424"></a>01424 <span class="stringliteral">        &lt;input type=text name=image value=&#39;$cat-&gt;image&#39;&gt;</span>
<a name="l01425"></a>01425 <span class="stringliteral">        &lt;/td&gt;</span>
<a name="l01426"></a>01426 <span class="stringliteral"></span>
<a name="l01427"></a>01427 <span class="stringliteral">        &lt;td&gt;\n&quot;</span>;
<a name="l01428"></a>01428         echo <span class="stringliteral">&quot;&lt;div class=menutop&gt;&quot;</span>;
<a name="l01429"></a>01429         echo <span class="stringliteral">&quot;&lt;input type=submit name=submit    value=Update&gt;&lt;/form&gt;\n&quot;</span>;
<a name="l01430"></a>01430         echo <span class="stringliteral">&quot;&lt;/div&gt;&quot;</span>;
<a name="l01431"></a>01431         echo <span class="stringliteral">&quot;&lt;/td&gt;&lt;/tr&gt;\n&quot;</span>;
<a name="l01432"></a>01432     }
<a name="l01433"></a>01433     echo<span class="stringliteral">&quot;&lt;/table&gt;&quot;</span>;
<a name="l01434"></a>01434     include(<span class="stringliteral">&quot;footer.php&quot;</span>);
<a name="l01435"></a>01435     exit();
<a name="l01436"></a>01436 }<span class="comment"></span>
<a name="l01437"></a>01437 <span class="comment">///////////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l01438"></a>01438 <span class="comment"></span><span class="comment">// ADM_USER EDIT</span>
<a name="l01439"></a><a class="code" href="adm_8php.html#aaacf1c4d21f907b2c19ab04502cfcd05">01439</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#aaacf1c4d21f907b2c19ab04502cfcd05">adm_action_f_edit_users_go</a>() {
<a name="l01440"></a>01440     eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l01441"></a>01441     echo <span class="stringliteral">&quot;&lt;h3&gt;User updated&lt;/h3&gt;&quot;</span>;
<a name="l01442"></a>01442     <a class="code" href="lib_8mysql_8php.html#a859cf356f7e78d2c2a45011f30e3ce91">sc_updb</a>( <span class="stringliteral">&quot;users&quot;</span>,<span class="stringliteral">&quot;id&quot;</span>,$id,1 );
<a name="l01443"></a>01443     <a class="code" href="adm_8php.html#ae61c9a0b2524c9e3f584d50a6504fb71">adm_action_user_edit</a>();
<a name="l01444"></a>01444 }
<a name="l01445"></a><a class="code" href="adm_8php.html#a3f080bc5ed21800a5f17a8cc8722d675">01445</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a3f080bc5ed21800a5f17a8cc8722d675">adm_action_f_edit_users</a>() { eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l01446"></a>01446     <a class="code" href="lib_8sitevars_8php.html#a49a8a4009b02e49717caa88b128affc5">$res</a>=<a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;select * from users where `id`=&#39;$id&#39;&quot;</span> );
<a name="l01447"></a>01447     <a class="code" href="showprofile_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a>=mysql_fetch_object( <a class="code" href="lib_8sitevars_8php.html#a49a8a4009b02e49717caa88b128affc5">$res</a> );
<a name="l01448"></a>01448     echo <span class="stringliteral">&quot;&lt;h3&gt;Editing User [$user-&gt;name]&lt;/h3&gt;&quot;</span>;
<a name="l01449"></a>01449     <a class="code" href="lib_8mysql_8php.html#ab2a2e03dfc31eb5074a990325393609d">sc_bf</a>( <span class="stringliteral">&quot;$RFS_SITE_URL/admin/adm.php&quot;</span>,
<a name="l01450"></a>01450            <span class="stringliteral">&quot;action=f_edit_users_go&quot;</span>.<a class="code" href="config_8sitevars_8php.html#a06fab752c166675deeb7a9191add17ab">$RFS_SITE_DELIMITER</a>.
<a name="l01451"></a>01451            <span class="stringliteral">&quot;id=$id&quot;</span>,
<a name="l01452"></a>01452            <span class="stringliteral">&quot;users&quot;</span>,
<a name="l01453"></a>01453            <span class="stringliteral">&quot;select * from users where `id`=&#39;$id&#39;&quot;</span>,
<a name="l01454"></a>01454            <span class="stringliteral">&quot;&quot;</span>,
<a name="l01455"></a>01455            <span class="stringliteral">&quot;id&quot;</span>.$RFS_SITE_DELIMITER.
<a name="l01456"></a>01456            <span class="stringliteral">&quot;first_login&quot;</span>.$RFS_SITE_DELIMITER.
<a name="l01457"></a>01457            <span class="stringliteral">&quot;last_activity&quot;</span>.$RFS_SITE_DELIMITER.
<a name="l01458"></a>01458            <span class="stringliteral">&quot;last_login&quot;</span>.$RFS_SITE_DELIMITER.
<a name="l01459"></a>01459            <span class="stringliteral">&quot;logins&quot;</span>,
<a name="l01460"></a>01460            <span class="stringliteral">&quot;omit&quot;</span>,
<a name="l01461"></a>01461            <span class="stringliteral">&quot;&quot;</span>,
<a name="l01462"></a>01462            60,
<a name="l01463"></a>01463            <span class="stringliteral">&quot;update&quot;</span> );
<a name="l01464"></a>01464     include(<span class="stringliteral">&quot;footer.php&quot;</span>);
<a name="l01465"></a>01465     exit();
<a name="l01466"></a>01466 }
<a name="l01467"></a><a class="code" href="adm_8php.html#a6f2f72ad11309918eebcbbdc9c92bfa0">01467</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a6f2f72ad11309918eebcbbdc9c92bfa0">adm_action_f_del_users_go</a>() {
<a name="l01468"></a>01468     eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l01469"></a>01469     <a class="code" href="lib_8sitevars_8php.html#a49a8a4009b02e49717caa88b128affc5">$res</a>=<a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;select * from users where `id`=&#39;$id&#39;&quot;</span> );
<a name="l01470"></a>01470     <a class="code" href="showprofile_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a>=mysql_fetch_object( <a class="code" href="lib_8sitevars_8php.html#a49a8a4009b02e49717caa88b128affc5">$res</a> );
<a name="l01471"></a>01471     <span class="keywordflow">if</span>( $yes==<span class="stringliteral">&quot;Yes&quot;</span> ) {
<a name="l01472"></a>01472         echo <span class="stringliteral">&quot;User $user-&gt;name removed from database&quot;</span>;
<a name="l01473"></a>01473         <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;delete from users where `id`=&#39;$id&#39;&quot;</span> );
<a name="l01474"></a>01474     }
<a name="l01475"></a>01475     <a class="code" href="adm_8php.html#ae61c9a0b2524c9e3f584d50a6504fb71">adm_action_user_edit</a>();
<a name="l01476"></a>01476 }
<a name="l01477"></a><a class="code" href="adm_8php.html#a470a8c463d79190417419433e848a6da">01477</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a470a8c463d79190417419433e848a6da">adm_action_f_del_users</a>() {
<a name="l01478"></a>01478     eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l01479"></a>01479     echo <a class="code" href="lib_8rfs_8php.html#ae90d9606f0fc99c3462a0bc897b4d6bd">smiles</a>( <span class="stringliteral">&quot;&lt;p class=warning&gt;^X&lt;br&gt;WARNING!&lt;BR&gt;&lt;/p&gt;&quot;</span> );
<a name="l01480"></a>01480     <a class="code" href="lib_8sitevars_8php.html#a49a8a4009b02e49717caa88b128affc5">$res</a>=<a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;select * from users where `id`=&#39;$id&#39;&quot;</span> );
<a name="l01481"></a>01481     <a class="code" href="showprofile_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a>=mysql_fetch_object( <a class="code" href="lib_8sitevars_8php.html#a49a8a4009b02e49717caa88b128affc5">$res</a> );
<a name="l01482"></a>01482     <a class="code" href="lib_8mysql_8php.html#a238eaa47b98b06591deb8e16a715e14c">sc_confirmform</a>( <span class="stringliteral">&quot;Delete $user-&gt;name?&quot;</span>,
<a name="l01483"></a>01483                     <span class="stringliteral">&quot;$RFS_SITE_URL/admin/adm.php&quot;</span>,
<a name="l01484"></a>01484                     <span class="stringliteral">&quot;action=f_del_users_go&quot;</span>.<a class="code" href="config_8sitevars_8php.html#a06fab752c166675deeb7a9191add17ab">$RFS_SITE_DELIMITER</a>.<span class="stringliteral">&quot;id=$id&quot;</span> );
<a name="l01485"></a>01485     include(<span class="stringliteral">&quot;footer.php&quot;</span>);
<a name="l01486"></a>01486     exit();
<a name="l01487"></a>01487 }
<a name="l01488"></a><a class="code" href="adm_8php.html#a81986b0289c7ac7584512e6555a64831">01488</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a81986b0289c7ac7584512e6555a64831">adm_action_f_add_user</a>() {
<a name="l01489"></a>01489     eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l01490"></a>01490     echo <span class="stringliteral">&quot;&lt;h3&gt;Add user $name&lt;/h3&gt;&quot;</span>;
<a name="l01491"></a>01491     $pmd5=md5( $pass );
<a name="l01492"></a>01492     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;insert into `users` (`name`,`pass`) VALUES (&#39;$name&#39;,&#39;$pmd5&#39;);&quot;</span> );
<a name="l01493"></a>01493     <a class="code" href="adm_8php.html#ae61c9a0b2524c9e3f584d50a6504fb71">adm_action_user_edit</a>();
<a name="l01494"></a>01494 }
<a name="l01495"></a><a class="code" href="adm_8php.html#ae61c9a0b2524c9e3f584d50a6504fb71">01495</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#ae61c9a0b2524c9e3f584d50a6504fb71">adm_action_user_edit</a>() {
<a name="l01496"></a>01496     eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l01497"></a>01497 
<a name="l01498"></a>01498     echo <span class="stringliteral">&quot;&lt;h1&gt;User Editor&lt;/h1&gt;&quot;</span>;
<a name="l01499"></a>01499     echo  <span class="stringliteral">&quot;&lt;h2&gt;Add User&lt;/h2&gt;&quot;</span>;
<a name="l01500"></a>01500 
<a name="l01501"></a>01501     <a class="code" href="lib_8mysql_8php.html#ab2a2e03dfc31eb5074a990325393609d">sc_bf</a>(  <span class="stringliteral">&quot;$RFS_SITE_URL/admin/adm.php&quot;</span>,
<a name="l01502"></a>01502             <span class="stringliteral">&quot;action=f_add_user&quot;</span>,
<a name="l01503"></a>01503             <span class="stringliteral">&quot;users&quot;</span>,
<a name="l01504"></a>01504             <span class="stringliteral">&quot;&quot;</span>,
<a name="l01505"></a>01505             <span class="stringliteral">&quot;&quot;</span>,
<a name="l01506"></a>01506             <span class="stringliteral">&quot;name&quot;</span>.<a class="code" href="config_8sitevars_8php.html#a06fab752c166675deeb7a9191add17ab">$RFS_SITE_DELIMITER</a>.<span class="stringliteral">&quot;pass&quot;</span>,
<a name="l01507"></a>01507             <span class="stringliteral">&quot;include&quot;</span>,
<a name="l01508"></a>01508             <span class="stringliteral">&quot;&quot;</span>,
<a name="l01509"></a>01509             20,
<a name="l01510"></a>01510             <span class="stringliteral">&quot;add new user&quot;</span> );
<a name="l01511"></a>01511 
<a name="l01512"></a>01512     <a class="code" href="lib_8mysql_8php.html#adbb1f4c87d2fe0d9c70f42ff350d6c0b">sc_db_dumptable</a>( <span class="stringliteral">&quot;users&quot;</span>,
<a name="l01513"></a>01513                      <span class="stringliteral">&quot;showform&quot;</span>.<a class="code" href="config_8sitevars_8php.html#a06fab752c166675deeb7a9191add17ab">$RFS_SITE_DELIMITER</a>.<span class="stringliteral">&quot;f_&quot;</span>,
<a name="l01514"></a>01514                      <span class="stringliteral">&quot;id&quot;</span>,
<a name="l01515"></a>01515                      <span class="stringliteral">&quot;what&quot;</span> );
<a name="l01516"></a>01516 
<a name="l01517"></a>01517     include(<span class="stringliteral">&quot;footer.php&quot;</span>);
<a name="l01518"></a>01518     exit();
<a name="l01519"></a>01519 }
<a name="l01520"></a>01520 <span class="comment"></span>
<a name="l01521"></a>01521 <span class="comment">///////////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l01522"></a>01522 <span class="comment"></span><span class="comment">// ADM_RSS EDITOR</span>
<a name="l01523"></a><a class="code" href="adm_8php.html#a8eb31fc7f3b84f95576e6e7f008a09fd">01523</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a8eb31fc7f3b84f95576e6e7f008a09fd">adm_action_f_rss_edit_go_edit</a>() {
<a name="l01524"></a>01524     eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l01525"></a>01525     <span class="keywordflow">if</span>( $update==<span class="stringliteral">&quot;update&quot;</span> ) <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;UPDATE rss_feeds SET `feed`=&#39;$edfeed&#39; where `id`=&#39;$oid&#39;&quot;</span> );
<a name="l01526"></a>01526     <span class="keywordflow">if</span>( $delete==<span class="stringliteral">&quot;delete&quot;</span> ) <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;DELETE FROM rss_feeds WHERE id = &#39;$oid&#39; &quot;</span> );
<a name="l01527"></a>01527     <a class="code" href="adm_8php.html#a883566187ba6066d6793d80a7fc6b8ce">adm_action_rss_edit</a>();
<a name="l01528"></a>01528 }
<a name="l01529"></a><a class="code" href="adm_8php.html#a07c310575a4588bb0217bcfc4c3f1d4f">01529</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a07c310575a4588bb0217bcfc4c3f1d4f">adm_action_f_rss_edit_go_add</a>() {
<a name="l01530"></a>01530     eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l01531"></a>01531     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;insert into rss_feeds values(&#39;$edfeed&#39;,0);&quot;</span> );
<a name="l01532"></a>01532     <a class="code" href="adm_8php.html#a883566187ba6066d6793d80a7fc6b8ce">adm_action_rss_edit</a>();
<a name="l01533"></a>01533 }
<a name="l01534"></a><a class="code" href="adm_8php.html#a883566187ba6066d6793d80a7fc6b8ce">01534</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a883566187ba6066d6793d80a7fc6b8ce">adm_action_rss_edit</a>() {
<a name="l01535"></a>01535     eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l01536"></a>01536     <a class="code" href="link__out_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a>=<a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;select * from rss_feeds&quot;</span> );
<a name="l01537"></a>01537     <a class="code" href="rss_8php.html#aab5ded576868df8431ef8994a97c6013">$num_feeds</a>=mysql_num_rows( <a class="code" href="link__out_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a> );
<a name="l01538"></a>01538     echo <span class="stringliteral">&quot;&lt;h3&gt;Editing RSS Feeds &lt;/h3&gt;&quot;</span>;
<a name="l01539"></a>01539 
<a name="l01540"></a>01540     <span class="keywordflow">for</span>( $i=0; $i&lt;<a class="code" href="rss_8php.html#aab5ded576868df8431ef8994a97c6013">$num_feeds</a>; $i++ ) {
<a name="l01541"></a>01541         echo <span class="stringliteral">&quot;&lt;table border=0 cellspacing=0 cellpadding=0&gt;\n&quot;</span>;
<a name="l01542"></a>01542         echo <span class="stringliteral">&quot;&lt;form enctype=\&quot;application/x-www-form-URLencoded\&quot; action=\&quot;$RFS_SITE_URL/admin/adm.php\&quot; method=\&quot;post\&quot;&gt;\n&quot;</span>;
<a name="l01543"></a>01543         echo <span class="stringliteral">&quot;&lt;input type=hidden name=action value=rsseditgoedit&gt;\n&quot;</span>;
<a name="l01544"></a>01544         $feed=mysql_fetch_object( <a class="code" href="link__out_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a> );
<a name="l01545"></a>01545         echo <span class="stringliteral">&quot;&lt;tr&gt;&lt;td&gt;Feed URL&lt;/td&gt; &lt;td&gt;&lt;input type=textbox name=edfeed value=\&quot;$feed-&gt;feed\&quot; size=100&gt;&lt;/td&gt;\n&quot;</span>;
<a name="l01546"></a>01546         echo <span class="stringliteral">&quot;&lt;td&gt;&lt;input type=submit value=delete name=delete&gt;&lt;/td&gt;\n&quot;</span>;
<a name="l01547"></a>01547         echo <span class="stringliteral">&quot;&lt;td&gt;&lt;input type=submit value=update name=update&gt; &lt;input type=hidden value=$feed-&gt;id name=oid&gt;&lt;/td&gt;\n&quot;</span>;
<a name="l01548"></a>01548         echo <span class="stringliteral">&quot;&lt;/tr&gt;\n&quot;</span>;
<a name="l01549"></a>01549         echo <span class="stringliteral">&quot;&lt;/form&gt;&lt;/table&gt;\n&quot;</span>;
<a name="l01550"></a>01550     }
<a name="l01551"></a>01551     echo <span class="stringliteral">&quot;&lt;table border=0 cellspacing=0 cellpadding=0&gt;\n&quot;</span>;
<a name="l01552"></a>01552     echo <span class="stringliteral">&quot;&lt;form enctype=\&quot;application/x-www-form-URLencoded\&quot; action=\&quot;$RFS_SITE_URL/admin/adm.php\&quot; method=\&quot;post\&quot;&gt;\n&quot;</span>;
<a name="l01553"></a>01553     echo <span class="stringliteral">&quot;&lt;input type=hidden name=action value=rsseditgoadd&gt;\n&quot;</span>;
<a name="l01554"></a>01554     echo <span class="stringliteral">&quot;&lt;tr&gt;&lt;td&gt;New Feed&lt;/td&gt;&lt;td&gt;&lt;input type=textbox name=edfeed value=\&quot;\&quot; size=100&gt;&lt;/td&gt;\n&quot;</span>;
<a name="l01555"></a>01555     echo <span class="stringliteral">&quot;&lt;td&gt;&lt;input type=submit value=add name=add&gt;&lt;/td&gt;\n&quot;</span>;
<a name="l01556"></a>01556     echo <span class="stringliteral">&quot;&lt;/form&gt;&lt;/table&gt;\n&quot;</span>;
<a name="l01557"></a>01557     include(<span class="stringliteral">&quot;footer.php&quot;</span>);
<a name="l01558"></a>01558     exit();
<a name="l01559"></a>01559 }
<a name="l01560"></a>01560 <span class="comment"></span>
<a name="l01561"></a>01561 <span class="comment">/////////////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l01562"></a>01562 <span class="comment"></span><span class="comment">// ADM_SMILEY EDITOR</span>
<a name="l01563"></a><a class="code" href="adm_8php.html#a89dffd8a36aa7efc2cbde9d9dda713c6">01563</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a89dffd8a36aa7efc2cbde9d9dda713c6">adm_action_edit_smilies</a>() {
<a name="l01564"></a>01564     eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l01565"></a>01565     echo <span class="stringliteral">&quot;&lt;h3&gt;Smiley Editor&lt;/h3&gt;&quot;</span>;
<a name="l01566"></a>01566     $sto=stripslashes( $sto );
<a name="l01567"></a>01567     $sfrom=stripslashes( $sfrom );
<a name="l01568"></a>01568     $ofrom=stripslashes( $ofrom );
<a name="l01569"></a>01569     <span class="keywordflow">switch</span>( $smact ) {
<a name="l01570"></a>01570         <span class="keywordflow">case</span> <span class="stringliteral">&quot;update&quot;</span>:
<a name="l01571"></a>01571             $sfrom=addslashes( $sfrom );
<a name="l01572"></a>01572             <a class="code" href="lib_8rfs_8php.html#afb6b656bf7c2d97ef28e2055ee73ac3a">rfs_echo</a>(<span class="stringliteral">&quot;$sfrom -&gt; $sto updated&quot;</span>);
<a name="l01573"></a>01573             $sto=addslashes( $sto );
<a name="l01574"></a>01574             <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;UPDATE `smilies` SET `sto`=&#39;$sto&#39; where `sfrom`=&#39;$ofrom&#39;;&quot;</span> );
<a name="l01575"></a>01575             <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;UPDATE `smilies` SET `sfrom`=&#39;$sfrom&#39; where `sfrom` = &#39;$ofrom&#39;;&quot;</span> );
<a name="l01576"></a>01576             <span class="keywordflow">break</span>;
<a name="l01577"></a>01577         <span class="keywordflow">case</span> <span class="stringliteral">&quot;delete&quot;</span>:
<a name="l01578"></a>01578             $sfrom=addslashes( $sfrom );
<a name="l01579"></a>01579             echo <span class="stringliteral">&quot;$sfrom -&gt; $sto deleted&quot;</span>;
<a name="l01580"></a>01580             $sto=addslashes( $sto );
<a name="l01581"></a>01581             <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;delete from `smilies` where `sfrom` = &#39;$sfrom&#39; and `sto` = &#39;$sto&#39; limit 1;&quot;</span> );
<a name="l01582"></a>01582             <span class="keywordflow">break</span>;
<a name="l01583"></a>01583         <span class="keywordflow">case</span> <span class="stringliteral">&quot;new&quot;</span>:
<a name="l01584"></a>01584             $sfrom=addslashes( $sfrom );
<a name="l01585"></a>01585             echo <span class="stringliteral">&quot;$sfrom -&gt; $sto created&quot;</span>;
<a name="l01586"></a>01586             $sto=addslashes( $sto );
<a name="l01587"></a>01587             <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;INSERT INTO `smilies` VALUES (&#39;$sfrom&#39;, &#39;$sto&#39;);&quot;</span> );
<a name="l01588"></a>01588             <span class="keywordflow">break</span>;
<a name="l01589"></a>01589     }
<a name="l01590"></a>01590     echo <span class="stringliteral">&quot;&lt;table width=100% cellspacing=0 cellpadding=0 class=\&quot;dm_news\&quot;&gt;\n&quot;</span>;
<a name="l01591"></a>01591     echo <span class="stringliteral">&quot;&lt;tr&gt;\n&quot;</span>;
<a name="l01592"></a>01592     echo <span class="stringliteral">&quot;&lt;td class=contenttd&gt;&quot;</span>;
<a name="l01593"></a>01593     <a class="code" href="link__out_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a>=<a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;select * from smilies&quot;</span> );
<a name="l01594"></a>01594     $num_smilies=mysql_num_rows( <a class="code" href="link__out_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a> );
<a name="l01595"></a>01595     echo <span class="stringliteral">&quot;&lt;td class=contenttd&gt;\n&quot;</span>;
<a name="l01596"></a>01596     echo <span class="stringliteral">&quot;$num_smilies smilies&quot;</span>;
<a name="l01597"></a>01597     echo <span class="stringliteral">&quot;&lt;table border=0 cellspacing=0 cellpadding=5 width=100%&gt;&quot;</span>;
<a name="l01598"></a>01598     <span class="keywordflow">for</span>( $i=0; $i&lt;$num_smilies; $i++ ) {
<a name="l01599"></a>01599         $bg=$bg+1;
<a name="l01600"></a>01600         <span class="keywordflow">if</span>( $bg&gt;2 ) $bg=1;
<a name="l01601"></a>01601         $smiley = mysql_fetch_array( <a class="code" href="link__out_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a> );
<a name="l01602"></a>01602         $sfrom=stripslashes( $smiley[<span class="stringliteral">&#39;sfrom&#39;</span>] );
<a name="l01603"></a>01603         $sto=stripslashes( $smiley[<span class="stringliteral">&#39;sto&#39;</span>] );
<a name="l01604"></a>01604         echo <span class="stringliteral">&quot;&lt;tr&gt;\n&quot;</span>;
<a name="l01605"></a>01605         <a class="code" href="lib_8rfs_8php.html#afb6b656bf7c2d97ef28e2055ee73ac3a">rfs_echo</a>( <span class="stringliteral">&quot;&lt;td class=sc_project_table_$bg align=center width=24 valign=top&gt;$sto&lt;/td&gt;&quot;</span>);
<a name="l01606"></a>01606         echo <span class="stringliteral">&quot;&lt;td class=sc_project_table_$bg valign=top&gt;\n&quot;</span>;
<a name="l01607"></a>01607         echo <span class="stringliteral">&quot;&lt;form enctype=\&quot;application/x-www-form-URLencoded\&quot; action=\&quot;$RFS_SITE_URL/admin/adm.php\&quot; method=\&quot;post\&quot;&gt;\n&quot;</span>;
<a name="l01608"></a>01608         echo <span class="stringliteral">&quot;&lt;input type=hidden name=action value=edit_smilies&gt;\n&quot;</span>;
<a name="l01609"></a>01609         echo <span class="stringliteral">&quot;&lt;input type=hidden name=smact value=update&gt;&quot;</span>;
<a name="l01610"></a>01610         echo <span class="stringliteral">&quot;&lt;input type=hidden name=ofrom value=\&quot;$sfrom\&quot;&gt;\n&quot;</span>;
<a name="l01611"></a>01611         echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l01612"></a>01612         echo <span class="stringliteral">&quot;&lt;td class=sc_project_table_$bg&gt;&quot;</span>;
<a name="l01613"></a>01613         echo <span class="stringliteral">&quot;&lt;input size=5 type=textbox name=sfrom value=\&quot;$sfrom\&quot;&gt;\n&quot;</span>;
<a name="l01614"></a>01614         echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l01615"></a>01615         echo <span class="stringliteral">&quot;&lt;td class=sc_project_table_$bg&gt;&quot;</span>;
<a name="l01616"></a>01616         echo <span class="stringliteral">&quot;&lt;textarea name=sto cols=80&gt;$sto&lt;/textarea&gt;\n&quot;</span>;
<a name="l01617"></a>01617         echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l01618"></a>01618         echo <span class="stringliteral">&quot;&lt;td class=sc_project_table_$bg&gt;&quot;</span>;
<a name="l01619"></a>01619         echo <span class="stringliteral">&quot;&lt;input type=submit name=smact value=update&gt;&lt;/form&gt;&lt;/td&gt;&quot;</span>;
<a name="l01620"></a>01620         echo <span class="stringliteral">&quot;&lt;td class=sc_project_table_$bg&gt;&quot;</span>;
<a name="l01621"></a>01621         echo <span class="stringliteral">&quot;&lt;form enctype=\&quot;application/x-www-form-URLencoded\&quot; action=\&quot;$RFS_SITE_URL/admin/adm.php\&quot; method=\&quot;post\&quot;&gt;\n&quot;</span>;
<a name="l01622"></a>01622         echo <span class="stringliteral">&quot;&lt;input type=hidden name=action value=edit_smilies&gt;\n&quot;</span>;
<a name="l01623"></a>01623         echo <span class="stringliteral">&quot;&lt;input type=hidden name=smact value=delete&gt;&quot;</span>;
<a name="l01624"></a>01624         echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l01625"></a>01625         echo <span class="stringliteral">&quot;&lt;td class=sc_project_table_$bg&gt;&quot;</span>;
<a name="l01626"></a>01626         echo <span class="stringliteral">&quot;&lt;input type=hidden name=sfrom value=\&quot;$sfrom\&quot;&gt;\n&quot;</span>;
<a name="l01627"></a>01627         echo <span class="stringliteral">&quot;&lt;input type=hidden name=sto   value=\&quot;&quot;</span>.urlencode( $sto ).<span class="stringliteral">&quot;\&quot;&gt;\n&quot;</span>;
<a name="l01628"></a>01628         echo <span class="stringliteral">&quot;&lt;input type=submit name=delete value=delete&gt;&quot;</span>;
<a name="l01629"></a>01629         echo <span class="stringliteral">&quot;&lt;/form&gt;&lt;/td&gt;\n&quot;</span>;
<a name="l01630"></a>01630         echo <span class="stringliteral">&quot;&lt;/tr&gt;&quot;</span>;
<a name="l01631"></a>01631     }
<a name="l01632"></a>01632 
<a name="l01633"></a>01633     echo <span class="stringliteral">&quot;&lt;tr&gt;\n&quot;</span>;
<a name="l01634"></a>01634     echo <span class="stringliteral">&quot;&lt;td class=contenttd align=center width=24 valign=top&gt;Add&quot;</span>;
<a name="l01635"></a>01635     echo <span class="stringliteral">&quot;&lt;/td&gt;&quot;</span>;
<a name="l01636"></a>01636     echo <span class="stringliteral">&quot;&lt;td class=contenttd&gt;&quot;</span>;
<a name="l01637"></a>01637 
<a name="l01638"></a>01638     echo <span class="stringliteral">&quot;&lt;form enctype=\&quot;application/x-www-form-URLencoded\&quot; action=\&quot;$RFS_SITE_URL/admin/adm.php\&quot; method=\&quot;post\&quot;&gt;\n&quot;</span>;
<a name="l01639"></a>01639     echo <span class="stringliteral">&quot;&lt;input type=hidden name=action value=edit_smilies&gt;\n&quot;</span>;
<a name="l01640"></a>01640     echo <span class="stringliteral">&quot;&lt;input type=hidden name=smact value=new&gt;\n&quot;</span>;
<a name="l01641"></a>01641     echo <span class="stringliteral">&quot;&lt;/td&gt;\n&quot;</span>;
<a name="l01642"></a>01642     echo <span class="stringliteral">&quot;&lt;td class=contenttd valign=top&gt;&lt;input size=5 type=textbox name=sfrom&gt;&lt;/td&gt;\n&quot;</span>;
<a name="l01643"></a>01643     echo <span class="stringliteral">&quot;&lt;td class=contenttd valign=top&gt;&lt;textarea name=sto cols=80&gt;&lt;/textarea&gt;&lt;/td&gt;\n&quot;</span>;
<a name="l01644"></a>01644     echo <span class="stringliteral">&quot;&lt;td class=contenttd valign=top&gt;&lt;input type=submit  value=add&gt;&lt;/form&gt;&lt;/td&gt;\n&quot;</span>;
<a name="l01645"></a>01645     echo <span class="stringliteral">&quot;&lt;/tr&gt;&lt;/table&gt;\n&quot;</span>;
<a name="l01646"></a>01646     echo <span class="stringliteral">&quot;&lt;/td&gt;\n&quot;</span>;
<a name="l01647"></a>01647     echo <span class="stringliteral">&quot;&lt;/tr&gt;\n&quot;</span>;
<a name="l01648"></a>01648     echo <span class="stringliteral">&quot;&lt;/table&gt;\n&quot;</span>;
<a name="l01649"></a>01649     include(<span class="stringliteral">&quot;footer.php&quot;</span>);
<a name="l01650"></a>01650     exit();
<a name="l01651"></a>01651 }
<a name="l01652"></a>01652 <span class="comment"></span>
<a name="l01653"></a>01653 <span class="comment">////////////////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l01654"></a>01654 <span class="comment"></span><span class="comment">// ADM_LOG STUFF</span>
<a name="l01655"></a><a class="code" href="adm_8php.html#a21fbb3bed43e3a3990e6603d056d800e">01655</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a21fbb3bed43e3a3990e6603d056d800e">adm_action_f_domain_quiet</a>() {
<a name="l01656"></a>01656     eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l01657"></a>01657     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;insert into `quiet` (`ip`,`domain`) values(\&quot;$domain\&quot;,\&quot;$domain\&quot;)&quot;</span> );
<a name="l01658"></a>01658 }
<a name="l01659"></a><a class="code" href="adm_8php.html#a4b9e5dd3976d68ed181c14475ad1587d">01659</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a4b9e5dd3976d68ed181c14475ad1587d">adm_action_log_rotate</a>() {
<a name="l01660"></a>01660     eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l01661"></a>01661     $dr=<a class="code" href="config_8sitevars_8php.html#a0304f1c6ce0928c6dda1a31ca21a58ae">$RFS_SITE_PATH</a>;
<a name="l01662"></a>01662     $t=time();
<a name="l01663"></a>01663     <span class="keywordflow">if</span>( <a class="code" href="config_8sitevars_8php.html#a0304f1c6ce0928c6dda1a31ca21a58ae">$RFS_SITE_PATH</a>==<span class="stringliteral">&quot;C:\\xampp\\htdocs\\sethcoder&quot;</span> ) {
<a name="l01664"></a>01664         echo <span class="stringliteral">&quot;rename $dr\\log\\log.htm $dr\\log\\log_$t.htm&lt;BR&gt;&quot;</span>;
<a name="l01665"></a>01665         system( <span class="stringliteral">&quot;rename $dr\\log\\log.htm log_$t.htm&quot;</span> );
<a name="l01666"></a>01666         echo <span class="stringliteral">&quot;copy $dr\\log\\blanklog.htm $dr\\log\\log.htm&lt;BR&gt;&quot;</span>;
<a name="l01667"></a>01667         system( <span class="stringliteral">&quot;copy $dr\\log\\blanklog.htm $dr\\log\\log.htm&quot;</span> );
<a name="l01668"></a>01668     }  <span class="keywordflow">else</span>  {
<a name="l01669"></a>01669         echo <span class="stringliteral">&quot;mv $dr/log/log.htm $dr/log/log_$t.htm&quot;</span>;
<a name="l01670"></a>01670         system( <span class="stringliteral">&quot;mv $dr/log/log.htm $dr/log/log_$t.htm&quot;</span> );
<a name="l01671"></a>01671         echo <span class="stringliteral">&quot;cp $dr/log/blanklog.htm $dr/log/log.htm&quot;</span>;
<a name="l01672"></a>01672         system( <span class="stringliteral">&quot;cp $dr/log/blanklog.htm $dr/log/log.htm&quot;</span> );
<a name="l01673"></a>01673         <a class="code" href="lib_8log_8php.html#a85306751b884541d0eff4186e78730fa">sc_log</a>( <span class="stringliteral">&quot;Log restarted&quot;</span> );
<a name="l01674"></a>01674     }
<a name="l01675"></a>01675     <a class="code" href="adm_8php.html#a175e2501b728b265e3f137e42786551c">adm_action_log_view</a>();
<a name="l01676"></a>01676 }
<a name="l01677"></a><a class="code" href="adm_8php.html#a175e2501b728b265e3f137e42786551c">01677</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a175e2501b728b265e3f137e42786551c">adm_action_log_view</a>() {
<a name="l01678"></a>01678     eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l01679"></a>01679     echo <span class="stringliteral">&quot;&lt;h3&gt;View Log&lt;/h3&gt;&quot;</span>;
<a name="l01680"></a>01680     @include( <span class="stringliteral">&quot;$RFS_SITE_PATH/log/log.htm&quot;</span> );
<a name="l01681"></a>01681     include(<span class="stringliteral">&quot;footer.php&quot;</span>);
<a name="l01682"></a>01682     exit();
<a name="l01683"></a>01683 }<span class="comment"></span>
<a name="l01684"></a>01684 <span class="comment">/////////////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l01685"></a>01685 <span class="comment"></span><span class="comment">// ADM_COUNTERS</span>
<a name="l01686"></a><a class="code" href="adm_8php.html#addf5ee80a861c3bb13de835f36996780">01686</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#addf5ee80a861c3bb13de835f36996780">adm_action_counters</a>() {
<a name="l01687"></a>01687     echo <span class="stringliteral">&quot;&lt;h3&gt;Counters&lt;/h3&gt;\n&quot;</span>;
<a name="l01688"></a>01688     $counters=<a class="code" href="lib_8mysql_8php.html#adbb1f4c87d2fe0d9c70f42ff350d6c0b">sc_db_dumptable</a>(<span class="stringliteral">&quot;counters&quot;</span>,<span class="stringliteral">&quot;&quot;</span>,<span class="stringliteral">&quot;&quot;</span>,<span class="stringliteral">&quot;&quot;</span>);
<a name="l01689"></a>01689     include(<span class="stringliteral">&quot;footer.php&quot;</span>);
<a name="l01690"></a>01690     exit();
<a name="l01691"></a>01691 }<span class="comment"></span>
<a name="l01692"></a>01692 <span class="comment">/////////////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l01693"></a>01693 <span class="comment"></span><span class="comment">// ADM_AWARD EDIT</span>
<a name="l01694"></a><a class="code" href="adm_8php.html#a5f6087c9c47d8d7e906e5090de5c1296">01694</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a5f6087c9c47d8d7e906e5090de5c1296">adm_action_awards_edit</a>() {
<a name="l01695"></a>01695     echo <span class="stringliteral">&quot;&lt;h3&gt;Award Editor&lt;/h3&gt;\n&quot;</span>;
<a name="l01696"></a>01696     sc_awards_list();
<a name="l01697"></a>01697     include(<span class="stringliteral">&quot;footer.php&quot;</span>);
<a name="l01698"></a>01698     exit();
<a name="l01699"></a>01699 }
<a name="l01700"></a><a class="code" href="adm_8php.html#a0b33df0a033acc340d72d63a4a061a8a">01700</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a0b33df0a033acc340d72d63a4a061a8a">adm_action_f_add_award_go</a>() {
<a name="l01701"></a>01701     eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l01702"></a>01702     echo <span class="stringliteral">&quot;&lt;h3&gt;Add award!&lt;/h3&gt;\n&quot;</span>;
<a name="l01703"></a>01703     <span class="comment">// id, name, description, image, time</span>
<a name="l01704"></a>01704     <a class="code" href="wab_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a>=addslashes( <a class="code" href="wab_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a> );
<a name="l01705"></a>01705     $description=addslashes( $description );
<a name="l01706"></a>01706     $image=addslashes( $image );
<a name="l01707"></a>01707     $time=date( <span class="stringliteral">&quot;Y-m-d H:i:s&quot;</span> );
<a name="l01708"></a>01708     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;insert into awards values(&#39;&#39;, &#39;$name&#39;, &#39;$description&#39;, &#39;$image&#39;, &#39;$time&#39;)&quot;</span> );
<a name="l01709"></a>01709     <a class="code" href="adm_8php.html#a5f6087c9c47d8d7e906e5090de5c1296">adm_action_awards_edit</a>();
<a name="l01710"></a>01710 }
<a name="l01711"></a><a class="code" href="adm_8php.html#a4329c4f8da6233783410e277c0d6c569">01711</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a4329c4f8da6233783410e277c0d6c569">adm_action_f_edit_award_go</a>() {
<a name="l01712"></a>01712     eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l01713"></a>01713     echo <span class="stringliteral">&quot;&lt;h3&gt;Edit award!&lt;/h3&gt;\n&quot;</span>;
<a name="l01714"></a>01714     <span class="comment">// id, name, description, image, time</span>
<a name="l01715"></a>01715     <a class="code" href="wab_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a>=addslashes( <a class="code" href="wab_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a> );
<a name="l01716"></a>01716     $description=addslashes( $description );
<a name="l01717"></a>01717     $image=addslashes( $image );
<a name="l01718"></a>01718     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;update awards set name = &#39;$name&#39; where id = &#39;$id&#39;&quot;</span> );
<a name="l01719"></a>01719     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;update awards set description = &#39;$description&#39; where id = &#39;$id&#39;&quot;</span> );
<a name="l01720"></a>01720     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;update awards set image = &#39;$image&#39; where id = &#39;$id&#39;&quot;</span> );
<a name="l01721"></a>01721     <a class="code" href="adm_8php.html#a5f6087c9c47d8d7e906e5090de5c1296">adm_action_awards_edit</a>();
<a name="l01722"></a>01722     
<a name="l01723"></a>01723 }<span class="comment"></span>
<a name="l01724"></a>01724 <span class="comment">/////////////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l01725"></a>01725 <span class="comment"></span><span class="comment">// ADM_LINK EDIT</span>
<a name="l01726"></a><a class="code" href="adm_8php.html#a7bf3cc8e0bc8a11272e0f4079bd5d812">01726</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a7bf3cc8e0bc8a11272e0f4079bd5d812">adm_action_f_add_link</a>() {
<a name="l01727"></a>01727     eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l01728"></a>01728     $link=$_REQUEST[<span class="stringliteral">&#39;link&#39;</span>];
<a name="l01729"></a>01729     $time=date( <span class="stringliteral">&quot;Y-m-d H:i:s&quot;</span> );
<a name="l01730"></a>01730     <span class="keywordflow">if</span>( <a class="code" href="adm_8php.html#a6efc15b5a2314dd4b5aaa556a375c6d6">$data</a>-&gt;id==0 ) <a class="code" href="adm_8php.html#a6efc15b5a2314dd4b5aaa556a375c6d6">$data</a>-&gt;id=999;
<a name="l01731"></a>01731     <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;insert into `link_bin` (`link`,`sname`,`time`,`bumptime`,`poster`,`description`)</span>
<a name="l01732"></a>01732 <span class="stringliteral">              values(&#39;$link&#39;,&#39;$sname&#39;,&#39;$time&#39;,&#39;$time&#39;,   &#39;$id&#39;,&#39;$description&#39;)&quot;</span> );
<a name="l01733"></a>01733     echo <span class="stringliteral">&quot;&lt;p&gt;Link [$link][$sname] added to linkbin...&lt;/p&gt;\n&quot;</span>;
<a name="l01734"></a>01734     <a class="code" href="lib_8log_8php.html#a85306751b884541d0eff4186e78730fa">sc_log</a>( <span class="stringliteral">&quot;*****&gt; $data-&gt;name added a link to the linkbin [$link]&quot;</span> );
<a name="l01735"></a>01735     <a class="code" href="adm_8php.html#ac44251b5ae4effd5d00a073768e8d0af">adm_action_edit_linkbin</a>();
<a name="l01736"></a>01736 }
<a name="l01737"></a><a class="code" href="adm_8php.html#ae06e8b329dcdf45d65fea0a458544d43">01737</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#ae06e8b329dcdf45d65fea0a458544d43">adm_action_f_modify_link</a>() {
<a name="l01738"></a>01738     eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l01739"></a>01739     <span class="keywordflow">if</span>( $deletelink==<span class="stringliteral">&quot;delete&quot;</span> ) {
<a name="l01740"></a>01740         $l=<a class="code" href="lib_8mysql_8php.html#ad42d2c11477299cecf3dd06b259a316e">mfo1</a>( <span class="stringliteral">&quot;select * from link_bin where `id`=&#39;$linkid&#39;&quot;</span> );
<a name="l01741"></a>01741         <a class="code" href="lib_8mysql_8php.html#a238eaa47b98b06591deb8e16a715e14c">sc_confirmform</a>( <span class="stringliteral">&quot;Are you sure you want to delete $l-&gt;link ?&quot;</span>,
<a name="l01742"></a>01742                         <span class="stringliteral">&quot;$RFS_SITE_URL/admin/adm.php&quot;</span>,
<a name="l01743"></a>01743                         <span class="stringliteral">&quot;action=f_modify_link&quot;</span>.<a class="code" href="config_8sitevars_8php.html#a06fab752c166675deeb7a9191add17ab">$RFS_SITE_DELIMITER</a>.<span class="stringliteral">&quot;deletelink=delete_go&quot;</span>.<a class="code" href="config_8sitevars_8php.html#a06fab752c166675deeb7a9191add17ab">$RFS_SITE_DELIMITER</a>.<span class="stringliteral">&quot;linkid=$linkid&quot;</span> );
<a name="l01744"></a>01744     }
<a name="l01745"></a>01745     <span class="keywordflow">if</span>( $deletelink==<span class="stringliteral">&quot;delete_go&quot;</span> ) {
<a name="l01746"></a>01746 
<a name="l01747"></a>01747         $l=<a class="code" href="lib_8mysql_8php.html#ad42d2c11477299cecf3dd06b259a316e">mfo1</a>( <span class="stringliteral">&quot;select * from link_bin where `id`=&#39;$linkid&#39;&quot;</span> );
<a name="l01748"></a>01748         <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;DELETE FROM link_bin where `id` = &#39;$linkid&#39; limit 1&quot;</span>, $mysql );
<a name="l01749"></a>01749         <a class="code" href="lib_8log_8php.html#a85306751b884541d0eff4186e78730fa">sc_log</a>( <span class="stringliteral">&quot;*****&gt; $data-&gt;name deleted a link from the linkbin $l-&gt;short_name $l-&gt;link&quot;</span> );
<a name="l01750"></a>01750 
<a name="l01751"></a>01751         <a class="code" href="lib_8rfs_8php.html#aa8cc5d5d1daaf3d80162755c52959d9b">sc_info</a>( <span class="stringliteral">&quot;$l-&gt;link deleted from the link bin&quot;</span>,<span class="stringliteral">&quot;white&quot;</span>,<span class="stringliteral">&quot;red&quot;</span> );
<a name="l01752"></a>01752 
<a name="l01753"></a>01753         <a class="code" href="adm_8php.html#ac44251b5ae4effd5d00a073768e8d0af">adm_action_edit_linkbin</a>();
<a name="l01754"></a>01754     }
<a name="l01755"></a>01755     <span class="keywordflow">if</span>( $renamelink==<span class="stringliteral">&quot;modify&quot;</span> ) {
<a name="l01756"></a>01756         echo <span class="stringliteral">&quot;&lt;p&gt;&lt;h3&gt;Modifying Link!&lt;/h3&gt;&lt;/p&gt;\n&quot;</span>;
<a name="l01757"></a>01757         $short_name=addslashes( $short_name );
<a name="l01758"></a>01758         $linkurl=addslashes( $linkurl );
<a name="l01759"></a>01759         $description=addslashes( $description );
<a name="l01760"></a>01760         $category=addslashes( $category );
<a name="l01761"></a>01761         <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;update link_bin set `sname` = &#39;$short_name&#39; where `id` = &#39;$linkid&#39;&quot;</span> );
<a name="l01762"></a>01762         <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;update link_bin set `link` = &#39;$linkurl&#39; where `id` = &#39;$linkid&#39;&quot;</span> );
<a name="l01763"></a>01763         <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;update link_bin set `description` = &#39;$description&#39; where `id` = &#39;$linkid&#39;&quot;</span> );
<a name="l01764"></a>01764         $hide=0;
<a name="l01765"></a>01765         <span class="keywordflow">if</span>( $hidden==<span class="stringliteral">&quot;yes&quot;</span> ) {
<a name="l01766"></a>01766             $hide=1;
<a name="l01767"></a>01767         }
<a name="l01768"></a>01768         <span class="keywordflow">if</span>( $hidden==<span class="stringliteral">&quot;no&quot;</span> )  {
<a name="l01769"></a>01769             $hide=0;
<a name="l01770"></a>01770         }
<a name="l01771"></a>01771         <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;update link_bin set `friend` = &#39;$friend&#39; where `id` = &#39;$linkid&#39;&quot;</span>);
<a name="l01772"></a>01772         <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;update link_bin set `hidden` = &#39;$hide&#39; where `id` = &#39;$linkid&#39;&quot;</span> );
<a name="l01773"></a>01773         <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;update link_bin set `referral` = &#39;$referral&#39; where `id` = &#39;$linkid&#39;&quot;</span> );
<a name="l01774"></a>01774         <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;update link_bin set `referrals` = &#39;$referrals&#39; where `id` = &#39;$linkid&#39;&quot;</span> );
<a name="l01775"></a>01775         <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;update link_bin set `clicks` = &#39;$clicks&#39; where `id` = &#39;$linkid&#39;&quot;</span> );
<a name="l01776"></a>01776         <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;update link_bin set `category` = &#39;$category&#39; where `id` = &#39;$linkid&#39;&quot;</span> );
<a name="l01777"></a>01777         <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;update link_bin set `rating` = &#39;$rating&#39; where `id` = &#39;$linkid&#39;&quot;</span> );
<a name="l01778"></a>01778         <a class="code" href="adm_8php.html#ac44251b5ae4effd5d00a073768e8d0af">adm_action_edit_linkbin</a>();
<a name="l01779"></a>01779     }
<a name="l01780"></a>01780 }
<a name="l01781"></a><a class="code" href="adm_8php.html#ac44251b5ae4effd5d00a073768e8d0af">01781</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#ac44251b5ae4effd5d00a073768e8d0af">adm_action_edit_linkbin</a>() {
<a name="l01782"></a>01782     eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l01783"></a>01783     echo <span class="stringliteral">&quot;&lt;h3&gt;Link Bin Editor&lt;/h3&gt;\n&quot;</span>;
<a name="l01784"></a>01784     <a class="code" href="link__out_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a>=<a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;select * from link_bin order by time desc&quot;</span> );
<a name="l01785"></a>01785     <a class="code" href="linkbin_2linkbin_8php.html#a8486e1e6b61a90d22385596e5783b4d3">$numlinks</a>=mysql_num_rows( <a class="code" href="link__out_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a> );
<a name="l01786"></a>01786     echo <span class="stringliteral">&quot;&lt;table width=100% border=0 cellspacing=0 cellpadding=4 align=center&gt;\n&quot;</span>;
<a name="l01787"></a>01787     <a class="code" href="linkbin_2linkbin_8php.html#acc3ddc926074609c4cff4f0aa1793fad">$gt</a>=2;
<a name="l01788"></a>01788     <span class="keywordflow">for</span>( $i=0; $i&lt;<a class="code" href="linkbin_2linkbin_8php.html#a8486e1e6b61a90d22385596e5783b4d3">$numlinks</a>; $i++ ) {
<a name="l01789"></a>01789         <a class="code" href="linkbin_2linkbin_8php.html#acc3ddc926074609c4cff4f0aa1793fad">$gt</a>++;
<a name="l01790"></a>01790         <span class="keywordflow">if</span>( <a class="code" href="linkbin_2linkbin_8php.html#acc3ddc926074609c4cff4f0aa1793fad">$gt</a>&gt;2 )<a class="code" href="linkbin_2linkbin_8php.html#acc3ddc926074609c4cff4f0aa1793fad">$gt</a>=1;
<a name="l01791"></a>01791         echo <span class="stringliteral">&quot;&lt;tr&gt;&lt;td class=sc_project_table_$gt&gt;&lt;br&gt;\n&quot;</span>;
<a name="l01792"></a>01792         $link=mysql_fetch_object( <a class="code" href="link__out_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a> );
<a name="l01793"></a>01793         <a class="code" href="showprofile_8php.html#af70e594e86a310311c717b13e6ecac00">$userdata</a>=<a class="code" href="lib_8mysql_8php.html#ac84822f7ca31fb168bb94fa3331a6923">sc_getuserdata</a>( $link-&gt;poster );
<a name="l01794"></a>01794         echo <span class="stringliteral">&quot;&lt;table border=0 cellspacing=0 cellpadding=0 width=100% &gt;\n&quot;</span>;
<a name="l01795"></a>01795         echo <span class="stringliteral">&quot;&lt;form enctype=\&quot;application/x-www-form-URLencoded\&quot; action=\&quot;$RFS_SITE_URL/admin/adm.php\&quot; method=\&quot;post\&quot;&gt;\n&quot;</span>;
<a name="l01796"></a>01796         echo <span class="stringliteral">&quot;&lt;input type=\&quot;hidden\&quot; name=\&quot;action\&quot; value=\&quot;f_modify_link\&quot;&gt;\n&quot;</span>;
<a name="l01797"></a>01797         echo <span class="stringliteral">&quot;&lt;input type=\&quot;hidden\&quot; name=\&quot;linkid\&quot; value=\&quot;$link-&gt;id\&quot;&gt;\n&quot;</span>;
<a name="l01798"></a>01798 
<a name="l01799"></a>01799 echo <span class="stringliteral">&quot;&lt;tr class=sc_project_table_$gt&gt;\n&quot;</span>;
<a name="l01800"></a>01800 
<a name="l01801"></a>01801 echo <span class="stringliteral">&quot;&lt;td class=sc_project_table_$gt&gt;Short Name&lt;/td&gt;&quot;</span>;
<a name="l01802"></a>01802 echo <span class="stringliteral">&quot;&lt;td class=sc_project_table_$gt width=230&gt;&lt;input type=text name=short_name value=\&quot;$link-&gt;sname\&quot; size=28&gt;&lt;/td&gt;&quot;</span>;
<a name="l01803"></a>01803 
<a name="l01804"></a>01804 echo <span class="stringliteral">&quot;&lt;td class=sc_project_table_$gt&gt;URL&lt;/td&gt;&quot;</span>;
<a name="l01805"></a>01805 echo <span class="stringliteral">&quot;&lt;td class=sc_project_table_$gt width=250&gt;&lt;input type=text name=linkurl value=\&quot;$link-&gt;link\&quot; size=40&gt; &lt;/td&gt;\n&quot;</span>;
<a name="l01806"></a>01806 
<a name="l01807"></a>01807 echo <span class="stringliteral">&quot;&lt;td class=sc_project_table_$gt width=300&gt;(submitted by $userdata-&gt;name on &quot;</span>.sc_time( $link-&gt;time ).<span class="stringliteral">&quot;)&lt;/td&gt;\n&quot;</span>;
<a name="l01808"></a>01808 echo <span class="stringliteral">&quot;&lt;td class=sc_project_table_$gt&gt;Rating:&lt;/td&gt;\n&quot;</span>;
<a name="l01809"></a>01809 echo <span class="stringliteral">&quot;&lt;td class=sc_project_table_$gt width=100 align=center&gt;&lt;input type=submit name=renamelink value=modify&gt;&lt;/td&gt;\n&quot;</span>;
<a name="l01810"></a>01810 echo <span class="stringliteral">&quot;&lt;/tr&gt;\n&quot;</span>;
<a name="l01811"></a>01811 
<a name="l01812"></a>01812 echo <span class="stringliteral">&quot;&lt;tr&gt;\n&quot;</span>;
<a name="l01813"></a>01813 
<a name="l01814"></a>01814 echo <span class="stringliteral">&quot;&lt;td class=sc_project_table_$gt&gt;Category&lt;/td&gt;&quot;</span>;
<a name="l01815"></a>01815 
<a name="l01816"></a>01816         echo <span class="stringliteral">&quot;&lt;td class=sc_project_table_$gt&gt;\n&quot;</span>;
<a name="l01817"></a>01817         echo <span class="stringliteral">&quot;&lt;select name=category&gt;\n&quot;</span>;
<a name="l01818"></a>01818         echo <span class="stringliteral">&quot;&lt;option&gt;$link-&gt;category\n&quot;</span>;
<a name="l01819"></a>01819 
<a name="l01820"></a>01820         $result2=<a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;select * from `categories` order by name asc&quot;</span> );
<a name="l01821"></a>01821         <a class="code" href="files_8php.html#a75fc289e2dfa4d8c56e6511eaa3893d8">$numcats</a>=mysql_num_rows( $result2 );
<a name="l01822"></a>01822         <span class="keywordflow">for</span>( $i2=0; $i2&lt;<a class="code" href="files_8php.html#a75fc289e2dfa4d8c56e6511eaa3893d8">$numcats</a>; $i2++ ) {
<a name="l01823"></a>01823             $cat=mysql_fetch_object( $result2 );
<a name="l01824"></a>01824             echo <span class="stringliteral">&quot;&lt;option&gt;$cat-&gt;name\n&quot;</span>;
<a name="l01825"></a>01825         }
<a name="l01826"></a>01826 
<a name="l01827"></a>01827         echo <span class="stringliteral">&quot;&lt;/select&gt;\n&quot;</span>;
<a name="l01828"></a>01828         echo <span class="stringliteral">&quot;&lt;/td&gt;\n&quot;</span>;
<a name="l01829"></a>01829 
<a name="l01830"></a>01830     echo <span class="stringliteral">&quot;&lt;td class=sc_project_table_$gt&gt;Description&lt;/td&gt;&quot;</span>;
<a name="l01831"></a>01831         echo <span class="stringliteral">&quot;&lt;td class=sc_project_table_$gt&gt;&lt;input type=text name=description value=\&quot;$link-&gt;description\&quot; size=40&gt;&lt;/td&gt;\n&quot;</span>;
<a name="l01832"></a>01832         echo <span class="stringliteral">&quot;&lt;td class=sc_project_table_$gt&gt;&lt;table border=0&gt;&lt;tr&gt;\n&quot;</span>;
<a name="l01833"></a>01833         echo <span class="stringliteral">&quot;&lt;td class=sc_project_table_$gt&gt;referrals&lt;/td&gt;&lt;td class=sc_project_table_$gt&gt;&lt;input type=text size=4 name=referrals value=\&quot;$link-&gt;referrals\&quot;&gt;&lt;/td&gt;\n&quot;</span>;
<a name="l01834"></a>01834         echo <span class="stringliteral">&quot;&lt;td class=sc_project_table_$gt&gt;clicks&lt;/td&gt;&lt;td class=sc_project_table_$gt&gt;&lt;input type=text size=4 name=clicks value=\&quot;$link-&gt;clicks\&quot;&gt;&lt;/td&gt;\n&quot;</span>;
<a name="l01835"></a>01835         
<a name="l01836"></a>01836         
<a name="l01837"></a>01837         echo <span class="stringliteral">&quot;&lt;td class=sc_project_table_$gt&gt;&quot;</span>;
<a name="l01838"></a>01838         
<a name="l01839"></a>01839         
<a name="l01840"></a>01840         <span class="keywordflow">if</span>( <a class="code" href="lib_8rfs_8php.html#a3609b7f3d3b5fd21ee37b823c7c32546">sc_yes</a>($link-&gt;hidden) ) echo <span class="stringliteral">&quot;hidden &lt;select name=hidden&gt;&lt;option&gt;yes&lt;option&gt;no&lt;/select&gt;\n&quot;</span>;
<a name="l01841"></a>01841         <span class="keywordflow">else</span> echo <span class="stringliteral">&quot;hidden &lt;select name=hidden&gt;&lt;option&gt;no&lt;option&gt;yes&lt;/select&gt;\n&quot;</span>;
<a name="l01842"></a>01842         echo <span class="stringliteral">&quot;&lt;br&gt;&quot;</span>;
<a name="l01843"></a>01843                 
<a name="l01844"></a>01844         <span class="keywordflow">if</span>( <a class="code" href="lib_8rfs_8php.html#a3609b7f3d3b5fd21ee37b823c7c32546">sc_yes</a>($link-&gt;friend) ) echo <span class="stringliteral">&quot;friend &lt;select name=friend&gt;&lt;option&gt;yes&lt;option&gt;no&lt;/select&gt;\n&quot;</span>;
<a name="l01845"></a>01845         <span class="keywordflow">else</span> echo <span class="stringliteral">&quot;friend &lt;select name=friend&gt;&lt;option&gt;no&lt;option&gt;yes&lt;/select&gt;\n&quot;</span>;        
<a name="l01846"></a>01846         echo <span class="stringliteral">&quot;&lt;br&gt;&quot;</span>;
<a name="l01847"></a>01847         
<a name="l01848"></a>01848         <span class="keywordflow">if</span>( <a class="code" href="lib_8rfs_8php.html#a3609b7f3d3b5fd21ee37b823c7c32546">sc_yes</a>($link-&gt;referral) ) echo <span class="stringliteral">&quot;referral &lt;select name=referral&gt;&lt;option&gt;yes&lt;option&gt;no&lt;/select&gt;\n&quot;</span>;
<a name="l01849"></a>01849         <span class="keywordflow">else</span> echo <span class="stringliteral">&quot;referral &lt;select name=referral&gt;&lt;option&gt;no&lt;option&gt;yes&lt;/select&gt;\n&quot;</span>;        
<a name="l01850"></a>01850         echo <span class="stringliteral">&quot;&lt;br&gt;&quot;</span>;
<a name="l01851"></a>01851         
<a name="l01852"></a>01852         echo <span class="stringliteral">&quot;&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;\n&quot;</span>;
<a name="l01853"></a>01853         echo <span class="stringliteral">&quot;&lt;td class=sc_project_table_$gt&gt;&lt;select name=rating&gt;&lt;option&gt;$link-&gt;rating\n&quot;</span>;
<a name="l01854"></a>01854         <span class="keywordflow">for</span>( $j=1; $j&lt;6; $j++ ) echo <span class="stringliteral">&quot;&lt;option&gt;$j\n&quot;</span>;
<a name="l01855"></a>01855         echo <span class="stringliteral">&quot;&lt;/select&gt;&lt;/td&gt;\n&quot;</span>;
<a name="l01856"></a>01856         echo <span class="stringliteral">&quot;&lt;td class=sc_project_table_$gt align=center&gt;&lt;input type=submit name=deletelink value=delete&gt;&lt;/td&gt;\n&quot;</span>;
<a name="l01857"></a>01857 
<a name="l01858"></a>01858         echo <span class="stringliteral">&quot;&lt;/tr&gt;\n&quot;</span>;
<a name="l01859"></a>01859         echo <span class="stringliteral">&quot;&lt;tr&gt;&lt;td class=sc_project_table_$gt&gt;&amp;nbsp;&lt;/td&gt;&lt;td class=sc_project_table_$gt&gt;&amp;nbsp;&lt;/td&gt;&lt;td class=sc_project_table_$gt&gt;&amp;nbsp;&lt;/td&gt;&lt;td class=sc_project_table_$gt&gt;&amp;nbsp;&lt;/td&gt;&lt;td class=sc_project_table_$gt&gt;&amp;nbsp;&lt;/td&gt;&lt;/tr&gt;\n&quot;</span>;
<a name="l01860"></a>01860         echo <span class="stringliteral">&quot;&lt;/table&gt;\n&quot;</span>;
<a name="l01861"></a>01861         echo <span class="stringliteral">&quot;&lt;/form&gt;\n&quot;</span>;
<a name="l01862"></a>01862         echo <span class="stringliteral">&quot;&lt;/td&gt;&lt;/tr&gt;\n&quot;</span>;
<a name="l01863"></a>01863     }
<a name="l01864"></a>01864 
<a name="l01865"></a>01865     echo <span class="stringliteral">&quot;&lt;tr&gt;&lt;td&gt;\n&quot;</span>;
<a name="l01866"></a>01866     echo <span class="stringliteral">&quot;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;\n&quot;</span>;
<a name="l01867"></a>01867     <span class="comment">// add a new link here...</span>
<a name="l01868"></a>01868 
<a name="l01869"></a>01869     echo <span class="stringliteral">&quot;&lt;h2&gt;Add Link&lt;/h2&gt;\n&quot;</span>;
<a name="l01870"></a>01870 
<a name="l01871"></a>01871     <a class="code" href="lib_8mysql_8php.html#ab2a2e03dfc31eb5074a990325393609d">sc_bf</a>(  <span class="stringliteral">&quot;$RFS_SITE_URL/admin/adm.php&quot;</span>, <span class="stringliteral">&quot;action=f_add_link&quot;</span>,
<a name="l01872"></a>01872             <span class="stringliteral">&quot;link_bin&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;id&quot;</span>,
<a name="l01873"></a>01873             <span class="stringliteral">&quot;sname&quot;</span>.<a class="code" href="config_8sitevars_8php.html#a06fab752c166675deeb7a9191add17ab">$RFS_SITE_DELIMITER</a>.<span class="stringliteral">&quot;link&quot;</span>.<a class="code" href="config_8sitevars_8php.html#a06fab752c166675deeb7a9191add17ab">$RFS_SITE_DELIMITER</a>.<span class="stringliteral">&quot;description&quot;</span>,
<a name="l01874"></a>01874             <span class="stringliteral">&quot;include&quot;</span>, <span class="stringliteral">&quot;category&quot;</span>,
<a name="l01875"></a>01875             20, <span class="stringliteral">&quot;add link&quot;</span> );
<a name="l01876"></a>01876     include(<span class="stringliteral">&quot;footer.php&quot;</span>);
<a name="l01877"></a>01877     exit();
<a name="l01878"></a>01878 }<span class="comment"></span>
<a name="l01879"></a>01879 <span class="comment">/////////////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l01880"></a><a class="code" href="adm_8php.html#ace8c7439fed268e4befe9585719e1aca">01880</a> <span class="comment"></span><span class="keyword">function</span> <a class="code" href="adm_8php.html#ace8c7439fed268e4befe9585719e1aca">adm_action_</a>() {
<a name="l01881"></a>01881 
<a name="l01882"></a>01882     eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l01883"></a>01883 
<a name="l01884"></a>01884     <a class="code" href="lib_8mysql_8php.html#ad996f1239abd0a0b2da233b76443aa93">sc_access_method_add</a>(<span class="stringliteral">&quot;admin&quot;</span>, <span class="stringliteral">&quot;access&quot;</span>);
<a name="l01885"></a>01885     <a class="code" href="lib_8mysql_8php.html#ad996f1239abd0a0b2da233b76443aa93">sc_access_method_add</a>(<span class="stringliteral">&quot;admin&quot;</span>, <span class="stringliteral">&quot;categories&quot;</span>);
<a name="l01886"></a>01886     
<a name="l01887"></a>01887     $ax=<a class="code" href="lib_8mysql_8php.html#ad42d2c11477299cecf3dd06b259a316e">mfo1</a>(<span class="stringliteral">&quot;select * from access where name=&#39;Administrator&#39; and action=&#39;access&#39; and page=&#39;admin&#39;&quot;</span>);
<a name="l01888"></a>01888     <span class="keywordflow">if</span>(!$ax-&gt;id) {
<a name="l01889"></a>01889         <a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>(<span class="stringliteral">&quot;insert into access (name,action,page) values(&#39;Administrator&#39;,&#39;access&#39;,&#39;admin&#39;)&quot;</span>);
<a name="l01890"></a>01890     }
<a name="l01891"></a>01891     
<a name="l01892"></a>01892 
<a name="l01893"></a>01893     <span class="keywordflow">if</span>( !empty( $_GET[<span class="stringliteral">&#39;admed&#39;</span>] ) ) <a class="code" href="session_8php.html#ad56c24858a88af52e4da3ae2f6a2b3b0">$_SESSION</a>[<span class="stringliteral">&#39;admed&#39;</span>]=$_GET[<span class="stringliteral">&#39;admed&#39;</span>];
<a name="l01894"></a>01894 
<a name="l01895"></a>01895     <a class="code" href="adm_8php.html#a6efc15b5a2314dd4b5aaa556a375c6d6">$data</a>=<a class="code" href="lib_8mysql_8php.html#ac84822f7ca31fb168bb94fa3331a6923">sc_getuserdata</a>( <a class="code" href="session_8php.html#ad56c24858a88af52e4da3ae2f6a2b3b0">$_SESSION</a>[<span class="stringliteral">&#39;valid_user&#39;</span>] );
<a name="l01896"></a>01896     <span class="keywordflow">if</span>(!<a class="code" href="lib_8mysql_8php.html#acdc8ebc6dbeee8624b9ddcfd3f892098">sc_access_check</a>(<span class="stringliteral">&quot;admin&quot;</span>,<span class="stringliteral">&quot;access&quot;</span>)) <span class="keywordflow">return</span>;
<a name="l01897"></a>01897 
<a name="l01898"></a>01898     echo <span class="stringliteral">&quot;&lt;h1&gt;Administration Panel&lt;/h1&gt;&quot;</span>;
<a name="l01899"></a>01899     
<a name="l01900"></a>01900     echo <span class="stringliteral">&quot;Running RFS CMS version $RFS_VERSION ( BUILD $RFS_BUILD )&quot;</span>;   
<a name="l01901"></a>01901     
<a name="l01902"></a>01902     system(<span class="stringliteral">&quot;rm vercheck&quot;</span>);
<a name="l01903"></a>01903     system(<span class="stringliteral">&quot;rm buildcheck&quot;</span>);
<a name="l01904"></a>01904     system(<span class="stringliteral">&quot;wget -O vercheck https://raw.github.com/sethcoder/rfscms/master/include/version.php&quot;</span>);
<a name="l01905"></a>01905     system(<span class="stringliteral">&quot;wget -O buildcheck https://raw.github.com/sethcoder/rfscms/master/build.dat&quot;</span>);
<a name="l01906"></a>01906     $rver=<span class="stringliteral">&quot;remote version unknown&quot;</span>; 
<a name="l01907"></a>01907     <a class="code" href="thumbnail_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a>=fopen(<span class="stringliteral">&quot;vercheck&quot;</span>, <span class="stringliteral">&quot;r&quot;</span>);  <span class="keywordflow">if</span>(<a class="code" href="thumbnail_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a>) { $rver=fgets(<a class="code" href="thumbnail_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a>,256); fclose(<a class="code" href="thumbnail_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a>); }
<a name="l01908"></a>01908     <a class="code" href="thumbnail_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a>=fopen(<span class="stringliteral">&quot;buildcheck&quot;</span>,<span class="stringliteral">&quot;r&quot;</span>); <span class="keywordflow">if</span>(<a class="code" href="thumbnail_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a>) { $rbld=fgets(<a class="code" href="thumbnail_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a>,256); fclose(<a class="code" href="thumbnail_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a>); }
<a name="l01909"></a>01909     system(<span class="stringliteral">&quot;rm vercheck&quot;</span>);
<a name="l01910"></a>01910     system(<span class="stringliteral">&quot;rm buildcheck&quot;</span>); 
<a name="l01911"></a>01911     $rverx=explode(<span class="stringliteral">&quot;\&quot;&quot;</span>,$rver);
<a name="l01912"></a>01912     <span class="keywordflow">if</span>( (<a class="code" href="version_8php.html#a9cdec9fe3ad5a07ac6aa1f1be15288ae">$RFS_VERSION</a>!=$rverx[1]) ||
<a name="l01913"></a>01913          (intval(<a class="code" href="version_8php.html#a6c3916d4db25e8bfde2fb622808dc61f">$RFS_BUILD</a>)!=intval($rbld))) {
<a name="l01914"></a>01914         <a class="code" href="lib_8rfs_8php.html#a8812363a29ed96e4593cfbfee483c850">sc_inform</a>(<span class="stringliteral">&quot;NEW VERSION AVAILABLE: &quot;</span>.$rverx[1].<span class="stringliteral">&quot; BUILD $rbld&quot;</span>);
<a name="l01915"></a>01915     }
<a name="l01916"></a>01916     echo <span class="stringliteral">&quot;&lt;br&gt;&quot;</span>;
<a name="l01917"></a>01917     echo <span class="stringliteral">&quot;&lt;hr&gt;&quot;</span>;
<a name="l01918"></a>01918 
<a name="l01919"></a>01919     <a class="code" href="lib_8rfs_8php.html#aa8cc5d5d1daaf3d80162755c52959d9b">sc_info</a>(exec(<span class="stringliteral">&quot;uptime&quot;</span>),<span class="stringliteral">&quot;white&quot;</span>,<span class="stringliteral">&quot;blue&quot;</span>);
<a name="l01920"></a>01920 
<a name="l01921"></a>01921     echo <span class="stringliteral">&quot;&lt;table border=0&gt;&lt;tr&gt;&lt;td&gt;&quot;</span>;
<a name="l01922"></a>01922 
<a name="l01923"></a>01923     <a class="code" href="lib_8buttons_8php.html#a666362cb0a8603c56ee45762028a24a4">sc_button</a>( <span class="stringliteral">&quot;$RFS_SITE_URL/admin/adm.php?debug=on&quot;</span>,<span class="stringliteral">&quot;Debug on &lt;font style=&#39;color: green; background-color: dark-green;&#39;&gt; ON &lt;/font&gt;&quot;</span> );
<a name="l01924"></a>01924     <a class="code" href="lib_8buttons_8php.html#a666362cb0a8603c56ee45762028a24a4">sc_button</a>( <span class="stringliteral">&quot;$RFS_SITE_URL/admin/adm.php?debug=off&quot;</span>,<span class="stringliteral">&quot;Debug &lt;font style=&#39;color:red; background-color: dark-green;&#39;&gt; OFF &lt;/font&gt;&quot;</span> );
<a name="l01925"></a>01925     echo <span class="stringliteral">&quot;&lt;/td&gt;&lt;td&gt;&quot;</span>;
<a name="l01926"></a>01926 
<a name="l01927"></a>01927     <a class="code" href="lib_8buttons_8php.html#a666362cb0a8603c56ee45762028a24a4">sc_button</a>( <span class="stringliteral">&quot;$RFS_SITE_URL/admin/adm.php?admed=on&amp;what=1&quot;</span>,<span class="stringliteral">&quot;Adm Edit &lt;font style=&#39;color: green; background-color: dark-green;&#39;&gt; ON &lt;/font&gt;&quot;</span> );
<a name="l01928"></a>01928     <a class="code" href="lib_8buttons_8php.html#a666362cb0a8603c56ee45762028a24a4">sc_button</a>( <span class="stringliteral">&quot;$RFS_SITE_URL/admin/adm.php?admed=off&amp;what=1&quot;</span>,<span class="stringliteral">&quot;Adm Edit &lt;font style=&#39;color:red; background-color: dark-green;&#39;&gt; OFF &lt;/font&gt;&quot;</span> );
<a name="l01929"></a>01929     echo <span class="stringliteral">&quot;&lt;/td&gt;&lt;td&gt;&quot;</span>;
<a name="l01930"></a>01930 
<a name="l01931"></a>01931     <a class="code" href="lib_8buttons_8php.html#a666362cb0a8603c56ee45762028a24a4">sc_button</a>( <span class="stringliteral">&quot;$RFS_SITE_URL/admin/adm.php?textbuttons=true&quot;</span>,<span class="stringliteral">&quot;Text Buttons &lt;font style=&#39;color: green; background-color: dark-green;&#39;&gt; ON &lt;/font&gt;&quot;</span> );
<a name="l01932"></a>01932     <a class="code" href="lib_8buttons_8php.html#a666362cb0a8603c56ee45762028a24a4">sc_button</a>( <span class="stringliteral">&quot;$RFS_SITE_URL/admin/adm.php?textbuttons=false&quot;</span>,<span class="stringliteral">&quot;Text Buttons &lt;font style=&#39;color:red; background-color: dark-green;&#39;&gt; OFF &lt;/font&gt;&quot;</span> );
<a name="l01933"></a>01933     echo <span class="stringliteral">&quot;&lt;/td&gt;&lt;td&gt;&quot;</span>;
<a name="l01934"></a>01934 
<a name="l01935"></a>01935     <a class="code" href="lib_8buttons_8php.html#a666362cb0a8603c56ee45762028a24a4">sc_button</a>( <span class="stringliteral">&quot;$RFS_SITE_URL/admin/adm.php?admin_show_top=hide&quot;</span>,<span class="stringliteral">&quot;Hide banner&quot;</span> );
<a name="l01936"></a>01936     <a class="code" href="lib_8buttons_8php.html#a666362cb0a8603c56ee45762028a24a4">sc_button</a>( <span class="stringliteral">&quot;$RFS_SITE_URL/admin/adm.php?admin_show_top=show&quot;</span>,<span class="stringliteral">&quot;Show banner&quot;</span> );
<a name="l01937"></a>01937 
<a name="l01938"></a>01938     echo <span class="stringliteral">&quot;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&quot;</span>;
<a name="l01939"></a>01939 
<a name="l01940"></a>01940     echo <span class="stringliteral">&quot;&lt;hr&gt;&quot;</span>;
<a name="l01941"></a>01941 
<a name="l01942"></a>01942     <a class="code" href="adm_8php.html#a5fbed072fc7fa859f7af37d1f5eefe7f">admin_menu_built_in</a>();
<a name="l01943"></a>01943 
<a name="l01944"></a>01944     $cres=<a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;select * from categories order by name asc&quot;</span> );
<a name="l01945"></a>01945     $ccount=mysql_num_rows( $cres );
<a name="l01946"></a>01946     <span class="keywordflow">for</span>( $ci=0; $ci&lt;$ccount; $ci++ ) {
<a name="l01947"></a>01947         $cc=mysql_fetch_object( $cres );
<a name="l01948"></a>01948         <a class="code" href="lib_8sitevars_8php.html#a49a8a4009b02e49717caa88b128affc5">$res</a>=<a class="code" href="lib_8mysql_8php.html#aa22ac855bc784ef271c92223b57e43f0">sc_query</a>( <span class="stringliteral">&quot;select * from admin_menu where category = &#39;$cc-&gt;name&#39; order by name asc&quot;</span> );
<a name="l01949"></a>01949         <a class="code" href="v_8php.html#af789423037bbc89dc7c850e761177570">$count</a>=mysql_num_rows( <a class="code" href="lib_8sitevars_8php.html#a49a8a4009b02e49717caa88b128affc5">$res</a> );
<a name="l01950"></a>01950         <span class="keywordflow">if</span>( <a class="code" href="v_8php.html#af789423037bbc89dc7c850e761177570">$count</a> ) {
<a name="l01951"></a>01951             echo <span class="stringliteral">&quot;&lt;h1&gt;Administration Menu Category: $cc-&gt;name&lt;/h1&gt;&quot;</span>;
<a name="l01952"></a>01952             <span class="keywordflow">for</span>( $i=0; $i&lt;<a class="code" href="v_8php.html#af789423037bbc89dc7c850e761177570">$count</a>; $i++ ) {
<a name="l01953"></a>01953             $icon=mysql_fetch_object( <a class="code" href="lib_8sitevars_8php.html#a49a8a4009b02e49717caa88b128affc5">$res</a> );
<a name="l01954"></a>01954 
<a name="l01955"></a>01955                 echo <span class="stringliteral">&quot;&lt;div style=&#39;float:left; border: 1px solid #000000; margin: 5px; padding:5px 10px; background:#353535; border-radius:12px; &#39; &gt; &quot;</span>;
<a name="l01956"></a>01956                 echo <span class="stringliteral">&quot;&lt;a href=\&quot;&quot;</span>;
<a name="l01957"></a>01957                 $icon-&gt;url=str_replace( <span class="stringliteral">&quot;;&quot;</span>,<span class="stringliteral">&quot;%3b&quot;</span>,$icon-&gt;url );
<a name="l01958"></a>01958                 <a class="code" href="lib_8rfs_8php.html#afb6b656bf7c2d97ef28e2055ee73ac3a">rfs_echo</a>( $icon-&gt;url );
<a name="l01959"></a>01959 
<a name="l01960"></a>01960                 echo <span class="stringliteral">&quot;\&quot; target=\&quot;$icon-&gt;target\&quot;&gt;&quot;</span>;
<a name="l01961"></a>01961 
<a name="l01962"></a>01962 
<a name="l01963"></a>01963 <span class="keywordflow">if</span>(!file_exists(<span class="stringliteral">&quot;$RFS_SITE_PATH/$icon-&gt;icon&quot;</span>))
<a name="l01964"></a>01964     $icon-&gt;icon=<span class="stringliteral">&quot;images/icons/exclamation.png&quot;</span>;
<a name="l01965"></a>01965 echo <span class="stringliteral">&quot;&lt;img</span>
<a name="l01966"></a>01966 <span class="stringliteral">src=\&quot;$RFS_SITE_URL/include/button.php?im=$RFS_SITE_PATH/$icon-&gt;icon&amp;t=$icon-&gt;name&amp;w=96&amp;y=20\&quot;</span>
<a name="l01967"></a>01967 <span class="stringliteral">border=&#39;0&#39;&gt;&lt;/a&gt; &quot;</span>;
<a name="l01968"></a>01968 
<a name="l01969"></a>01969                 <span class="keywordflow">if</span>( <a class="code" href="session_8php.html#ad56c24858a88af52e4da3ae2f6a2b3b0">$_SESSION</a>[<span class="stringliteral">&#39;admed&#39;</span>]==<span class="stringliteral">&quot;on&quot;</span> ) {
<a name="l01970"></a>01970 
<a name="l01971"></a>01971                         <a class="code" href="lib_8buttons_8php.html#a666362cb0a8603c56ee45762028a24a4">sc_button</a>( <span class="stringliteral">&quot;$RFS_SITE_URL/admin/adm.php?action=f_admin_menu_edit_entry&amp;id=$icon-&gt;id&quot;</span>,<span class="stringliteral">&quot;Edit&quot;</span> );
<a name="l01972"></a>01972 
<a name="l01973"></a>01973                         <a class="code" href="lib_8buttons_8php.html#a666362cb0a8603c56ee45762028a24a4">sc_button</a>( <span class="stringliteral">&quot;$RFS_SITE_URL/admin/adm.php?action=f_admin_menu_edit_del&amp;id=$icon-&gt;id&quot;</span>,<span class="stringliteral">&quot;Delete&quot;</span> );
<a name="l01974"></a>01974                         <a class="code" href="lib_8buttons_8php.html#a666362cb0a8603c56ee45762028a24a4">sc_button</a>( <span class="stringliteral">&quot;$RFS_SITE_URL/admin/adm.php?action=f_admin_menu_change_icon&amp;id=$icon-&gt;id&quot;</span>,<span class="stringliteral">&quot;Change Icon&quot;</span> );
<a name="l01975"></a>01975                         <a class="code" href="lib_8mysql_8php.html#a8594d0f9a34f20d40018060b96f6e679">sc_optionizer</a>( <span class="stringliteral">&quot;$RFS_SITE_URL/admin/adm.php&quot;</span>,
<a name="l01976"></a>01976                                        <span class="stringliteral">&quot;action=f_admin_change_category&quot;</span>.<a class="code" href="config_8sitevars_8php.html#a06fab752c166675deeb7a9191add17ab">$RFS_SITE_DELIMITER</a>.
<a name="l01977"></a>01977                                        <span class="stringliteral">&quot;id=$icon-&gt;id&quot;</span>,
<a name="l01978"></a>01978                                        <span class="stringliteral">&quot;categories&quot;</span>,
<a name="l01979"></a>01979                                        <span class="stringliteral">&quot;name&quot;</span>,
<a name="l01980"></a>01980                                        0,
<a name="l01981"></a>01981                                        $cc-&gt;name,
<a name="l01982"></a>01982                                        1 );
<a name="l01983"></a>01983                 }
<a name="l01984"></a>01984                 echo <span class="stringliteral">&quot;&lt;/div&gt;&quot;</span>;
<a name="l01985"></a>01985             }
<a name="l01986"></a>01986             echo <span class="stringliteral">&quot;&lt;div style=&#39;clear: left; &#39;&gt;&amp;nbsp;&lt;/div&gt; &lt;hr&gt;&quot;</span>;
<a name="l01987"></a>01987         }
<a name="l01988"></a>01988 
<a name="l01989"></a>01989     }
<a name="l01990"></a>01990 
<a name="l01991"></a>01991 
<a name="l01992"></a>01992 
<a name="l01993"></a>01993     <a class="code" href="adm_8php.html#a80b875005654440f8f81ee7fa4d42ed4">finishadminpage</a>();
<a name="l01994"></a>01994 }
<a name="l01995"></a>01995 <span class="comment"></span>
<a name="l01996"></a>01996 <span class="comment">/////////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l01997"></a>01997 <span class="comment"></span>
<a name="l01998"></a><a class="code" href="adm_8php.html#a5fbed072fc7fa859f7af37d1f5eefe7f">01998</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a5fbed072fc7fa859f7af37d1f5eefe7f">admin_menu_built_in</a>() { eval(<a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>());
<a name="l01999"></a>01999     echo <span class="stringliteral">&quot;&lt;h1&gt;Administration Menu Built In&lt;/h1&gt;&quot;</span>;
<a name="l02000"></a>02000         $arr=get_defined_functions();
<a name="l02001"></a>02001         <span class="keywordflow">foreach</span>( $arr[<span class="stringliteral">&#39;user&#39;</span>] as $k=&gt;$v ) {
<a name="l02002"></a>02002             <span class="keywordflow">if</span>( stristr( $v,<span class="stringliteral">&quot;adm_action_&quot;</span> ) ) {
<a name="l02003"></a>02003                 <span class="keywordflow">if</span>( !stristr( $v,<span class="stringliteral">&quot;_lib_&quot;</span>) ) {
<a name="l02004"></a>02004                     <span class="keywordflow">if</span>( !stristr( $v,<span class="stringliteral">&quot;_go&quot;</span> ) ) {
<a name="l02005"></a>02005                         <span class="keywordflow">if</span>( !stristr( $v,<span class="stringliteral">&quot;_f_&quot;</span> ) ) {
<a name="l02006"></a>02006                             $x=str_replace( <span class="stringliteral">&quot;adm_action_&quot;</span>,<span class="stringliteral">&quot;&quot;</span>,$v );
<a name="l02007"></a>02007                             <span class="keywordflow">if</span>(!empty($x)) {
<a name="l02008"></a>02008                                 echo <span class="stringliteral">&quot;&lt;div style=&#39;float:left; border: 1px solid #000000; margin: 5px; padding:5px 10px; background:#353535; border-radius:12px;&#39; &gt; &quot;</span>;
<a name="l02009"></a>02009                                 echo <span class="stringliteral">&quot;&lt;a href=\&quot;$RFS_SITE_URL/admin/adm.php?action=$x\&quot;&gt;&quot;</span>;
<a name="l02010"></a>02010                                 <span class="keywordflow">if</span>( file_exists( <span class="stringliteral">&quot;$RFS_SITE_PATH/admin/images/$x.png&quot;</span> ) ) {
<a name="l02011"></a>02011                                     echo <span class="stringliteral">&quot;&lt;img src=&#39;$RFS_SITE_URL/admin/images/$x.png&#39; width=64 height=64 border=&#39;0&#39; align=center&gt;&quot;</span>;
<a name="l02012"></a>02012                                 } <span class="keywordflow">else</span> {
<a name="l02013"></a>02013                                     echo $x;
<a name="l02014"></a>02014                                 }
<a name="l02015"></a>02015                                 echo <span class="stringliteral">&quot;&lt;/a&gt;&lt;br&gt;&quot;</span>;
<a name="l02016"></a>02016                                 echo <span class="stringliteral">&quot;&lt;a style=&#39;color: #cFcF00;&#39; href=&#39;$RFS_SITE_URL/admin/adm.php?action=$x&#39;&gt;$x&lt;/a&gt;&quot;</span>;
<a name="l02017"></a>02017                                 echo <span class="stringliteral">&quot;&lt;/div&gt;&quot;</span>;
<a name="l02018"></a>02018                         }
<a name="l02019"></a>02019                     }
<a name="l02020"></a>02020                 }
<a name="l02021"></a>02021             }
<a name="l02022"></a>02022         }
<a name="l02023"></a>02023     }
<a name="l02024"></a>02024     echo <span class="stringliteral">&quot;&lt;div style=&#39;clear: left; &#39;&gt;&amp;nbsp;&lt;/div&gt;&quot;</span>;
<a name="l02025"></a>02025     echo <span class="stringliteral">&quot;&lt;br&gt;&lt;hr&gt;&quot;</span>;
<a name="l02026"></a>02026 
<a name="l02027"></a>02027 }
<a name="l02028"></a>02028 
<a name="l02029"></a><a class="code" href="adm_8php.html#a80b875005654440f8f81ee7fa4d42ed4">02029</a> <span class="keyword">function</span> <a class="code" href="adm_8php.html#a80b875005654440f8f81ee7fa4d42ed4">finishadminpage</a>() {
<a name="l02030"></a>02030     eval( <a class="code" href="lib_8rfs_8php.html#ae94353446a3d0787948a5f1eb614fbba">scg</a>() );
<a name="l02031"></a>02031 
<a name="l02032"></a>02032     $arr=get_defined_functions();
<a name="l02033"></a>02033 
<a name="l02034"></a>02034     echo <span class="stringliteral">&quot;&lt;!-- FUNCTIONS AVAILABLE... JUST LOOK &quot;</span>;
<a name="l02035"></a>02035     <span class="keywordflow">foreach</span>( $arr[<span class="stringliteral">&#39;user&#39;</span>] as $k=&gt;$v ) { echo <span class="stringliteral">&quot;$v&quot;</span>; }
<a name="l02036"></a>02036     echo <span class="stringliteral">&quot; --&gt;&quot;</span>;
<a name="l02037"></a>02037 
<a name="l02038"></a>02038     echo <span class="stringliteral">&quot;&lt;h1&gt;Administration Menu Module Administration&lt;/h1&gt;&quot;</span>;
<a name="l02039"></a>02039 
<a name="l02040"></a>02040 
<a name="l02041"></a>02041     $mods=<a class="code" href="lib_8modules_8php.html#a48915099c7879d74e436a17cd2139426">sc_get_modules_array</a>() ;
<a name="l02042"></a>02042 
<a name="l02043"></a>02043     <span class="keywordflow">foreach</span>($mods as $mk=&gt;$mv ) {
<a name="l02044"></a>02044 
<a name="l02045"></a>02045         $func_count=0;
<a name="l02046"></a>02046         <span class="keywordflow">foreach</span>( $arr[<span class="stringliteral">&#39;user&#39;</span>] as $k=&gt;$v ) {
<a name="l02047"></a>02047             <span class="keywordflow">if</span>( stristr( $v,<span class="stringliteral">&quot;_lib_$mv&quot;</span>) ) {
<a name="l02048"></a>02048                 $x=str_replace( <span class="stringliteral">&quot;adm_action_&quot;</span>,<span class="stringliteral">&quot;&quot;</span>,$v );
<a name="l02049"></a>02049                 <span class="keywordflow">if</span>(!empty( $x )) $func_count++;
<a name="l02050"></a>02050             }
<a name="l02051"></a>02051         }
<a name="l02052"></a>02052 
<a name="l02053"></a>02053         <span class="keywordflow">if</span>($func_count) {
<a name="l02054"></a>02054 
<a name="l02055"></a>02055             echo <span class="stringliteral">&quot; $mv &lt;hr&gt;&quot;</span>;
<a name="l02056"></a>02056             <span class="keywordflow">foreach</span>( $arr[<span class="stringliteral">&#39;user&#39;</span>] as $k=&gt;$v ) {
<a name="l02057"></a>02057                 <span class="keywordflow">if</span>( stristr( $v,<span class="stringliteral">&quot;_lib_$mv&quot;</span>) ) {
<a name="l02058"></a>02058                     $x=str_replace( <span class="stringliteral">&quot;adm_action_&quot;</span>,<span class="stringliteral">&quot;&quot;</span>,$v );
<a name="l02059"></a>02059 
<a name="l02060"></a>02060                             <span class="keywordflow">if</span>( !empty( $x ) ) {
<a name="l02061"></a>02061 
<a name="l02062"></a>02062                             echo <span class="stringliteral">&quot;&lt;div style=&#39;float:left; border: 1px solid #000000; margin: 5px; padding:5px 10px; background:#353535; border-radius:12px; &#39; &gt; &quot;</span>;
<a name="l02063"></a>02063                             echo <span class="stringliteral">&quot;&lt;a href=\&quot;$RFS_SITE_URL/admin/adm.php?action=$x\&quot;&gt;&quot;</span>;
<a name="l02064"></a>02064 
<a name="l02065"></a>02065 $px=str_replace(<span class="stringliteral">&quot;lib_&quot;</span> ,<span class="stringliteral">&quot;&quot;</span>   ,$x);
<a name="l02066"></a>02066 $px=str_replace(<span class="stringliteral">&quot;$mv&quot;</span>.<span class="stringliteral">&quot;_&quot;</span> ,<span class="stringliteral">&quot;&quot;</span>   ,$px);
<a name="l02067"></a>02067 $px=str_replace(<span class="stringliteral">&quot;_&quot;</span>    ,<span class="stringliteral">&quot; &quot;</span>  ,$px);
<a name="l02068"></a>02068 $px=ucwords($px);
<a name="l02069"></a>02069 $fn=strtolower($px);
<a name="l02070"></a>02070 $fn=str_replace(<span class="stringliteral">&quot; &quot;</span>,<span class="stringliteral">&quot;_&quot;</span>,$fn);
<a name="l02071"></a>02071 <a class="code" href="thumbnail_8php.html#a56a9a0da0c26b3d3029cea47a6b9292f">$img</a>=<span class="stringliteral">&quot;$RFS_SITE_PATH/modules/$mv/images/$fn.png&quot;</span>;
<a name="l02072"></a>02072 
<a name="l02073"></a>02073 <span class="comment">// if(!file_exists(&quot;$RFS_SITE_PATH/$icon-&gt;icon&quot;))    $icon-&gt;icon=&quot;modules/$mv/images/icons/exclamation.png&quot;;</span>
<a name="l02074"></a>02074 $png=<span class="stringliteral">&quot;&lt;img src=\&quot;$RFS_SITE_URL/include/button.php?im=$img&amp;t=$px&amp;w=96&amp;y=20\&quot; border=&#39;0&#39; &gt;&lt;/a&gt; &quot;</span>;
<a name="l02075"></a>02075 <span class="keywordflow">if</span>( !file_exists( <a class="code" href="thumbnail_8php.html#a56a9a0da0c26b3d3029cea47a6b9292f">$img</a> ) ) { <span class="comment">//&quot;$RFS_SITE_PATH/modules/$mv/images/$px.png&quot; ) ){</span>
<a name="l02076"></a>02076 $png=<span class="stringliteral">&quot;&lt;img src=\&quot;$RFS_SITE_URL/include/button.php?im=$RFS_SITE_PATH/images/icons/exclamation.png&amp;t=$px&amp;w=96&amp;y=20\&quot; border=&#39;0&#39; alt=&#39;$fn - $img&#39; text=&#39;$fn - $img&#39;&gt;&lt;/a&gt; &quot;</span>;
<a name="l02077"></a>02077 
<a name="l02078"></a>02078     <span class="comment">// echo &quot;&lt;img src=&#39;$RFS_SITE_URL/admin/images/$x.png&#39; width=64 height=64 border=&#39;0&#39; align=center&gt;&quot;;</span>
<a name="l02079"></a>02079 }
<a name="l02080"></a>02080 
<a name="l02081"></a>02081 echo $png;
<a name="l02082"></a>02082                             echo <span class="stringliteral">&quot;&lt;/a&gt;&quot;</span>;
<a name="l02083"></a>02083 
<a name="l02084"></a>02084                             <span class="comment">// echo &quot;&lt;a style=&#39;color: #cFcF00;&#39; href=&#39;$RFS_SITE_URL/admin/adm.php?action=$x&#39;&gt;$x&lt;/a&gt;&quot;;</span>
<a name="l02085"></a>02085 
<a name="l02086"></a>02086                             echo <span class="stringliteral">&quot;&lt;/div&gt;&quot;</span>;
<a name="l02087"></a>02087                         }
<a name="l02088"></a>02088                     }
<a name="l02089"></a>02089                 }
<a name="l02090"></a>02090                 echo <span class="stringliteral">&quot;&lt;div style=&#39;clear: left; &#39;&gt;&amp;nbsp;&lt;/div&gt;&quot;</span>;
<a name="l02091"></a>02091         }
<a name="l02092"></a>02092     }
<a name="l02093"></a>02093 
<a name="l02094"></a>02094     echo <span class="stringliteral">&quot;&lt;/p&gt;&quot;</span>;
<a name="l02095"></a>02095     echo <span class="stringliteral">&quot;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&quot;</span>;
<a name="l02096"></a>02096     include( <span class="stringliteral">&quot;footer.php&quot;</span> );
<a name="l02097"></a>02097     exit();
<a name="l02098"></a>02098 }
<a name="l02099"></a>02099 
<a name="l02100"></a>02100 ?&gt;
</pre></div></div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="adm_8php.html">adm.php</a>      </li>

    <li class="footer">Generated on Sat Apr 27 2013 13:56:28 for RFSCMSAPIDocumentation by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
